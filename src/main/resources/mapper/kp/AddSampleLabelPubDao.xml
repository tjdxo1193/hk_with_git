<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="lims.api.kp.dao.AddSampleLabelPubDao">
    <select id="find" parameterType="AddSampleLabelPubVO" resultType="AddSampleLabelPubVO">
        SELECT QASM.PLNT_CD,
               QASM.ADD_SMP_IDX,
               QASM.ANS_IDX,
               QASM.SMP_MNG_IDX,
               QASM.ADD_SMP_PROC,
               (SELECT DTL_NM FROM SY_CD_DTL WHERE DTL_CD = QASM.ADD_SMP_PROC) AS ADD_SMP_NM,
               QASM.PITM_TYP,
               (SELECT DTL_NM FROM SY_CD_DTL WHERE DTL_CD = QASM.PITM_TYP)     AS PITM_TYP_NM,
               QASM.PITM_CD,
               QASM.PITM_NM,
               QASM.ANS_TYP,
               (SELECT DTL_NM FROM SY_CD_DTL WHERE DTL_CD = QASM.ANS_TYP)      AS ANS_TYP_NM,
               QASM.LOT_NO,
               QASM.BATCH_NO,
               QASM.INP_UNIT,
               QASM.REQ_SMP_VOL,
               QASM.SMP_REQ_REA,
               (SELECT DTL_NM FROM SY_CD_DTL WHERE DTL_CD = QASM.SMP_REQ_REA)  AS SMP_REQ_REA_NM,
               QASM.SMP_REQ_REA_DTL,
               QASM.LABEL_CD,
               QASM.ADD_SMP_APR_REQ_IDX,
               QASM.SMP_REQ_DT
        FROM QS_ADD_SMP_MNG QASM
        WHERE QASM.DEL_YN = 'N'
          AND QASM.PLNT_CD = #{plntCd}
          AND QASM.ADD_SMP_PROC = #{addSmpProc}
        ORDER BY QASM.ADD_SMP_IDX DESC
    </select>
</mapper>