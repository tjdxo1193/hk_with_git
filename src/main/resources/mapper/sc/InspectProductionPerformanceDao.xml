<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="lims.api.sc.dao.InspectProductionPerformanceDao">
    <select id="find" parameterType="InspectProductionPerformanceVO" resultType="InspectProductionPerformanceVO">
        SELECT QPAR.PLNT_CD AS PLNT_CD,
               QPAR.REQ_IDX AS REQ_IDX,
               QPAP.REQ_DT  AS REQ_DT,
               QPAR.MTR_CD,
               QPAR.MTR_NM,
               QPAR.PHS_ORDER_NO,
               QPAR.LOT_NO,
               QPAR.BATCH_NO,
               QPAR.ISP_REQ_NO,
               QPAP.RCP_DT,
               QPAP.ANS_NO,
               QPAI.FTN_YN,
               QPAI.IF_YN,
               QPAI.IF_DS
        FROM QT_PITM_ANS_REQ QPAR
                 LEFT JOIN QT_PITM_ANS_PROC QPAP ON QPAR.PLNT_CD = QPAP.PLNT_CD AND QPAR.REQ_IDX = QPAP.REQ_IDX
                 LEFT JOIN QT_PITM_ANS_INFO QPAI ON QPAP.PLNT_CD = QPAI.PLNT_CD AND QPAP.ANS_IDX = QPAI.ANS_IDX
        WHERE QPAR.PLNT_CD = #{plntCd}
        ORDER BY QPAP.REQ_DT DESC
    </select>
</mapper>