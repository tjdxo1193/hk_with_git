/*! For license information please see crownix-viewer.min.js.LICENSE.txt */
var m2soft=m2soft||{};m2soft.ns=function(t){var e=t.split("."),i=m2soft;"m2soft"===e[0]&&(e=e.slice(1));for(var r=0,n=e.length;r<n;r++)void 0===i[e[r]]&&(i[e[r]]={}),i=i[e[r]];return i},m2soft.ns("m2soft.crownix.Constant"),m2soft.crownix.Constant={INFO_TALK_PROTOCOL_VERSION:"1.0",SERVICE_INSERT_HANDLER:1100,SERVICE_EXPORT_HANDLER:1300,VIEWER_Z_INDEX:2147483545,VIEWER_OVERLAY_Z_INDEX:2147483544,WINDOW_Z_INDEX:2147483547,WINDOW_OVERLAY_Z_INDEX:2147483546,CONTAINER_ID:"m2soft-crownix-container",PAGE_ID:"m2soft-crownix-page",CANVAS_ID:"m2soft-crownix-canvas",TEXT_ID:"m2soft-crownix-text",NOTE_ID:"m2soft-crownix-note"},m2soft.ns("m2soft.crownix.Resource"),m2soft.crownix.Resource.r={close_overlay:{ko:"닫기",ja:"閉じる",en:"Close"},first_page:{ko:"첫 페이지로 이동",ja:"最初のページ",en:"Move to First Page"},pre_page:{ko:"앞 페이지로 이동",ja:"前のページ",en:"Move to Previous Page"},next_page:{ko:"뒷 페이지로 이동",ja:"次のページ",en:"Move to Next page"},last_page:{ko:"마지막 페이지로 이동",ja:"最後のページ",en:"Move to Last page"},move_page:{ko:"페이지 이동",ja:"ページの移動",en:"Go to Page"},prev_doc:{ko:"이전 문서",ja:"前のレポート",en:"Previous Report"},next_doc:{ko:"이후 문서",ja:"次のレポート",en:"Next Report"},zoom_in:{ko:"확대",ja:"ズームイン",en:"Zoom In"},zoom_out:{ko:"축소",ja:"ズームアウト",en:"Zoom Out"},ratio:{ko:"비율",ja:"ズーム",en:"Ratio"},fit_width:{ko:"가로 맞춤",ja:"ページ幅を基準に表示",en:"Horizontal Alignment"},fit_height:{ko:"세로 맞춤",ja:"ページの高さを基準に表示",en:"Vertical Alignment"},save_pdf:{ko:"PDF 파일로 저장",ja:"PDFファイルとして保存",en:"Save as PDF File"},save_word:{ko:"Microsoft Word 파일로 저장",ja:"Microsoft Wordファイルとして保存",en:"Save as Microsoft Word File"},save_excel:{ko:"Microsoft Excel 파일로 저장",ja:"Microsoft Excelファイルとして保存",en:"Save as Microsoft Excel File"},save_ppt:{ko:"Microsoft Powerpoint 파일로 저장",ja:"Microsoft PowerPointファイルとして保存",en:"Save as Microsoft PowerPoint File"},save_hwp:{ko:"HWP 파일로 저장",ja:"HWPファイルとして保存",en:"Save as HWP File"},save_txt:{ko:"Text 파일로 저장",ja:"テキストファイルとして保存",en:"Save as Text File"},print:{ko:"인쇄",ja:"印刷",en:"Print"},print_pdf:{ko:"PDF 파일로 변환하여 인쇄",ja:"PDFファイルに変換して印刷",en:"Convert to PDF file and Print"},cancel_report:{ko:"중지",ja:"中止",en:"Stop"},storage_report:{ko:"보고서",ja:"レポート",en:"Report"},parsing_error_mml:{ko:"읽을 수 없는 포맷입니다.",ja:"読み込めない形式のファイルです。",en:"The file format is not readable."},storage_formdata:{ko:"폼 데이터",ja:"フォームデータ",en:"Form Data"},export_file:{ko:"파일을 생성 중입니다.",ja:"ファイルを生成中です。",en:"Creating file."},print_progress:{ko:"인쇄 준비 중입니다.",ja:"印刷準備中です。",en:"Preparing to print."},print_pdf_export:{ko:"인쇄하기 위해 PDF 파일로 변환 중입니다.",ja:"印刷用にPDF変換中です。",en:"Converting to PDF file to print."},print_printviewer_title:{ko:"인쇄 미리 보기",ja:"印刷プレビュー",en:"Print Preview"},print_pdfviewer_title:{ko:"PDF 인쇄 미리 보기",ja:"PDF印刷プレビュー",en:"PDF Print Preview"},print_submit_preview:{ko:"제출 전 미리보기 생성중입니다.",ja:"送信前にプレビューを生成中です。",en:"Converting to PDF file to print."},submit_preview_title:{ko:"미리 보기",ja:"プレビュー",en:"Preview"},insert_page_number:{ko:"페이지 번호를 입력하십시오.",ja:"ページ番号を入力してください。",en:"Please enter the page number."},submit_formfield:{ko:"제출 중입니다.",ja:"送信中です。",en:"Submitting."},submit_formfield_insert_ok:{ko:"제출을 완료했습니다.",ja:"送信を完了しました。",en:"Submission complete."},submit_formfield_insert_fail:{ko:"제출에 실패했습니다.",ja:"送信に失敗しました。",en:"Submission failed."},submit_fail_not_filled_required_form:{ko:"필수 항목을 입력하십시오.",ja:"必須項目を入力してください。",en:"Please fill in the required fields."},submit_button_text:{ko:"제출",ja:"送信",en:"Submit"},sign_window_title:{ko:"서명",ja:"署名",en:"Signature"},ok_button_text:{ko:"확인",ja:"OK",en:"OK"},cancel_button_text:{ko:"취소",ja:"キャンセル",en:"Cancel"},apply_button_text:{ko:"적용",ja:"適用",en:"Apply"},refresh_button_text:{ko:"초기화",ja:"初期化",en:"Reset"},pen_size:{ko:"두께",ja:"太さ",en:"Thickness"},pen_transparency:{ko:"투명도",ja:"透明度",en:"Transparency"},color:{ko:"색",ja:"色",en:"Color"},inquery:{ko:"조회 툴바",ja:"照会ツールバー",en:"Inquery Toolbar"},report_list:{ko:"보고서 목록",ja:"レポート一覧",en:"Report List"},report_name:{ko:"이름",ja:"名前",en:"Name"},data_size:{ko:"용량",ja:"サイズ",en:"Size"},open:{ko:"열기",ja:"開く",en:"Open"},remove:{ko:"삭제",ja:"削除",en:"Delete"},saved_report_name:{ko:"저장할 보고서 명",ja:"保存するレポート名",en:"Save As.."},include_image_chart_barcode:{ko:"이미지/바코드 포함 저장",ja:"イメージ/バーコードを含める",en:"With Image and Barcode."},save:{ko:"저장",ja:"保存",en:"Save"},formdata_list:{ko:"폼 데이터 목록",ja:"フォームデータリスト",en:"Form Data List"},formdata_name:{ko:"이름",ja:"名前",en:"Name"},apply_data:{ko:"적용",ja:"適用",en:"Import"},saved_formdata_name:{ko:"폼 데이터 명",ja:"保存するフォームデータ名",en:"Export As.."},check_validation:{ko:"유효성 검사",ja:"必須項目の入力チェック",en:"Validataion"},extract_data:{ko:"저장",ja:"保存",en:"Export"},wrong_page_number:{ko:"잘못된 페이지 번호입니다.",ja:"ページ番号が正しくありません。",en:"The page number is incorrect."},page_not_exist:{ko:"존재하지 않는 페이지입니다.",ja:"存在しないページです。",en:"The page does not exist."},page_not_create:{ko:"생성되지 않은 페이지입니다.",ja:"作成されていないページです。",en:"This page is not created."},execute_error:{ko:"문서를 실행할 수 없습니다.",ja:"レポートを実行できません。",en:"The report cannot be run."},server_connect_error:{ko:"서버와 연결할 수 없습니다.",ja:"サーバに接続できません。",en:"Cannot connect to server."},request_server_error:{ko:"서버 오류",ja:"サーバエラー",en:"Server Error"},request_abort_error:{ko:"요청이 중지되었습니다.",ja:"要求が停止されました。",en:"Request has been cancelled."},request_timeout_error:{ko:"네트워크 오류 (Timeout)",ja:"ネットワークエラー (Timeout)",en:"Network Error (Timeout)"},cross_origin_ie9_error:{ko:"다른 도메인의 원본을 접근할 수 없습니다. <br><br> IE9 사용자의 경우 <br> 인터넷옵션 > 보안설정 > 사용자 지정 수준 > 기타 > 도메인 간의 데이터 원본 액세스 를 사용으로 설정하시기 바랍니다.",ja:"異なるドメインへアクセスできません。<br><br>IE9をご利用の場合は<br>’インタネットオプション’<br>＞’セキュリティ’<br>＞’レベルのカスタマイズ’<br>＞’ドメイン間でのデータソースの<br>アクセス’<br>を有効に設定してください。",en:'Access Denied<br>The cross-origin request is <br>prohibited.<br><br>If you are using IE9, <br>go to Tools<br>->Internet Options<br>->Security tab, click on "Custom Level" button. <br>Find the Miscellaneous <br>-> Access data sources across <br>domains setting and select <br>"Enable" option.'},save_error:{ko:"파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。",en:"Failed to save file."},save_connect_error:{ko:"파일 저장에 실패했습니다. 서버 연결 상태를 확인하십시오.",ja:"ファイルの保存に失敗しました。サーバの接続環境を確認してください。",en:"Failed to save file. Please check the server connection."},save_server_error:{ko:"서버에서 오류가 발생하여 파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。サーバの状況やライセンスを確認してください。",en:"Failed to save file due to server error."},save_timeout_error:{ko:"타임 아웃이 발생하여 파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。サーバと通信中にタイムアウトが発生しました。",en:"Failed to save file due to timeout."},save_stateful_error:{ko:"보고서를 저장할 수 없습니다. 보고서를 저장하려면 StateLessMode(true)로 설정해야 합니다.",ja:"レポートを保存することができません。レポートを保存するには、StateLessMode(true)に設定してください。",en:"Cannot save this report. Please set StateLessMode(true) before saving the report."},print_stateful_error:{ko:"보고서를 인쇄할 수 없습니다. 보고서를 인쇄하려면 StateLessMode(true)로 설정해야 합니다.",ja:"レポートを印刷することができません。レポートを印刷するには、StateLessMode(true)に設定してください。",en:"Cannot print this report. Please set StateLessMode(true) before printing."},print_pdf_error:{ko:"PDF 파일 변환에 실패했습니다.",ja:"PDF ファイル変換に失敗しました。",en:"PDF file conversion failed."},print_pdf_connect_error:{ko:"PDF 파일 변환에 실패했습니다. 서버 연결 상태를 확인하십시오.",ja:"PDFファイル変換に失敗しました。サーバへの接続環境を確認してください。",en:"PDF file conversion failed. Please check the server connection."},print_pdf_server_error:{ko:"서버에서 오류가 발생하여 PDF 파일 변환에 실패했습니다.",ja:"PDFファイルの保存に失敗しました。サーバの状況やライセンスを確認してください。",en:"PDF file conversion failed due to server error."},print_pdf_timeout_error:{ko:"타임 아웃이 발생하여 PDF 파일 변환에 실패했습니다.",ja:"タイムアウトが発生し、PDFファイル変換に失敗しました。",en:"PDF file conversion failed due to timeout."},print_pdf_error:{ko:"PDF 파일 변환에 실패했습니다.",ja:"PDFファイル変換に失敗しました。",en:"PDF file conversion failed."},unsupported_canvas_error:{ko:"뷰어를 실행할 수 없습니다. 캔버스를 지원하지 않는 브라우저입니다.",ja:"Viewerを実行できません。キャンバスをサポートしていないブラウザです。",en:"The viewer cannot be run. This browser does not support the canvas tag."},download_duplicate_error:{ko:"다른 파일을 다운로드 중입니다. 다운로드 완료 후에 다시 시도 하십시오",ja:"他のファイルをダウンロード中です。ダウンロード完了後にもう一度行ってください。",en:"File download in progress. Please try again after download is complete."},image_file_format_error:{ko:"지정한 파일을 삽입할 수 없습니다. 그림 필드에는 이미지 파일을 삽입해야 합니다.",ja:"指定したファイルを挿入できません。イメージフィールドには画像ファイルを指定してください。",en:"The specified file cannot be inserted. You must insert an image file in an image field."},input_text_validate_error:{ko:"입력한 문장에서 오류가 발생했습니다. 유효한 형식으로 입력하십시오.",ja:"入力した構文が正しくありません。有効な形式で入力してください。",en:"There is an error in the sentence you entered. Please enter a valid sentence."},form_not_submit_print_error:{ko:"보고서를 인쇄할 수 없습니다. 먼저, '제출'을 실행하십시오.",ja:"レポートの印刷ができません。先に「送信」を実行してください。",en:"The report cannot be printed. Run the 'Submit' first."},form_not_submit_save_error:{ko:"보고서를 저장할 수 없습니다. 먼저, '제출'을 실행하십시오.",ja:"レポートの保存ができません。先に「送信」を実行してください。",en:"The report cannot be saved. Run the 'Submit' first."},form_duplicated_id_error:{ko:"중복된 폼필드 ID가 존재합니다.",ja:"フォームフィールドIDが重複しています。IDが一意になるように設計してください。",en:"There is a duplicate form field ID."},form_submit_info_leak_error:{ko:"입력된 폼필드 데이터를 서버로 전송하기 위한 정보가 부족합니다. 데이터 전송에 필요한 정보가 올바르게 지정되어 있는지 확인하십시오.",ja:"送信に必要な情報が設定されていません。送信時のサーバ設定等を確認してください。",en:"Information for sending the entered form field data to the server is insufficient. Please check if the required information for data transmission is correctly specified."},form_submit_not_found_form:{ko:"제출할 수 있는 폼이 없습니다.",ja:"送信できるフォームがありません。",en:"There is no form that can be submitted."},unsupported_note_error:{ko:"노트 기능을 실행할 수 없습니다. SVG를 지원하지 않는 브라우저입니다.",ja:"手書きノートが利用できません。SVGに対応したブラウザをご利用ください。",en:"The note function cannot be run. This browser does not support the SVG."},insert_inquery_condition:{ko:"검색할 조건을 입력하십시오 (총 %d건)",ja:"検索条件を入力してください。（全 %d 項目）",en:"Please enter the values for searching.(Total %d)"},inquery_formfield_reset:{ko:"조회를 실행하면 폼 필드의 값이 모두 삭제됩니다. 계속하시겠습니까?",ja:"フォームフィールドの入力データが全て消去されます。<br>続行しますか？",en:"When you run Lookup, the entire contents of the form fields will be deleted. Continue?"},inquery_note_reset:{ko:"조회 기능을 실행하면 노트 내용이 모두 삭제됩니다. 계속하시겠습니까?",ja:"照会機能を実行すると入力した全てのデータがクリアされます。<br>続行しますか？",en:"When you run Lookup, the entire content of the note will be deleted. Continue?"},inquery_calendar_format_error:{ko:"날짜 또는 시간 값이 적절하지 않습니다.",ja:"日時の書式に誤りがあります。",en:"The date or time value is invalid."},image_export_disabled_before_done:{ko:"보고서를 작성 중입니다. 잠시만 기다려 주십시오",ja:"レポートを作成中です。しばらくお待ちください。",en:"Creating a report. Please wait..."},form_allowed_only_one:{ko:"모든 보고서의 폼 ID가 동일해야 합니다.",ja:"一つのフォームIDで設定してください。",en:"Each form ID of all reports must be same."},unsupported_localStorage_error:{ko:"지원하지 않는 브라우저입니다.",ja:"サポートしないブラウザです。",en:"This browser does not support."},unsupported_format:{ko:"지정한 파일 포맷은 지원하지 않습니다.",ja:"ポートしないファイル形式です",en:"The specified file format is not supported."},unsupported_feature_localStorage:{ko:"지원하지 않는 기능입니다.",ja:"サポートしない機能です。",en:"This feature is not supported."},unsupported_feature_without_formedit_mode:{ko:"폼 편집 모드에서만 사용할 수 있습니다.",ja:"フォーム編集モードをご利用ください。",en:"Only available in Form Edit Mode."},missing_input_mml_name:{ko:"이름을 입력하십시오.",ja:"名前を入力してください。",en:"Please enter the Name"},missing_input_formdata_name:{ko:"이름을 입력하십시오.",ja:"名前を入力してください。",en:"Please enter the Name"},data_save_error:{ko:"파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。",en:"Failed to save the file."},data_load_error:{ko:"데이터를 가져오는데에 실패했습니다.",ja:"データの読み取りに失敗しました。",en:"Failed to load the data."},storage_formfield_import:{ko:"입력한 폼필드 데이터가 모두 삭제됩니다.<br>계속하시겠습니까?",ja:"入力した全てのデータがクリアされます。<br>続行しますか？",en:"All the entered form field data will be deleted.<br>Continue?"},storage_duplicated_id_confirm:{ko:"이미 존재하는 이름입니다.<br>덮어쓰겠습니까?",ja:"既に同じ名前が存在します。<br>上書きしますか？",en:"This name already exists.<br> Overwrite?"},export_duplicate_error:{ko:"이미 변환된 문서입니다.",ja:"既に保存されたレポートです。",en:"The report has already been converted."},confirm_page_out:{ko:"저장되지 않은 변경 내용이 있습니다.",ja:"保存されてない更新内容があります。",en:"There are changes that have not been saved."},confirm_hyperlink_move:{ko:"하이퍼링크 연결 대상으로 이동하시겠습니까?",ja:"リンク先に移動しますか？",en:"Would you like to go to for hyperlink?"},formfield_event_error:{ko:"폼 필드 스크립트 실행 오류",ja:"スクリプト実行エラー",en:"Form Field Script running error"},formfield_event_disable_before_done:{ko:"보고서를 작성 중입니다. 잠시만 기다려 주십시오",ja:"レポートを作成中です。しばらくお待ちください。",en:"Creating a report. Please wait..."},formfield_not_exist:{ko:"존재하지 않는 폼필드입니다.",ja:"存在しないフォームフィールドです。",en:"The form field does not exist."},developer_console_warnning:{ko:"이 기능은 개발자용으로 브라우저에서 제공되는 내용입니다. 개발자 도구에서는 Crownix Viewer의 기능을 사용할 수 없으며, 문서를 수정하면 변조된 문서로 취급됩니다.",ja:"開発者向けの機能を利用した場合、偽造されたレポートとして扱います。",en:"This is a browser feature intended for developers. In Developer tools, you cannot use the Crownix Viewer’s features. And then, if you modify this report, it will be considered a forged report."},hyperlink_full_stack_warning:{ko:"더 이상 하이퍼링크 연결 대상으로 이동할 수 없습니다.",ja:"ハイパーリンクの接続対象にこれ以上移動できません。",en:"No more the hyperlink connection can be opened."},drilldown_not_allowed:{ko:"드릴다운 기능을 사용할 수 없습니다.",ja:"ドリルダウン機能を使用することができません。",en:"The Drill-Down feature cannot be used."},no_data_message:{ko:"데이터를 찾을 수 없습니다.",ja:"データが見つかりません。",en:"Unable to find data."},submit_confirm_message:{ko:"계속 진행하시겠습니까?",ja:"続行しますか？",en:"Continue?"},share_dialog_title:{ko:"스마트폼 공유하기",ja:"スマートフォームシェアリング",en:"Smart Form Sharing"},share_list_title:{ko:"공유 리스트",ja:"共有リスト",en:"Sharing List"},share_report_title:{ko:"이름",ja:"名前",en:"Name"},share_is_public:{ko:"타입",ja:"タイプ",en:"Type"},share_user_count:{ko:"인원수",ja:"人数",en:"Count"},share_join:{ko:"참여",ja:"参加",en:"Join"},share_create_title:{ko:"공유하기",ja:"共有する",en:"Sharing"},share_public:{ko:"공개",ja:"公開",en:"Public"},share_private:{ko:"비공개",ja:"非公開",en:"Private"},share_password:{ko:"패스워드",ja:"パスワード",en:"Password"},share_create:{ko:"등록",ja:"登録",en:"Add"},share_no_select_report:{ko:"공유할 보고서를 선택하십시오.",ja:"共有するレポートを選択してください。",en:"Select a sharing report."},share_need_password:{ko:"비공개 보고서입니다. 패스워드를 입력하십시오.",ja:"非公開レポートです。パスワードを入力してください。",en:"A private report. Enter a password."},share_need_report_title:{ko:"보고서 제목을 입력하십시오.",ja:"レポートのタイトルを入力してください。",en:"Enter a report title."},do_share:{ko:"스마트폼 공유하기",ja:"スマートフォームを共有する",en:"Smart Form Sharing."},do_disconnect:{ko:"스마트폼 접속 끊기",ja:"スマートフォーム共有を解除する",en:"Disconnect Smart Form Sharing."},share_disconnect_confirm:{ko:"보고서 공유를 종료하시겠습니까?",ja:"レポートの共有を終了しますか？",en:"Are your sure to exit sharing reports?"},share_do_lock:{ko:"작성 제어권 해제 상태",ja:"作成制御解除状態",en:"User Control Unlock"},share_do_unlock:{ko:"작성 제어권 잠금 상태",ja:"作成制御ロック状態",en:"User Control Lock"},share_wrong_password:{ko:"패스워드가 틀립니다.",ja:"パスワードが正しくありません。",en:"Password is incorrect."},share_duplicated_name:{ko:"이미 등록된 제목입니다.",ja:"既に登録したタイトルです。",en:"The title is already registered."},share_session_timeout:{ko:"%s 분동안 아무동작을 하지 않았습니다. 연결을 유지하시겠습니까?",ja:"%s 分間に操作がありませんでした。接続を維持しますか？",en:"No action is made for %s mintutes. Do you want to stay connnected?"},share_undefined_room:{ko:"접속하려는 보고서가 공유 리스트에 없습니다.",ja:"接続しようとするレポートが共有リストにありません。",en:"The report to which you want to access is not in the sharing list."},share_stop_sharing:{ko:"보고서 공유가 중단되었습니다.",ja:"レポートの共有が停止されました。",en:"The Report Sharing has been Aborted."},no_share_server_url:{ko:"스마트폼 쉐어링 서비스를 위한 서버와의 연결에 실패하였습니다. 서버 주소를 확인하십시오.",ja:"スマートフォームシェアリングサービスのサーバとの接続に失敗しました。サーバのURLを確認してください。",en:"Connecting to the server for the smart form sharing service was failed. Please check the server address."},share_not_allowed_space:{ko:"패스워드에 공백 문자를 포함할 수 없습니다.",ja:"パスワードに空白文字を含めることはできません。",en:"Password should not contain blank characters."},keep_report_layout_message:{ko:"보고서 레이아웃을 유지할까요?",ja:"レポートレイアウトを維持しますか?",en:"Do you want to keep the report layout?"},yes_button_text:{ko:"네",ja:"はい",en:"Yes"},no_button_text:{ko:"아니요",ja:"いいえ",en:"No"},not_support_file_append:{ko:"첨부 기능을 사용할 수 없는 브라우저입니다. 필수로 적용된 첨부 필드는 필수 속성이 해제됩니다.",ja:"添付ファイル機能が対応しないブラウザです。必須でチェックした添付フィールドは必須プロパティが解除になります",en:"This browser does not use the attachment function. For the attachment field applied as mandatory option, the mandatory property will be canceled"},attach_file_button:{ko:"파일 선택",ja:"ファイル選択",en:"Select File"},no_attach_file:{ko:"첨부된 파일이 없습니다.",ja:"添付ファイルが存在しません。",en:"There is no file attached."},file_size_over:{ko:"최대 파일 사이즈를 초과했습니다. %d MB 사이즈까지 첨부 가능 합니다.",ja:"ファイルサイズが上限に達しました。%d MB まで利用可能です。",en:"The max file size has been exceeded. Up to %d MB can be attached."},wrong_file_extension:{ko:"잘못된 파일 형식입니다. %s 형식의 파일을 첨부하십시오",ja:"正しくないファイルタイプです。%s タイプのファイルを添付してください。",en:"Wrong file type. extension. Please attach the file type of %s "},invalid_file_name:{ko:"잘못된 파일명입니다.",ja:"ファイル名が正しくありません。",en:"Wrong file name."},invalid_submit_request:{ko:"다른 사용자가 첨부한 파일은 제출할 수 없습니다.",ja:"他のユーザが添付したファイルは提出できません。",en:"The file attached by another user cannot be submitted."},mask_dialog_title:{ko:"이미지",ja:"イメージ",en:"image"},mask_dialog_black:{ko:"검정색",ja:"黒",en:"black color"},mask_dialog_white:{ko:"흰색",ja:"白",en:"white color"},mask_dialog_thin:{ko:"얇게",ja:"細字",en:"thin"},mask_dialog_bold:{ko:"굵게",ja:"太字",en:"bold"},text_placeholder:{ko:"메모를 입력해주세요.",ja:"手書き(ノート)テキストを入力してください。",en:"Please enter your memo"},text_attr:{ko:"속성",ja:"プロパティ",en:"Properties"},text_style:{ko:"스타일",ja:"スタイル",en:"Style"},text_font:{ko:"폰트",ja:"フォント",en:"Font"},text_outline:{ko:"테두리/배경",ja:"罫線/背景",en:"Outline/Background"},text_align:{ko:"정렬",ja:"配置",en:"Align"},text_italic:{ko:"기울임",ja:"斜体",en:"Italic"},text_strike:{ko:"취소선",ja:"取り消し線",en:"Strikeout"},text_underline:{ko:"밑줄",ja:"下線",en:"Underline"},text_fontsize:{ko:"폰트 크기",ja:"フォントサイズ",en:"Font Size"},text_fontcolor:{ko:"폰트 색상",ja:"フォントの色",en:"Font Color"},text_outline:{ko:"테두리",ja:"罫線",en:"Outline"},text_background:{ko:"배경",ja:"背景",en:"Background"},text_leftalign:{ko:"왼쪽 정렬",ja:"左揃え",en:"Left Align"},text_centeralign:{ko:"가운데 정렬",ja:"中央揃え",en:"Horizontal Center Align"},text_rightalign:{ko:"오른쪽 정렬",ja:"右揃え",en:"Right Align"},invalid_attached_file:{ko:"첨부한 파일의 크기가 0이거나, 파일을 찾을 수 없어 제출에 실패했습니다.",ja:"送信に失敗しました。添付ファイルが存在しないか、ファイルが読み込めません。",en:"You can not submitted because the attached file size is 0 or file cannot found."},textnote_format:{ko:"도형서식",ja:"図形の書式",en:"Format Shape"},page_no:{ko:"%d 페이지",ja:"%d ページ",en:"%d page"},tts_first_parag:{ko:"보고서의 처음 입니다.",ja:"レポートの最初です",en:"This is the beginning of the report."},tts_last_parag:{ko:"보고서의 마지막 입니다.",ja:"レポートの最後です",en:"This is the end of the report."},tts_prev_page:{ko:"페이지 업 키로 이전페이지로 이동하십시오.",ja:"PageUpキーで前のページに移動してください。",en:"Go to previous page with PageUP key."},tts_next_page:{ko:"PageDown키로 다음페이지로 이동하십시오.",ja:"PageDownキーで次のページに移動してください。",en:"Go to the next page with PageDown key."},tts_no_content:{ko:"빈 칸 입니다.",ja:"空欄です。",en:"It is empty space."},tts_report_area:{ko:"본문 입니다. 내용을 읽으려면 화살표 키를 이용하세요. 툴바를 이용하려면 쉬프트키와 탭 키를 함께 누르세요.",ja:"本文です。 内容を読むには矢印キーを利用してください。 ツールバーを利用するにはシフト　キーとタブ キーを同時に押してください。",en:"This is the main body. Use the arrow keys to read the contents. To use the toolbar, press the Shift key and the Tab key together."},tts_toolbar_area:{ko:"툴바 입니다. 화살표 키를 이용하여 툴바 메뉴를 이동하고 선택은 엔터키를 누르세요. 본문으로 이동하려면 탭 키를 누르세요.",ja:"ツールバーです。 矢印キーを利用してツールバーメニューを移動し、選択はエンターキーを押してください。 本文に移動するにはタブ キーを押してください。",en:"This is the toolbar. Use the arrow keys to move the toolbar menu and press the Enter key to make your selection. Press the tab key to go to the main body."},tts_form_edit_mode:{ko:"편집창에서 입력을 하시려면 화살표 키를 눌러 내용을 읽은 뒤 탭 키를 누르시고, 입력을 완료하면 이에스씨 키를 누르세요.",ja:"편집창에서 입력을 하시려면 화살표 키를 눌러 내용을 읽은 뒤 탭 키를 누르시고, 입력을 완료하면 이에스씨 키를 누르세요.",en:"편집창에서 입력을 하시려면 화살표 키를 눌러 내용을 읽은 뒤 탭 키를 누르시고, 입력을 완료하면 이에스씨 키를 누르세요."},tts_button:{ko:"버튼",ja:"ボタン",en:"button"},tts_select:{ko:"선택",ja:"選択",en:"Select"},tts_release:{ko:"해제",ja:"解除",en:"Release"},tts_radio_button:{ko:"라디오 버튼",ja:"ラジオボタン",en:"RadioButton"},tts_check_box:{ko:"체크 박스",ja:"チェックボックス",en:"CheckBox"},tts_combo_box:{ko:"콤보 박스",ja:"コンボボックス",en:"Combo box"},cloud_print:{ko:"구글 클라우드 프린트",ja:"Google クラウド プリント",en:"Google Cloud Print"},text_barcode:{ko:"바코드",ja:"バーコード",en:"Barcode"},text_chart:{ko:"차트",ja:"チャート",en:"Chart"},edit_mode:{ko:"노트 모드",ja:"ノートモード",en:"Note mode"},view_mode:{ko:"노트 보이기",ja:"ノート表示",en:"Show Note"},hide_mode:{ko:"노트 숨기기",ja:"ノート非表示",en:"Hide Note"},note_pen:{ko:"펜",ja:"ペン",en:"Pen"},note_highlighter:{ko:"형광펜",ja:"蛍光ペン",en:"Highlighter"},note_text_note:{ko:"텍스트 노트",ja:"テキストノート",en:"Text Note"},note_eraser:{ko:"지우개",ja:"消しゴム",en:"Eraser"},note_erase_all:{ko:"페이지 노트 삭제",ja:"全て消去",en:"Delete Page Note"},note_undo:{ko:"원래대로",ja:"元に戻す",en:"Undo"},note_redo:{ko:"다시 실행",ja:"やり直し",en:"Redo"},agree_group_sign:{ko:"일괄 서명에 동의합니다.",ja:"同意して一括署名へ進む",en:"Agree with batch signature"},required_sign:{ko:"필수",ja:"必須",en:"Required"},not_group_signId:{ko:"서명할 수 없습니다. 그룹 ID(%s)를 확인해 주십시오.",ja:"署名できません。グループID(%s)を確認してください。",en:"Cannot sign. Please check the Group ID(%s)."},not_check_require:{ko:"필수 항목을 모두 선택해야 합니다.",ja:"すべての必須項目を選択してください。",en:"Please select all of required items."},validate_tab_title:{ko:"잘못 작성된 필드",ja:"無効なフィールド",en:"Invalid Fields"},validate_invalid_count:{ko:"(총 %d건)",ja:"(総 %d件)",en:"(Total %d)"},validate_invalid_regex:{ko:"입력되지 않은 필수 항목이나 잘못 작성된 항목이 있습니다.",ja:"入力されていない必須項目または無効な項目があります。",en:"There are blank required item or invalid fields."},validate_closed_page:{ko:"페이지를 이동할 수 없습니다.",ja:"ページを移動できません。",en:"Cannot go to this page."},include_note_data:{ko:"노트 포함 저장",ja:"ノートを含む",en:"With Note"},pen_field:{ko:"펜 필드",ja:"ペンフィールド",en:"Pen field"},table_of_contents:{ko:"목차",ja:"目次",en:"TOC"},no_table_of_contents:{ko:"실행 중인 보고서는 목차 항목이 지정되어 있지 않습니다.",ja:"実行中のレポートは目次項目が指定されていません。",en:"The current report has no TOC items specified."}},m2soft.crownix.Resource.language="en",m2soft.crownix.Resource.setLanguage=function(t){if("string"==typeof t)return 0===t.indexOf("ko")?this.language="ko":0===t.indexOf("ja")?this.language="ja":0===t.indexOf("en")?this.language="en":0===t.indexOf("zh")?this.language="zh-CN":0===t.indexOf("uz")&&(this.language="uz"),this.language},m2soft.crownix.Resource.setSystemLanguage=function(){this.setLanguage(navigator.language)||this.setLanguage(navigator.browserLanguage)||this.setLanguage(navigator.systemLanguage)||this.setLanguage(navigator.userLanguage)||this.setLanguage("en")},m2soft.crownix.Resource.setSystemLanguage(),m2soft.crownix.Resource.get=function(t){try{return null==this.r[t][this.language]?this.r[t].en:this.r[t][this.language]}catch(e){return window.console&&"function"==typeof window.console.log&&console.log("[Crownix HTML5 Viewer] resource not found: "+t),"RESOURCE_NOT_FOUND"}},m2soft.ns("m2soft.crownix.resource.Icon"),m2soft.crownix.resource.Icon={CLOSE_OVERLAY:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="4,21 4,28.5 28,28.5 28,3.5 4,3.5 4,11"/>\t<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="21.4,13.6 12.7,13.6 12.7,10 6.1,15.1 6.1,15.3 6.12,16.551 12.671,21.758 12.671,18.1 21.4,18.1 "/></g></svg>',FIRST_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/>\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="11.083" y1="9.814" x2="11.083" y2="22.223"/>\t<g> \t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.756" y1="15.93" x2="13.703" y2="15.93"/>\t\t<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="19.293,9.751 13.703,15.446 13.703,16.501 19.311,22.108"/>\t</g></g></svg>',PREV_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<g>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.309" y1="15.992" x2="9.429" y2="15.992"/>\t\t<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="15.019,9.813 9.429,15.509 9.429,16.563 15.037,22.171"/>\t</g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',NEXT_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<g>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="8.692" y1="15.992" x2="22.57" y2="15.992"/>\t\t<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="16.98,9.813 22.57,15.509 22.57,16.563 16.963,22.171"/>\t</g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',LAST_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/>\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="20.918" y1="9.814" x2="20.918" y2="22.223"/>\t<g>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="8.244" y1="15.93" x2="18.297" y2="15.93"/>\t\t<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="12.707,9.751 18.297,15.446 18.297,16.501 12.689,22.108"/>\t</g></g></svg>',MOVE_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="10.3,19.8 10.1,28.7 21,28.7 27.5,21.5 27.5,9.7 10.3,9.7 10.3,12.45"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="21.5,9 21.5,3.85 3.5,3.85 3.5,22.577 10.1,22.577"/>\t<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="8.825,14.800 14.9,14.800 14.9,12.728 18.613,15.681 18.613,16.365 18.613,17.052 14.9,20.003 14.9,17.900 8.825,17.900"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/></g></svg>',ZOOM_IN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="17.631" cy="14.191" r="11.000"/>\t<g>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="17.615" y1="8.107" x2="17.615" y2="20.504"/>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.813" y1="14.306" x2="11.416" y2="14.306"/>\t</g>\t<polygon stroke="none" points="10.447,23.029 4.279,29.199 2.979,29.199 2.979,28.074 9.089,21.727"/></g></svg>',ZOOM_OUT:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="17.631" cy="14.191" r="11.000"/>\t<g>\t\t<line fill="none" stroke-width="1.4" stroke-miterlimit="10" x1="23.813" y1="14.306" x2="11.416" y2="14.306"/>\t</g>\t<polygon stroke="none" points="10.447,23.029 4.279,29.199 2.979,29.199 2.979,28.074 9.089,21.727"/></g></svg>',FIT_WIDTH:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g>\t<rect x="1.649" y="2.531" fill="none" stroke-miterlimit="10" width="20.701" height="18.938"/>\t<polygon stroke="none" points="17.384,9.217 20.087,11.006 20.087,12.8 17.407,14.634 17.407,12.862 14.68,12.862 14.68,11.006 17.384,11.006"/>\t<polygon stroke="none" points="6.604,9.217 3.9,11.006 3.9,12.8 6.579,14.634 6.579,12.862 9.308,12.862 9.308,11.006 6.604,11.006"/></g></svg>',FIT_HEIGHT:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g>\t<rect x="1.65" y="2.531" fill="none" stroke-miterlimit="10" width="20.699" height="18.938"/>\t<polygon stroke="none"  points="14.709,16.479 12.92,19.182 11.127,19.182 9.291,16.502 11.063,16.502 11.063,13.774 12.92,13.774 12.92,16.479"/>\t<polygon stroke="none"  points="14.709,7.447 12.92,4.743 11.127,4.743 9.291,7.422 11.063,7.422 11.063,10.15 12.92,10.15 12.92,7.447"/></g></svg>',SAVE:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<polygon fill="none" stroke-width="1.2" stroke-miterlimit="10" points="3.412,3.735 8.156,3.735 24.889,3.735 28.588,6.995 28.588,28.700 3.412,28.700"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="8.537,3.598 8.537,11.711 23.324,11.711 23.324,3.598"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="7.400,28.700 7.400,16.700 24.700,16.700 24.700,28.700"/></g></svg>',PDF:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><path fill="#E41737" stroke="#E41737" stroke-width="0.2" stroke-miterlimit="10" d="M11.549,9.045c0,0-4.489,10.481-7.78,11.242\tc0,0-0.171-1.122,2.911-3.31c0,0-3.005,1.294-3.386,3.12c0,0,0.095,0.476,1.198,0.438c0,0,0.932,0.19,4.014-4.261\tc0,0,0.026-0.04,0.075-0.114c0.44-0.678,2.685-4.181,3.216-6.049c0,0,1.121,2.929,3.252,4.47c0,0-4.311,0.605-6.624,1.641\tl-0.072,0.1c0,0,3.652-1.17,7.39-1.298c0,0,4.337,2.254,5.065,0.998v-0.057c0,0-0.999,0.442-3.867-0.999\tc0,0,4.052-0.171,3.938,0.828c0,0,0.756-0.757-1.256-1.228c0,0-2.026-0.229-3.566-0.1c0,0-2.994-1.228-3.901-5.521\tc0,0,0.563-2.839,0.505-3.923L11.92,7.847c0,0-0.711-3.41,0.236-4.223c0,0,0.392,0.1,0.563,1.027c0,0,0.458-1.084-0.563-1.17\tc0,0-0.764-0.257-0.893,1.127C11.264,4.608,10.955,7.21,11.549,9.045z"/></svg>',DOC:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><path fill="#3578BD" d="M4.362,6.428h5.344v0.806c0,0-1.35,0.469-1.444,1.481l-0.075,5.42l3.787-7.708h2.494v7.708L17.3,8.584\tc0,0,0.618-1.237-0.749-1.313l-0.039-0.844h4.127v0.769l-0.281,0.112l-5.945,11.063h-2.438l-0.056-6.881l-3.975,6.788l-2.531,0.094\tL5.394,8.697c0,0-0.169-1.257-1.031-1.388V6.428z"/></svg>',XLS:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><polygon fill="#6CA75C" points="4.625,6.294 9.688,6.294 12.238,9.032 15.088,6.294 20.188,6.294 14.863,12.069 20.188,18.106 \t14.863,18.106 11.713,14.618 9.238,17.094 4.063,17.094 9.463,11.994 "/></svg>',PPT:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><path fill="#C54C1C" d="M11.52,12V7.697c0,0,3.619-0.489,3.619,2.345c0,0,0.174,1.917-3.139,1.958H8.6v6.992h2.981v-4.533h2.668\tc0,0,4.063-0.271,3.906-4.625c0,0,0.136-4.652-5.26-4.826H6.844v2.679H8.6V12H11.52z"/></svg>',HWP:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><g>\t<path fill="#00A0E9" d="M10.689,4.796c0,0,3.411,0.366,4.589,1.954c0,0,0.458,0.326-0.119-0.549c0,0-0.889-2.117-3.075-2.321\t\tc0,0-0.794,0.021-1.25,0.57C10.834,4.451,10.49,4.77,10.689,4.796z"/>\t<path fill="#3897D4" d="M17.922,9.865c0,0-2.691-1.771-6.151,0c0,0-2.667,2.056,0.601,2.809c0,0,1.802,0.081,2.306-2.158\t\tc0,0-0.168-2.789-3.339-3.033c0,0-2.931,0.021-3.339,0.204c0,0-0.265,0.183-0.24-0.407c0,0-0.24-2.015,3.244-1.628\t\tc0,0,5.886,0.264,5.501,5.17c0,0-0.816,3.684-5.141,3.481c0,0-3.604-0.184-3.1-3.013c0,0-0.144-2.606,4.109-3.379\t\tc0,0,3.076-0.692,5.119,0.265c0,0,0.506,0.223,0.553,0.936C18.043,9.112,18.123,9.979,17.922,9.865z"/>\t<path fill="#3897D4" d="M12.516,15.484c0,0-1.177,0.142-1.177,0.997c0,0.854,0.817,0.997,1.177,0.997\t\tc0.361,0,1.153-0.144,1.153-0.978S12.516,15.484,12.516,15.484z"/>\t<path fill="#3897D4" d="M9.201,16.033v1.588c0,0,0.192,0.896,2.018,0.896s5.959-0.121,6.704-0.346\t\tc0.745-0.225-0.48,1.588-0.48,1.588s-4.493,0.61-7.448,0.244c0,0-2.283,0.184-2.835-2.076l-0.12-1.894H9.201z"/></g></svg>',TXT:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083\tc3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0\tS0.505,0.262,0.505,2.993z"/><g><text x="12" y="19" font-family="Times, Arial" text-anchor="middle" font-weight="bold" font-size="20px" stroke="#566573" fill="#566573">T</text></g></svg>',STORAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="7.3,17.8 7.1,28.7 28.5,28.7 28.5,11.7 24.5,7.7 7.3,7.7 7.3,10.45"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="21.5,7 21.5,3.85 3.5,3.85 3.5,22.577 8.1,22.577"/>\t<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="6.825,12.800 12.9,12.800 12.9,10.728 16.613,13.681 16.613,14.365 16.613,15.052 12.9,18.003 12.9,15.900 6.825,15.900"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="15.537,13.611 23.324,13.611 23.324,7.598"/>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="11.400,28.700 11.400,19.700 24.500,19.700 24.500,28.700"/></g></svg>',PRINT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">\t<g>\t\t<g stroke-width="1.5">\t\t\t<polyline points="7.5,10.5 7.5,2.5 24.5,2.5 24.5,10.5" fill="none" />\t\t\t<polyline points="7.5,23.5 2.5,23.5 2.5,10.5 29.5,10.5 29.5,23.5 24.5,23.5" stroke-linejoin="round" fill="none" />\t\t\t<circle cx="26" cy="14" r="0.5" />\t\t\t<rect x="7.5" y="18.5" fill="none" width="17" height="11"/>\t\t\t<line fill="none" stroke-linecap="round" x1="10.5" y1="22.5" x2="21.5" y2="22.5"/>\t\t\t<line fill="none" stroke-linecap="round" x1="10.5" y1="25.5" x2="18.5" y2="25.5"/>\t\t</g>\t</g></svg>',PRINT_PDF:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">\t<g>\t\t<g stroke-width="1.5">\t\t\t<polyline points="7.5,10.5 7.5,2.5 24.5,2.5 24.5,10.5" fill="none" />\t\t\t<polyline points="7.5,23.5 2.5,23.5 2.5,10.5 29.5,10.5 29.5,23.5 24.5,23.5" stroke-linejoin="round" fill="none" />\t\t\t<circle cx="26" cy="14" r="0.5"/>\t\t\t<rect x="7.5" y="18.5" fill="none" width="17" height="11"/>\t\t\t<line fill="none" stroke-linecap="round" x1="10.5" y1="22.5" x2="21.5" y2="22.5"/>\t\t\t<line fill="none" stroke-linecap="round" x1="10.5" y1="25.5" x2="18.5" y2="25.5"/>\t\t\t<path stroke-width="0.2" stroke-miterlimit="10" d="m14.1026,8.029c-0.5108,0.44573 -1.4212,1.35355 -0.8036,1.19616c0.9955,-0.56225 1.6175,-2.36574 2.1251,-3.57195c-0.591,-1.23222 -0.021,-2.18845 0.4281,-2.21663c0.5473,-0.03425 0.6898,0.94041 0.6898,0.94041s-0.6064,-0.43074 -0.6991,-0.69333c-0.1044,0.02451 -0.2168,0.82326 0.0927,1.70676c0.3613,-0.42497 0.5424,-0.84956 0.5424,-0.84956s0.4518,0.42457 -0.2266,1.07673c0.1213,0.25232 0.7819,1.26994 1.0812,1.45393c1.8951,-0.47864 1.9854,0.4604 1.9854,0.4604c-0.2926,-0.25105 -0.94,-0.27684 -1.6594,-0.20432c0.9074,0.44805 1.6757,0.29988 1.6757,0.29988c0,0.35081 -1.2292,0.73579 -2.1369,-0.07209c-0.9502,0.14019 -1.9208,0.56979 -2.305,0.67814c-1.0262,1.68508 -2.1485,1.55138 -2.3014,1.14902c-0.2712,-0.67939 1.5116,-1.35355 1.5116,-1.35355l0,0l0,0zm1.7556,-2.06521l-0.6712,1.73893c0.3941,-0.10603 0.8296,-0.30973 1.6103,-0.4537c-0.2528,-0.17331 -0.4812,-0.38789 -0.9391,-1.28523z"/>\t\t</g>\t</g></svg>',INQUERY:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<polygon points="19.505,12.52 25.13,12.52 22.317,15.71"/>\t<polygon stroke="none" points="8.124,23.268 2.358,29.279 1.058,29.279 1.058,28.154 7.167,21.804"/>\t<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M24.913,6.989c0.002,0-3.268-4.242-8.885-4.267\tc0,0-6.004-0.219-9.749,5.504c0,0-2.993,4.162-1.012,9.618c0,0,1.113,3.865,5.52,6.383c0,0,3.425,2.047,7.502,1.053 c0,0,4.017-0.736,6.472-3.854"/>\t<rect x="10.598" y="9.756" fill="none" stroke-width="1.3" stroke-miterlimit="10" width="17.344" height="9.047"/></g></svg>',CANCEL:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>\t<g>\t\t<line fill="none" stroke-width="1.4" stroke-miterlimit="10" x1="22.695" y1="16" x2="9.305" y2="16"/>\t</g>\t<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',LEFT_ITEM_MARK:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15px" height="32px" viewBox="0 0 15 32" enable-background="new 0 0 15 32" xml:space="preserve"><g>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="11.375,25.656 2.625,16.031 11.375,6.344"/></g></svg>',RIGHT_ITEM_MARK:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15px" height="32px" viewBox="0 0 15 32" enable-background="new 0 0 15 32" xml:space="preserve"><g>\t<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="3.625,25.656 12.375,16.031 3.625,6.344"/></g></svg>',VIEW_MODE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle fill="#318ABB" cx="17.5" cy="17.5" r="17.5"/><g>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M9.268,26.041c0,1.85,2.313,1.711,2.313,1.711 s11.332,0,14.015,0s2.289-2.543,2.289-2.543V14.688l-8.44-8.441h-8.049c0,0-2.358,0.046-2.358,2.636s0,6.614,0,6.614"/>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M19.12,6.246v6.222c0,0,0.046,2.034,2.566,2.034 s6.013,0,6.013,0"/>\t<path fill="#FFFFFF" d="M3.378,20.931v-0.356c0,0,2.617-4.343,6.174-4.343h0.533h0.533c3.557,0,6.174,4.343,6.174,4.343v0.356 v-0.184v0.354c0,0-2.617,4.346-6.174,4.346h-0.533H9.552c-3.557,0-6.174-4.346-6.174-4.346v-0.354 M10.085,17.416 c-1.891,0-3.423,1.532-3.423,3.424c0,1.89,1.532,3.422,3.423,3.422s3.423-1.532,3.423-3.422 C13.508,18.948,11.976,17.416,10.085,17.416z M10.121,18.833c-1.107,0-2.005,0.899-2.005,2.007c0,1.105,0.897,2.005,2.005,2.005 c1.108,0,2.005-0.899,2.005-2.005C12.126,19.732,11.229,18.833,10.121,18.833z"/>\t<path fill="#FFFFFF" d="M13.178,10.655c-3.953,3.335,1.513,4.813,4.484,4.934c-0.118-0.435-0.235-0.87-0.354-1.305c-1.255,0.821-5.835,5.793-2.786,7.007c1.405,0.559,2.96-0.313,4.224-0.899c1.099-0.511,2.224-0.963,3.394-1.278c3.602-0.972,1.057,3.864,0.276,4.842c-0.557,0.698,0.427,1.695,0.99,0.99c1.193-1.496,3.894-7.354-0.248-7.315c-1.811,0.017-3.496,0.809-5.118,1.552c-1.116,0.511-3.837,1.719-2.574-0.748c0.556-1.083,1.513-2.265,2.548-2.942c0.586-0.383,0.354-1.276-0.354-1.305c-1.2-0.048-5.783-0.611-3.494-2.543C14.859,11.062,13.864,10.077,13.178,10.655L13.178,10.655z"/></g></svg>',HIDE_MODE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle fill="#39579a" cx="17.5" cy="17.5" r="17.5"/><g>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M9.268,26.041c0,1.85,2.313,1.711,2.313,1.711 s11.331,0,14.013,0s2.289-2.543,2.289-2.543V14.687l-8.44-8.441h-8.047c0,0-2.358,0.046-2.358,2.636c0,2.591,0,6.614,0,6.614"/>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M19.119,6.246v6.222c0,0,0.046,2.034,2.566,2.034 s6.013,0,6.013,0"/>\t<path fill="#FFFFFF" d="M3.379,20.931v-0.356c0,0,2.617-4.343,6.173-4.343h0.533h0.534c3.557,0,6.173,4.343,6.173,4.343v0.356 v-0.184v0.354c0,0-2.616,4.346-6.173,4.346h-0.534H9.552c-3.556,0-6.173-4.346-6.173-4.346v-0.354 M10.085,17.415 c-1.891,0-3.423,1.533-3.423,3.425c0,1.889,1.532,3.422,3.423,3.422s3.424-1.533,3.424-3.422 C13.509,18.948,11.976,17.415,10.085,17.415z M12.31,20.174H7.676v1.576h4.634V20.174z"/></g></svg>',NORMAL_PEN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">\t<g class="crownix-icon-pencolor" >\t\t<polygon points="7.795,25.631 11.279,23.791 7.721,21.369"/>\t\t<rect x="10.375" y="25.875" width="17.563" height="2"/>\t</g>\t<g>\t\t<path d="M14.597,8.838l2.698,1.603l-1.832,1.376c0.941-1.275-0.014-1.932-0.014-1.932 c-1.162-0.861-1.981,0.877-1.981,0.877L14.597,8.838z"/>\t\t<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M13.822,21.635 c-1.508,1.477-2.871,0.477-2.871,0.477l-2.348-1.619v-2.62l6.849-11.308c0,0,1.472-2.369,4.578-0.756c0,0,2.785,1.453,1.365,4.383 L13.822,21.635z"/>\t\t<line fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" x1="14.402" y1="8.294" x2="20.352" y2="11.965"/>\t\t<path d="M12.344,19.573c-0.273,0.438-0.793,0.606-1.161,0.378l0,0c-0.366-0.226-0.442-0.766-0.168-1.202 l5.277-8.419c0.271-0.438,0.793-0.607,1.16-0.38l0,0c0.366,0.229,0.441,0.768,0.168,1.204L12.344,19.573z"/>\t\t<path d="M17.754,10.626l2.699,1.603l-1.832,1.376c0.939-1.276-0.016-1.932-0.016-1.932 c-1.16-0.861-1.98,0.878-1.98,0.878L17.754,10.626z"/>\t</g></g></svg>',HIGHLIGHTER_PEN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><circle fill="#FFFFFF" cx="17.45" cy="5.25" r="0.79"/><g class="crownix-icon-highlightercolor">\t<rect x="10.375" y="25.875" width="17.563" height="2"/>\t<polygon points="5.147,25.52 8.643,25.52 9.804,24.465 9.804,23.783 6.91,22.48"/></g><g>\t<polygon fill="#FFFFFF" points="7.34,21.964 9.891,23.19 10.466,23.212 13.025,21.651 13.06,20.657 7.828,17.188 7.49,17.67"/>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.6" stroke-miterlimit="10" d="M14.799,6.273l-5.037,7.828 c0,0-1.416,1.823,0.142,2.817l2.625,1.81c0,0,1.87,1.584,3.415-1.148c1.546-2.729,4.371-7.78,4.371-7.78s1.37-2.321-0.81-3.36 l-1.912-1.176C18.115,5.546,16.215,4.261,14.799,6.273z"/></g></svg>',TEXT:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><g>\t<g id="Ellipse_1">\t\t<g>\t\t\t<circle cx="17.5" cy="17.5" r="17.5"/>\t\t</g>\t</g>\t\t\t<image overflow="visible" width="21" height="22" id="Layer_66_copy_xA0_Image" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAWCAYAAAAvg9c4AAAACXBIWXMAAAsSAAALEgHS3X78AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/A8EDNQG1DYUbB4tXMrEQAPAQq2gYAQCmoXp4PQ+ipdpmaRo4n2QI0n2Pk4v4wpTYjQM7tgn1QdDx/tDx9ChU6DQxFBGangfPSkCBBgAtpM0FSvAneQAAAAASUVORK5CYII=" transform="matrix(1 0 0 1 7.0005 7)">\t</image>\t<g id="Rectangle_5_copy">\t\t<g>\t\t\t<polygon fill="#FFFFFF" points="29.348,9.015 19.828,18.534 18.002,22.088 21.576,20.319 31.113,10.78 \t\t\t"/>\t\t</g>\t</g>\t<g>\t\t\t\t\t<rect x="25.137" y="23.795" transform="matrix(-0.7076 -0.7066 0.7066 -0.7076 24.9548 63.6009)" fill="#FFFFFF" width="0.999" height="5.684"/>\t\t<rect x="22.985" y="23.939" fill="#FFFFFF" width="5.014" height="0.999"/>\t\t<rect x="22.986" y="24.016" fill="#FFFFFF" width="1" height="4.983"/>\t</g></g></svg>',ERASER:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g stroke="#FFFFFF">\t<path fill="none" stroke-width="1.5" stroke-miterlimit="10" d="M16.452,6.824c0,0,2.003-2.438,5.795,0 c3.791,2.437,4.278,2.708,4.278,2.708s1.572,0.868,1.572,3.033c0,0,0.162,0.975-0.922,2.763 c-1.083,1.787-6.933,12.077-6.933,12.077s-1.19,1.842-2.6,1.842h-0.921c0,0-1.517,0.163-2.762-0.649 c-1.865-1.218-1.862-1.221-5.188-3.427c0,0-0.878-0.635-0.878-1.719s0-0.866,0-0.866s0-1.571,1.138-3.467 C10.169,17.223,16.452,6.824,16.452,6.824z"/>\t<line fill="none" stroke-width="1.5" stroke-miterlimit="10" x1="10.158" y1="17.5" x2="21.738" y2="24.787"/></g></svg>',ERASE_ALL:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g stroke="#FFFFFF">\t<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M26.206,26.041c0,1.85-2.313,1.711-2.313,1.711 s-11.333,0-14.015,0s-2.289-2.543-2.289-2.543V14.688l8.44-8.441h8.049c0,0,2.358,0.046,2.358,2.636s0,2.59,0,2.59"/>\t<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M16.353,6.246v6.222c0,0-0.046,2.034-2.566,2.034 s-6.013,0-6.013,0"/>\t<g>\t\t<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M25.298,13.73c0,0,0.953-1.158,2.752,0 c1.801,1.156,2.032,1.286,2.032,1.286s0.745,0.41,0.745,1.44c0,0,0.077,0.463-0.437,1.311c-0.513,0.849-3.292,5.736-3.292,5.736 s-0.565,0.874-1.234,0.874h-0.438c0,0-0.72,0.077-1.312-0.309c-0.886-0.579-0.884-0.58-2.465-1.627c0,0-0.417-0.301-0.417-0.817 c0-0.514,0-0.411,0-0.411s0-0.745,0.54-1.645C22.314,18.668,25.298,13.73,25.298,13.73z"/>\t\t<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="22.31" y1="19.142" x2="27.81" y2="22.425"/>\t</g></g><path fill="#FFFFFF" d="M19.967,13.271c1.317,1.109-1.48,1.333-2.235,1.363c-0.708,0.029-0.939,0.921-0.354,1.305c0.595,0.389,1.049,1.006,1.448,1.579c0.923,1.328,0.086,1.162-0.941,0.705c-1.075-0.48-2.319-1.217-3.518-1.228\tc-3.318-0.032-1.992,3.791-0.724,5.38c0.563,0.705,1.547-0.293,0.99-0.99c-0.558-0.699-1.146-1.689-1.02-2.619c0.131-0.966,2.644,0.262,2.974,0.396c1.026,0.42,2.213,1.221,3.352,0.768c2.362-0.939-0.806-4.514-1.854-5.2\tc-0.119,0.435-0.236,0.87-0.354,1.305c2.201-0.089,6.124-1.312,3.225-3.754C20.271,11.703,19.275,12.688,19.967,13.271L19.967,13.271z"/></svg>',UNDO:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">\t<polyline points="14.906,10.406 14.627,10.406 14.627,14.02 9.394,10.638 14.582,6.422 14.627,10.406"/>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.9" stroke-miterlimit="10" d="M17.944,26.6 c0.078-0.002,5.662-2.434,5.662-8.292c0-8.152-9.125-7.829-9.125-7.829h-0.279l0,0"/>\t<circle cx="17.907" cy="26.623" r="0.954"/></g></svg>',REDO:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">\t<polyline points="19.094,10.406 19.373,10.406 19.373,14.02 24.605,10.638 19.418,6.422 19.373,10.406"/>\t<path fill="none" stroke="#FFFFFF" stroke-width="1.9" stroke-miterlimit="10" d="M16.056,26.6 c-0.078-0.002-5.662-2.434-5.662-8.292c0-8.152,9.125-7.829,9.125-7.829h0.278l0,0"/>\t<circle cx="16.093" cy="26.623" r="0.954"/></g></svg>',HOVER_FILTER:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="0px" height="0px" xml:space="preserve">\t<defs>\t\t<filter id="hover">\t\t\t<desc>hover 효과를 위한 필터</desc>\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur" />\t\t\t<feMerge>\t\t\t\t<feMergeNode in="blur"/>\t\t\t\t<feMergeNode in="SourceGraphic"/>\t\t\t</feMerge>\t\t</filter>\t\t<filter id="active">\t\t\t<desc>mousedown 효과를 위한 필터</desc>\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="6" result="active" />\t\t\t<feMerge>\t\t\t\t<feMergeNode in="active"/>\t\t\t\t<feMergeNode in="SourceGraphic"/>\t\t\t</feMerge>\t\t</filter>\t</defs></svg>',PREV_DOC:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="5.1,28.7 21,28.7 27.5,21.5 27.5,4.7 5.1,4.7 5.1,29.3"/> <polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="18.613,14.800 12.538,14.800 12.538,12.728 8.825,15.681 8.825,16.365 8.825,17.052 12.538,20.003 12.538,17.900 18.613,17.900"/> <polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/> </g> </svg>',NEXT_DOC:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="5.1,28.7 21,28.7 27.5,21.5 27.5,4.7 5.1,4.7 5.1,29.3"/> <polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="8.825,14.800 14.9,14.800 14.9,12.728 18.613,15.681 18.613,16.365 18.613,17.052 14.9,20.005 14.9,17.933 8.825,17.933"/> <polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/> </g> </svg>',SHARE_CONNECT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_3" class="layer">   <g class="layer" id="svg_2">    <g id="svg_1" class="layer">     <g id="svg_22">      <g id="Ellipse_2">       <g id="svg_23">        <circle cx="9" cy="16" r="5.225" id="svg_24"/>       </g>      </g>      <g id="Rectangle_4">       <g id="svg_25">        <rect x="9.538" y="12.638" transform="matrix(0.8663,-0.4994,0.4994,0.8663,-4.6546,8.8819) " fill="#FFFFFF" width="9.46" height="0.999" id="svg_26"/>       </g>      </g>      <g id="Rectangle_4_copy">       <g id="svg_27">        <polygon points="10.504,15.005 10.014,15.889 18.496,20.995 18.986,20.111" id="svg_28"/>       </g>      </g>      <g id="Ellipse_2_2_">       <g id="svg_29">        <circle fill="none" cx="23" cy="9" r="5.225" id="svg_30"/>       </g>      </g>      <g id="Ellipse_2_4_">       <g id="svg_31">        <circle fill="none" cx="23" cy="23" r="5.225" id="svg_32"/>       </g>      </g>     </g>    </g>   </g>  </g> </g></svg>',SHARE_DISCONNECT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_2" class="layer">   <g class="layer" id="svg_1">    <g id="svg_33">     <g id="Ellipse_2_12_">      <g id="svg_34">       <circle id="svg_35" r="5.225" cy="16.014" cx="9"/>      </g>     </g>     <g id="Rectangle_4_4_">      <g id="svg_36">       <rect id="svg_37" height="0.999" width="9.46" fill="#FFFFFF" transform="matrix(0.8663,-0.4994,0.4994,0.8663,-4.6615,8.8837) " y="12.652" x="9.538"/>      </g>     </g>     <g id="Rectangle_4_copy_4_">      <g id="svg_38">       <polygon id="svg_39" points="10.504,15.019 10.014,15.902 18.496,21.009 18.986,20.125" />      </g>     </g>     <g id="Ellipse_2_6_">      <g id="svg_40">       <circle id="svg_41" r="5.225" cy="9.014" cx="23" fill="none"/>      </g>     </g>     <rect id="svg_42" height="1.012" width="11.352" fill="#FFFFFF" transform="matrix(0.7071,-0.7071,0.7071,0.7071,-8.8751,22.7281) " y="21.572" x="17.324"/>     <rect id="svg_43" height="1.013" width="11.35" fill="#FFFFFF" transform="matrix(-0.7071,-0.7071,0.7071,-0.7071,23.6499,53.9532) " y="21.572" x="17.325"/>    </g>   </g>  </g> </g></svg>',SHARE_LOCK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer"><g id="svg_33">   <path id="svg_34" d="m24,14l-16,0c-0.553,0 -1,0.447 -1,1l0,11c0,0.553 0.447,1 1,1l16,0c0.553,0 1,-0.447 1,-1l0,-11c0,-0.553 -0.447,-1 -1,-1zm-6,10l-4,0l1.234,-3.058c-0.751,-0.303 -1.281,-1.036 -1.281,-1.896c0,-1.13 0.916,-2.046 2.047,-2.046s2.047,0.916 2.047,2.047c0,0.859 -0.53,1.593 -1.281,1.896l1.234,3.057z"/>   <g id="svg_35">    <path id="svg_36" d="m16,7c2.205,0 4,1.794 4,4l2,0c0,-3.313 -2.687,-6 -6,-6l0,0c-3.313,0 -6,2.687 -6,6l2,0c0,-2.206 1.794,-4 4,-4"/>    <rect id="svg_37" height="7.334" width="2" y="11" x="20"/>    <rect id="svg_38" height="7.334" width="2" y="11" x="10"/>   </g>  </g> </g></svg>',SHARE_UNLOCK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer"><g id="svg_33">   <path id="svg_34" d="m24,14l-16,0c-0.553,0 -1,0.447 -1,1l0,11c0,0.553 0.447,1 1,1l16,0c0.553,0 1,-0.447 1,-1l0,-11c0,-0.553 -0.447,-1 -1,-1zm-6,10l-4,0l1.234,-3.058c-0.751,-0.303 -1.281,-1.036 -1.281,-1.896c0,-1.13 0.916,-2.046 2.047,-2.046s2.047,0.916 2.047,2.047c0,0.859 -0.53,1.593 -1.281,1.896l1.234,3.057z"/>   <g id="svg_35">    <path id="svg_36" d="m16,7c2.205,0 4,1.794 4,4l2,0c0,-3.313 -2.687,-6 -6,-6l0,0c-3.313,0 -6,2.687 -6,6l2,0c0,-2.206 1.794,-4 4,-4"/>    <rect id="svg_37" height="7.334" width="2" y="11" x="20"/>   </g>  </g> </g></svg>',FILE_CLIP:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_28">   <path id="svg_29" d="m7.085,5.799c0,0.111 -0.083,0.201 -0.183,0.201c-0.101,0 -0.183,-0.09 -0.183,-0.201c0,-0.386 0.144,-0.734 0.377,-0.989l0.012,-0.013c0.231,-0.247 0.545,-0.399 0.892,-0.399c0.352,0 0.672,0.158 0.903,0.412l0.002,0c0.23,0.254 0.375,0.603 0.375,0.989c0,0.111 -0.082,0.201 -0.184,0.201c-0.101,0 -0.182,-0.09 -0.182,-0.201c0,-0.275 -0.103,-0.523 -0.268,-0.707l-0.002,0c-0.164,-0.181 -0.392,-0.292 -0.644,-0.292c-0.247,0 -0.473,0.107 -0.636,0.282l-0.009,0.01c-0.167,0.181 -0.27,0.431 -0.27,0.707l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <path id="svg_30" d="m9.28,12.201c0,0.109 -0.082,0.199 -0.185,0.199c-0.101,0 -0.182,-0.09 -0.182,-0.199l0,-6.402c0,-0.11 0.082,-0.2 0.182,-0.2c0.103,0 0.185,0.09 0.185,0.2l0,6.402zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <g id="svg_31">    <path id="svg_32" d="m7.085,12.4c0,0.109 -0.083,0.198 -0.184,0.198c-0.101,0 -0.183,-0.089 -0.183,-0.198l0,-6.601c0,-0.11 0.083,-0.2 0.183,-0.2c0.102,0 0.184,0.09 0.184,0.2l0,6.601zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>    <path id="svg_33" d="m6.719,12.4c0,-0.11 0.083,-0.199 0.183,-0.199c0.1,0 0.181,0.089 0.181,0.199c0,0.44 0.166,0.843 0.431,1.131c0.265,0.289 0.631,0.471 1.034,0.471c0.403,0 0.768,-0.182 1.033,-0.471c0.266,-0.29 0.43,-0.692 0.43,-1.131c0,-0.11 0.083,-0.199 0.185,-0.199c0.101,0 0.182,0.089 0.182,0.199c0,0.549 -0.206,1.05 -0.537,1.413c-0.332,0.363 -0.79,0.589 -1.292,0.589c-0.503,0 -0.961,-0.226 -1.292,-0.589c-0.334,-0.363 -0.538,-0.864 -0.538,-1.413l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>    <path id="svg_34" d="m5.987,4.198c0,0.109 -0.081,0.2 -0.184,0.2c-0.101,0 -0.182,-0.091 -0.182,-0.2c0,-0.714 0.268,-1.365 0.698,-1.835l0,-0.002c0.43,-0.469 1.026,-0.763 1.681,-0.763c0.651,0 1.247,0.294 1.677,0.764l0,0.002l0.002,0c0.432,0.472 0.697,1.123 0.697,1.835c0,0.109 -0.081,0.2 -0.182,0.2s-0.183,-0.091 -0.183,-0.2c0,-0.604 -0.228,-1.155 -0.592,-1.555c-0.364,-0.399 -0.867,-0.645 -1.419,-0.645c-0.555,0 -1.058,0.246 -1.422,0.645c-0.365,0.399 -0.591,0.948 -0.591,1.554l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   </g>   <path id="svg_35" d="m5.987,12.601c0,0.11 -0.081,0.2 -0.182,0.2c-0.103,0 -0.184,-0.09 -0.184,-0.2l0,-8.403c0,-0.111 0.082,-0.201 0.184,-0.201c0.101,0 0.182,0.09 0.182,0.201l0,8.403zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <path id="svg_36" d="m10.379,12.472c0,0.109 -0.082,0.198 -0.182,0.198c-0.103,0 -0.186,-0.089 -0.186,-0.198l0,-8.404c0,-0.111 0.083,-0.201 0.186,-0.201c0.1,0 0.182,0.09 0.182,0.201l0,8.404zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>  </g> </g></svg>',BOLD:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="3" y="13" font-family="Times, Arial" font-weight="bold" font-size="80%">T</text></g></g></svg>',ITALIC:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="5" y="13" font-family="Times, Arial" font-style="italic" font-size="80%">I</text></g></g></svg>',UNDERLINE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="3" y="12" font-family="Times, Arial" text-decoration="underline" font-size="75%">U</text></g></g></svg>',STRIKE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>\t<g>\t\t<text x="4" y="13" font-family="Times, Arial" text-decoration="line-through" font-size="80%">S</text>\t</g></g></svg>',FONT_COLOR:'<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g id="svg_20">   <g id="svg_21">    <path id="svg_22" d="m9.324,8.198l-2.678,0l-0.71,2.239l-0.94,0l2.489,-7.327l1.029,0l2.489,7.326l-0.979,0l-0.7,-2.238zm-0.228,-0.74l-0.352,-1.119c-0.27,-0.83 -0.499,-1.629 -0.739,-2.479l-0.04,0c-0.23,0.86 -0.47,1.649 -0.73,2.479l-0.359,1.119l2.22,0z"/>   </g>   <rect class="crownix-textnote-fontcolor" id="svg_23" height="1.166" width="6.707" y="11.724" x="4.646"/>  </g></svg>',OUTLINE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><rect x="2.7" y="2.7" width="11" height="11" style="fill:transparent; stroke-width:1.5;"/></g></svg>',BACKGROUND:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>\t<g>\t<rect x="3.5" y="3.5" width="2.5" height="2.5" stroke-width="1"/>\t<rect x="4.5" y="4.5" width="1" height="1" stroke-width="1"/>\t<rect x="3.5" y="10" width="2.5" height="2.5" stroke-width="1"/>\t<rect x="4.5" y="10.5" width="1" height="1" stroke-width="1"/>\t<rect x="6.5" y="6.5" width="2.5" height="2.5" stroke-width="1"/>\t<rect x="7.5" y="7.5" width="1" height="1" stroke-width="1"/>\t<rect x="10" y="3.5" width="2.5" height="2.5" stroke-width="1"/>\t<rect x="10.5" y="4.5" width="1" height="1" stroke-width="1"/>\t<rect x="10" y="10" width="2.5" height="2.5" stroke-width="1"/>\t<rect x="10.5" y="10.5" width="1" height="1" stroke-width="1"/>\t<rect x="3" y="3" width="10" height="10" stroke-width="1" fill="none"/>\t</g></g></svg>',LEFT_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>\t<g>\t<rect x="3" y="3" width="10" height="0.5"/>\t<rect x="3" y="5.5" width="6" height="0.5"/>\t<rect x="3" y="8" width="10" height="0.5"/>\t<rect x="3" y="10.5" width="6" height="0.5"/>\t<rect x="3" y="13" width="10" height="0.5"/>\t</g></g></svg>',CENTER_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>\t<g>\t<rect x="3" y="3" width="10" height="0.5"/>\t<rect x="6" y="5.5" width="4" height="0.5"/>\t<rect x="3" y="8" width="10" height="0.5"/>\t<rect x="6" y="10.5" width="4" height="0.5"/>\t<rect x="3" y="13" width="10" height="0.5"/>\t</g></g></svg>',RIGHT_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>\t<g>\t<rect x="3" y="3" width="10" height="0.5"/>\t<rect x="6" y="5.5" width="7" height="0.5"/>\t<rect x="3" y="8" width="10" height="0.5"/>\t<rect x="6" y="10.5" width="7" height="0.5"/>\t<rect x="3" y="13" width="10" height="0.5"/>\t</g></g></svg>',MASK_BLACK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g class="layer">  <g id="svg_1">   <g id="Shape_1_copy">    <g id="svg_2">     <path id="svg_3" d="m15.564,18.261c-0.75,-0.927 -3.047,-1.236 -4.238,0c-1.193,1.236 -0.576,5.106 -2.826,7.065c2.58,0.293 6.314,-1.236 7.064,-2.826c0.752,-1.59 0.752,-3.312 0,-4.239z"/>    </g>   </g>   <image transform="matrix(1,0,0,1,4.5,26.3389) " xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAECAYAAACUY/8YAAAACXBIWXMAAAsSAAALEgHS3X78AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACxJREFUeNpiZGBgSADieAbagIUsQEIBiB1oZMFBJgYaA0aoDxRoZP4DgAADAPOCA6qqNRP1AAAAAElFTkSuQmCC" id="Layer_52_xA0_Image" height="3" width="23"/>   <g id="Rounded_Rectangle_1">    <g id="svg_4">     <path id="svg_5" d="m24.799,4.295l-2.598,-1.5c-0.479,-0.276 -1.09,-0.112 -1.367,0.366l-7,11.855c-0.275,0.479 -0.111,1.09 0.367,1.366l2.598,1.5c0.479,0.276 1.09,0.112 1.367,-0.366l6.998,-11.855c0.277,-0.478 0.113,-1.091 -0.365,-1.366z"/>    </g>   </g>  </g> </g></svg>',MASK_WHITE:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_6">   <g id="Shape_1_copy_3_">    <g id="svg_7">     <path id="svg_8" d="m15.564,18.261c-0.75,-0.927 -3.047,-1.236 -4.238,0c-1.193,1.236 -0.576,5.106 -2.826,7.065c2.58,0.293 6.314,-1.236 7.064,-2.826c0.752,-1.59 0.752,-3.312 0,-4.239z" stroke-miterlimit="10" stroke="#000000" fill="none"/>    </g>   </g>   <g id="Rounded_Rectangle_1_3_">    <g id="svg_9">     <path id="svg_10" d="m24.799,4.295l-2.598,-1.5c-0.479,-0.276 -1.09,-0.112 -1.367,0.366l-7,11.855c-0.275,0.479 -0.111,1.09 0.367,1.366l2.598,1.5c0.479,0.276 1.09,0.112 1.367,-0.366l6.998,-11.855c0.277,-0.478 0.113,-1.09 -0.365,-1.366z" stroke-miterlimit="10" stroke="#000000" fill="none"/>    </g>   </g>   <rect id="svg_11" height="3" width="23" stroke-miterlimit="10" stroke="#000000" fill="none" y="26.339" x="4.5"/>  </g> </g></svg>',MASK_BOLD:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Shape_3">   <g id="svg_12">    <path id="svg_13" d="m14.601,10.668c-0.299,0.251 -3.682,3.631 -3.959,3.965c-2.85,3.423 -4.947,9.005 -5.336,12.062c3.127,-0.502 8.723,-2.551 12.123,-5.391c0.238,-0.199 3.674,-3.621 4.014,-4.045c2.678,-3.333 4.758,-8.934 5.252,-11.955c-3.04,0.363 -8.651,2.48 -12.094,5.364z"/>   </g>  </g> </g></svg>',MASK_THIN:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Shape_3_copy">   <g id="svg_14">    <path id="svg_15" d="m16.016,12.082c-0.301,0.251 -3.682,3.631 -3.961,3.966c-2.848,3.423 -4.969,8.01 -6.75,10.647c2.508,-1.873 7.311,-3.965 10.709,-6.805c0.24,-0.2 3.674,-3.623 4.014,-4.046c2.678,-3.332 4.76,-8.005 6.668,-10.54c-2.665,1.8 -7.239,3.893 -10.68,6.778z"/>   </g>  </g> </g></svg>',MASK_RESET:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_16">   <g id="Shape_2">    <g id="svg_17">     <polygon id="svg_18" points="12.5,9.312 19.5,13.311 19.5,5.313          "/>    </g>   </g>   <path id="svg_19" d="m16,9.687m0,0c4.136,0 7.5,3.364 7.5,7.5c0,4.137 -3.364,7.501 -7.5,7.501s-7.5,-3.364 -7.5,-7.501c0,-2.14 0.901,-4.073 2.343,-5.441l-1.56,-1.276c-1.72,1.72 -2.783,4.095 -2.783,6.718c0,5.247 4.253,9.501 9.5,9.501c5.247,0 9.5,-4.254 9.5,-9.501c0,-5.246 -4.253,-9.5 -9.5,-9.5l0,0"/>  </g> </g></svg>',MASK_OK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Rectangle_2">   <g id="svg_20">    <polygon id="svg_21" points="24.284,8.575 13.681,19.181 7.716,13.217 5.595,15.339 11.56,21.302 11.558,21.304 13.679,23.425 26.405,10.696" clip-rule="evenodd" fill-rule="evenodd"/>   </g>  </g> </g></svg>',CLOUD_PRINT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" class="crownix-toolbar-icon-svg"><g><g id="svg_2" stroke-width="1.5"><rect x="7.5" y="18.5" fill="none" width="17" height="11"/><line fill="none" stroke-linecap="round" x1="10.5" y1="23" x2="21.5" y2="23"/><line fill="none" stroke-linecap="round" x1="10.5" y1="26" x2="18.5" y2="26"/><line fill="none" stroke-opacity="null" fill-opacity="null" x1="4.713238" y1="18.42647" x2="6.772061" y2="18.5" stroke-linejoin="null" stroke-linecap="null"/><line fill="none" stroke-opacity="null" fill-opacity="null" x1="25.154411" y1="18.5" x2="27.213234" y2="18.573529" stroke-linejoin="null" stroke-linecap="null"/><path d="m7.79117,23.17748c-3.46936,0 -6.28318,-3.10131 -6.28318,-6.92514l0,0c0.0021,-3.06899 1.81584,-5.65438 4.32178,-6.56041l0,0c0.08692,-2.60847 2.02842,-4.69063 4.41498,-4.69294l0,0c0.76445,0 1.48178,0.2193 2.10486,0.59672l0,0c1.32575,-2.42957 3.73849,-4.05814 6.50099,-4.05929l0,0c4.13328,0.00231 7.49478,3.64147 7.59007,8.17051l0,0c2.47348,0.92797 4.25371,3.50181 4.2558,6.54541l0,0c0,3.82383 -2.81381,6.92514 -6.28317,6.92514l0,0c-0.15045,-0.13348 -0.00056,-4.77204 -0.15102,-4.7053c-0.15046,0.06674 -4.27204,0.10011 -7.75959,-0.00001c-3.48755,-0.10011 -7.47567,0 -8.86085,0l-0.05089,4.70531l0.20022,0l0,0l0,0l0,0z" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="null" fill="none"/></g></g></svg>'},m2soft.ns("m2soft.crownix.Message"),m2soft.crownix.Message.log=function(t){window.console&&window.console.log&&window.console.log(t)},m2soft.crownix.Message.error=function(t){window.console&&window.console.error&&window.console.error(t)},m2soft.crownix.Message.progress={show:function(t,e,i){e=e||"Loading",$(t).find(".ers_progress").length>0||$('<div class="ers_progress"><div class="ers_progress_content"></div><img src="data:image/gif;base64,R0lGODlhIAAgAPMAAN7e3lxcXMHBwZ+fn7m5uaqqqnd3d4eHh8nJydDQ0Lu7u2tra11dXQAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQACgABACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQACgACACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkEAAoAAwAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkEAAoABAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAAKAAUALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAAKAAYALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQACgAHACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAAKAAgALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAAKAAkALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQACgAKACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkEAAoACwAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA=="/></div>').find(".ers_progress_content").text(e).end().appendTo(t).overlayMessageBox({load:!0,closeOnClick:!1,closeOnEsc:!1,fixed:!1,scrollArrangeDisable:!0,mask:{color:"#000",loadSpeed:200,opacity:.2,maskId:"progress_mask",viewer_id:t},onClose:function(){$("#progress_mask").remove(),$(this).remove()},top:"center",oneInstance:!1}).fadeIn(100,i)},hide:function(t){$(t).find(".ers_progress").overlayMessageBox().close&&$(t).find(".ers_progress").overlayMessageBox().close(),$(t).find(".ers_progress").remove(),$(t).find("#progress_mask").remove()}},m2soft.ns("m2soft.crownix.Dialog"),m2soft.crownix.Dialog=function(){var t,e,i,r,n,o=m2soft.crownix.Resource,a="data:image/gif;base64,R0lGODlhEAAQAPIAAGdnZ////4qKitbW1v///8PDw7CwsKenpyH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQACgABACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkEAAoAAgAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkEAAoAAwAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkEAAoABAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQACgAFACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQACgAGACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAAKAAcALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==";return(n=function(i){t=$("#"+i),e=$('<div class="crownix-dialog-message-pagenum"><img src="'+a+'" /><span></span></div>'),$('<div class="crownix-dialog-message">').append(e).appendTo(t)}).prototype={constructor:m2soft.crownix.Dialog,message:function(e,i,r,n){var o=$('<div class="crownix-dialog-message">').css("right","15px").appendTo(t),s=$('<div class="crownix-dialog-message-text"><span>'+e+"</span>").appendTo(o),l=m2soft.crownix.Util;if(l.browser.msie&&7==l.browser.version||s.prepend('<img src="'+a+'" />'),void 0!==n){var c={top:"15px"},d={left:0},h={top:"calc(100% + "+(-$(".crownix-dialog-message-text").outerHeight()-15)+"px)"},u={left:"calc(50% + "+(-$(".crownix-dialog-message-text").outerWidth()/2-parseInt($(".crownix-dialog-message-text").css("margin-left"),10))+"px)"},f={top:"calc(50% + "+-$(".crownix-dialog-message-text").outerHeight()/2+"px)"};switch(n.toLowerCase()){case"top-left":case"left-top":o.css(c).css(d);break;case"top":o.css(c).css(u);break;case"top-right":case"right-top":o.css(c);break;case"left":o.css(f).css(d);break;case"center":o.css(f).css(u);break;case"right":o.css(f);break;case"bottom-left":case"left-bottom":o.css(h).css(d);break;case"bottom":o.css(h).css(u);break;case"bottom-right":case"right-bottom":o.css(h)}}return!0===r&&(o.wrap($('<div class="crownix-overlay-absolute">')),o=$(".crownix-overlay-absolute")),"number"==typeof i&&setTimeout((function(){o.fadeOut(500,(function(){o.remove()}))}),i),o},pagenum:function(t,n,o){e.css("display","inline-block").find("span").text(t+" / "+n),!0===o?e.find("img").css("display","inline-block"):!1===o&&e.find("img").css("display","none"),2!=r&&(clearTimeout(i),i=setTimeout((function(){e.css("display","none")}),3e3))},keepPageNum:function(t){r=t},show:function(e,i,r){if(!(t.find(".crownix-dialog-outer").length>0)){var n={confirm:!1,verify:!1,input:"text",textOk:o.get("ok_button_text"),textCancel:o.get("cancel_button_text"),textYes:"Yes",textNo:"No",textAlign:"",title:""};if(i)for(var a in n)void 0===i[a]&&(i[a]=n[a]);t.parent().append('<div class="crownix-dialog-overlay" id="aOverlay"></div>'),$(".crownix-dialog-overlay").css("height","100%").css("width","100%").fadeIn(100),t.append('<div class="crownix-dialog-outer"></div>'),$(".crownix-dialog-outer").append('<div class="crownix-dialog-inner"></div>'),i&&i.title&&($('<div class="crownix-dialog-title">').css({"font-weight":"bold","text-align":"center"}).text(i.title).appendTo(".crownix-dialog-inner"),$(".crownix-dialog-inner").css("font-weight","inherit")),i&&i.textAlign?$(".crownix-dialog-inner").css("text-align",i.textAlign).append(e):$(".crownix-dialog-inner").append(e),$(".crownix-dialog-outer").css({left:"50%",top:"50%","margin-left":"-125px","margin-top":"-100px"}).fadeIn(200),i&&i.input&&("string"==typeof i.input?$(".crownix-dialog-inner").append('<div class="aInput"><input type="'+i.input+'" class="aTextbox" min="1" t="aTextbox" /></div>'):$(".crownix-dialog-inner").append('<div class="aInput"><input type="text" class="aTextbox" t="aTextbox" /></div>'),$(".aTextbox").focus()),$(".crownix-dialog-inner").append('<div class="aButtons"></div>'),i?i.confirm||i.input?($(".aButtons").append('<button value="ok">'+i.textOk+"</button>"),$(".aButtons").append('<button value="cancel">'+i.textCancel+"</button>")):i.verify?($(".aButtons").append('<button value="ok">'+i.textYes+"</button>"),$(".aButtons").append('<button value="cancel">'+i.textNo+"</button>")):$(".aButtons").append('<button value="ok">'+i.textOk+"</button>"):$(".aButtons").append('<button value="ok">OK</button>'),$(".crownix-dialog-outer").keydown((function(t){$(".crownix-dialog-overlay").is(":visible")&&(13==t.keyCode&&$('.aButtons > button[value="ok"]').click(),27==t.keyCode&&$('.aButtons > button[value="cancel"]').click())}));var s=$(".aTextbox").val();$(".aTextbox").bind("keyup mouseup",(function(){s=$(this).val()})),$(".aButtons > button").click((function(){if($(".crownix-dialog-overlay").remove(),$(".crownix-dialog-outer").remove(),r){var t=$(this).attr("value");"ok"==t?i&&i.input?r(s):r(!0):"cancel"==t&&r(!1)}}))}}},n}(),m2soft.ns("m2soft.crownix.Window"),m2soft.crownix.Window=function(){var t,e,i,r,n,o=m2soft.crownix.Constant,a=m2soft.crownix.Resource,s="New Window",l={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box"},c=function(t,e,i){"string"==typeof t&&(s=t),content_=e,"boolean"==typeof i&&(isOverlay=i),this.footerHeight=0};return c.prototype={constructor:m2soft.crownix.Window,show:function(c,d){var h=(c=c||{}).parent||"body",u=c.css;isOverlay&&(r=$("<div>").addClass("crownix-overlay").css({"z-index":o.WINDOW_OVERLAY_Z_INDEX}).prependTo(h),"body"!==h&&r.css("position","absolute"),h=r),t=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none","z-index":o.WINDOW_Z_INDEX,"margin-left":window.pageXOffset,"margin-top":window.pageYOffset}).prependTo(h),e=$("<div>").addClass("crownix-window-header").css(l).appendTo(t),$("<span>").addClass("crownix-window-title").text(s).appendTo(e),$("<span>").addClass("crownix-window-close").bind("click",this.close).append($("<img>").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC")).appendTo(e),i=$("<div>").addClass("crownix-window-body").css(l).css({width:"100%"}).appendTo(t),u&&t.css(u);var f=this;n=function(){s==a.get("submit_preview_title")&&(t.width()<368?($(".crownix-window-footer").height(95),f.footerHeight=100):($(".crownix-window-footer").height(50),f.footerHeight=50)),i.css({height:t.height()-30-f.footerHeight-6+"px"});var e="body"==h?$(window).width():$(h).width(),r="body"==h?$(window).height():$(h).height();t.css({left:(e-t.width())/2+"px",top:(r-t.height())/2+"px"}),c.setVerticalAlign&&c.setVerticalAlign()},setTimeout(n,0),$(window).on("resize",n),content_&&content_.css(l).appendTo(i),t.fadeIn(500,(function(){"function"==typeof d&&d()}))},close:function(){$(window).off("resize",n),t&&t.fadeOut(500,(function(){t.remove()})),isOverlay&&r.fadeOut(500,(function(){r.remove()}))},setFooterHeight:function(t){this.footerHeight=t},setOrientation:function(e,i){var r=e?{"max-width":"450px","max-height":"520px"}:{"max-width":"700px","max-height":"380px"};t.css(r),i(),n()}},c}(),m2soft.ns("m2soft.crownix.DateParser"),function(){var t={en:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:"AM",pm:"PM"},ko:{dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일","일","월","화","수","목","금","토"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월","1","2","3","4","5","6","7","8","9","10","11","12"],am:"오전",pm:"오후"},ja:{dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日","日","月","火","水","木","金","土"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月","1","2","3","4","5","6","7","8","9","10","11","12"],am:"午前",pm:"午後"},"zh-CN":{dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","周日","周一","周二","周三","周四","周五","周六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],am:"上午",pm:"下午"}};function e(t){return(t<0||t>9?"":"0")+t}function i(t){for(var e=0;e<t.length;e++)if(-1=="1234567890".indexOf(t.charAt(e)))return!1;return!0}function r(t,e,r,n){for(var o=n;o>=r;o--){var a=t.substring(e,e+o);if(a.length<r)return null;if(i(a))return a}return null}function n(e,i,n,a,s,l,c){void 0===a&&(a=new Date),n=m2soft.crownix.Resource.language,i+="",e+="";var d,h,u,f=0,p=0,g="",m="",v=a.getFullYear(),w=a.getMonth()+1,x=1,b=a.getHours(),y=a.getMinutes(),k=a.getSeconds(),_="",C=1==s||2==s;for("uz"==n&&(n="en"),c||"ja"!=n||("1"==s?(u=i.substring(0,2),i=i.substring(2,i.length)):"2"==s&&(u=i.substring(0,1),i=i.substring(1,i.length)));p<e.length;){for(g=e.charAt(p),m="";e.charAt(p)==g&&p<e.length;)m+=e.charAt(p++);if("1"==l&&("dd"==m&&(m="d"),"MM"==m&&(m="M"),"HH"==m&&(m="H"),"hh"==m&&(m="h"),"mm"==m&&(m="m"),"ss"==m&&(m="s")),"yyyy"==m||"yy"==m){if("yyyy"==m&&(d=4,h=4),("yy"==m||C&&!c&&"ja"==n)&&(d=2,h=2),null==(v=r(i,f,d,h)))return 0;f+=v.length,2==v.length&&(v=v>70?v-0+1900:v-0+2e3),v=C&&!c&&"ja"==n?o(v,u,s):v}else if("MMM"==m||"MMMM"==m){w=0;for(var T=0;T<t[n].monthNames.length;T++){var S=t[n].monthNames[T];if(i.substring(f,f+S.length).toLowerCase()==S.toLowerCase()&&("MMM"==m&&T>11||"MMMM"==m)){(w=T+1)>12&&(w-=12),f+=S.length;break}}if(w<1||w>12)return 0}else if("dddd"==m||"ddd"==m)for(T=0;T<t[n].dayNames.length;T++){var E=t[n].dayNames[T];if(i.substring(f,f+E.length).toLowerCase()==E.toLowerCase()){f+=E.length;break}}else if("MM"==m||"M"==m){if(null==(w=r(i,f,m.length,2))||w<1||w>12)return 0;f+=w.length}else if("dd"==m||"d"==m){if(null==(x=r(i,f,m.length,2))||x<1||x>31)return 0;f+=x.length}else if("hh"==m||"h"==m){if(null==(b=r(i,f,m.length,2))||b<1||b>12)return 0;f+=b.length}else if("HH"==m||"H"==m){if(null==(b=r(i,f,m.length,2))||b<0||b>23)return 0;f+=b.length}else if("mm"==m||"m"==m){if(null==(y=r(i,f,m.length,2))||y<0||y>59)return 0;f+=y.length}else if("ss"==m||"s"==m){if(null==(k=r(i,f,m.length,2))||k<0||k>59)return 0;f+=k.length}else if("tt"==m||"t"==m){var M=t[n].am,A=t[n].pm;if(i.substring(f,f+M.length).toLowerCase()==M.toLowerCase())_="AM",f+=M.length;else{if(i.substring(f,f+A.length).toLowerCase()!=A.toLowerCase())return 0;_="PM",f+=A.length}}else{if(i.substring(f,f+m.length)!=m)return 0;f+=m.length}}if(f!=i.length)return 0;if(2==w)if(v%4==0&&v%100!=0||v%400==0){if(x>29)return 0}else if(x>28)return 0;return(4==w||6==w||9==w||11==w)&&x>30?0:(b<12&&"PM"==_?b=b-0+12:b>11&&"AM"==_&&(b-=12),new Date(v,w-1,x,b,y,k).getTime())}function o(t,e,i){if("1"==i){if("平成"==e)return t-12;if("昭和"==e)return t-75;if("大正"==e)return t-89;if("明治"==e)return t-133}else{if("H"==e)return t-12;if("S"==e)return t-75;if("T"==e)return t-89;if("M"==e)return t-133}}m2soft.crownix.DateParser.formatDate=function(i,r,n,o,a,s){n=m2soft.crownix.Resource.language,i+="";var l=1==o||2==o,c="",d=0,h="",u="",f=r.getYear()+"",p=r.getMonth()+1,g=r.getDate(),m=r.getDay(),v=r.getHours(),w=r.getMinutes(),x=r.getSeconds(),b=new Object;for("uz"==n&&(n="en"),f.length<4&&(f=""+(f-0+1900)),l&&!s&&"ja"==n?(f=function(t,e){var i="";(t=parseInt(t))>1988?(i="1"==e?"平成":"H",t-=1988):t>1925?(i="1"==e?"昭和":"S",t-=1925):t>1911?(i="1"==e?"大正":"T",t-=1911):t>1867&&(i="1"==e?"明治":"M",t-=1867);return{japanYear:i,val:t}}(f,o),b.y=b.yyyy=b.yy=f.val):(b.y=""+f,b.yyyy=f,b.yy=f.substring(2,4)),b.M=p,b.MM=e(p),b.MMMM=t[n].monthNames[p-1],b.MMM=t[n].monthNames[p+11],b.d=g,b.dd=e(g),b.dddd=t[n].dayNames[m],b.ddd=t[n].dayNames[m+7],b.H=v,b.HH=e(v),b.h=0==v?12:v>12?v-12:v,b.hh=e(b.h),b.K=v>11?v-12:v,b.k=v+1,b.KK=e(b.K),b.kk=e(b.k),v>11?(b.tt=t[n].pm,b.t=t[n].pm):(b.tt=t[n].am,b.t=t[n].am),b.m=w,b.mm=e(w),b.s=x,b.ss=e(x);d<i.length;){for(h=i.charAt(d),u="";i.charAt(d)==h&&d<i.length;)u+=i.charAt(d++);null!=b[u]?("1"==a&&("dd"==u&&(u="d"),"MM"==u&&(u="M"),"HH"==u&&(u="H"),"hh"==u&&(u="h"),"mm"==u&&(u="m"),"ss"==u&&(u="s")),c+=b[u]):c+=u}return(l&&!s&&"ja"==n?f.japanYear:"")+c},m2soft.crownix.DateParser.getDateFromFormat=n,m2soft.crownix.DateParser.isDate=function(t,e,i){return 0!=n(t,e,i)}}(),m2soft.ns("m2soft.crownix.Util"),m2soft.ns("m2soft.crownix.Map"),m2soft.crownix.Util={hasTouch:function(){return"ontouchstart"in window},isSupportSVG:function(){return!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},isSupportWebCrypto:function(){return!!(window.crypto&&window.crypto.subtle&&atob&&btoa&&Uint8Array)},base64:{toArray:function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";/[^A-Za-z0-9\+\/\=]/g.exec(t)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var i=[],r=0;do{var n=e.indexOf(t.charAt(r++)),o=e.indexOf(t.charAt(r++)),a=e.indexOf(t.charAt(r++)),s=e.indexOf(t.charAt(r++));i.push(n<<2|o>>4),64!=a&&i.push((15&o)<<4|a>>2),64!=s&&i.push((3&a)<<6|s)}while(r<t.length);return i},decode:function(t){for(var e=this.toArray(t),i="",r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return unescape(i)},utf8Decode:function(t){for(var e=this.toArray(t),i="",r=[],n=0,o=0;o<e.length;o++){var a=e[o];if(0==n&&(n=0==(128&a)?1:192==(224&a)?2:224==(240&a)?3:1),n--,r.push(a),0==n){switch(r.length){case 0:break;case 1:i+=String.fromCharCode(r[0]);break;case 2:i+=String.fromCharCode((31&r[0])<<6|63&r[1]);break;case 3:i+=String.fromCharCode((15&r[0])<<12|(63&r[1])<<6|63&r[2])}r=[]}}return unescape(i)}},getUrlVars:function(){for(var t,e=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<i.length;r++)t=i[r].split("="),e.push(t[0]),e[t[0]]=t[1];return e},getUrlVar:function(t){return decodeURIComponent(m2soft.crownix.Util.getUrlVars()[t])},isArray:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")},escapeXmlEntities:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return t.replace(/[&<>"'\/]/g,(function(t){return e[t]}))}},m2soft.crownix.Util.browser=function(){var t,e=navigator.userAgent,i=navigator.standalone,r=!0,n=/edge/i.test(e),o=/(msie|trident)/i.test(e),a=/chrome|crios/i.test(e),s=/phantom/i.test(e),l=/safari/i.test(e)&&!a&&!s,c=/iphone/i.test(e),d=/ipad/i.test(e),h=/touchpad/i.test(e),u=/android/i.test(e),f=/opera/i.test(e)||/opr/i.test(e),p=/firefox/i.test(e),g=/gecko\//i.test(e),m=/seamonkey\//i.test(e),v=/version\/(\d+(\.\d+)?)/i,w=/firefox\/(\d+(\.\d+)?)/i;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e);var x=g?(t={name:"Gecko",gecko:r,mozilla:r,version:e.match(w)[1],mobile:u||c||d},p&&(t.name="Firefox",t.firefox=r),t):n?{name:"Edge",edge:e.match(/edge/i)?e.match(/edge\/(\d+(\.\d+)?)/i)[1]:void 0}:o?{name:"Internet Explorer",msie:r,version:e.match(/(msie |rv:)(\d+(\.\d+)?)/i)[2],trident:e.match(/trident/i)?e.match(/trident\/(\d+(\.\d+)?)/i)[2]:void 0}:f?{name:"Opera",opera:r,webkit:e.match(/AppleWebKit/i),version:e.match(v)?e.match(v)[1]:e.match(/opr\/(\d+(\.\d+)?)/i)[1],mobile:u||c||d}:u?{name:"Android",webkit:r,android:r,mobile:r,version:e.match(/Android\s([0-9\.]*)/)[1],chrome:a?{name:"Chrome",webkit:r,version:e.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}:void 0}:c||d?(t={name:c?"iPhone":"iPad",webkit:r,mobile:r,ios:r,iphone:c,ipad:d,uiwebview:!i&&!l},v.test(e)&&(t.version=e.match(v)[1]),t):a?{name:"Chrome",webkit:r,chrome:r,version:e.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}:s?{name:"PhantomJS",webkit:r,phantom:r,version:e.match(/phantomjs\/(\d+(\.\d+)+)/i)[1]}:h?{name:"TouchPad",webkit:r,touchpad:r,version:e.match(/touchpad\/(\d+(\.\d+)?)/i)[1]}:l?{name:"Safari",webkit:r,safari:r,version:e.match(v)[1]}:m?{name:"SeaMonkey",seamonkey:r,version:e.match(/seamonkey\/(\d+(\.\d+)?)/i)[1]}:{};return x.msie&&x.version>=8||x.chrome&&x.version>=10||x.firefox&&x.version>=4||x.safari&&x.version>=5||x.opera&&x.version>=10?x.a=r:x.msie&&x.version<8||x.chrome&&x.version<10||x.firefox&&x.version<4||x.safari&&x.version<5||x.opera&&x.version<10?x.c=r:x.x=r,x}(),m2soft.crownix.Util.os=function(){var t=navigator.userAgent;return-1!=t.indexOf("NT 7.0")?{name:"Windows 7",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("NT 6.0")?{name:"Windows Vista/Server 2008",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("NT 5.2")?{name:"Windows Server 2003",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("NT 5.1")||-1!=t.indexOf("XP")?{name:"Windows XP",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("NT 5.0")||-1!=t.indexOf("2000")?{name:"Windows 2000",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("NT")?{name:"Windows NT",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("9x 4.90")||-1!=t.indexOf("ME")?{name:"Windows Me",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("98")?{name:"Windows 98",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("95")?{name:"Windows 95",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("Win16")?{name:"Windows 3.x",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("Windows")?{name:"Windows",windows:!0,openbsd:!1,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("OpenBSD")?{name:"Open BSD",windows:!1,openbsd:!0,sunos:!1,linux:!1,macos:!1}:-1!=t.indexOf("SunOS")?{name:"Sun OS",windows:!1,openbsd:!1,sunos:!0,linux:!1,macos:!1}:-1!=t.indexOf("Linux")||-1!=t.indexOf("X11")?{name:"Linux",windows:!1,openbsd:!1,sunos:!1,linux:!0,macos:!1}:-1!=t.indexOf("Macintosh")||-1!=t.indexOf("Mac_PowerPC")?{name:"Mac OS",windows:!1,openbsd:!1,sunos:!1,linux:!1,macos:!0}:-1!=t.indexOf("iPhone")||-1!=t.indexOf("iPad")?{name:"iOS",majorVersion:t.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],windows:!1,openbsd:!1,sunos:!1,linux:!1,macos:!1}:""}(),m2soft.crownix.Util.getAcrobatInfo=function(){var t=function(t){try{return new ActiveXObject(t)}catch(t){}},e=function(t){for(key in navigator.plugins){var e=navigator.plugins[key];if(e.name==t)return e}},i=function(){return this.plugin=this.plugin||(m2soft.crownix.Util.browser.msie?t("AcroPDF.PDF")||t("PDF.PdfCtrl"):e("Adobe Acrobat")||e("Chrome PDF Viewer")||e("WebKit built-in PDF"))};return{isInstalled:!!i(),version:function(){try{var t=i();if(m2soft.crownix.Util.browser.msie){var e=t.GetVersions().split(",")[0].split("=");return parseFloat(e[1])}return t.version?parseInt(t.version):t.name}catch(t){return null}}()}},m2soft.crownix.Util.formatPageNumber=function(t,e,i){var r=function(t,e){for(var i=t.split(""),r=!1,n=0;n<i.length;n++)(r||e.length-1>=n&&("＃"==e[e.length-1-n]||"＄"==e[e.length-1-n]))&&(e.length-1==n&&(r=!0),i[i.length-1-n]=String.fromCharCode(t.charCodeAt(i.length-1-n)+65248));return i.join("")};return t=(t=t.replace(/(#|＃)+/g,(function(t){for(var e=t,n=(e.length,i.toString());n.length<t.length;)n="0"+n;return n=r(n,e)}))).replace(/(\$|＄)+/g,(function(t){for(var i=t,n=(i.length,e.toString());n.length<t.length;)n="0"+n;return n=r(n,i)}))},m2soft.crownix.Map=function(){var t=new Object;this.put=function(e,i){t[e]=i},this.get=function(e){return t[e]},this.containsKey=function(e){return e in t},this.containsValue=function(e){for(var i in t)if(t[i]==e)return!0;return!1},this.isEmpty=function(t){return 0==this.size()},this.clear=function(){for(var e in t)delete t[e]},this.remove=function(e){delete t[e]},this.keys=function(){var e=new Array;for(var i in t)e.push(i);return e},this.values=function(){var e=new Array;for(var i in t)e.push(t[i]);return e},this.size=function(){var e=0;for(var i in t)e++;return e},this.toString=function(){var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("\n")},this.toObject=function(){var e={};for(var i in t)e[i]=t[i];return e}},m2soft.ns("m2soft.crownix.Util.StopWatch"),m2soft.crownix.Util.StopWatch=function(){var t=0,e=0,i=0,r=0;this.start=function(){t=e=Date.now(),i=r=0},this.stop=function(){var n=Date.now();i=n-t,r=n-e},this.lab=function(){var n=Date.now();r=n-e,i=n-t,e=n},this.getElapsedTimeMillis=function(){return i},this.getLabTimeMillis=function(){return r},this.toString=function(){return"elapsedTime="+i}},m2soft.ns("m2soft.crownix.util.Converter"),m2soft.crownix.util.Converter={xml2json:function(t,e){return new X2JS(e).xml_str2json(t)},json2xml:function(t,e){return new X2JS(e).json2xml_str(t)}},m2soft.ns("m2soft.crownix.util.SingleTone"),m2soft.crownix.util.SingleTone=function(t){var e,i=function(){if(void 0===e){var i=function(){};i.prototype=t.prototype;var r=new i,n=t.apply(r,Array.prototype.slice.call(arguments));e="object"==typeof n?n:r}return e};return i.getInstance=function(){return i.apply(null,Array.prototype.slice.call(arguments))},i.dispose=function(){e=void 0},i},m2soft.ns("m2soft.crownix.util.DateUtil"),m2soft.crownix.util.DateUtil.convertDateFormat=function(t,e,i,r,n,o){var a=m2soft.crownix.DateParser.getDateFromFormat(e,t,void 0,void 0,r,n,!r||!o);if(0===a)return"";var s=new Date(a);return m2soft.crownix.DateParser.formatDate(i,s,void 0,r,n,!(!r||!o))},m2soft.crownix.Util.deserialize=function(t){var e={};if(!t)return e;for(var i=t.split("&"),r=0,n=i.length;r<n;r++){var o=i[r],a=o.indexOf("=");if(-1!=a){var s=decodeURI(o.substring(0,a)),l=decodeURI(o.substring(a+1));e[s]=l}}return e},m2soft.crownix.Util.ASCENDING_COMPARATOR=function(t,e){return t<e?-1:t>e?1:0},m2soft.crownix.Util.DESCENDING_COMPARATOR=function(t,e){return t>e?-1:t<e?1:0},m2soft.ns("m2soft.crownix.util.NumberUtil"),m2soft.crownix.util.NumberUtil=function(){var t={numberFormat:void 0,currencyFormat:void 0},e=function(t,e,i){this.format=t,this.checkZero=e,this.checkNoZero=i,m2soft.crownix.util.NumberUtil.setLocaleFormat()},i=function(t,e,i){var r,n,o,a=t.toString().split("."),s=e-(i||0),l="";2===a.length?(r=Math.min(Math.max(a[1].length,s),e),l=a[1].substring(0,r)):r=s;for(var c=l.length;c<r;c++)l=l.concat("0");return isNaN(a[0])||(a[0]=a[0].replace(/(^0+)/,"")||"0"),o=l?a[0]+"."+l:a[0],i>e-r&&(n=new RegExp("\\.?0{1,"+(i-(e-r))+"}$"),o=o.replace(n,"")),o},r=function(t,e,r,n,o){var a,s,l,c=!0,d=!1,h="";if(null===t||!t)return t;if(t.indexOf("+")>-1?(c=!0,t=t.replace(/\+/g,"")):t.indexOf("-")>-1&&(c=!1,t=t.replace(/\-/g,"")),o&&"1"==o&&!Number(t))return"";if(e.indexOf("[.]")>-1&&(d=!0,e=e.replace("[.]",".")),a=t.toString().split(".")[0],s=e.split(".")[1],l=e.indexOf(r),s?(s.indexOf("[")>-1?(s=(s=s.replace("]","")).split("["),h=i(t,s[0].length+s[1].length,s[1].length)):h=i(t,s.length),a=h.split(".")[0],h=h.indexOf(".")>-1?"."+h.split(".")[1]:"",d&&0===Number(h.slice(1))&&(h="")):a=i(t,null),l>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+r)),0===e.indexOf(".")&&(a=""),n&&"1"==n&&-1!=h.indexOf(".")){for(h=h.substring(h.indexOf(".")+1,h.length);h&&h.lastIndexOf("0")==h.length-1;)h=h.substring(0,h.length-1);h=(h?".":"")+h}return(c?"":"-")+a+h},n=function(t){var e=t;if("number"==typeof e&&(e=e.toString()),e.indexOf(".")!=e.lastIndexOf(".")){var i=e.split(".");e=i[0]+"."+i[1]}return e=e.replace(/[^0-9&&^\.&&\-&&\+]/gi,"")};return e.prototype={formatNumber:function(e){var i,o;return e=n(e),o=-1!=(i=function(e){var i,r,n;return-1!=e.toLowerCase().search("(default number format)")?e=e.toLowerCase().replace("(default number format)",t.numberFormat):-1!=e.toLowerCase().search("(default currency format)")&&(e=e.toLowerCase().replace("(default currency format)",t.currencyFormat)),i=e.indexOf("#"),r=e.lastIndexOf("#")+1,n=e.length,{front:e.substring(0,i),middle:e.substring(i,r),end:e.substring(r,n)}}(this.format)).middle.search("[']")?r(e,i.middle,"'",this.checkZero,this.checkNoZero):-1!=i.middle.search("[*]")?r(e,i.middle,"*",this.checkZero,this.checkNoZero):r(e,i.middle,",",this.checkZero,this.checkNoZero),i.front+o+i.end},unformatNumber:function(t){return n(t)},setNumberFormat:function(e){t.numberFormat||(t.numberFormat=e)},getNumberFormat:function(){return t.numberFormat},setCurrencyFormat:function(e){t.currencyFormat||(t.currencyFormat=e)},getCurrencyFormat:function(){return t.currencyFormat}},e}(),m2soft.crownix.util.NumberUtil.setLocaleFormat=function(t,e){var i,r,n=t||m2soft.crownix.Resource.language;"ja"==n?(i="¥ #,###",r="#,###[.]###"):"zh-CN"==n||"zh"==n?(i="¥ #,###[.]##",r="#,###[.]###"):"en"==n?(i="$ #,###[.]##",r="#,###[.]###"):(i="₩ #,###",r="#,###[.]###"),this.prototype.setCurrencyFormat(void 0!==e&&void 0!==e.currencyFormat?e.currencyFormat:i),this.prototype.setNumberFormat(void 0!==e&&void 0!==e.numberFormat?e.numberFormat:r)},m2soft.ns("m2soft.crownix.Util.ActionEvents"),m2soft.crownix.Util.ActionEvents=window.navigator.pointerEnabled||window.PointerEvent?{start:"pointerdown",move:"pointermove",end:"pointerup",out:"pointerout",over:"pointerover"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",out:"MSPointerout",over:"MSPointerover"}:{start:"mousedown",move:"mousemove",end:"mouseup",out:"mouseout",over:"mouseover"},m2soft.crownix.Util.sha256=function(t){function e(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function i(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function n(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}function a(t){return i(t,2)^i(t,13)^i(t,22)}function s(t){return i(t,6)^i(t,11)^i(t,25)}function l(t){return i(t,7)^i(t,18)^r(t,3)}function c(t){return i(t,17)^i(t,19)^r(t,10)}return function(t){for(var e="0123456789abcdef",i="",r=0;r<4*t.length;r++)i+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return i}(function(t,i){var r,d,h,u,f,p,g,m,v,w,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),b=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),y=new Array(64);t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(var k=0;k<t.length;k+=16){r=b[0],d=b[1],h=b[2],u=b[3],f=b[4],p=b[5],g=b[6],m=b[7];for(var _=0;_<64;_++)y[_]=_<16?t[_+k]:e(e(e(c(y[_-2]),y[_-7]),l(y[_-15])),y[_-16]),v=e(e(e(e(m,s(f)),n(f,p,g)),x[_]),y[_]),w=e(a(r),o(r,d,h)),m=g,g=p,p=f,f=e(u,v),u=h,h=d,d=r,r=e(v,w);b[0]=e(r,b[0]),b[1]=e(d,b[1]),b[2]=e(h,b[2]),b[3]=e(u,b[3]),b[4]=e(f,b[4]),b[5]=e(p,b[5]),b[6]=e(g,b[6]),b[7]=e(m,b[7])}return b}(function(t){for(var e=Array(),i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),8*t.length))},m2soft.crownix.Util.changeScrollbar=function(t,e,i,r,n){$(".iScrollHorizontalScrollbar").css({height:t}),$(".iScrollVerticalScrollbar").css({width:e}),$(".iScrollHorizontalScrollbar .iScrollIndicator, .iScrollVerticalScrollbar .iScrollIndicator").css({background:i,"border-radius":r+"px"}),$("#crownix-note-pen-attribute, #crownix-note-toolbar").css({bottom:n})},$.extend({objectSize:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e}}),m2soft.ns("m2soft.crownix.util.Unit"),m2soft.crownix.util.Unit={dpi:void 0,detectDPI:function(){if(void 0===this.dpi){var t=$("<div>").css({width:"1in",height:"1in",display:"none"}).appendTo("body");this.dpi=t.width(),t.remove(),window.console&&console.log("[Crownix Viewer] detect "+this.dpi+" device DPI.")}},inToPx:function(t){return this.detectDPI(),t*this.dpi},pxToIn:function(t){return this.detectDPI(),t/this.dpi},ptToPx:function(t){return this.detectDPI(),t/72*this.dpi},pxToPt:function(t){return this.detectDPI(),t/this.dpi*72}},function(t){t.crownixtools=t.crownixtools||{version:"@VERSION"},t.crownixtools.overlay={addEffect:function(t,e,r){i[t]=[e,r]},conf:{position:"absolute",close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!m2soft.crownix.Util.browser.msie||m2soft.crownix.Util.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var e=[],i={};function r(r,n){var o,a,s,l=this,c=r.add(l),d=t(n.mask.viewer_id==document?window:n.mask.viewer_id),h=t.crownixtools.expose&&(n.mask||n.expose),u=Math.random().toString().slice(10);h&&("string"==typeof h&&(h={color:h}),h.closeOnClick=h.closeOnEsc=!1);var f=n.target||r.attr("rel");if(!(a=f?t(f):r).length)throw"Could not find Overlay: "+f;r&&-1==r.index(a)&&r.click((function(t){return l.load(t),t.preventDefault()})),t.extend(l,{load:function(r){if(l.isOpened())return l;var o=i[n.effect];if(!o)throw'Overlay: cannot find effect : "'+n.effect+'"';if(n.oneInstance&&t.each(e,(function(){this.close(r)})),(r=r||t.Event()).type="onBeforeLoad",c.trigger(r),r.isDefaultPrevented())return l;s=!0,h&&t(a).expose(h);var f=n.top,p=n.left,g=a.outerWidth({margin:!0}),m=a.outerHeight({margin:!0});return"string"==typeof f&&(f="center"==f?Math.max((d.height()-m)/2,0):parseInt(f,10)/100*d.height()),"center"==p&&(p=Math.max((d.width()-g)/2,0)),o[0].call(l,{top:f,left:p},(function(){s&&(r.type="onLoad",c.trigger(r))})),h&&n.closeOnClick&&t.mask.getMask().one("click",l.close),n.closeOnClick&&t(document).on("click."+u,(function(e){t(e.target).parents(a).length||l.close(e)})),n.closeOnEsc&&t(document).on("keydown."+u,(function(t){27==t.keyCode&&l.close(t)})),l},close:function(e){return l.isOpened()?((e=e||t.Event()).type="onBeforeClose",c.trigger(e),e.isDefaultPrevented()?void 0:(s=!1,i[n.effect][1].call(l,(function(){e.type="onClose",c.trigger(e)})),t(document).off("click."+u+" keydown."+u),h&&t.mask.close(h),l)):l},getOverlay:function(){return a},getTrigger:function(){return r},getClosers:function(){return o},isOpened:function(){return s},getConf:function(){return n}}),t.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),(function(e,i){t.isFunction(n[i])&&t(l).on(i,n[i]),l[i]=function(e){return e&&t(l).on(i,e),l}})),(o=a.find(n.close||".close")).length||n.close||(o=t('<a class="close"></a>'),a.prepend(o)),o.click((function(t){l.close(t)})),n.load&&l.load()}t.crownixtools.overlay.addEffect("default",(function(e,i){var r=this.getConf(),n=t(window);r.fixed||"relative"==r.position||r.scrollArrangeDisable||(e.top+=n.scrollTop(),e.left+=n.scrollLeft()),e.position=r.fixed?"fixed":r.position,this.getOverlay().css(e).fadeIn(r.speed,i)}),(function(t){this.getOverlay().fadeOut(this.getConf().closeSpeed,t)})),t.fn.overlayMessageBox=function(i){var n=this.data("overlay");return n||(t.isFunction(i)&&(i={onBeforeLoad:i}),i=t.extend(!0,{},t.crownixtools.overlay.conf,i),this.each((function(){n=new r(t(this),i),e.push(n),t(this).data("overlay",n)})),i.api?n:this)}}(jQuery),function(t){var e;function i(e){if(m2soft.crownix.Util.browser.msie){var i=t(e).height(),r=t(window).height();return[t(e).width()||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i-r<20?r:i]}return[t(e).width(),t(e).height()]}function r(e){if(e)return e.call(t.mask)}t.crownixtools=t.crownixtools||{version:"@VERSION"},e=t.crownixtools.expose={conf:{viewer_id:document,maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var n,o,a,s={},l={};t.mask={load:function(c,d){if("string"==typeof c&&(c={color:c}),c=c||o,o=c=t.extend(t.extend({},e.conf),c),l[c.maskId])return this;s[c.maskId]=t("#"+c.maskId),s[c.maskId].length||(s[c.maskId]=t("<div/>").attr("id",c.maskId),t("body").append(s[c.maskId]),t(c.viewer_id==document?"body":c.viewer_id).append(s[c.maskId]));var h=i(c.viewer_id==document?document:c.viewer_id);return s[c.maskId].css({position:"absolute",top:0,left:0,width:h[0],height:h[1],display:"none",opacity:c.startOpacity,zIndex:c.zIndex}),c.color&&s[c.maskId].css("backgroundColor",c.color),!1===r(c.onBeforeLoad)||(c.closeOnEsc&&t(document).on("keydown.mask",(function(e){27==e.keyCode&&t.mask.close(e)})),c.closeOnClick&&s[c.maskId].on("click.mask",(function(e){t.mask.close(e)})),t(window).on("resize.mask",(function(){t.mask.fit()})),d&&d.length&&(a=d.css("z-index"),t.each(d,(function(){var e=t(this);/relative|absolute|fixed/i.test(e.css("position"))||e.css("position","relative")})),n=d.css({zIndex:Math.max(c.zIndex+1,"auto"==a?0:a)})),s[c.maskId].css({display:"block"}).fadeTo(c.loadSpeed,c.opacity,(function(){t.mask.fit(),r(c.onLoad),l[c.maskId]=!1})),l[c.maskId]=!0),this},close:function(e){if(l[e.maskId]){if(!1===r(o.onBeforeClose))return this;s[e.maskId].fadeOut(o.closeSpeed,(function(){r(o.onClose),l[e.maskId]=!1})),t(document).off("keydown.mask"),s[e.maskId].off("click.mask"),t(window).off("resize.mask")}return this},fit:function(){var r=t.extend(t.extend({},e.conf),o);if(l[r.maskId]){var n=i(r.viewer_id==document?document:r.viewer_id);s[r.maskId].css({width:n[0],height:n[1]})}},getMask:function(){var i=t.extend(t.extend({},e.conf),o);return s[i.maskId]},isLoaded:function(i){var r=t.extend(t.extend({},e.conf),o);return i?"full"==l[r.maskId]:l[r.maskId]},getConf:function(){return o},getExposed:function(){return n}},t.fn.mask=function(e){return t.mask.load(e),this},t.fn.expose=function(e){return t.mask.load(e,this),this}}(jQuery),m2soft.ns("m2soft.crownix.Layout"),function(){var t=m2soft.crownix.Layout,e=m2soft.crownix.Util,i=e.browser.msie&&e.browser.version<9,r={toolbarColor:"#777777",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#D0D0D0",pageBorderColor:"#E0E0E0"},n={toolbarColor:"#E0E0E0",toolbarIconColor:"#4D4D4D",toolbarEffectColor:"#333333",containerColor:"#F0F0F0",pageBorderColor:"#E0E0E0"},o={toolbarColor:"#141414",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#F5F5F5",containerColor:"#3F3F3F",pageBorderColor:"#2F2F2F"},a={toolbarColor:"#185C91",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6D88B7",pageBorderColor:"#7F7F7F"},s={toolbarColor:"#E17E4C",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#B8886F",pageBorderColor:"#7F7F7F"},l={toolbarColor:"#48B7A7",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6FB8AD",pageBorderColor:"#7F7F7F"},c={toolbarColor:"#D26A8B",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#B86F87",pageBorderColor:"#7F7F7F"},d={toolbarColor:"#76BB51",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#8AB86F",pageBorderColor:"#7F7F7F"},h={toolbarColor:"#4AABD7",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6FA1B8",pageBorderColor:"#7F7F7F"},u=function(t,e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null===i)throw Error("[Crownix Viewer] Invalid Color Value("+t+")");return"number"!=typeof e&&(e=0),[parseInt(i[1],16)+e,parseInt(i[2],16)+e,parseInt(i[3],16)+e]},f=function(t){for(var e=0,i=t.length;e<i;e++)t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255);return"#"+t[0].toString(16)+t[1].toString(16)+t[2].toString(16)},p=function(t,e){return"number"==typeof e?"rgba("+t.join(",")+","+e+")":"rgb("+t.join(",")+")"},g=["background: %TOP_COLOR%;","background: -moz-linear-gradient(top, %TOP_COLOR% 0%, %BOTTOM_COLOR% 100%);","background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,%TOP_COLOR%), color-stop(100%,%BOTTOM_COLOR%));","background: -webkit-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: -o-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: -ms-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: linear-gradient(to bottom, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);",'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="%IE9_TOP_COLOR%", endColorstr="%IE9_BOTTOM_COLOR%",GradientType=0 );'],m=["border: 1px solid %BORDER_COLOR% !important;","box-shadow: inset 0 0 7px %SHADOW_COLOR%;"],v=['content: "";',"width: 0;","height: 0;","position: absolute;","right: 5px;","top: 50%;","margin-top: -3px;","border-width: 9px 6px 0 6px;","border-style: solid;","border-color: %BORDER_COLOR% transparent;"],w=["border: 1px solid %BORDER_COLOR%;","box-shadow: 2px 2px 5px %SHADOW_COLOR%;"],x=function(t){var e,n,o,a=[];t=$.extend({},r,t),a.push('<style class="crownix-theme" type="text/css">'),t.toolbarColor&&(n=u(t.toolbarColor),o=u(t.toolbarColor,20),a.push(".crownix-toolbar-gradient {"),a.push(g.join("\n").replace(/%TOP_COLOR%/g,p(n)).replace(/%BOTTOM_COLOR%/g,p(o)).replace(/%IE9_TOP_COLOR%/g,t.toolbarColor).replace(/%IE9_BOTTOM_COLOR%/g,f(o))),a.push("}"),i&&function(t){var e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e*.241+i*i*.691+r*r*.068)}(u(t.toolbarColor))>210&&(a.push(".crownix-toolbar-icon-filter {filter: invert(1)}"),a.push(".crownix-toobar-dropitem-enable:after {"),a.push(v.join("\n").replace(/%BORDER_COLOR%/g,"#212F3C")),a.push("}"))),t.containerColor&&(n=u(t.containerColor,40),o=u(t.containerColor),a.push(".crownix-container-gradient {"),a.push(g.join("\n").replace(/%TOP_COLOR%/g,p(n)).replace(/%BOTTOM_COLOR%/g,p(o)).replace(/%IE9_TOP_COLOR%/g,f(n)).replace(/%IE9_BOTTOM_COLOR%/g,t.containerColor)),a.push("}")),t.toolbarIconColor&&!i&&(a.push(".crownix-toobar-dropitem-enable:after {"),a.push(v.join("\n").replace(/%BORDER_COLOR%/g,t.toolbarIconColor)),a.push("}"),a.push(".crownix-toolbar-icon-color {"),a.push("color: "+t.toolbarIconColor+";"),a.push("stroke: "+t.toolbarIconColor+";"),a.push("fill: "+t.toolbarIconColor+";"),a.push("}"),a.push(".crownix-toolbar-icon-border {"),a.push("border: 1px solid "+p(u(t.toolbarIconColor),.3)+";"),a.push("}"),a.push(".crownix-toolbar-icon-svg {"),a.push("stroke: "+t.toolbarIconColor+";"),a.push("fill: "+t.toolbarIconColor+";"),a.push("}")),t.toolbarEffectColor&&!i&&(e=m.join("\n").replace(/%BORDER_COLOR%/g,p(u(t.toolbarEffectColor),.8)).replace(/%SHADOW_COLOR%/g,p(u(t.toolbarEffectColor),.8)),a.push(".crownix-toolbar-item-enable:hover {"),a.push(e),a.push("}"),a.push(".crownix-toolbar-item-enable-hover {"),a.push(e),a.push("}"),a.push(".crownix-toobar-dropitem-enable:hover {"),a.push(e),a.push("}"),a.push(".crownix-toobar-dropitem-enable-hover {"),a.push(e),a.push("}"),e=m.join("\n").replace(/%BORDER_COLOR%/g,p(u(t.toolbarEffectColor),.5)).replace(/%SHADOW_COLOR%/g,p(u(t.toolbarEffectColor),.3)),a.push(".crownix-toolbar-item-enable:active {"),a.push(e),a.push("}"),a.push(".crownix-toobar-dropitem-enable:active {"),a.push(e),a.push("}")),t.pageBorderColor&&(a.push(".crownix-page {"),a.push(w.join("\n").replace(/%BORDER_COLOR%/g,p(u(t.pageBorderColor))).replace(/%SHADOW_COLOR%/g,p(u(t.pageBorderColor,-50)))),a.push("}")),function(t,e){e.push(".crownix-slide {"),e.push(g.join("\n").replace(/%TOP_COLOR%/g,p(u(t.toolbarColor,40))).replace(/%BOTTOM_COLOR%/g,p(u(t.toolbarColor,60)))),e.push("}"),e.push(".crownix-tab-background {"),e.push(g.join("\n").replace(/%TOP_COLOR%/g,p(u(t.toolbarColor,0))).replace(/%BOTTOM_COLOR%/g,p(u(t.toolbarColor,20)))),e.push("}"),e.push(".crownix-slide-toggle {"),e.push(g.join("\n").replace(/%TOP_COLOR%/g,p(u(t.toolbarColor,0))).replace(/%BOTTOM_COLOR%/g,p(u(t.toolbarColor,20)))),e.push("}"),e.push(".crownix-tab {"),e.push("color:"),e.push(t.toolbarIconColor),e.push("}"),e.push(".crownix-left-arrow:before, .crownix-right-arrow:before {"),e.push("border-color:"),e.push(t.toolbarIconColor),e.push("}")}(t,a),a.push("</style>"),$(".crownix-theme").remove(),$(a.join("\n")).appendTo("head")};t.setTheme=function(t){"string"==typeof t&&(t=t.toUpperCase()),"GRAY"===t?x(r):"WHITE"===t?x(n):"BLACK"===t?x(o):"BLUE"===t?x(a):"ORANGE"===t?x(s):"MINT"===t?x(l):"PINK"===t?x(c):"GREEN"===t?x(d):"SKYBLUE"===t?x(h):"object"==typeof t&&x(t)}}(),m2soft.ns("m2soft.crownix.License"),m2soft.crownix.License=function(){var t=m2soft.crownix.Util,e=function(){this.feature={}};return e.prototype.init=function(e){var i=this;$(t.base64.decode(e)).filter("feature").find("item").each((function(){var t=$(this);i.feature[t.attr("type")]="1"===t.attr("allow")})),$(t.base64.decode(e)).filter("server").find("item").each((function(){var t=$(this);"ShareServer(7)"==t.attr("type")&&"1"===t.attr("allow")&&(i.feature.ShareServer=!0)}))},e.prototype.isAllowedFeature=function(t){return this.feature[t]},e}(),m2soft.ns("m2soft.crownix.Toolbar"),m2soft.crownix.Toolbar=function(){var t,e,i,r,n,o,a,s,l,c,d,h=m2soft.crownix.Resource,u=m2soft.crownix.resource.Icon,f=m2soft.crownix.Util,p={},g=1,m=!1,v=function(){var t=45;o.children().each((function(){$(this).is(":visible")&&(t+=$(this).outerWidth()+5)})),o.css("width",t+"px")},w=function(){0===l.x?a.hide():a.show(),l.x===l.maxScrollX?s.hide():s.show()},x=function(i){var r,n=e.find("#crownix-toolbar-"+i);p[i]||"item"===t[i].type?(n.removeClass("crownix-toolbar-item-disable").addClass("crownix-toolbar-item-enable"),(r=p[i]?p[i].handler:t[i].handler)&&n.off().on("click tab",r)):"drop-item"===t[i].type&&n.removeClass("crownix-toobar-dropitem-disable").addClass("crownix-toobar-dropitem-enable")},b=function(i){var r=e.find("#crownix-toolbar-"+i);p[i]||"item"===t[i].type?r.removeClass("crownix-toolbar-item-enable").addClass("crownix-toolbar-item-disable").off():"drop-item"===t[i].type&&r.removeClass("crownix-toobar-dropitem-enable").addClass("crownix-toobar-dropitem-disable")},y=function(t,e){var i=$("<button>").attr({type:"button",title:e.title}).addClass("crownix-toolbar-button");n.enableToolbarNavigator&&i.focusin((function(){c.isFormEditMode||r.addClass("crownix-toolbar-item-enable-hover")})).focusout((function(){c.isFormEditMode||r.removeClass("crownix-toolbar-item-enable-hover")}));var r=$("<li>").attr({id:"crownix-toolbar-"+t,title:e.title}).addClass("crownix-toolbar-item").bind("click tab",e.handler);return f.browser.safari||r.addClass("crownix-toolbar-button-zindex"),e.svg?$(e.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").appendTo(i):e.img?$("<img>").attr("src",e.img).appendTo(i):e.text&&$("<div>").text(e.text).addClass("crownix-toolbar-icon-color").appendTo(i),i.appendTo(r),r},k=function(t,e){var i=$("<li>").attr("id","crownix-toolbar-"+t).addClass("crownix-toobar-dropitem").addClass("crownix-toolbar-icon-border").attr("title",e.title);f.browser.safari||i.addClass("crownix-toolbar-button-zindex"),i.bind("click tab",(function(t){return $('.crownix-toobar-dropitem[id!="'+$(this).attr("id")+'"]').removeClass("active"),$(this).toggleClass("active"),!1}));var r=$("<button>").attr({type:"button",title:e.title}).addClass("crownix-toolbar-button");if(n.enableToolbarNavigator&&r.focusin((function(){c.isFormEditMode||i.addClass("crownix-toolbar-item-enable-hover")})).focusout((function(){c.isFormEditMode||i.removeClass("crownix-toolbar-item-enable-hover")})),e.text){var o=$("<div>").addClass("crownix-toolbar-icon-color").appendTo(i);r.appendTo(o)}if(e.svg){var a=r.appendTo(i);$(e.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").appendTo(a)}else if(e.img){a=r.appendTo(i);$("<img/>").attr("src",e.img).appendTo(a)}var s=$("<ul>").addClass("dropdown").appendTo(i);for(var l in e.items){var d=e.items[l],h=$("<li>").attr("id","crownix-toolbar-"+l).bind("click tab",d.handler).appendTo(s);a=$("<button>").attr({type:"button",title:d.title}).addClass("crownix-toolbar-button").appendTo(h);n.enableToolbarNavigator&&a.focusin((function(){c.isFormEditMode||$(this).addClass("crownix-toolbar-dropitem-enable-focus")})).focusout((function(){c.isFormEditMode||$(this).removeClass("crownix-toolbar-dropitem-enable-focus")})),d.text&&(a.text(d.text),a.attr("title",d.text)),d.svg?$(d.svg).prependTo(a).attr("focusable","false"):d.img&&$("<img/>").attr("src",d.img).prependTo(a),!0!==d.visible&&h.css("display","none")}return i},_=function(p,m,x,b){r=m,n=x,c=b,function(c){var p,m;for(var x in t={close:{type:"item",svg:u.CLOSE_OVERLAY,title:h.get("close_overlay"),visible:!1,handler:function(){$(".crownix-close-button").click()},separator:!0},first:{type:"item",svg:u.FIRST_PAGE,title:h.get("first_page"),visible:!0,handler:function(){r.moveFirstPage()}},prev:{type:"item",svg:u.PREV_PAGE,title:h.get("pre_page"),visible:!0,handler:function(t){r.prevPage()}},next:{type:"item",svg:u.NEXT_PAGE,title:h.get("next_page"),visible:!0,handler:function(){r.nextPage()}},last:{type:"item",svg:u.LAST_PAGE,title:h.get("last_page"),visible:!0,handler:function(){r.moveLastPage()},separator:!0},move:{type:"item",svg:u.MOVE_PAGE,title:h.get("move_page"),visible:!0,handler:function(){r.showMovePageDialog()},separator:!0},prevDoc:{type:"item",svg:u.PREV_DOC,title:h.get("prev_doc"),visible:!1,handler:function(){r.prevDoc()}},nextDoc:{type:"item",svg:u.NEXT_DOC,title:h.get("next_doc"),visible:!1,handler:function(){r.nextDoc()},separator:!0},zoomin:{type:"item",svg:u.ZOOM_IN,title:h.get("zoom_in"),visible:!0,handler:function(){var t=r.zoomIn();$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(100*t)+"%")}},zoomout:{type:"item",svg:u.ZOOM_OUT,title:h.get("zoom_out"),visible:!0,handler:function(){var t=r.zoomOut();$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(100*t)+"%")}},ratio:{type:"drop-item",text:"100%",title:h.get("ratio"),visible:!0,items:{25:{type:"item",text:"25%",visible:!0,handler:function(){r.zoom(.25),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},50:{type:"item",text:"50%",visible:!0,handler:function(){r.zoom(.5),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},75:{type:"item",text:"75%",visible:!0,handler:function(){r.zoom(.75),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},100:{type:"item",text:"100%",visible:!0,handler:function(){r.zoom(1),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},125:{type:"item",text:"125%",visible:!0,handler:function(){r.zoom(1.25),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},150:{type:"item",text:"150%",visible:!0,handler:function(){r.zoom(1.5),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},200:{type:"item",text:"200%",visible:!0,handler:function(){r.zoom(2),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},250:{type:"item",text:"250%",visible:!0,handler:function(){r.zoom(2.5),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}},width:{type:"item",text:h.get("fit_width"),visible:!0,handler:function(){var t=n.getWidthFitRatio();r.zoom(t),setTimeout((function(){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(u.FIT_WIDTH).attr("focusable","false")),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}),0)}},height:{type:"item",text:h.get("fit_height"),visible:!0,handler:function(){var t=n.getHeightFitRatio();r.zoom(t),setTimeout((function(){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(u.FIT_HEIGHT).attr("focusable","false")),$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()}),0)}}},separator:!0},save:{type:"drop-item",svg:u.SAVE,title:h.get("save"),visible:!0,items:{pdf:{type:"item",text:"PDF",title:h.get("save_pdf"),svg:u.PDF,visible:!0,handler:function(){r.downloadFile("pdf")}},doc:{type:"item",text:"DOC",title:h.get("save_word"),svg:u.DOC,visible:!0,handler:function(){r.downloadFile("doc")}},xls:{type:"item",text:"XLS",title:h.get("save_excel"),svg:u.XLS,visible:!0,handler:function(){r.downloadFile("xls")}},ppt:{type:"item",text:"PPT",title:h.get("save_ppt"),svg:u.PPT,visible:!0,handler:function(){r.downloadFile("ppt")}},hwp:{type:"item",text:"HWP",title:h.get("save_hwp"),svg:u.HWP,visible:!0,handler:function(){r.downloadFile("hwp")}},txt:{type:"item",text:"TXT",title:h.get("save_txt"),svg:u.TXT,visible:!1,handler:function(){r.downloadFile("txt")}}}},storage:{type:"drop-item",svg:u.STORAGE,title:h.get("storage_report"),visible:!1,items:{"storage-mml":{type:"item",text:h.get("storage_report"),title:h.get("storage_report"),visible:!0,handler:function(){r.showMMLStorageDialog()}},"storage-formdata":{type:"item",text:h.get("storage_formdata"),title:h.get("storage_formdata"),visible:!1,handler:function(){r.showFormDataStorageDialog()}}},separator:!0},print:{type:"item",svg:u.PRINT,title:h.get("print"),visible:!!f.browser.edge,handler:function(){r.print({isServerSide:!1})}},cloud_print:{type:"item",svg:u.CLOUD_PRINT,title:h.get("cloud_print"),visible:!1,handler:function(t){r.cloudPrint({gadget:d})}},print_pdf:{type:"item",svg:u.PRINT_PDF,title:h.get("print_pdf"),visible:!f.browser.edge,handler:function(){r.print({isServerSide:!0})},separator:!0},inquery:{type:"item",svg:u.INQUERY,title:h.get("inquery"),visible:!0,handler:function(){r.showInqueryDialog()},separator:!0},cancel:{type:"item",svg:u.CANCEL,title:h.get("cancel_report"),visible:!0,handler:function(){r.cancel()}},share:{type:"item",svg:u.SHARE_CONNECT,title:h.get("do_share"),visible:!!n.share,handler:function(){r.showShareDialog()}}},i=$("<div>").addClass("crownix-toolbar-warp").appendTo(c),g=n.scale,isNaN(g)?g=1:g<.5?g=.5:g>2&&(g=2),1!=g&&i.css("zoom",g),e=$("<div>").attr("id","crownix-toolbar").addClass("crownix-toolbar-gradient").appendTo(i),o=$("<ul>").attr("id","#crownix-toolbar-menu").appendTo(e),t)"item"===(p=t[x]).type?m=y(x,p):"drop-item"===p.type&&(m=k(x,p)),!0!==p.visible&&m.css("display","none"),m.appendTo(o),!0===p.separator&&$("<div>").addClass("crownix-toolbar-separator").css({display:p.visible?"block":"none"}).appendTo(o),d||"undefined"==typeof cloudprint||"cloud_print"!=x||(d=new cloudprint.Gadget);var b=$(u.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-svg");a=$("<span>").addClass("crownix-toolbar-mark").addClass("crownix-toolbar-gradient").css({left:"0px"}).append(b).appendTo(i);var C=$(u.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-svg");s=$("<span>").addClass("crownix-toolbar-mark").addClass("crownix-toolbar-gradient").css({right:"0px"}).append(C).appendTo(i),v();var T={useTransition:!0,scrollX:!0,interactiveScrollbars:!0,click:f.browser.mobile,disableMouse:!0,HWCompositing:!1};(f.browser.android||f.browser.ios)&&(T.disablePointer=!0,T.disableTouch=!1),(l=new IScroll("#crownix-toolbar",T)).on("refresh",(function(){w()})),l.on("scrollEnd",(function(){w()})),w(),a.bind("click",(function(){var t=l.x+2*e.width()/3;t>0?l.scrollTo(0,0,1e3):l.scrollTo(t,0,1e3)})),s.bind("click",(function(){var t=l.x-2*e.width()/3;t<l.maxScrollX?l.scrollTo(l.maxScrollX,0,1e3):l.scrollTo(t,0,1e3)})),f.browser.mobile&&_.prototype.hideToolbarItem(["print","print_pdf"]),$(c).bind("click tab",(function(t){$(".crownix-toobar-dropitem").removeClass("active")}))}(p)};return _.prototype={hideToolbar:function(){i.css("display","none"),m=!0},showToolbar:function(){i.css("display","block"),v(),m=!1},isHideToolbar:function(){return m},hideToolbarItem:function(i){for(var r=0,n=i.length;r<n;r++)if(e.find("#crownix-toolbar-"+i[r]).css("display","none"),o=t[i[r]]||p[i[r]])o.visible=!1;else for(var o in t)t[o].items&&t[o].items[i[r]]&&(t[o].items[i[r]].visible=!1);e.find(".crownix-toolbar-separator").each((function(){var t=$(this),e=t.prevAll().filter(":visible"),i=t.nextAll().filter(":visible");(0==e.length||0==i.length||$(e[0]).attr("class").indexOf("crownix-toolbar-separator")>=0||$(i[0]).attr("class").indexOf("crownix-toolbar-separator")>=0)&&$(this).css("display","none")})),v(),l.refresh(),w()},showToolbarItem:function(i){for(var r=0,n=i.length;r<n;r++)if(e.find("#crownix-toolbar-"+i[r]).css("display","list-item"),o=t[i[r]]||p[i[r]])o.visible=!0;else for(var o in t)t[o].items&&t[o].items[i[r]]&&(t[o].items[i[r]].visible=!0);e.find(".crownix-toolbar-separator").each((function(){var t=$(this),e=t.prevAll().filter(":visible"),i=t.nextAll().filter(":visible");0!=e.length&&0!=i.length&&$(e[0]).attr("class").indexOf("crownix-toolbar-separator")<0&&$(i[0]).attr("class").indexOf("crownix-toolbar-separator")<0&&$(this).css("display","block")})),v(),l.refresh(),w()},addToolbarItem:function(t){if(e.find("#crownix-toolbar-"+t.id).length>0)throw Error("[Crownix Viewer] could not add item (duplicate id: "+t.id+")");t.type="item",t.visible=!0,p[t.id]=t;var i=y(t.id,t).addClass("crownix-toolbar-item-enable"),r=$(o.children("li:visible"));t.index<0?o.prepend(i):isNaN(t.index)||t.index>r.length?o.append(i):$(r.get(t.index-1)).before(i),!0===t.separator&&i.after($("<div>").addClass("crownix-toolbar-separator")),v(),l.refresh(),w()},disableToolbarItem:function(e){for(var i=0,r=e.length;i<r;i++)(t[e[i]]||p[e[i]])&&b(e[i])},enableToolbarItem:function(e){for(var i=0,r=e.length;i<r;i++)(t[e[i]]||p[e[i]])&&x(e[i])},disableAllItems:function(){for(var e in t)b(e)},toggleShareButton:function(e){var i=t.share,n=$("#crownix-toolbar-share"),o=$('button[title="'+i.title+'"]');n.off("click tab",i.handler),o.children().remove(),e?(n.attr("title",h.get("do_disconnect")),o.attr("title",h.get("do_disconnect")),i.title=h.get("do_disconnect"),i.svg=u.SHARE_DISCONNECT,i.handler=function(){r.shareDisconnect()}):(n.attr("title",h.get("do_share")),o.attr("title",h.get("do_share")),i.title=h.get("do_share"),i.svg=u.SHARE_CONNECT,i.handler=function(){r.showShareDialog()}),n.bind("click tab",i.handler),$(i.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").css("display","none").appendTo(o).fadeIn(500)},getHeight:function(){return e.outerHeight()*g},getToolbarItemInfo:function(){var e,i=[];for(var r in t)t[r].visible&&i.push(r);for(var r in p)(e=p[r].index)<0?i.unshift(r):isNaN(e)||e>$(o.children("li:visible")).length?i.push(r):i.splice(e-1,0,r);return{items:$.extend({},t,p),menu:i}},isEnableItem:function(e){var i,r=$("#crownix-toolbar-"+e),n=t[e]||p[e];return n&&(i="item"===n.type?"crownix-toolbar-item-enable":"crownix-toobar-dropitem-enable"),r&&i&&r.hasClass(i)}},_}(),m2soft.ns("m2soft.crownix.Ajax"),m2soft.crownix.Ajax=function(){var t,e,i=m2soft.crownix.Util,r=m2soft.crownix.Message,n=m2soft.crownix.Resource,o=i.browser.msie&&8==i.browser.version,a=i.browser.msie&&9==i.browser.version,s=o?new XDomainRequest:new XMLHttpRequest,l="POST",c=!0,d={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},h=3e4,u=!1,f=m2soft.crownix.Ajax.debug;"withCredentials"in s&&m2soft.crownix.Ajax.withCredentials&&(s.withCredentials=!0);this.setHandler=function(e){t=e},this.invoke=function(p,g){if("string"!=typeof p)throw new Error("invalid url: "+p);if("object"==typeof g&&(g=function(t){if(window.FormData&&t instanceof window.FormData)return t;var e=[];for(var i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}(g)),u=!1,f&&(r.log("[Ajax] url="+p),r.log("[Ajax] parmeters="+g),r.log("[Ajax] method="+l),r.log("[Ajax] async="+c)),o)s.onload=function(){t.done(s)};else{var m=null;s.onreadystatechange=function(){var n,o,a,l=s.readyState;if(1===l)f&&r.log("[Ajax][State 1] OPEND"),e||(e=setTimeout((function(){u=!0,s.abort("connect timeout"),"function"==typeof t.timeout&&t.timeout("connet timeout")}),h));else if(2===l)clearTimeout(e),f&&r.log("[Ajax][State 2] HEADER_RECEIVED");else if(3===l){if(clearTimeout(e),f&&(i.browser.msie&&i.browser.version<10?r.log("[Ajax][State 3] LOADING"):r.log("[Ajax][State 3] LOADING (status: "+s.status+", statusText: "+s.statusText+")")),"function"==typeof t.load){if(i.browser.msie&&i.browser.version<10)return;m||(m=setTimeout((function(){t.load(s),clearTimeout(m),m=null}),300))}}else if(4===l){if(clearTimeout(e),clearTimeout(m),u)return;n=s.status,o=s.statusText,a=s.responseText,f&&r.log("[Ajax][State 4] DONE (status: "+n+", statusText: "+o+", data length: "+a.length+")"),n>=200&&n<300||304===n?"function"==typeof t.done&&t.done(s):u||t.error(s)}}}try{s.open(l,"GET"===l?p+"?"+g:p,c)}catch(e){return r.log("[Crownix][Ajax] "+e.toString()),void(a?t.error(s,n.get("cross_origin_ie9_error")):t.error(s))}if(!o)for(var v in d)"Content-Type"===v&&null===d[v]||s.setRequestHeader(v,d[v]);s.send("GET"===l?null:g)},this.setMethod=function(t){"GET"!==t&&"POST"!==t||(l=t)},this.getMethod=function(){return l},this.setAsync=function(t){"boolean"==typeof sync&&(c=t)},this.getAsync=function(){return c},this.abort=function(){u=!0,"function"==typeof t.abort&&t.abort(),s.abort()},this.getResponseHeader=function(){return s.getResponseHeader()},this.setRequestHeader=function(t,e){d[t]=e},this.setConnectTimeout=function(t){h=1e3*t}},m2soft.ns("m2soft.crownix.Font"),m2soft.crownix.Font=function(){var t="",e=function(e,i){var r,n=$("<style/>").attr("type","text/css").attr("id",e),o="@font-face {font-family:'"+e+"';src:"+(r=i,(navigator.userAgent.toLowerCase().indexOf("android")>-1?"":'local("'+r+'"),')+'url("'+t+r+'.woff") format("woff"), url("'+t+r+'.ttf") format("truetype")}');0==$("#"+e).length&&(n.text(o),n.appendTo("head"))},i=function(t,e){var i={position:"absolute",top:"-999px",left:"-999px","font-size":"300px",width:"auto",height:"auto","line-height":"normal",margin:0,padding:0,"font-variant":"normal","font-family":"'"+t+"',"+e};return $("<span>").text("BEiwyaY").css(i).appendTo("body")},r=function(){return(new Date).getTime()},n=function(t,e){this.fontFamily=n.FONT_FAMILY_PREFIX+t,this.fontName=e,this.fontId=t,this.requestedFontA=i(this.fontFamily,"arial,'URW Gothic L',sans-serif"),this.requestedFontB=i(this.fontFamily,"Georgia,'Century Schoolbook L',serif"),this.originalSizeA=this.requestedFontA.width(),this.originalSizeB=this.requestedFontB.width()};return n.FONT_FAMILY_PREFIX="crownix-font-",n.prototype={fontFamily:"",fontName:"",fontId:"",originalSizeA:0,originalSizeB:0,requestedFontA:null,requestedFontB:null,load:function(){e(this.fontFamily,this.fontName),this.check()},finish:function(t){clearInterval(t)},setFontURL:function(e){t=e},check:function(){var t=this,e=r();if(t.requestedFontA.width()!=t.requestedFontB.width())var i=setInterval((function(){var n=t.requestedFontA.width(),o=t.requestedFontB.width();n==t.originalSizeA&&o==t.originalSizeB||n!=o?r()-e>=5e3&&t.finish(i):t.finish(i)}),75);else this.finish(null)}},n}(),m2soft.ns("m2soft.crownix.ImageLoader"),m2soft.crownix.ImageLoader=function(){var t,e=m2soft.crownix.Util,i=[],r=0,n=!1,o=function(){if(!n){for(var e=0,r=i.length;e<r;e++)if(!i[e].isLoaded())return;n=!0,t()}},a=function(t){var i,r=t;this.load=function(){(i=new Image).onload=o,i.onabort=o,i.onerror=o,i.src=r},this.getImage=function(){return i},this.isLoaded=function(){return e.browser.msie?i:i&&i.complete}},s=function(t){var e=t;this.load=function(){e.complete&&o(),e.onload=o,e.onabort=o,e.onerror=o},this.getImage=function(){return e},this.isLoaded=function(){return e.complete}};this.loadImage=function(e,r,n){t=n,e.find("IM").each((function(){var t,e=$(this),n=e.attr("id");t=n?new s(r[n]):new a(e.attr("dt")),i.push(t)}));for(var o=0,l=i.length;o<l;o++)i[o].load();0==i.length&&t()},this.nextImage=function(){return i[r++].getImage()}},m2soft.ns("m2soft.crownix.Canvas"),m2soft.crownix.Canvas=function(t,e){var i=m2soft.crownix.util.Unit,r=t,n=r.getContext("2d"),o="function"==typeof n.setLineDash,a=[2,2],s=[2,2],l=[10,2,2,2],c=[10,2,2,2,2,2],d={pattern1:function(t,e){return img=document.createElement("canvas"),img.width=1,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,3,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(0,-.5),imgCtx.lineTo(0,.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern2:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=1,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,3),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(-.5,0),imgCtx.lineTo(.5,0),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern3:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(4.5,-.5),imgCtx.lineTo(-.5,4.5),imgCtx.moveTo(8.5,3.5),imgCtx.lineTo(3.5,8.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern4:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(-.5,4.5),imgCtx.lineTo(4.5,-.5),imgCtx.moveTo(3.5,8.5),imgCtx.lineTo(8.5,3.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern5:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(.5,9),imgCtx.lineTo(.5,.5),imgCtx.lineTo(9,.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern6:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(-1,-1),imgCtx.lineTo(9,9),imgCtx.moveTo(-1,9),imgCtx.lineTo(9,-1),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern7:function(t,e){return img=document.createElement("canvas"),img.width=8,img.height=8,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,10,10),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(4.5,-.5),imgCtx.lineTo(4.5,.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern8:function(t,e){return img=document.createElement("canvas"),img.width=4,img.height=4,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,6,6),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(.5,-.5),imgCtx.lineTo(.5,.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern9:function(t,e){return img=document.createElement("canvas"),img.width=4,img.height=2,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,6,4),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(3.5,-.5),imgCtx.lineTo(3.5,.5),imgCtx.stroke(),n.createPattern(img,"repeat")},pattern10:function(t,e){return img=document.createElement("canvas"),img.width=2,img.height=2,imgCtx=img.getContext("2d"),imgCtx.fillStyle=e||"#fff",imgCtx.fillRect(-1,-1,4,4),imgCtx.strokeStyle=t||"#000",imgCtx.strokeWidth=1,imgCtx.moveTo(.5,-.5),imgCtx.lineTo(.5,.5),imgCtx.stroke(),n.createPattern(img,"repeat")}},h=function(t,e,i,r){n.lineCap="butt",n.beginPath(),n.moveTo(t,e),n.lineTo(i,r)},u=function(t,e,i,r,o,a){var s=t,l=e,c=0,d=!0,h=0,u=Math.atan2(r-e,i-t),f=t<i,p=e<r;for(n.lineCap="round",n.beginPath(),n.moveTo(t,e);f?i>s:i<s||p?r>l:r<l;)h=a[c]*o,s=f?Math.min(s+Math.cos(u)*h,i):Math.max(s+Math.cos(u)*h,i),l=p?Math.min(l+Math.sin(u)*h,r):Math.max(l+Math.sin(u)*h,r),d?n.lineTo(s,l):n.moveTo(s,l),c=(c+1)%a.length,d=!d;n.closePath()},f=function(t,e){n.beginPath(),n.moveTo(t[0][0],t[0][1]);for(var i=1,r=t.length;i<r;i++)n.lineTo(t[i][0],t[i][1]);e&&n.closePath()},p=function(t,e,i,r){var a=r.ap,s=r.lc,l=r.wd,c=r.at,d=8*(1+l/5)*r.as,h=1==c?d/Math.sqrt(3):d/3;0!=l&&0!=a&&(n.save(),n.translate(t,e),n.rotate(i),n.lineJoin="miter",n.globalAlpha=1,n.strokeStyle=s,n.lineWidth=l,o&&n.setLineDash([]),n.beginPath(),1==a||2==a||3==a?(n.moveTo(d,-h),n.lineTo(0,0),n.lineTo(d,h),n.lineCap="round",n.stroke()):(n.moveTo(0,0),n.lineTo(d,-h),n.lineTo(d,h),n.lineTo(0,0),n.closePath(),n.fillStyle=4==a||5==a||6==a?"#FFFFFF":n.strokeStyle,n.fill(),n.stroke()),n.restore())},g=function(t,e){if(t){var i=t.fc,r=t.pt,o=t.al;n.save(),n.fillStyle=0!==r?d["pattern"+r](e.lc,i):i,n.globalCompositeOperation="source-over",n.globalAlpha=o,n.fill(),n.restore()}},m=function(t){if(t){var e=t.lc,i=t.wd,r=t.al;if(0!=i){var d=[],h=[];if(n.save(),o){1==t.st?d=a:2==t.st?d=s:3==t.st?d=l:4==t.st&&(d=c);for(var u=0,f=d.length;u<f;u++)h[u]=d[u]*i;n.setLineDash(h)}n.lineCap="round",n.lineJoin="round",n.strokeStyle=e,n.lineWidth=i,n.globalAlpha=r,n.stroke(),n.restore()}}};this.setClip=function(t){"1"===t?(n.save(),n.clip()):"2"===t&&n.restore()},this.drawLine=function(t,e,i,r,n){o||0==n.st?h(t,e,i,r):1==n.st?u(t,e,i,r,n.wd,a):2==n.st?u(t,e,i,r,n.wd,s):3==n.st?u(t,e,i,r,n.wd,l):4==n.st?u(t,e,i,r,n.wd,c):h(t,e,i,r),m(n);var d=n.ap;1!=d&&3!=d&&4!=d&&6!=d&&7!=d&&9!=d||p(t,e,Math.atan2(e-r,t-i)+Math.PI,n),2!=d&&3!=d&&5!=d&&6!=d&&8!=d&&9!=d||p(i,r,Math.atan2(r-e,i-t)+Math.PI,n)},this.drawScribble=function(t,e){var i,r,o=[];n.beginPath(),n.moveTo(e[0][0],e[0][1]);for(var a=0,s=e.length-1;a<s;a++)i=e[a],r=e[a+1],o[0]=(i[0]+r[0])/2,o[1]=(i[1]+r[1])/2,0==a?n.lineTo(o[0],o[1]):n.quadraticCurveTo(i[0],i[1],o[0],o[1]),a==s-1&&n.lineTo(r[0],r[1]);m(t)},this.drawRect=function(t,e,i,r,o,a,s,l,c){"number"==typeof s&&"number"==typeof l?(n.beginPath(),n.moveTo(t,e+l),n.lineTo(t,r-l),c?(4&c?n.quadraticCurveTo(t,r,t+s,r):n.lineTo(t,r),n.lineTo(i-s,r),8&c?n.quadraticCurveTo(i,r,i,r-l):n.lineTo(i,r),n.lineTo(i,e+l),2&c?n.quadraticCurveTo(i,e,i-s,e):n.lineTo(i,e),n.lineTo(t+s,e),1&c?n.quadraticCurveTo(t,e,t,e+l):n.lineTo(t,e)):(n.quadraticCurveTo(t,r,t+s,r),n.lineTo(i-s,r),n.quadraticCurveTo(i,r,i,r-l),n.lineTo(i,e+l),n.quadraticCurveTo(i,e,i-s,e),n.lineTo(t+s,e),n.quadraticCurveTo(t,e,t,e+l)),n.closePath()):(n.beginPath(),n.moveTo(t,e),n.lineTo(i,e),n.lineTo(i,r),n.lineTo(t,r),n.lineTo(t,e),n.closePath()),g(a,o),m(o)},this.drawCylinder=function(t,e,i,r,o,a,s){var l,c=i-t,d=r-e,h=(d-s)/c;n.save(),n.translate(t,e),n.scale(1,h),l=c/2,n.beginPath(),n.arc(l,l,l,0,2*Math.PI,!1),n.lineTo(2*l,d/h-l),n.arc(l,d/h-l,l,0,Math.PI,!1),n.lineTo(0,l),n.restore(),g(a,o),m(o)},this.drawCurve=function(t,e,i,r,o,a,s,l,c){n.beginPath(),"number"==typeof l&&"number"==typeof c?(n.moveTo(t,e),n.bezierCurveTo(a,s,l,c,i,r)):(n.moveTo(t,e),n.quadraticCurveTo(a,s,i,r)),m(o);var d=o.ap;1!=d&&3!=d&&4!=d&&6!=d&&7!=d&&9!=d||p(t,e,Math.atan2(e-s,t-a)+Math.PI,o),2!=d&&3!=d&&5!=d&&6!=d&&8!=d&&9!=d||p(i,r,Math.atan2(r-c,i-l)+Math.PI,o)},this.drawEllipse=function(t,e,i,r,o,a){var s,l=i-t,c=r-e;n.save(),n.translate(t+l/2,e+c/2),l>c?(n.scale(1,c/l),s=l/2):(n.scale(l/c,1),s=c/2),n.beginPath(),n.arc(0,0,s,0,2*Math.PI,!1),n.restore(),g(a,o),m(o)},this.drawDiamond=function(t,e,i,r,o,a){n.beginPath(),n.moveTo((t+i)/2,e),n.lineTo(i,(e+r)/2),n.lineTo((t+i)/2,r),n.lineTo(t,(e+r)/2),n.lineTo((t+i)/2,e),n.closePath(),g(a,o),m(o)},this.drawParallelogram=function(t,e,i,r,o,a,s){var l=[t,r],c=[i+t-(s=t+s),r],d=[i,e],h=[s,e];n.beginPath(),n.moveTo(l[0],l[1]),n.lineTo(c[0],c[1]),n.lineTo(d[0],d[1]),n.lineTo(h[0],h[1]),n.lineTo(l[0],l[1]),n.closePath(),g(a,o),m(o)},this.drawPolygon=function(t,e,i){f(i,!0),g(e,t),m(t)},this.drawPolyLine=function(t,e){f(e,!1),m(t);var i=t.ap;1!=i&&3!=i&&4!=i&&6!=i&&7!=i&&9!=i||p(e[0][0],e[0][1],Math.atan2(e[0][1]-e[1][1],e[0][0]-e[1][0])+Math.PI,t),2!=i&&3!=i&&5!=i&&6!=i&&8!=i&&9!=i||p(e[e.length-1][0],e[e.length-1][1],Math.atan2(e[e.length-1][1]-e[e.length-2][1],e[e.length-1][0]-e[e.length-2][0])+Math.PI,t)},this.drawHexaheron=function(t,e,i,r,o,a,s,l){var c=[t,r],d=[t,a=e+a],h=[t+i-(o=t+o),e],u=[i,e],f=[i,r+e-a],p=[o,r];n.beginPath(),n.moveTo(c[0],c[1]),n.lineTo(d[0],d[1]),n.lineTo(h[0],h[1]),n.lineTo(u[0],u[1]),n.lineTo(f[0],f[1]),n.lineTo(p[0],p[1]),n.lineTo(c[0],c[1]),n.closePath(),g(l,s),m(s),n.beginPath(),n.moveTo(p[0],p[1]),n.lineTo(o,a),n.lineTo(u[0],u[1]),n.moveTo(o,a),n.lineTo(d[0],d[1]),m(s)},this.drawImage=function(t,e,i,r,o,a){"1"==a?(n.save(),n.translate(e,i),n.fillStyle=n.createPattern(t,"repeat"),n.fillRect(0,0,r,o),n.restore()):t.naturalWidth+t.naturalHeight>0&&n.drawImage(t,e,i,r,o)},this.measureText=function(t,e){if("object"==typeof e){var i=[e.fontStyle,e.fontWeight,e.fontSize,e.fontFamily];n.font=i.join(" ")}return n.measureText(t)};var v=function(t){return Math.floor(t)+.5};this.drawText=function(t,e,r,o,a,s){if(t&&"string"==typeof t){if(n.save(),"object"==typeof s){var l=[s.fontStyle,s.fontWeight,s.fontSize,s.fontFamily];n.font=l.join(" "),n.textBaseline=s.textBaseline,n.textAlign=s.textAlign,n.fillStyle=n.strokeStyle=s.fillStyle}var c,d,h,u,f="number"==typeof s.letterSpacing?s.letterSpacing:0,p=n.measureText(t).width+f*t.length,g=i.ptToPx(parseFloat(s.fontSize));"left"===s.textAlign?c=h=e:"center"===s.textAlign?h=(c=e+(o-e)/2)-(p-f)/2:"right"===s.textAlign&&(h=(c=o)-p),"top"===s.textBaseline?d=u=r:"middle"===s.textBaseline?u=(d=r+(a-r)/2)-g/2:"bottom"===s.textBaseline&&(u=(d=a)-g),n.beginPath(),n.rect(e-1,r-1,o-e+2,a-r+2),n.clip(),s.shade&&(n.fillStyle=n.strokeStyle="#000000",n.fillRect(v(h),v(u),v(p)+1,v(g)),n.fillStyle=n.strokeStyle="#000000"===s.fillStyle?"#ffffff":s.fillStyle),0!==f?function(t,e,i,r,o){var a,s=t.split(""),l=e,c=1;"right"===n.textAlign?(s=s.reverse(),c=-1,l-=r):"center"===n.textAlign&&(l=e-(o-r)/2,n.textAlign="left");for(var d=0,h=s.length;d<h;d++)a=s[d],n.fillText(a,l,i),l+=c*(n.measureText(a).width+r)}(t,c,d,s.letterSpacing,p):n.fillText(t,c,d),n.closePath(),s.underLine&&(n.beginPath(),n.moveTo(h,v(u+g)),n.lineTo(h+p,v(u+g)),n.stroke(),n.closePath()),s.lineThrough&&(n.beginPath(),n.moveTo(h,v(u+g/2)),n.lineTo(h+p,v(u+g/2)),n.stroke(),n.closePath()),n.restore()}},this.wrapText=function(t,e,r,o,a,s){var l=e,c=r,d=o-e;if(n.save(),"object"==typeof s){var h=[s.fontStyle,s.fontWeight,s.fontSize,s.fontFamily];n.font=h.join(" "),n.fillStyle=n.strokeStyle=s.fillStyle}var u=1.2*i.ptToPx(parseInt(s.fontSize,10));n.textBaseline="top",n.textAlign="left",n.beginPath(),n.rect(e-1,r-1,o-e+1,a-r+1),n.clip(),n.closePath();for(var f=t.split("\n"),p=0,g=f.length;p<g;p++){var m=f[p],v=m.length,w=0;if(0!=v)for(;w<v;){for(var x=1;!(w+x>v);){if(n.measureText(m.substring(w,w+x)).width>d){x--;break}x++}this.drawText(m.substring(w,w+x),l,c,o,a,s),c+=u,w+=x}else c+=u}n.restore()},this.toDataURL=function(t){return r.toDataURL(t)},this.setOffset=function(t){n.translate(t.x,t.y)},this.clear=function(){n.fillStyle="#FFFFFF",n.fillRect(0,0,r.width,r.height)},this.fillRect=function(t,e,i,r,o){n.fillStyle=o,n.fillRect(t,e,i-t,r-e)}},m2soft.ns("m2soft.crownix.ColorPicker"),m2soft.crownix.ColorPicker=function(){var t,e,i,r,n=m2soft.crownix.Resource,o={width:2,color:"000000",transparency:0},a={width:10,color:"FFFF00",transparency:50},s={kind:"pen",attribute:o},l=function(l,c){t=l,i=c,function(){(e=$("<div>").addClass("crownix-overlay").css({display:"none",position:"absolute","z-index":9}).appendTo(t))[0].addEventListener("touchstart",(function(t){t.preventDefault()}));var l=$("<div>").attr("id","crownix-note-pen-attribute").css("display","none").addClass("crownix-note-pen-attribute").appendTo(t),c=$("<div>").attr("id","crownix-note-pen-width").appendTo(l);$("<label>",{for:"crownix-note-pen-width-slider",text:n.get("pen_size")}).appendTo(c),$("<div>").attr("id","crownix-note-pen-width-slider").addClass("pen-slider").appendTo(c),$("<input>",{type:"number",id:"crownix-note-pen-width-val"}).addClass("slider-value").appendTo(c);var d=$("<div>").attr("id","crownix-note-pen-color").appendTo(l);$("<label>",{for:"colorPicker_palette",text:n.get("color")}).appendTo(d),function(t,e){for(var i=0;i<t.length;i++)$("<div>").addClass("colorPicker-swatch").attr("id",t[i]).attr({style:"background-color: #"+t[i]+";"}).appendTo(e)}(["000000","808080","C0C0C0","FFFFFF","FFFF00","00FF00","00FFFF","FF00FF","FF0000","008000","0000FF","000080","800000","808000","008080","800080"],$("<div>").attr("id","colorPicker_palette").addClass("colorPicker_palette").appendTo(d));var h=$("<div>").attr("id","crownix-note-pen-transparency").appendTo(l);$("<label>",{for:"crownix-note-pen-transparency-slider",text:n.get("pen_transparency")}).appendTo(h),$("<div>").attr("id","crownix-note-pen-transparency-slider").addClass("pen-slider").appendTo(h),$("<input>",{type:"number",id:"crownix-note-pen-transparency-val"}).addClass("slider-value").appendTo(h);var u=$("<div>").attr("id","crownix-note-pen-button").appendTo(l);$("<button>",{text:n.get("ok_button_text"),value:"ok"}).bind("click",(function(){"pen"===r?(o.width=$("#crownix-note-pen-width-slider").val(),o.transparency=$("#crownix-note-pen-transparency-slider").val(),o.color=$(".color-selected").attr("id"),s.kind=r,s.attribute=o):(a.width=$("#crownix-note-pen-width-slider").val(),a.transparency=$("#crownix-note-pen-transparency-slider").val(),a.color=$(".color-selected").attr("id"),s.kind=r,s.attribute=a),i(s),$("#crownix-note-pen-attribute").fadeOut(),e.fadeOut()})).appendTo(u),$("<button>",{text:n.get("cancel_button_text"),value:"cancel"}).bind("click",(function(){$("#crownix-note-pen-attribute").fadeOut(),e.fadeOut()})).appendTo(u),$(".colorPicker-swatch").click((function(){$(".colorPicker-swatch").removeClass("color-selected"),$(this).addClass("color-selected")}))}()};return l.prototype={show:function(t){var i,n,s,l;e.fadeIn(),r=t;var c=$("#crownix-note-pen-width-slider"),d=$("#crownix-note-pen-transparency-slider");$("#crownix-note-pen-attribute").fadeIn(),"pen"===t?(i=[1,10],n=o.width,s=o.transparency,l=o.color):(i=[5,18],n=a.width,s=a.transparency,l=a.color),c.crownixNoUiSlider({range:i,start:n,handles:1,step:1,margin:20,connect:"lower",direction:"rtl",orientation:"vertical",behaviour:"extend-tap",serialization:{to:$("#crownix-note-pen-width-val"),resolution:1}},!0),d.crownixNoUiSlider({range:[0,100],start:s,handles:1,step:1,margin:20,connect:"lower",direction:"rtl",orientation:"vertical",behaviour:"extend-tap",serialization:{to:$("#crownix-note-pen-transparency-val"),resolution:1}},!0),"pen"===t?(d.removeAttr("disabled"),$("#crownix-note-pen-transparency-val").removeAttr("disabled")):(d.attr("disabled","disabled"),$("#crownix-note-pen-transparency-val").attr("disabled","disabled")),$(".colorPicker-swatch").removeClass("color-selected"),$("#"+l).addClass("color-selected")},hide:function(){$("#crownix-note-pen-attribute").fadeOut(),e.fadeOut()},getPen:function(){return o},getHighlighter:function(){return a}},l}(),m2soft.ns("m2soft.crownix.NoteToolbar"),m2soft.crownix.NoteToolbar=function(){var t,e,i,r=m2soft.crownix.Resource,n=m2soft.crownix.resource.Icon,o=m2soft.crownix.Util,a=m2soft.crownix.ColorPicker,s=o.hasTouch()?"touchstart mousedown":"click",l=!0,c=!1,d=function(){c=!0,e.find(".crownix-note-attr").children().each((function(){var e=this.id;if(("pen"==e||"highlighter"==e||"textNote"==e||"eraser"==e)&&t[e].visible)return $(".crownix-note-attr > #"+e).click(),!1})),t.pen.visible||t.highlighter.visible||t.textNote.visible||t.eraser.visible||$(".crownix-note-attr > #pen").click(),c=!1},h=function(o,d){!function(o){var d="view_mode",u="pen",f="#000000",p="#FFFF00";t={area:{type:"area",id:"note_area",click:function(t){t.preventDefault(),t.stopPropagation(),y()}},edit:{type:"mode",svg:n.NORMAL_PEN,id:"edit_mode",title:r.get("edit_mode"),click:function(t){t.preventDefault(),t.stopPropagation(),i.setMode("editable"),k(t.data)}},view:{type:"mode",svg:n.VIEW_MODE,id:"view_mode",title:r.get("view_mode"),click:function(t){t.preventDefault(),t.stopPropagation(),i.setMode("disable"),k(t.data)}},hide:{type:"mode",svg:n.HIDE_MODE,id:"hide_mode",title:r.get("hide_mode"),click:function(t){t.preventDefault(),t.stopPropagation(),i.setMode("hide"),k(t.data)}},pen:{type:"attr",svg:n.NORMAL_PEN,id:"pen",title:r.get("note_pen"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),S(t.data)&&!c?E():(_(t.data),C(t.data),i.setTool("scribble"))}},highlighter:{type:"attr",svg:n.HIGHLIGHTER_PEN,id:"highlighter",title:r.get("note_highlighter"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),S(t.data)&&!c?E():(_(t.data),C(t.data),i.setTool("scribble"))}},textNote:{type:"attr",svg:n.TEXT,id:"text",title:r.get("note_text_note"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),_(t.data),C(t.data),i.setTool("text")}},eraser:{type:"attr",svg:n.ERASER,id:"eraser",title:r.get("note_eraser"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),_(t.data),C(t.data),i.setTool("eraser")}},eraseAll:{type:"attr",svg:n.ERASE_ALL,id:"eraseAll",title:r.get("note_erase_all"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),i.isLock()||i.clear()}},undo:{type:"attr",svg:n.UNDO,id:"undo",title:r.get("note_undo"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),i.isLock()||i.undo()}},redo:{type:"attr",svg:n.REDO,id:"redo",title:r.get("note_redo"),visible:!0,click:function(t){t.preventDefault(),t.stopPropagation(),i.isLock()||i.redo()}}};var g,m,v,w,x,b=new a(o,(function(t){"pen"===t.kind?(f="#"+t.attribute.color,$(".crownix-icon-pencolor").css("fill",f)):"highlighter"===t.kind&&(p="#"+t.attribute.color,$(".crownix-icon-highlightercolor").css("fill",p)),i.setShapeAttribute({stroke:"#"+t.attribute.color,"stroke-width":t.attribute.width+"pt","stroke-opacity":(100-t.attribute.transparency)/100})})),y=function(){l?(l=!1,$(".crownix-note-mode").fadeIn(400),setTimeout((function(){"edit_mode"!==d&&(l=!0),$(".crownix-note-mode").fadeOut(400)}),3e3),"edit_mode"===d&&$(".crownix-note-attr").fadeIn(400)):(l=!0,$(".crownix-note-mode").fadeOut(400),"edit_mode"===d&&$(".crownix-note-attr").fadeOut(400))},k=function(e){for(var i in"edit_mode"===(d=e.id)?$(".crownix-note-attr").attr({style:"display: block;"}):$(".crownix-note-attr").attr({style:"display: none"}),$(".crownix-note-area > svg").remove(),$(".crownix-note-area").prepend(e.svg),$(".crownix-note-mode > li").remove(),d&&$(".crownix-note-area").attr("title",r.get(d)),t)"mode"===(g=t[i]).type&&g.id!==e.id&&(m=$("<li>").attr({id:i,title:g.title,style:"display: list-item"}).addClass("crownix-note-icon").addClass("crownix-note-mode-icon").appendTo(v).prepend(g.svg).bind(s,g,g.click));$(".crownix-icon-pencolor").css("fill",f),$(".crownix-icon-highlightercolor").css("fill",p),T()},_=function(e){var i="edit_mode"!==d?"#edit":".crownix-note-area";t.edit.svg=e.svg,$(i+" > svg").remove(),$(i).prepend(e.svg),$(".crownix-icon-pencolor").css("fill",f),$(".crownix-icon-highlightercolor").css("fill",p)},C=function(t){u=t.id,$(".crownix-note-attr-icon").each((function(){$(this).removeClass("crownix-icon-select")})),$("#"+t.id).addClass("crownix-icon-select"),T()},T=function(){var t;if("pen"===u)t=b.getPen();else{if("highlighter"!==u)return;t=b.getHighlighter()}i.setShapeAttribute({stroke:"#"+t.color,"stroke-width":t.width+"pt","stroke-opacity":(100-t.transparency)/100})},S=function(t){return t.id===u},E=function(t){b.show(u)};void 0!==e&&(e.remove(),y()),e=$("<div>").attr("id","crownix-note-toolbar").addClass("crownix-note-toolbar").appendTo(o),function(){for(var i in v=$("<ul>").addClass("crownix-note-mode").appendTo(e),w=$("<ul>").addClass("crownix-note-area").appendTo(e),x=$("<ul>").addClass("crownix-note-attr").appendTo(e),$(".crownix-note-area").attr("title",r.get("view_mode")),t)"mode"===(g=t[i]).type&&"view_mode"!==g.id?m=$("<li>").attr({id:i,title:g.title}).addClass("crownix-note-icon").addClass("crownix-note-mode-icon").appendTo(v).prepend(g.svg).bind(s,g,g.click):"attr"===g.type?(m=$("<li>").attr({id:i,title:g.title}).addClass("crownix-note-icon").addClass("crownix-note-attr-icon").appendTo(x).prepend(g.svg).bind(s,g,g.click),"pen"===g.id&&m.addClass("crownix-icon-select")):"area"===g.type&&w.addClass("crownix-note-icon").addClass("crownix-note-area-icon").prepend(t.view.svg).bind(s,g,g.click)}(),h.prototype.disableToolbarItem(["undo","redo","eraseAll"])}(o),i=d};return h.prototype={hideToolbar:function(){e.css("display","none")},showToolbar:function(){e.css("display","block")},hideNoteItem:function(i){for(var r=0;r<i.length;r++)e.find("#"+i[r]).css("display","none"),t[i[r]].visible=!1;d()},showNoteItem:function(i){for(var r=0;r<i.length;r++)e.find("#"+i[r]).css("display","list-item"),t[i[r]].visible=!0;d()},disableToolbarItem:function(i){for(var r=0,n=i.length;r<n;r++)t[i[r]]&&"attr"===t[i[r]].type&&e.find("#"+i[r]).removeClass("crownix-note-icon").addClass("crownix-note-icon-disable").off()},enableToolbarItem:function(i){for(var r=0,n=i.length;r<n;r++)t[i[r]]&&"attr"===t[i[r]].type&&(e.find("#"+i[r]).removeClass("crownix-note-icon-disable").addClass("crownix-note-icon"),t[i[r]].click&&e.find("#"+i[r]).off().on(s,t[i[r]].click))},destroy:function(){e.remove()}},h}(),m2soft.ns("m2soft.crownix.security.IKE"),m2soft.crownix.security.IKE=function(){var t=m2soft.crownix.Util,e=m2soft.crownix.Message,i="",r={},n="OPTIONS",o=function(){return $.support.cors=!0,$.ajax(i,{type:n,headers:{"crownix-command":0}}).pipe((function(i,r,n){try{var o=JSON.parse(n.responseText),a=o.algorithm;t.isSupportWebCrypto()&&t.browser.firefox||(o.algorithm="seed"),e.log("[Crownix Viewer] encrypt enabled. server["+a+"] client["+o.algorithm+"]"),o.rdid=n.getResponseHeader("crownix-rdid")}catch(t){return e.log("[Crownix Viewer] response parsing error: "+n.responseText),$.Deferred().reject(t.message)}return o.status?$.Deferred().resolve(o):$.Deferred().reject(o.message)}))},a=function(t){var o=new JSEncrypt;o.setPublicKey(t.pubkey);var a=s(128),l=o.encrypt(a),c=t.rdid,d=t.algorithm;return r[c]={secretKey:a,algorithm:d},$.ajax(i,{type:n,headers:{"crownix-command":1,"crownix-rdid":c,"crownix-encrypt-algorithm":d,"crownix-encrypt-key":l}}).pipe((function(t,i,r){try{var n=JSON.parse(r.responseText)}catch(t){return e.log("[Crownix Viewer] response parsing error: "+r.responseText),$.Deferred().reject(t.message)}return n.status?$.Deferred().resolve(c):$.Deferred().reject(n.message)}))},s=function(t){for(var e="",i=0;i<t/4;i++)e+=Math.floor(16*Math.random()).toString(16);return e};return{getKey:function(t){return r[t].secretKey},getAlgorithm:function(t){return r[t].algorithm},removeSession:function(t){delete r[t]},request:function(t){return secretKey="",i=t.serverUrl,o().pipe(a)},setMethod:function(t){n="string"==typeof t&&"POST"===t.toUpperCase()?"POST":"OPTIONS"}}}(),m2soft.ns("m2soft.crownix.security.SEED"),m2soft.crownix.security.SEED=function(){function t(e,i){for(var r in e=e||{},i)"object"==typeof i[r]?e[r]=t(e[r],i[r]):null===i[r]?e[r]=null:e[r]=i[r];return e}var e,i,r=r||function(t,e){var i={},r=i.lib={},n=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.mixIn(e),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,i=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var n=0;n<t;n++)e[r+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(r+n)%4*8;else if(65535<i.length)for(n=0;n<t;n+=4)e[r+n>>>2]=i[n>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i=[],r=0;r<e;r+=4)i.push(4294967296*t.random()|0);return new o.init(i,e)}}),a=i.enc={},s=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],r=0;r<t;r++){var n=e[r>>>2]>>>24-r%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(i,e/2)}},l=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],r=0;r<t;r++)i.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r++)i[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(i,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw log(t),Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=r.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,r=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a);if(e=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,n=t.min(4*e,n),e){for(var l=0;l<e;l+=a)this._doProcessBlock(r,l);l=r.splice(0,e),i.sigBytes-=n}return new o.init(l,n)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=d.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new h.HMAC.init(t,i).finalize(e)}}});var h=i.algo={};return i}(Math);i=(e=r).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,r=this._map;t.clamp(),t=[];for(var n=0;n<i;n+=3)for(var o=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,a=0;4>a&&n+.75*a<i;a++)t.push(r.charAt(o>>>6*(3-a)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map;(n=r.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],o=0,a=0;a<e;a++)if(a%4){if(r.indexOf(t.charAt(a-1))<0||r.indexOf(t.charAt(a))<0)throw"invalid base64";var s=r.indexOf(t.charAt(a-1))<<a%4*2,l=r.indexOf(t.charAt(a))>>>6-a%4*2;n[o>>>2]|=(s|l)<<24-o%4*8,o++}return i.create(n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function e(t,e,i,r,n,o,a){return((t=t+(e&i|~e&r)+n+a)<<o|t>>>32-o)+e}function i(t,e,i,r,n,o,a){return((t=t+(e&r|i&~r)+n+a)<<o|t>>>32-o)+e}function n(t,e,i,r,n,o,a){return((t=t+(e^i^r)+n+a)<<o|t>>>32-o)+e}function o(t,e,i,r,n,o,a){return((t=t+(i^(e|~r))+n+a)<<o|t>>>32-o)+e}var a=r,s=(c=a.lib).WordArray,l=c.Hasher,c=a.algo,d=[];!function(){for(var e=0;64>e;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0}(),c=c.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var a=0;16>a;a++){var s=t[l=r+a];t[l]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}a=this._hash.words;var l=t[r+0],c=(s=t[r+1],t[r+2]),h=t[r+3],u=t[r+4],f=t[r+5],p=t[r+6],g=t[r+7],m=t[r+8],v=t[r+9],w=t[r+10],x=t[r+11],b=t[r+12],y=t[r+13],k=t[r+14],_=t[r+15],C=e(C=a[0],E=a[1],S=a[2],T=a[3],l,7,d[0]),T=e(T,C,E,S,s,12,d[1]),S=e(S,T,C,E,c,17,d[2]),E=e(E,S,T,C,h,22,d[3]);C=e(C,E,S,T,u,7,d[4]),T=e(T,C,E,S,f,12,d[5]),S=e(S,T,C,E,p,17,d[6]),E=e(E,S,T,C,g,22,d[7]),C=e(C,E,S,T,m,7,d[8]),T=e(T,C,E,S,v,12,d[9]),S=e(S,T,C,E,w,17,d[10]),E=e(E,S,T,C,x,22,d[11]),C=e(C,E,S,T,b,7,d[12]),T=e(T,C,E,S,y,12,d[13]),S=e(S,T,C,E,k,17,d[14]),C=i(C,E=e(E,S,T,C,_,22,d[15]),S,T,s,5,d[16]),T=i(T,C,E,S,p,9,d[17]),S=i(S,T,C,E,x,14,d[18]),E=i(E,S,T,C,l,20,d[19]),C=i(C,E,S,T,f,5,d[20]),T=i(T,C,E,S,w,9,d[21]),S=i(S,T,C,E,_,14,d[22]),E=i(E,S,T,C,u,20,d[23]),C=i(C,E,S,T,v,5,d[24]),T=i(T,C,E,S,k,9,d[25]),S=i(S,T,C,E,h,14,d[26]),E=i(E,S,T,C,m,20,d[27]),C=i(C,E,S,T,y,5,d[28]),T=i(T,C,E,S,c,9,d[29]),S=i(S,T,C,E,g,14,d[30]),C=n(C,E=i(E,S,T,C,b,20,d[31]),S,T,f,4,d[32]),T=n(T,C,E,S,m,11,d[33]),S=n(S,T,C,E,x,16,d[34]),E=n(E,S,T,C,k,23,d[35]),C=n(C,E,S,T,s,4,d[36]),T=n(T,C,E,S,u,11,d[37]),S=n(S,T,C,E,g,16,d[38]),E=n(E,S,T,C,w,23,d[39]),C=n(C,E,S,T,y,4,d[40]),T=n(T,C,E,S,l,11,d[41]),S=n(S,T,C,E,h,16,d[42]),E=n(E,S,T,C,p,23,d[43]),C=n(C,E,S,T,v,4,d[44]),T=n(T,C,E,S,b,11,d[45]),S=n(S,T,C,E,_,16,d[46]),C=o(C,E=n(E,S,T,C,c,23,d[47]),S,T,l,6,d[48]),T=o(T,C,E,S,g,10,d[49]),S=o(S,T,C,E,k,15,d[50]),E=o(E,S,T,C,f,21,d[51]),C=o(C,E,S,T,b,6,d[52]),T=o(T,C,E,S,h,10,d[53]),S=o(S,T,C,E,w,15,d[54]),E=o(E,S,T,C,s,21,d[55]),C=o(C,E,S,T,m,6,d[56]),T=o(T,C,E,S,_,10,d[57]),S=o(S,T,C,E,p,15,d[58]),E=o(E,S,T,C,y,21,d[59]),C=o(C,E,S,T,u,6,d[60]),T=o(T,C,E,S,x,10,d[61]),S=o(S,T,C,E,c,15,d[62]),E=o(E,S,T,C,v,21,d[63]);a[0]=a[0]+C|0,a[1]=a[1]+E|0,a[2]=a[2]+S|0,a[3]=a[3]+T|0},_doFinalize:function(){var e=this._data,i=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;i[n>>>5]|=128<<24-n%32;var o=t.floor(r/4294967296);for(i[15+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(i.length+1),this._process(),i=(e=this._hash).words,r=0;4>r;r++)n=i[r],i[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),a.MD5=l._createHelper(c),a.HmacMD5=l._createHmacHelper(c)}(Math),function(){var t,e=r,i=(t=e.lib).Base,n=t.WordArray,o=(t=e.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=(s=this.cfg).hasher.create(),r=n.create(),o=r.words,a=s.keySize,s=s.iterations;o.length<a;){l&&i.update(l);var l=i.update(t).finalize(e);i.reset();for(var c=1;c<s;c++)l=i.finalize(l),i.reset();r.concat(l)}return r.sigBytes=4*a,r}});e.EvpKDF=function(t,e,i){return o.create(i).compute(t,e)}}(),r.lib.Cipher||function(t){var e=(p=r).lib,i=e.Base,n=e.WordArray,o=e.BufferedBlockAlgorithm,a=p.enc.Base64,s=p.algo.EvpKDF,l=e.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,i,r){return("string"==typeof i?g:f).encrypt(t,e,i,r)},decrypt:function(e,i,r){return("string"==typeof i?g:f).decrypt(t,e,i,r)}}}});e.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},d=e.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),h=(c=c.CBC=function(){function t(t,e,i){var r=this._iv;r?this._iv=undefined:r=this._prevBlock;for(var n=0;n<i;n++)t[e+n]^=r[n]}var e=d.extend();return e.Encryptor=e.extend({processBlock:function(e,i){var r=this._cipher,n=r.blockSize;t.call(this,e,i,n),r.encryptBlock(e,i),this._prevBlock=e.slice(i,i+n)}}),e.Decryptor=e.extend({processBlock:function(e,i){var r=this._cipher,n=r.blockSize,o=e.slice(i,i+n);r.decryptBlock(e,i),t.call(this,e,i,n),this._prevBlock=o}}),e}(),(p.pad={}).Pkcs7={pad:function(t,e){for(var i,r=(i=(i=4*e)-t.sigBytes%i)<<24|i<<16|i<<8|i,o=[],a=0;a<i;a+=4)o.push(r);i=n.create(o,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}});e.BlockCipher=l.extend({cfg:l.cfg.extend({mode:c,padding:h}),reset:function(){l.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var u=e.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(c=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(a)},parse:function(t){var e=(t=a.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var i=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return u.create({ciphertext:t,salt:i})}},e.SerializableCipher=i.extend({cfg:i.extend({format:c}),encrypt:function(t,e,i,r){r=this.cfg.extend(r);var n=t.createEncryptor(i,r);return e=n.finalize(e),n=n.cfg,u.create({ciphertext:e,key:i,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,i,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(i,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,i,r){return r||(r=n.random(8)),t=s.create({keySize:e+i}).compute(t,r),i=n.create(t.words.slice(e),4*i),t.sigBytes=4*e,u.create({key:t,iv:i,salt:r})}},g=e.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:p}),encrypt:function(t,e,i,r){return i=(r=this.cfg.extend(r)).kdf.execute(i,t.keySize,t.ivSize),r.iv=i.iv,(t=f.encrypt.call(this,t,e,i.key,r)).mixIn(i),t},decrypt:function(t,e,i,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),i=r.kdf.execute(i,t.keySize,t.ivSize,e.salt),r.iv=i.iv,f.decrypt.call(this,t,e,i.key,r)}})}(),function(){function t(t){return n[3][t>>>24&255]^n[2][t>>>16&255]^n[1][t>>>8&255]^n[0][255&t]}var e=r,i=e.lib.BlockCipher,n=[[696885672,92635524,382128852,331600848,340021332,487395612,747413676,621093156,491606364,54739776,403181592,504238620,289493328,1020063996,181060296,591618912,671621160,71581764,536879136,495817116,549511392,583197408,147374280,386339604,629514660,261063564,50529024,994800504,999011256,318968592,314757840,785310444,809529456,210534540,1057960764,680042664,839004720,500027868,919007988,876900468,751624428,361075092,185271048,390550356,474763356,457921368,1032696252,16843008,604250148,470552604,860058480,411603096,268439568,214745292,851636976,432656856,738992172,667411428,843215472,58950528,462132120,297914832,109478532,164217288,541089888,272650320,595829664,734782440,218956044,914797236,512660124,256852812,931640244,441078360,113689284,944271480,646357668,302125584,797942700,365285844,557932896,63161280,881111220,21053760,306336336,1028485500,227377548,134742024,521081628,428446104,0,420024600,67371012,323179344,935850996,566354400,1036907004,910586484,789521196,654779172,813740208,193692552,235799052,730571688,578986656,776888940,327390096,223166796,692674920,1011642492,151585032,168428040,1066382268,802153452,868479984,96846276,126321540,335810580,1053750012,608460900,516870876,772678188,189481800,436867608,101057028,553722144,726360936,642146916,33686016,902164980,310547088,176849544,202113036,864269232,1045328508,281071824,977957496,122110788,377918100,633725412,637936164,8421504,764256684,533713884,562143648,805318704,923218740,781099692,906375732,352653588,570565152,940060728,885321972,663200676,88424772,206323788,25264512,701096424,75792516,394761108,889532724,197903304,248431308,1007431740,826372464,285282576,130532292,160006536,893743476,1003222008,449499864,952692984,344232084,424235352,42107520,80003268,1070593020,155795784,956903736,658989924,12632256,265274316,398971860,948482232,252642060,244220556,37896768,587408160,293704080,743202924,466342872,612671652,872689716,834793968,138952776,46318272,793731948,1024274748,755835180,4210752,1049539260,1041117756,1015853244,29475264,713728680,982168248,240009804,356864340,990589752,483184860,675831912,1062171516,478974108,415813848,172638792,373707348,927429492,545300640,768467436,105267780,897954228,722150184,625303908,986379e3,600040416,965325240,830583216,529503132,508449372,969535992,650568420,847426224,822161712,717939432,760045932,525292380,616882404,817950960,231588300,143163528,369496596,973746744,407392344,348442836,574775904,688464168,117900036,855847728,684253416,453710616,84214020,961114488,276861072,709517928,705307176,445289112],[943196208,3894986976,741149985,2753988258,3423588291,3693006546,2956166067,3090712752,2888798115,1612726368,1410680145,3288844227,1141130304,1815039843,1747667811,1478183763,3221472195,1612857954,808649523,3023406513,673777953,2686484640,3760374498,2754054051,3490956243,2417066385,269549841,67503618,471600144,3158084784,875955762,1208699715,3962556387,2282260608,1814842464,2821228704,337053459,3288646848,336987666,4097098992,3221406402,1141196097,3760308705,3558262482,1010765619,1010634033,2349764226,2551744656,673712160,1276005954,4097230578,1010699826,2753922465,4164536817,202181889,3693072339,3625502928,673909539,1680229986,2017086066,606537507,741281571,4029792753,1882342002,1073889858,3558130896,1073824065,3221274816,1882407795,1680295779,2888600736,2282457987,4097296371,2888666529,2147516544,471797523,3356150466,741084192,2821360290,875824176,3490890450,134941443,3962490594,3895052769,1545424209,2484372624,404228112,4164471024,1410811731,2888732322,134744064,3288712641,269681427,3423456705,2215020162,3090778545,4232040435,2084392305,3221340609,808517937,4097164785,2282392194,1747602018,2956034481,3490824657,538968096,3558328275,131586,539099682,67372032,1747470432,1882276209,67569411,3625700307,2619182481,2551810449,1612792161,3158216370,3827746530,1478052177,3692940753,1343308113,2417000592,3692874960,2551876242,2686682019,2821426083,3490758864,2147582337,202313475,1141327683,404359698,3760440291,3962359008,2349698433,3158282163,2484504210,2017151859,1545358416,2686616226,2686550433,1612923747,539165475,1275940161,3356018880,2619248274,2619116688,943327794,202116096,741215778,3090844338,1814974050,2619314067,1478117970,4029858546,2417132178,4029924339,1208568129,2016954480,3423390912,336921873,4164668403,1882210416,1949648241,2084523891,875889969,269484048,197379,1680098400,1814908257,3288778434,1949582448,3558196689,3023340720,3895118562,134809857,1949714034,404293905,4231974642,1073758272,269615634,3760242912,3158150577,67437825,4164602610,65793,4029726960,673843746,1545490002,2821294497,1410745938,1073955651,2214954369,336856080,2282326401,2551942035,2955968688,3827680737,1208502336,2017020273,2484570003,4231843056,471731730,2147648130,539033889,2349632640,404425491,1545555795,1949779827,1410614352,2956100274,471665937,606405921,1276071747,0,1141261890,3962424801,1477986384,1343373906,3895184355,2084458098,3625634514,3356084673,4231908849,808452144,2484438417,1680164193,1010568240,3023472306,3827614944,3090910131,2084326512,202247682,1343242320,943262001,606471714,808583730,2214888576,1747536225,2417197971,876021555,3827812323,606340128,2753856672,3356216259,1343439699,134875650,2215085955,3625568721,1275874368,2147713923,2349830019,3423522498,943393587,1208633922,3023538099],[2712152457,2172913029,3537114822,3553629123,1347687492,287055117,2695638156,556016901,1364991309,1128268611,270014472,303832590,1364201793,4043062476,3267889866,1667244867,539502600,1078199364,538976256,2442927501,3772784832,3806339778,3234334920,320083719,2711889285,2206994319,50332419,1937259339,3015195531,319820547,3536851650,3807129294,1886400576,2156661900,859586319,2695374984,842019330,3520863693,4076091078,1886663748,3773574348,2442401157,50858763,1398019911,1348213836,1398283083,2981903757,16777473,539239428,270277644,1936732995,2425886856,269488128,3234598092,4075827906,3520600521,539765772,3823380423,1919955522,2206204803,2476219275,3520074177,2189690502,3251112393,1616912448,1347424320,2745181059,3823643595,17566989,2998154886,2459704974,1129058127,3014932359,1381505610,3267626694,1886926920,2728666758,303043074,2745970575,3520337349,1633689921,3284140995,2964599940,1094713665,1380979266,1903967565,2173439373,526344,320610063,2442664329,0,286791945,263172,1397756739,4092868551,3789562305,4059839949,1920218694,590098191,589571847,2964336768,2206731147,34344462,2745707403,2728403586,1651256910,2475692931,1095503181,1634216265,1887190092,17303817,34081290,3015458703,3823906767,4092605379,3250849221,2206467975,269751300,4076617422,1617175620,3537641166,573320718,1128794955,303569418,33818118,555753729,1667771211,1650730566,33554946,4059313605,2458915458,2189953674,789516,3014669187,1920745038,3503296704,1920481866,1128531783,2459178630,3789825477,572794374,2155872384,2712415629,3554418639,2711626113,808464384,859059975,2729193102,842282502,286528773,572531202,808990728,4042536132,2745444231,1094976837,1078725708,2172649857,3790088649,2156135556,2475956103,825505029,3284667339,3268153038,809253900,1903178049,286265601,3284404167,2173176201,1903441221,4093131723,3537377994,4042799304,2425623684,1364728137,2189427330,3234071748,4093394895,1095240009,825768201,1667508039,3233808576,3284930511,3553892295,2964863112,51121935,2190216846,1111491138,589308675,2442137985,1617701964,3554155467,2695111812,808727556,4059050433,1078462536,3267363522,1668034383,826031373,556543245,1077936192,2998681230,842808846,2965126284,3250586049,2728929930,2998418058,1112280654,1364464965,859323147,3504086220,1617438792,1937522511,2426150028,3503823048,1112017482,1381242438,1936996167,2694848640,3790351821,1111754310,2981377413,589835019,1633953093,4076354250,3823117251,2981640585,2981114241,2476482447,1381768782,4059576777,3806602950,2997891714,825241857,3806866122,1634479437,1398546255,3773048004,4042272960,3251375565,2156398728,303306246,842545674,1347950664,3503559876,1650467394,556280073,50595591,858796803,3773311176,320346891,17040645,1903704393,2425360512,1650993738,573057546,2459441802],[137377848,3370182696,220277805,2258805798,3485715471,3469925406,2209591347,2293282872,2409868335,1080057888,1162957845,3351495687,1145062404,1331915823,1264805931,1263753243,3284385795,1113743394,53686323,2243015733,153167913,2158010400,3269648418,2275648551,3285438483,2173800465,17895441,100795398,202382364,2360392764,103953462,1262700555,3487820847,2290124808,1281387564,2292230184,118690839,3300967428,101848086,3304125492,3267543042,1161905157,3252805665,3335705622,255015999,221330493,2390920206,2291177496,136325160,1312967694,3337810998,238173246,2241963045,3388078137,218172429,3486768159,3369130008,186853419,1180853286,1249015866,119743527,253963311,3253858353,1114796082,1111638018,3302020116,1094795265,3233857536,1131638835,1197696039,2359340076,2340653067,3354653751,2376182829,2155905024,252910623,3401762826,203435052,2325915690,70267956,3268595730,184748043,3470978094,3387025449,1297177629,2224067604,135272472,3371235384,1196643351,2393025582,134219784,3317810181,51580947,3452029965,2256700422,2310125625,3488873535,1299283005,3250700289,20000817,3320968245,2323810314,1247963178,2175905841,3251752977,2105376,3352548375,33685506,35790882,67109892,1214277672,1097953329,117638151,3419658267,2375130141,2308020249,1096900641,2394078270,3336758310,1230067737,3453082653,1095847953,2156957712,3436239900,2324863002,2208538659,2342758443,3234910224,2172747777,251857935,1195590663,168957978,3286491171,3437292588,2374077453,2410921023,2257753110,1265858619,1280334876,2191695906,2174853153,1130586147,52633635,1296124941,3368077320,2391972894,2358287388,171063354,201329676,237120558,2326968378,1315073070,2408815647,1246910490,3270701106,2190643218,3287543859,1229015049,1215330360,3435187212,85005333,3421763643,1081110576,1165063221,1332968511,87110709,1052688,50528259,1147167780,1298230317,3334652934,1148220468,3318862869,2226172980,3403868202,151062537,1181905974,152115225,3472030782,1077952512,34738194,3235962912,2377235517,83952645,3404920890,16842753,3237015600,170010666,1314020382,2309072937,1179800598,1128480771,2239857669,68162580,2306967561,2341705755,2159063088,3319915557,1212172296,1232173113,2274595863,3438345276,236067870,2189590530,18948129,2357234700,185800731,1330863135,1198748727,1146115092,2192748594,219225117,86058021,1329810447,0,1178747910,3454135341,1213224984,1112690706,3420710955,1316125758,3402815514,3384920073,3455188029,3158064,2240910357,1164010533,204487740,2259858486,3303072804,2343811131,1282440252,235015182,1079005200,154220601,102900774,36843570,2223014916,1231120425,2207485971,120796215,3353601063,69215268,2225120292,3418605579,1129533459,167905290,2273543175,3385972761,1279282188,2206433283,2407762959,3468872718,187906107,1245857802,2276701239]],o=[2654435769,1013904243,2027808486,4055616972,3816266649,3337566003,2380164711,465362127,930724254,1861448508,3722897016,3150826737,2006686179,4013372358,3731777421,3168587547],a=e.algo.SEED=i.extend({_doReset:function(){for(var e=(n=this._key).words[0],i=n.words[1],r=n.words[2],n=n.words[3],a=[],s=0;16>s;s++)if(a[s]=[],a[s][0]=t(e+r-o[s]),a[s][1]=t(i-n+o[s]),0==s%2){var l=e;e=e>>>8|i<<24,i=i>>>8|l<<24}else l=r,r=r<<8|n>>>24,n=n<<8|l>>>24;this._roundKeys=a,this._invRoundKeys=a.slice().reverse()},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._roundKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invRoundKeys)},_doCryptBlock:function(e,i,r){for(var n=[o=e.slice(i,i+2),a=e.slice(i+2,i+4)],o=0;16>o;o++){var a=r[o],s=n[0],l=(n=n[1],[]);l[0]=n[0]^a[0],l[1]=n[1]^a[1],l[1]^=l[0],l[1]=t(l[1]),l[0]+=l[1],l[0]=t(l[0]),l[1]+=l[0],l[1]=t(l[1]),l[0]+=l[1],s[0]^=l[0],s[1]^=l[1],n=[n,s]}n.reverse(),e.splice(i,4,n[0][0],n[0][1],n[1][0],n[1][1])},keySize:4,ivSize:4,blockSize:4});e.SEED=i._createHelper(a)}();var n={finalize:function(t){return r.SEED.encrypt(t.toString(),this.key,{mode:r.mode.CBC,iv:this.iv,padding:r.pad.Pkcs7}).toString()}},o={offset:0,offset2:0,decryptor:null,getDecryptor:function(){return this.decryptor.process||(this.decryptor=r.algo.SEED.createDecryptor(this.key,{mode:r.mode.CBC,iv:this.iv,padding:r.pad.Pkcs7})),this.decryptor},plainTextBuffer:"",failedBuffer:"",process:function(t){this.offset2=192*Math.floor(t.length/192);var e=r.enc.Base64.parse(t.substring(this.offset,this.offset2));this.offset=this.offset2;var i=this.getDecryptor().process(e);try{var n=i.toString(r.enc.Latin1);this.plainTextBuffer+=decodeURIComponent(escape(this.failedBuffer+n)),this.failedBuffer=""}catch(t){this.failedBuffer+=n}return this.plainTextBuffer},finalize:function(t){param=r.enc.Base64.parse(t.substring(this.offset));var e=this.getDecryptor().process(param),i=this.getDecryptor().finalize();return this.plainTextBuffer+=decodeURIComponent(escape(this.failedBuffer+e.toString(r.enc.Latin1)+i.toString(r.enc.Latin1))),this.plainTextBuffer}};return function(e,i){if(!i)throw"Key must be shared with server before";this.key=r.enc.Hex.parse(i),this.iv=this.key,this.buffer={sigBytes:0,words:[]},"encrypt"==e?t(this,n):"decrypt"==e&&t(this,o)}},m2soft.ns("m2soft.crownix.WorkerUtil"),m2soft.crownix.WorkerUtil=function(){var t=m2soft.crownix.Util,e=function(e,i){if("function"!=typeof e.workerFunction)throw"worker must be function";i=!0===i;var r,n,o=function(t){var e=t.workerFunction,i=t.dependency,r=["(function(){"];for(var n in i)i.hasOwnProperty(n)&&(r.push("var "),r.push(n),r.push("=("),r.push(i[n].toString()),r.push(")();"));return r.push("("),r.push(e.toString()),r.push(")();"),r.push("})()"),r},a=function(t){var e=o(t).join("");return new FakeWorker(e)};if(!window.Worker||!window.Blob||i||t.browser.mobile)return a(e);try{return r=new Blob(o(e),{type:"application/javascript"}),n=URL.createObjectURL(r),new Worker(n)}catch(t){return a(e)}};return{getCryptoWorker:function(t,i,r){if("aes"==i)var n=e(m2soft.crownix.worker.security.AES,!0);else n=e(m2soft.crownix.worker.security.SEED);return n.postMessage({method:"create",crypt:t,key:r}),n},getIdentifyWorker:function(){return e(m2soft.crownix.worker.Identity)}}}(),m2soft.ns("m2soft.crownix.ExportAgent"),m2soft.crownix.ExportAgent=function(){var t,e=m2soft.crownix.Resource,i=m2soft.crownix.Message,r=m2soft.crownix.Ajax,n=m2soft.crownix.WorkerUtil,o=m2soft.crownix.security.IKE,a=m2soft.crownix.Util,s=m2soft.crownix.Window,l=function(e,i,r,n){t=e,this.dialog=i,this.toolbar=r,this.options=n};l.prototype.export=function(e,n,a,s,l,u,f,p,g,m,v){var w=new r,x=this.dialog,b=this.toolbar,y="",k="",_="";w.setConnectTimeout(t.options.timeout),b.disableToolbarItem(["save","print","print_pdf","cloud_print"]);var C,T=x.message(g.notice_message),S=500;t.options.saveMmlToPdf&&(S=503),"string"!=typeof v&&(C=v,v=void 0);var E={opcode:S,mrd_path:a,mrd_param:s,export_type:n,protocol:v||"sync"};if(null!=u&&""!=u&&(E.mrd_data=u),""!=f.toJson()&&(E.runtime_param=f.toJson()),C&&!C.isEmpty()&&(E.ext_param=JSON.stringify(C.toObject())),t.options.downloadFileName&&-1==s.indexOf("/rpdfprintdialog ")&&(E.export_name=t.options.downloadFileName+"."+n),t.options.saveMmlToPdf&&(E.rdid=t.rdid,E.totalpage=t.totalPage),t.encType>3&&(!m||m.isEmptyPrevDocStack())&&(E.enc_type=t.encType,l&&(E.mrd_plain_param=l)),this.options.enableSecure)var M=o.request({serverUrl:e}).pipe((function(t){return _=t,y=o.getAlgorithm(_),k=o.getKey(_),c(E,y,k)}),(function(t){return i.error(t.stack),x.show("Key exchange error("+t+")"),$.Deferred().reject(t)})).pipe((function(t){return d(e,t,g,x,!0,_)})).pipe((function(t){return h(t,y,k)})).pipe((function(t){p(t)}));else M=d(e,E,g,x).pipe((function(t){return p(t)}));return M.always((function(t){return T.fadeOut(2e3,(function(){T.remove(),b.enableToolbarItem(["save","print","print_pdf","cloud_print"])})),o.removeSession(_),t}))},l.prototype.downloadFile=function(i,r,n,o,s,l,c){var d=this.dialog,h={notice_message:r+" "+e.get("export_file"),connect_error:e.get("save_connect_error"),server_error:e.get("save_server_error"),timeout_error:e.get("save_timeout_error")};if(t.gridManager&&(n.mrdParam=n.mrdParam+t.gridManager.exportGridParameter()),"function"==typeof s)var u=function(r){if(0==r.indexOf("1|")){var n=r.split("|"),o=(n[0],encodeURIComponent(n[1]));s(i.replace("/service","/download")+"?filename="+o+"&delete="+t.options.download.deleteOnServer)}else s(e.get("save_error")+"("+r.replace("0|","")+")")};else u=function(r){if(0==r.indexOf("1|")){var n=r.split("|"),o=(n[0],encodeURIComponent(n[1]));"post"===(t.options.exportMethod||(a.browser.android?"post":"get"))?($("#crownix-download-form input[name=filename]").attr("value",o),$("#crownix-download-form").attr("action",i.replace("/service","/download?filename="+o)).submit()):$("#crownix-download-iframe").attr("src",i.replace("/service","/download")+"?filename="+o+"&delete="+t.options.download.deleteOnServer+"&attatchment=true")}else d.show(e.get("save_error")+"("+r.replace("0|","")+")")};return this.export(i,r,n.mrdPath,n.mrdParam,t.mrdPlainParam,n.mrdData,o,u,h,l,c)},l.prototype.showPdfWindow=function(i,r,n,o,l){var c=this.dialog,d={notice_message:e.get("print_pdf_export"),connect_error:e.get("print_pdf_connect_error"),server_error:e.get("print_pdf_server_error"),timeout_error:e.get("print_pdf_timeout_error")},h=function(r){if(0==r.indexOf("1|")){var n=r.split("|"),o=(n[0],n[1]),l=a.browser.edge?"true":"false",d=t.options.pdfPrintSpoolName?"/"+t.options.pdfPrintSpoolName:"",h=$('<iframe id="crownix-pdf-viewer">').attr("src",i.replace("/service","/download")+d+"?filename="+o+"&delete=true&attatchment="+l);if(a.browser.firefox||a.os.macos&&a.browser.safari)h.css({width:"100%",height:"100%"}),new s(e.get("print_pdfviewer_title"),h,!0).show();else $("#crownix-pdf-viewer").remove(),h.css("display","none").appendTo("body")}else c.show(e.get("print_pdf_error")+"("+r.replace("0|","")+")")};return t.gridManager&&(r.mrdParam=r.mrdParam+t.gridManager.exportGridParameter()),t.encType>3&&(!o||o.isEmptyPrevDocStack())?(t.mrdPlainParam||(t.mrdPlainParam=""),this.export(i,"pdf",r.mrdPath,r.mrdParam,"/rpdfprintdialog "+t.mrdPlainParam,r.mrdData,n,h,d,o,l)):this.export(i,"pdf",r.mrdPath,"/rpdfprintdialog "+r.mrdParam,t.mrdPlainParam,r.mrdData,n,h,d,o,l)},l.prototype.downloadFileDirect=function(i,r,n,o,a,s){var l=this.dialog,c=this.toolbar,d={notice_message:r+" "+e.get("export_file")};c.disableToolbarItem(["save","print","print_pdf","cloud_print"]);var h=l.message(d.notice_message);$("#crownix-pdf-viewer").remove(),$("#crownix-protocol-file-form").remove();var u=$('<iframe id="crownix-pdf-viewer" name="crownix-pdf-viewer" src="about:blank"></iframe>'),f=$('<form id="crownix-protocol-file-form" target="crownix-pdf-viewer" method="post" style="display:none" accept-charset="utf-8"><input type="hidden" name="opcode"/><input type="hidden" name="mrd_path"/><input type="hidden" name="mrd_param"/><input type="hidden" name="export_type"/><input type="hidden" name="protocol"/><input type="hidden" name="delete_file"/><input type="hidden" name="attatchment"/></form>').appendTo("body");null!=n.mrdData&&""!=n.mrdData&&($('<input type="hidden" name="mrd_data"/>').appendTo(f),$("#crownix-protocol-file-form input[name=mrd_data]").attr("value",n.mrdData)),""!=o.toJson()&&($('<input type="hidden" name="runtime_param"/>').appendTo(f),$("#crownix-protocol-file-form input[name=runtime_param]").attr("value",o.toJson())),s&&!s.isEmpty()&&($('<input type="hidden" name="ext_param"/>').appendTo(f),$("#crownix-protocol-file-form input[name=ext_param]").attr("value",JSON.stringify(s.toObject()))),t.options.downloadFileName&&($('<input type="hidden" name="export_name"/>').appendTo(f),$("#crownix-protocol-file-form input[name=export_name]").attr("value",t.options.downloadFileName+"."+r)),t.encType>3&&(!a||a.isEmptyPrevDocStack())&&($('<input type="hidden" name="enc_type"/>').appendTo(f),$("#crownix-protocol-file-form input[name=enc_type]").attr("value",t.encType),null!=t.mrdPlainParam&&""!=t.mrdPlainParam&&($('<input type="hidden" name="mrd_plain_param"/>').appendTo(f),$("#crownix-protocol-file-form input[name=mrd_plain_param]").attr("value",t.mrdPlainParam))),$("#crownix-protocol-file-form input[name=opcode]").attr("value",500),$("#crownix-protocol-file-form input[name=mrd_path]").attr("value",n.mrdPath),$("#crownix-protocol-file-form input[name=mrd_param]").attr("value",n.mrdParam),$("#crownix-protocol-file-form input[name=export_type]").attr("value",r),$("#crownix-protocol-file-form input[name=protocol]").attr("value","file"),$("#crownix-protocol-file-form input[name=delete_file]").attr("value",t.options.download.deleteOnServer),$("#crownix-protocol-file-form input[name=attatchment]").attr("value",!0),f.on("submit",(function(t){this.submit(),t.preventDefault(),setTimeout((function(){h.fadeOut(500,(function(){h.remove(),c.enableToolbarItem(["save","print","print_pdf","cloud_print"])}))}),1e3)})),u.appendTo("body"),f.attr("action",i).attr("target","crownix-pdf-viewer").submit(),u.css("display","none")},l.prototype.showPdfWindowDirect=function(i,r,n,o,l){var c=this.dialog,d=this.toolbar,h={notice_message:e.get("print_pdf_export")};d.disableToolbarItem(["save","print","print_pdf","cloud_print"]);var u=c.message(h.notice_message);$("#crownix-pdf-viewer").remove(),$("#crownix-protocol-file-form").remove();var f=$('<iframe id="crownix-pdf-viewer" name="crownix-pdf-viewer"></iframe>'),p=$('<form id="crownix-protocol-file-form" target="crownix-pdf-viewer" method="post" style="display:none" accept-charset="utf-8"><input type="hidden" name="opcode"/><input type="hidden" name="mrd_path"/><input type="hidden" name="mrd_param"/><input type="hidden" name="export_type"/><input type="hidden" name="protocol"/><input type="hidden" name="delete_file"/><input type="hidden" name="attatchment"/></form>').appendTo("body");null!=r.mrdData&&""!=r.mrdData&&($('<input type="hidden" name="mrd_data"/>').appendTo(p),$("#crownix-protocol-file-form input[name=mrd_data]").attr("value",r.mrdData)),""!=n.toJson()&&($('<input type="hidden" name="runtime_param"/>').appendTo(p),$("#crownix-protocol-file-form input[name=runtime_param]").attr("value",n.toJson())),l&&!l.isEmpty()&&($('<input type="hidden" name="ext_param"/>').appendTo(p),$("#crownix-protocol-file-form input[name=ext_param]").attr("value",JSON.stringify(l.toObject())));var g="";t.encType>3&&(!o||o.isEmptyPrevDocStack())?($('<input type="hidden" name="enc_type"/>').appendTo(p),$("#crownix-protocol-file-form input[name=enc_type]").attr("value",t.encType),null!=t.mrdPlainParam&&($('<input type="hidden" name="mrd_plain_param"/>').appendTo(p),$("#crownix-protocol-file-form input[name=mrd_plain_param]").attr("value","/rpdfprintdialog "+t.mrdPlainParam))):g="/rpdfprintdialog ",$("#crownix-protocol-file-form input[name=opcode]").attr("value",500),$("#crownix-protocol-file-form input[name=mrd_path]").attr("value",r.mrdPath),$("#crownix-protocol-file-form input[name=mrd_param]").attr("value",g+r.mrdParam),$("#crownix-protocol-file-form input[name=export_type]").attr("value","pdf"),$("#crownix-protocol-file-form input[name=protocol]").attr("value","file"),$("#crownix-protocol-file-form input[name=delete_file]").attr("value",!0),$("#crownix-protocol-file-form input[name=attatchment]").attr("value",!1),p.on("submit",(function(t){this.submit(),t.preventDefault(),setTimeout((function(){u.fadeOut(500,(function(){u.remove(),d.enableToolbarItem(["save","print","print_pdf","cloud_print"])}))}),1e3)}));var m=t.options.pdfPrintSpoolName?"/"+t.options.pdfPrintSpoolName:"";a.browser.firefox||a.os.macos&&a.browser.safari?(f.css({width:"100%",height:"100%"}),new s(e.get("print_pdfviewer_title"),f,!0).show(),p.attr("action",i+m).attr("target","crownix-pdf-viewer").submit()):(f.appendTo("body"),p.attr("action",i+m).attr("target","crownix-pdf-viewer").submit(),f.css("display","none"))},l.prototype.base64URI=function(i,r,n,o){var a={notice_message:e.get("export_file"),connect_error:e.get("server_connect_error"),server_error:e.get("request_server_error"),timeout_error:e.get("request_timeout_error")};return this.export(i,"pdf",r.mrdPath,r.mrdParam,t.mrdPlainParam,r.mrdData,n,(function(t){if(t)return t}),a,o,"base64")};var c=function(t,e,i){var r=function(t,e){return n.getCryptoWorker("encrypt",t,e)}(e,i),o=$.Deferred();return r.addEventListener("message",(function(t){if("object"===t.data.method){var e=t.data.obj;o.resolve(e),r.terminate()}})),r.postMessage({method:"object",obj:t}),o},d=function(e,i,n,o,a,s){var l=new r,c=$.Deferred();return l.setConnectTimeout(t.options.timeout),l.setHandler({load:function(t){},done:function(t){c.resolve(t.responseText)},error:function(t){0==status?o.show(n.connect_error):o.show(n.server_error+"("+t.status+")"),c.reject(t.status)},abort:function(){c.reject(xhr.status)},timeout:function(){o.show(n.timeout_error),c.reject(xhr.status)}}),a&&s&&(i.rdid=s,l.setRequestHeader("crownix-rdid",s),l.setRequestHeader("crownix-encrypt-type","parameter")),l.invoke(e+(s?"?rdid="+s:""),i),c},h=function(t,e,i){var r=function(t,e){return n.getCryptoWorker("decrypt",t,e)}(e,i),o=$.Deferred();return r.addEventListener("message",(function(t){var e=t.data.text;"finalize"===t.data.method&&(o.resolve(e),r.terminate())})),r.postMessage({method:"finalize",text:t}),o};return l}(),m2soft.ns("m2soft.crownix.ParameterBuilder"),m2soft.crownix.ParameterBuilder=function(t,e){var i=m2soft.crownix.util.NumberUtil,r=t,n=e;this.concatMrdPath=function(t){return"string"==typeof t?t:t.join("")},this.concatMrdParam=function(t,e,o){e||(e="");var a=function(e,a){var s=[];$.isEmptyObject(t)?(s=[a]).push(r.formManager.makeNormalFieldDataParam(!0)):s=[r.formManager.makeFormParameter(t,a)];var l=r.report.getDocumentList()[e+1];l&&(void 0===o&&n("includeNoteInExport")||o&&n("includeNoteInPrint"))&&s.push(r.noteManager.toNoteParameter(l.firstPage,l.lastPage)),r.drilldownManager.getDrilldownLength()&&s.push(" /rdrilldowninfo ["+r.drilldownManager.toXML()+"]"),0!=e||o||null==r.options.download.partsave||(0==r.options.download.partsave?s.push(" /rpartsavedialog [1] ["+r.currentPage+"]"):s.push(" /rpartsavedialog [1] ["+r.options.download.partsave+"]"));var c=r.report.getRemovedPage();0==e&&c.length>0&&s.push(" /rsavepageexcept ["+c.join()+"]");var d=new i;return s.push(" /rformcurformat ["+d.getCurrencyFormat().replace("[.]",".")+"]"),s.push(" /rformnumformat ["+d.getNumberFormat().replace("[.]",".")+"]"),s.push(" /rbrowserlocale ["+m2soft.crownix.Resource.language+"]"),s.join("")};if("string"==typeof e)return a(0,e);for(var s=[],l=0;l<e.length;l++)s.push(a(l,e[l]));return s.join("")}},m2soft.crownix.ParameterBuilder.prototype.addParamByOptions=function(t,e){return!0===t.options.useTableOfContents&&t.stateLess&&(t.isAppendReport?e[0]+=" /rusetableofcontents":e+=" /rusetableofcontents"),e},m2soft.ns("m2soft.crownix.worker.Identity"),m2soft.crownix.worker.Identity={workerFunction:function(){addEventListener("message",(function(t){postMessage(t.data)}))}},m2soft.ns("m2soft.crownix.worker.security.SEED"),m2soft.crownix.worker.security.SEED={workerFunction:function(){var t;t="[Crownix Viewer] use SEED with CryptoJS","undefined"!=typeof console&&console.log(t);var e=null;addEventListener("message",(function(t){try{var i=t.data,r=t.data.method;if("process"==r){var n=t.data.text;i.text=e.process(n),postMessage(i)}else if("finalize"==r)n=t.data.text,i.text=e.finalize(n),postMessage(i);else if("create"===r)e=new SEED(t.data.crypt,t.data.key);else if("object"===r){var o=t.data.obj;for(var a in i.obj={},o)o.hasOwnProperty(a)&&(i.obj[a]=e.finalize(o[a]));postMessage(i)}}catch(t){postMessage(i)}}))},dependency:{SEED:m2soft.crownix.security.SEED}},m2soft.ns("m2soft.crownix.worker.security.AES"),m2soft.crownix.worker.security.AES={workerFunction:function(){var t;t="[Crownix Viewer] use AES with WebCrypto","undefined"!=typeof console&&console.log(t);var e=crypto,i="",r=null,n={name:"AES-CBC",iv:null},o=function(t){for(var e=unescape(encodeURIComponent(t)).split(""),i=[],r=0;r<e.length;r++)i.push(e[r].charCodeAt(0));return new Uint8Array(i)},a=function(t){return btoa(String.fromCharCode.apply(null,t))},s=function(t){var i=function(t){for(var e=new ArrayBuffer(t.length/2),i=new Uint8Array(e),r=0,n=0,o=t.length;r<o;r+=2,n++)i[n]=parseInt("0x"+t[r]+t[r+1]);return i}(t);return n.iv=i,e.subtle.importKey("raw",i.buffer,n,!0,["encrypt","decrypt"])};addEventListener("message",(function(t){try{var l=t.data,c=t.data.method;if("process"==c);else if("finalize"==c){if(t.data.text)var d=function(t){for(var e=atob(t).split(""),i=[],r=0;r<e.length;r++)i.push(e[r].charCodeAt(0));return new Uint8Array(i)}(t.data.text);r.then((function(t){e.subtle[i](n,t,d).then((function(t){l.text=function(t){for(var e="",i=0;i<t.length;i+=1e4)e+=String.fromCharCode.apply(null,t.subarray(i,i+1e4));return decodeURIComponent(escape(e))}(new Uint8Array(t)),postMessage(l)}))}),(function(){postMessage(l)}))}else if("create"===c)i=t.data.crypt,r=s(t.data.key);else if("object"===c){var h=t.data.obj,u=[];for(var f in h)h.hasOwnProperty(f)&&function(t){var i=r.then((function(i){return e.subtle.encrypt(n,i,o(""+h[t])).then((function(e){return l.obj[t]=a(new Uint8Array(e)),Promise.resolve(l.obj[t])}))}));u.push(i)}(f);Promise.all(u).then((function(){postMessage(l)}),(function(){postMessage(l)}))}}catch(t){postMessage(l)}}))}};var encCode="bQkwidivMO7RMQLGgVmT/uxsrn7Q9VzfTfAiRIH9csUUwuBXcA8alu/fBE2ASHzvckRSuuWGx1jmEhBSpAuCed6mEUZ+zZBgkkYKyZG+20LkSse+JdwKThdtnTbi88aqyknS1pd3DBOVufTb/RNk8wSlBIlfWau2WXLy0IyMrmGjRIKEGEEkeSsfKqv5aiNZI9bL2jAW8AKviOOPQJVg+xAIuQfgH0hk4GEhv6GVRg0MKf1dT/L4JhAYJpO2vmm7hkeckdGyAoIC40njZ0teSyaNXXODChL+GfMiVVgtBYxbQ4hfuhH+frwwt5C3+dFigmpR+adBO00w2mC4og6Jc9O/HILBF//7ZRWPRVHu8PUfq9PhexKoyE85clBCXrrXIdJIId8f+xzosxrtBaktp4ZMPpj5tTPR6RT4THE0tMaztUC3pJCFVwdqCGui1k/8RY0ChQR/qpZ6aL0JWkPMBDOiFNuMw9ZiE1Uy5BI0pIfWtCOwzVQuMQSw50tKEpNHRFVfWoATiSNRLYyqXvPvDYW5xd2M+DYJpi+aSN4ODdgh1hdsvMK31xmt4dr50JWXC+lXYUJO2bxK8sjFE7ahqhCfiXAB5THIzojKv8hvZz/Rkk6kH6IrGW+xwiSAn2M/jv0becjRsT96InU4fnmm2ysxaawWJfNsCrwxeZ5el582N/ChCuZu4o0M1Der6KLPjq6+pMbqltRk/zvcs42GUsW7JnLVrdOgX3fE8DfSF/6BV18EYN5+OPWvtQtDtsqPZ+uqG0xWbX4yxZEqDqE0pQQV+c07He/t6RXMEeRy13Tpf5x1EdlqDjrpT5LMkfE6+yy7HInFdTWxQNCQPuZlU4Sg4jpHWt5ensxIwt5puIguEVudh1MuSkMeTG9ASjN+lTxwoTWFA4VVUbJ+zoYVEL6S9efIK/UUdUeZ3qNyE97G9wXCyeC3Mkrki1c7PxcWqh2O67BN/urflgfVcQ3ZE62E/2ZU9TyEX0SawXceZpDCMOHRUKHBRb09QCBuXO/XxA1Ai6dNoQ9N54YiHQNTLyHeIPlPyxMYwBPPECklc0wBdyUqBq2bTto6OSJwMGdWuLjjAZ4tHJR4J8bCujjzgCkCz2NhjcaPlSVNfor+pxTFgfChZuQmEYfChfzjQ9Df29PrziPKMfCilXVD0UHl8ByNYX6npMCs0nFo4ObvzS9BKRiFCCFqgfPzyu5QcxaV5vj2d2kEhtQ3zT/H55zJuV7hkXATbA/lSGkJ0UljFmR80rGlNxzhv6DdLzdBfq5+uHDVjRgAxx8F0aZS4Jsl7AGGhNYcsqzj7XHxx5bIdnm3xhoC4bJ05f2kh8+OM7/uUTO5/au7cnoZdnXDllmYsXIr1p00ZFYFEmJUDZe7ih9ZYd2m6ZElyPkf/3AspkwqGCyMAVG1+DmiT3iSfh93W9BU+DUyefaaoLJ0/D6tqORSXZW74IAag0qYKDaTRZXMcVbC0kxueZoEFMoGbP3h9+vxN2I1k/pILz2nU+OM4nOYaUK7uM8nc/TMpTV8dgCCh81QhtvrmGiZ1IlewFt8Eo/tS2Ep6i6mSFiLjyEyLS64jhEaNi7Bxx1he56usAF0x/1HQOxV443ELL+qsHs9QisneQystADfQY+kc8wHPvVD4rg9aib10iVX404dvNZpTfzwe9IxWQYZI49M0ErAvgVuzvjporEyBd35MHRg0Opc+X69/fCxBGlTfOGRlHPivSFmbkrp+MqmlDgDo1IncF4x/Lpu5iuH0r5VCra+XUdY1D4qP76vE/Ya5zP3St4jYynHbsjC+tQlxV7QiNaZ8j3SOGlu9qBFR92aSB4arDybkcPACKitj/SLSsDBKyw+WDQDsVENo8oq2nuFVF2ETVavzE1RLru7IIDBQhU2g9fT3U4QfyNg2Jlwf3xpkFcWARnr7ufXDzNhkvnOPlssnD3HyhpZZy3/sC3lIf5Cxm/1/gZ+HWO0Wh/YoPKflVVJ5mkOyKQI1rx/wNeX6JA+MUh5gmGcOG4shdg3lkjbrYIfiZXNnMp/UkhlcRhBe9c/Xt8rVQQK/+ddxin0l8rRp4QMrAtDFNZZJLNTACwAADrCtU4tc2xI+ktDthTi0ggy48xmh25A1JCb8/pTTYcjGStjqa+53CBCOdTbsjlER/LnWTsEsMkSu9HR8H/JfTZcb5El8h+U97lAyjr7HpQyCJw2PihmYbMKZlIX31ISLz+e8jnn3Kb5Cc3ITe+nR5f81ZIvsFEF0ku8yyaxEVE2X40QzV6UrCMsMYtGQPFemYbRyzqW8oFrdDK+aMxm7Vxe1O4+HzPJMNulHMUVu96Ep39jT0um9TDXLWKugLxji1i8IW+rpAAJheM5LzmJ7ZkdDSl98IjD9qlQSdpQYV0Tu3sJTwGGmupEQMIk1unPT2PVrXc0vzjAkofbCFTJFl9TZGn7Y0njvvsF3mTEL4j6h6qv8m3B/ruhogXNbxul1dWxQLrYZjlOTz5vzYHCTQ+NnQF5W0LLmS5ZiMtXuzdGLkYmsC/Uc+BO2xiLz95Hx2sM5xAS+6jkPNODPkM0eIECVZv464rWoM215y0WUUL/W7+ISIiCDOdonZnSgUrOpU+YKQQbhSxkzVhchOr96l9mHGRZMlY8kAH2Zh88Rht+LGCuS9zP/d7a6GdSjIMyc875nfdiPMQ94sVzGVWjHLTE+ukfwoKZ/xVyFDqDHYso0MSweekPDLMr7WKK9sdvmvT2oiVhwnsnT1UiXsjCtFr7dmI0ErqsPo0g0Wv9lCPDjOsHeOiZvY5a1TceBAi3pdvPmi2os/QJMsrpSv3anptYDQEUAAoVpX2hiVIPc46f77FFoScolds+8v2hWGIZvxBvqm4FtZmxu48TWwOZyoKzawrKIUrVkD2YKPeCUsTDUZNk2Ji68R09QkaRmEeP3ZFttrdwms4STiHlzYyVAP/Sl96bqkFuQ4vbbQ6D6HvbGxy2BwBxZet71lYK9zh7o9At0QhQkIDgVfIRXpIKvPqRYk0eyhcx37M94LAbhqEoqKRYLkvVQDw++/3uxzt2TRVbCjfte+b4epkhB0O0zuFhK4DqbeTIQyRkcDiA7ywunXIifTV/yfvVYu+Qu/zmX1DAnFSTviVA4zhmx3haF4MrBpypqnv8ldnnHRKrbSV9iuyFbgnEt3OseVnHTDJEFTwvdgV2UhXCDI48ubQntWACvOVBz1q5usmZ6AjoPIJD9qmLYVNqZE6l2+s+jG67cNAH3oWmVPIMRZdMyAKO/r7SYS4YFDP1yNJYATs8MW5NK/iq5ilsB1U7gNf7o+XhdMc8n8TDNSXoWl7H/V7sCNUFkdaaysoNvKjY7lxqnuooA0aampFjgstCpM/hsgeglIja6plB5O7evy0kilnph5C0/zN/j4PYH3IaOuO0Qmwb0By/uofFWIoLrKe2iYHDOWkZS7hBosTPyKb8bjw+RTTh9k3PWiVjBUlqJSxk55IlN+TWqDAiSulY1OsVa1C86i31JJFT2o/0svTrA/ATYNMQyIAqCN64hure+gExoFiQVW237oiUBIPAYJVU0k0nM/XS8TxL2XcXLnq7vKjUM1H3YGrPs2fvJjVH1csg7mSIKGqS8nl+DdhiaYwW5M1UAqFGyu8JMgq4qefsVBIb/S1wVrSpDsQrjaK6vWG40hA5LHL1LWOsR7xB1VOfpJN+SdDhFKS8L197puEgOKh0aXgjU5SimfnuGD/ejXqqSlzOHO8XzE29oNPNRsy9E7NlhldYKRzRl6Sf3jbaagP4wLxnp3/LeaEDV0H0V5UCAqJC/6Yn2vW8RSBndFIexvm/Klljhw/VeoKzQUH2tcD6UVyvffLZ6FOzPxLqYHbHHuaUoPu41zDSu8qnfmeQdBNlEtRZZ/cNxX3E1SfsDew97iA86RvY/7Rk7Kn9e5EjYI0d1vVWm61uupBcjP8E3wo7r3lK7UXBY5CAmid7PsZei2D+mjgin/5EYAy8qMmClgHadaimu3ntoGlxuGHox7oyimrKKFTFPsjAfQrNA8oix0awpgj2jo103hDVs80FmCIzzH+u9JNuWHKT5lvVDVKF/Ys2lWAKxDwiFo3RUBORJ38bjO5XrQnGRKmRwGNRlxUTlhYauKoDj2KLzzgKzGYY/BII9DstjwL0PZxEcwOOY4yuzXB9e3WE+Fkc1kF/YZPJ8SXqQSy5ysLunCHfQyMhgYyv4mybXARYrXPe5UcP+b1HZD59mK/E8cqt2dn2cyBbCvkGdqc1NIvxd9mj3Si0s8/i9XFtGAGk73aOU7qrJ93Gas2ha4mqUfZFw6ijnLED/lq1uCdjFGMotif/t3emofPQ8fdPPLhSZ21ndvRKWkLOzs31Ea35bzzYV3+RSwC6qW7D2f/V2FNcdhkoUSyP8rMu0HYxdyBkaYCOEee1SNv9UDLTMEPtWRLVilEhxkE/1tBE3B2y/9vwjiv54VOI2I01efdNuCqEMXA2Tkpq+G5wvcwY8IMqjWO7yP06uMav1Gz7spONBiTMbejRMJMFUiMCJCUf6eqBawc1wwuUZ233/8x5VcBrsLGqHtbfUAXxtXm41THuPrGfFgcj/sK3NbqOdDHCUApp12P27DyvrHJ/X46sfQyBxaq74E+tyyXAEqQ/lhWuN9axCYX6K3sx6wXGuUVxw+pf4WRxBh9ORj+2a5qMrY5L4mhuqdjWDtk1QSs1K7cHqFVoLWeZ0fRjTEOICWf4E4oE1NJ89YaG/TYDRKGxQUBIweT6jiVw0geMF/JJJZLNyJa3A34RJQOGZo1w5Xpg/P/ygYQYji05Mcfhi5Tf9XvCfxpxxKtDAvHM+aVj9qVkmTUwlIhieWJCD/oWKWVYCsFNtOYIlRyniIgc3QZYkuTypOhWguHjtjIAmcJdVIFpqhdg3UnlSXvdXjmycVZF9tCkrOJ5Nzd/ndrJNJKAcVoYkDo4AsmdnWAR7yEhkot/c+oah5nfh+gGHbZy23DerQar/LDwatrd2kB/DKl5qbhYfNJ+X56szDfCnoF5LG0L1/JwMXywODo65Dys1vLq/e7kJ0GQfZn26t+xjxu10WJlJvhGF/wu3uT1dl8s9mNBpFHHxyqS555kp6vxJPzWd7eUx+tR2+4bHj7924VreSP6jyjS1P1Qa9sGtC/SND0pIG63NJcbPGKHANv8TUgH4xLEBLFMBgS9wvzET11pV7vIxZiZKZCxdOFeRNCc3oMNeD9HCmjh6qTicKTUw7tCxywhDTDm2ldNvg5lkOV32B5+F/UIyWMf/7DthqEiNehHVq+H5or6BKDMr3IgTnsNOLBS5vuepphVWaX24L31AJwUJvFk0WKCTudsGLLc4g+XDvqthEecvVqlucH+uqxivYkyhM/IwZl2mtpbhrPjwXrFYBMQzFeTlgWkWHqRISC8dxlUfGhzVG233hnPjNQqEd/yoC6GHokJaoZdIPkQ1rZu2ssGMlI4C9yyE8iyqQ0xIeuHHg8iTPkFko7JJKBc4urSQiJaIrOg9zOcD+P/PayC4rFM+uSyoaZOWwiJfNq70ToxxmFuPE+noM05aFPZ6CcVz3CE7mF5yrAHaO/KHuXx/b28fXHWZKBDY30l1cVebo9kbU8EnzO275szf97XxZbv9ILZXFSlpMuNJpEXAZ9Xv/mraa4mE1m8BRFjLrTZ+TLgX0mZvO2mb292ocvoIlCPMG3Cn0bLtxlrbiG0w1KBTR9czgQbgmklmnC0LDLBUtorPaP/E2TBjNM=";function RGBColor(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in e)t==i&&(t=e[i]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],n=0;n<r.length;n++){var o=r[n].re,a=r[n].process,s=o.exec(t);s&&(channels=a(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=new Array,i=0;i<r.length;i++)for(var n=r[i].example,o=0;o<n.length;o++)t[t.length]=n[o];for(var a in e)t[t.length]=a;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(i=0;i<t.length;i++)try{var l=document.createElement("li"),c=new RGBColor(t[i]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),d.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[i]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(d),l.appendChild(h),s.appendChild(l)}catch(t){}return s}}m2soft.ns("m2soft.crownix.EncEval"),m2soft.crownix.EncEval.eval=function(){for(var C,type,fk=["08b","41f","8c5","3d7","207","f30","019","bdc"],ek=[49,48,49,98,51,98,100,56],kk="",i=0;i<8;i++)kk+=fk[i]+String.fromCharCode(ek[i]);var SEED=m2soft.crownix.security.SEED(),seed=new SEED("decrypt",kk);eval(seed.finalize(encCode)),encCode=void 0,delete encCode},m2soft.ns("m2soft.crownix.FieldOrder"),function(){var t=function(){var t=0,e=[],i=function(t){var e=t.indexOf("-");return-1==e?0:parseInt(t.substring(e+1))},r=function(t){return-1==t.indexOf("-")?t:t.substring(0,t.indexOf("-"))};this.push=function(t,n){var o=t.attr("fi"),a=t.attr("id"),s=t.attr("ty"),l=t.attr("ti"),c=t.attr("hd"),d=t.attr("ed");if("cb"!==s&&"rb"!==s&&null!=l&&"1"!==c&&"1"===d){var h={id:"crownix_form_field_"+o+"_"+a,formID:r(o),fieldID:a,formRepeat:i(o),fieldRepeat:i(a),type:s,page:n,priority:parseInt(l)};e.push(h),e.sort((function(t,e){return t.formID==e.formID&&t.formRepeat>0&&e.formRepeat>0?t.page>e.page?1:t.page<e.page?-1:t.formRepeat>e.formRepeat?1:t.formRepeat<e.formRepeat?-1:t.fieldRepeat>0&&e.fieldRepeat>0&&t.fieldRepeat>e.fieldRepeat?1:t.fieldRepeat>0&&e.fieldRepeat>0&&t.fieldRepeat<e.fieldRepeat?-1:t.priority==e.priority?0:t.priority<e.priority?-1:1:t.page>e.page?1:t.page<e.page?-1:t.fieldRepeat>0&&e.fieldRepeat>0&&t.fieldRepeat>e.fieldRepeat?1:t.fieldRepeat>0&&e.fieldRepeat>0&&t.fieldRepeat<e.fieldRepeat?-1:t.priority==e.priority?0:t.priority<e.priority?-1:1}))}},this.remove=function(t,i){for(var r=0,n=e.length;r<n;r++)if(e[r].id==="crownix_form_field_"+t+"_"+i){e.splice(r,1);break}},this.getNext=function(){return t==e.length?null:e[t+1]},this.getPrev=function(){return 0==t?null:e[t-1]},this.getCurr=function(){return e[t]},this.setCurr=function(i){for(var r=0,n=e.length;r<n;r++)if(e[r].id===i)return e[t=r]},this.setPage=function(i){for(var r=0,n=e.length;r<n;r++)if(e[r].page>=i){t=r;break}},this.exist=function(t){for(var i=0,r=e.length;i<r;i++)if(e[i].id===t)return!0;return!1},this.length=function(){return e.length},this.clear=function(){e=[]}};m2soft.crownix.FieldOrder=m2soft.crownix.util.SingleTone((function(e){var i,r,n,o=m2soft.crownix.Util,a=e,s=e.containerDom,l=new t,c=!1,d=!1,h=null,u=!1,f=!0,p=$("<div>").attr("class","crownix-tab-buttons").appendTo(s),g=function(){"pn"==h.type&&$(".crownix-pen-close").trigger(jQuery.Event("tab")),h||l.exist(document.activeElement.id)?b(l.getPrev()):b(l.getCurr())},m=function(){"pn"==h.type&&$(".crownix-pen-close").trigger(jQuery.Event("tab")),h||l.exist(document.activeElement.id)?b(l.getNext()):b(l.getCurr())},v=$(m2soft.crownix.resource.Icon.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-tab-button").on("touchstart click",g).appendTo(p),w=$(m2soft.crownix.resource.Icon.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-tab-button").on("touchstart click",m).appendTo(p),x=function(t,e,r){clearInterval(i),$('[id^="crownix_form_field_"]').removeClass("crownix-formfield-blink");var n=function(){$("#"+t+"-canvas").toggleClass("crownix-formfield-blink"),$("#"+t).toggleClass("crownix-formfield-blink")};n(),"SELECT"===e||r&&r.indexOf("crownix_form_field_file")>-1||e&&(i=setInterval(n,500))},b=function(t){t&&!d&&(d=!0,t.page!=a.currentPage&&(u=!0,a.viewer.movePage(t.page)),l.setCurr(t.id),d=!0,o.browser.mobile&&$(":focus").blur(),setTimeout((function(){var e=$("#"+t.id);a.shareManager&&a.shareManager.isConnected()&&(e.hasClass("crownix-auth-lock")||e.hasClass("crownix-field-lock"))&&(_(),x(e[0].id,e[0].tagName)),"sg"==t.type||"pn"==t.type?setTimeout((function(){o.browser.mobile?e.trigger("tap"):e.click()}),o.browser.mobile?500:0):(e.focus(),y(e))}),0),h=t,u=!1)},y=function(t){if(d=!1,!$(t).is("button")){(t=t.parent()).parent().hasClass("commonFieldHinting")&&(t=t.parent());s.scrollLeft(),s.scrollTop();var e=t.position(),i=t.offset(),r=s.offset();(o.browser.mobile||i&&(r.left-i.left>0||r.top-i.top>0))&&setTimeout((function(){var t=-e.left,i=45-e.top+$(document).scrollTop();t>0?t=0:t<scroll.maxScrollX&&(t=scroll.maxScrollX),i>0?i=0:i<scroll.maxScrollY&&(i=scroll.maxScrollY),scroll.scrollToKeepCenter(t,i,0)}),o.browser.mobile?500:0)}};s.on("scroll",(function(){var t=s.scrollLeft(),e=s.scrollTop();a.scroll.scrollBy(-t,-e),s.scrollLeft(0),s.scrollTop(0)}));var k=function(t){p.show(),l.exist(t)&&null==l.getPrev()?v.css("visibility","hidden"):v.css("visibility","visible"),l.exist(t)&&null==l.getNext()?w.css("visibility","hidden"):w.css("visibility","visible")},_=function(){clearInterval(i),n&&(n.find('[id^="crownix_form_field_"]').removeClass("crownix-formfield-blink"),n.find(":focus").blur(),a.ttsManager?a.ttsManager.setFocus():r.focus()),h=null,o.browser.mobile&&!o.browser.ios&&l.length()>0&&p.hide(),a.shareManager&&a.shareManager.isConnected()&&a.shareManager.sendFocusOutField()};this.bind=function(t,e,s){clearInterval(i),scroll=e,n=t,l.setPage(s),function(t){r=$("<input>").attr({id:"crownix_hidden_tab",type:"radio"}).css({opacity:0,width:0,height:0}).prependTo(t),u||o.browser.mobile?!0===u&&(u=!1):setTimeout((function(){a.ttsManager||r.focus()}),100)}(n),h=null,n.on("keydown",(function(t){(a.ttsManager&&27===t.keyCode&&_(),9==t.keyCode)&&(t.preventDefault(),t.stopPropagation(),f&&(h||l.exist(document.activeElement.id)?((t.shiftKey?l.getPrev():l.getNext())&&$("#"+l.getCurr().id).blur(),t.shiftKey?b(l.getPrev()):b(l.getNext())):b(l.getCurr())))})),n.on("focus",'[id^="crownix_form_field_"][readonly!="readonly"][disabled!="disabled"][fieldtype!=file]',(function(t){t.preventDefault(),t.stopPropagation(),"checkbox"!==t.currentTarget.type&&"radio"!==t.currentTarget.type&&(x(document.activeElement.id,document.activeElement.tagName,$(document.activeElement).attr("class")),h=l.exist(document.activeElement.id)?l.setCurr(document.activeElement.id):null,c&&"SELECT"!==document.activeElement.tagName&&y($(t.currentTarget)),o.browser.mobile&&!o.browser.ios&&l.length()>0&&k(document.activeElement.id),a.shareManager&&a.shareManager.isConnected()&&"submit"!==t.currentTarget.type&&"file"!==t.currentTarget.type&&(document.activeElement.getAttribute("formid")||document.activeElement.getAttribute("formname"))&&a.shareManager.sendFocusOnField(document.activeElement.getAttribute("formid")||document.activeElement.getAttribute("formname"),document.activeElement.name||$(document.activeElement).attr("name")))})),$(scroll.scroller).on(m2soft.crownix.Util.ActionEvents.start+" touchstart",(function(t){var e=t.originalEvent.target.nodeName,i=$(t.originalEvent.target).attr("id");i&&(-1!=i.indexOf("crownix_form_field")||-1!=i.indexOf("m2soft-crownix-normal-combo"))||"OPTION"==e?c=!0:(c=!1,_())}))},this.movePrev=function(){g()},this.moveNext=function(){m()},this.hasPrev=function(){return null!=l.getPrev()},this.hasNext=function(){return null!=l.getNext()},this.exist=function(t){return l.exist(t)},this.length=function(){return l.length()},this.blink=function(t,e){x(t,e)},this.focus=function(t){h=l.exist(t)?l.setCurr(t):null,x(t),o.browser.mobile&&!o.browser.ios&&l.length()>0&&k(t)},this.blur=function(){_()},this.focusHiddenTab=function(){r.focus()},this.push=function(t,e){l.push(t,e)},this.removeField=function(t){for(var e in t)l.remove(t[e].formId,t[e].fieldId);l.setPage(a.currentPage)},this.clear=function(){l.clear()},this.setPreventMove=function(t){d=t},this.enable=function(){f=!0},this.disable=function(){f=!1},this.scrollToField=function(t){y(t)},this.getFocusField=function(){return h},this.setMovepageFlag=function(t){u=t},this.blinkOff=function(){clearInterval(i)}}))}(),m2soft.ns("m2soft.crownix.SignWindow"),m2soft.crownix.SignWindow=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u=m2soft.crownix.Resource,f=m2soft.crownix.Constant,p=m2soft.crownix.Util,g=m2soft.crownix.Util.ActionEvents,m="New Window",v=!1,w=!1,x={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box"},b=function(){w=!1,t.remove(),a.remove(),d.off(),window.removeEventListener("orientationchange",E,!1),o.removeClass("crownix-formfield-blink"),s.enable(),s.restore(),h.focusHiddenTab()},y=function(t){(l=document.createElement("canvas")).width=t.data("dpi")?t.width()*t.data("dpi")/96:t.width(),l.height=t.data("dpi")?t.height()*t.data("dpi")/96:t.height();var e=l.getContext("2d");return e.strokeStyle="#000000",e.lineWidth=(t.width()/l.width+1)*t.data("dpi")/96,e.lineJoin="round",e.lineCap="round",l},k=function(t,e){for(var i=l.getContext("2d"),r=new m2soft.crownix.Canvas(l),n=[],o=0,a=e.length;o<a;o++)p1=e[o],n.push([l.width*p1[0]/t.canvas.width,l.height*p1[1]/t.canvas.height]);n.length&&r.drawScribble(i,n)},_=function(t,e,i,r){var n=t,o=n.getContext("2d"),a=e,s=i,c=!1,d={x:-1,y:-1},h=[];this.mousedown=function(t){t.preventDefault(),d.x=t.originalEvent.pageX-a,d.y=t.originalEvent.pageY-s-(r?r.y:0),c=!0,r&&r.disable(),h=[]},this.mousemove=function(t){c&&(t.preventDefault(),o.beginPath(),o.moveTo(d.x,d.y),d.x=t.originalEvent.pageX-a,d.y=t.originalEvent.pageY-s-(r?r.y:0),o.lineTo(d.x,d.y),o.stroke(),o.closePath(),h.push([d.x,d.y]))},this.mouseup=function(t){c&&(t.preventDefault(),c=!1,r&&r.enable(),l&&k(o,h))},this.on=function(){var t=$("body");$(n).on(g.start,this.mousedown),t.on(g.move,this.mousemove),t.on(g.end,this.mouseup)},this.off=function(){var t=$("body");$(n).off(g.start,this.mousedown),t.off(g.move,this.mousemove),t.off(g.end,this.mouseup)}},C=function(t,e,i,r){var n=t,o=n.getContext("2d"),a=e,s=i,c=!1,d={x:-1,y:-1},h=[];this.touchstart=function(t){t.preventDefault();var e=t.touches[0];d.x=e.pageX-a,d.y=e.pageY-s-(r?r.y:0),c=!0,r&&r.disable(),h=[]},this.touchmove=function(t){if(t.preventDefault(),c){var e=t.touches[0];o.beginPath(),o.moveTo(d.x,d.y),d.x=e.pageX-a,d.y=e.pageY-s-(r?r.y:0),o.lineTo(d.x,d.y),o.stroke(),o.closePath(),h.push([d.x,d.y])}},this.touchend=function(t){t.preventDefault(),c&&(c=!1,r&&r.enable(),l&&k(o,h))},this.on=function(){n.addEventListener("touchstart",this.touchstart,!1),n.addEventListener("touchmove",this.touchmove,!1),n.addEventListener("touchend",this.touchend,!1)}},T=function(t){t=$("#m2soft-crownix-container");(a=$("<div>").addClass("crownix-overlay").css({display:"none","z-index":f.WINDOW_OVERLAY_Z_INDEX}).prependTo(t))[0].addEventListener("touchstart",(function(t){t.preventDefault()})),v&&a.fadeIn(100)},S=function(){var a=$("#m2soft-crownix-container"),g=a.width(),v=a.height(),k=o.width(),T=o.height(),S=.5*v,E=S*k/T,M=p.browser.mobile?2048:780,A=Math.min(M,g-20);E>A&&(S=(E=A)*T/k);var P=Math.max(E+2,130),I=S+30+44,D=v-I-20;t=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none",left:(g-P)/2,top:D,width:P+"px",height:I+"px","z-index":f.WINDOW_Z_INDEX,background:"#FFFFFF","text-align":"center"}).prependTo(a),s.save(),s.zoom(1),s.scrollToElementWithFrame(o[0],1e3,I+20),e=$("<div>").addClass("crownix-window-header").css(x).appendTo(t);var F=$("<div>").css({position:"absolute",left:"4px",top:"4px",height:"18px"}).appendTo(e);(h.length()>0&&!h.exist(o.attr("id"))||h.hasPrev())&&$(m2soft.crownix.resource.Icon.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-window-tab").on("click",(function(){h.hasPrev()&&(b(),h.movePrev())})).appendTo(F),(h.length()>0&&!h.exist(o.attr("id"))||h.hasNext())&&$(m2soft.crownix.resource.Icon.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-window-tab").on("click",(function(){h.hasNext()&&(b(),h.moveNext())})).appendTo(F),$("<span>").addClass("crownix-window-title").text(m).appendTo(e),$("<span>").addClass("crownix-window-close").bind("click",b).append($("<img>").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC")).appendTo(e),i=$("<div>").addClass("crownix-window-body").css(x).css({width:"100%",height:I-30-44-6+"px"}).appendTo(t),r=$("<div>").addClass("crownix-window-footer").css(x).css("text-align","right").appendTo(t);var O=function(t){var e="ok"===t?u.get("ok_button_text"):u.get("apply_button_text");return $('<button type="button"></button>').addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").text(e).css({"margin-right":10,"font-size":"11pt","font-weight":"bold",width:"80px",height:"40px"}).bind("click",(function(e){var i=l.getContext("2d"),r=o[0].getContext("2d"),n=i.getImageData(0,0,l.width,l.height);r.clearRect(0,0,o.width(),o.height()),r.drawImage(l,0,0,o.width(),o.height()),"function"==typeof c&&c(n,l.toDataURL("image/png")),$(l).remove(),"ok"===t&&b(),e.preventDefault(),e.stopPropagation()})).on("keydown",(function(t){t.preventDefault(),t.stopPropagation(),w&&9===t.keyCode&&(t.shiftKey?h.hasPrev()&&(b(),h.movePrev()):h.hasNext()&&(b(),h.moveNext()))}))},R=$('<button type="button"></button>').addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").text(u.get("refresh_button_text")).css({"margin-right":10,"font-size":"11pt","font-weight":"bold",width:"80px",height:"40px"}).bind("click",(function(t){n[0].getContext("2d").clearRect(0,0,n.width(),n.height()),l.getContext("2d").clearRect(0,0,l.width,l.height),t.preventDefault()})),B=O("ok");if(F.children().length>0){var N=O("apply");r.append(R,N,B)}else r.append(R,B);t.fadeIn(500,(function(){!function(t,e){var r=(n=$("<canvas>").css(x).attr({width:t+"px",height:e+"px"}).appendTo(i))[0].getContext("2d");r.strokeStyle="#000000",r.lineWidth=t/o.width()+1,r.lineJoin="round",r.lineCap="round";var a=n.offset(),l=a.left,c=a.top;(d=new _(n[0],l,c)).on(),"ontouchstart"in window&&!/hp-tablet/gi.test(navigator.appVersion)&&new C(n[0],l,c).on(),s.disable()}(E,S),y(o),B.focus(),h.setPreventMove(!1),w=!0}));var L=function(t){var e=t.srcElement.classList;("crownix-window-frame"==t.srcElement.id||e.contains("crownix-window-header")||e.contains("crownix-window-footer")||e.contains("crownix-window-title"))&&t.preventDefault()};document.getElementById("crownix-window-frame").addEventListener("touchstart",L,!1),document.getElementById("crownix-window-frame").addEventListener("mousedown",L,!1),document.getElementById("crownix-window-frame").addEventListener("pointerdown",L,!1)},E=function(){v&&a.remove(),t.remove(),o.removeClass("crownix-formfield-blink"),T(),setTimeout((function(){s.scrollToElementWithFrame(o[0],1e3,10),S()}),500)},M=function(t){"string"==typeof t&&(m=t),h=m2soft.crownix.FieldOrder.getInstance()};return M.prototype={constructor:m2soft.crownix.SignWindow,MouseDrawer:_,TouchDrawer:C,createDPICanvas:y,removeDpiCanvas:function(){$(l).remove()},show:function(t,e,i,r){o=t,c=e,v=i,s=r,T(),setTimeout((function(){S()}),p.browser.mobile?500:0),window.addEventListener("orientationchange",E,!1)}},M}(),m2soft.ns("m2soft.crownix.PenWindow"),m2soft.crownix.PenWindow=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u,f,p=m2soft.crownix.Resource,g=m2soft.crownix.Util.ActionEvents,m=m2soft.crownix.SignWindow.prototype.MouseDrawer,v=m2soft.crownix.SignWindow.prototype.TouchDrawer,w=function(){t.noteManager&&m2soft.crownix.NoteToolbar.prototype.hideToolbar(),S(),u=$("<div>").css({position:"absolute",left:f.offset().left,top:f.offset().top,width:f.width()*e.scale}).appendTo(d),$("<div>").addClass("crownix-group-sign-close crownix-pen-close").on("click",C).on("tab",y).appendTo(u),h=$("<canvas>").attr({width:f.width()*e.scale,height:f.height()*e.scale}).css({position:"relative",width:f.width()*e.scale,height:f.height()*e.scale}).appendTo(u);var i=$("<div>").css({display:"none",float:"right","min-width":"40vh","margin-top":3*e.scale}).appendTo(u),r=$("<button>").css("background","#2d94ff").addClass("crownix-pen-button").text(p.get("ok_button_text")).on("click",y).on("keydown",b).appendTo(i);$("<button>").css("background","#d2d2d2").addClass("crownix-pen-button").text(p.get("refresh_button_text")).on("click",k).appendTo(i);$(".crownix-pen-close").css("top",-$(".crownix-pen-close").height()-2*e.scale),i.fadeIn(800),r.focus(),x()},x=function(){var t=h[0].getContext("2d");t.strokeStyle="#000000",t.lineWidth=h.width()/i.width()/2+1,t.lineJoin="round",t.lineCap="round";var e=h.offset(),r=e.left,o=e.top;((n=new m(h[0],r,o)).on(),"ontouchstart"in window&&!/hp-tablet/gi.test(navigator.appVersion))&&new v(h[0],r,o).on()},b=function(t){t.preventDefault(),t.stopPropagation(),9===t.keyCode&&(t.shiftKey?o.hasPrev()&&o.movePrev():o.hasNext()&&o.moveNext())},y=function(t){t.preventDefault(),t.stopPropagation();var e=h[0].getContext("2d"),r=i[0].getContext("2d"),n=e.getImageData(0,0,h.width(),h.height());r.clearRect(0,0,i.width(),i.height()),r.drawImage(h[0],0,0,i.width(),i.height()),s(n,"overlay"==t.data),_()},k=function(t){t.preventDefault(),t.stopPropagation(),h[0].getContext("2d").clearRect(0,0,h.width(),h.height())},_=function(){n.off(),c.remove(),u.remove(),e.enable(),e.restore(),e.options.zoomMax=l,o.focusHiddenTab(),window.removeEventListener("orientationchange",T,!1),t.noteManager&&m2soft.crownix.NoteToolbar.prototype.showToolbar()},C=function(t){var e=new Image;e.src=r,e.onload=function(){i[0].getContext("2d").drawImage(e,0,0,i.width(),i.height())},_()},T=function(){u.remove(),e.enable(),e.restore(),setTimeout((function(){e.save(),w()}),500)},S=function(){var t,i,r=.8*e.wrapperWidth,n=.7*e.wrapperHeight,o=Math.min(r/f.width(),n/f.height());e.save(),l=e.options.zoomMax,e.options.zoomMax=o,t=(f.position().left+a.position().left)/e.scale+f.width()/2,i=(f.position().top+a.position().top)/e.scale+f.height()/2,e.zoomAndScrollTo(o,t,i),e.disable()},E=function(e){t=e,o=m2soft.crownix.FieldOrder.getInstance()};return E.prototype={show:function(n,l,h,u,p){f=n,e=l,r=(i=h)[0].toDataURL("image/png"),a=u,s=p,i[0].getContext("2d").clearRect(0,0,i.width(),i.height()),d=$("#"+t.containerDom.parent().attr("id")),c=$("<div>").on(g.start,["overlay"],y).addClass("crownix-pen-overflow"),$(".crownix-tab-buttons").before(c),w(),o.setPreventMove(!1),window.addEventListener("orientationchange",T,!1)}},E}(),m2soft.ns("m2soft.crownix.MaskWindow"),m2soft.crownix.MaskWindow=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b,y,k,_,C,T,S,E,M,A=m2soft.crownix.Resource,P=m2soft.crownix.Constant,I=m2soft.crownix.resource.Icon,D=m2soft.crownix.Util,F=A.get("mask_dialog_title"),O="#ffffff",R="#000000",B=D.browser.mobile?2048:780,N={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box"},L=function(t,e,i){return(t-e.left)*(i/e.width)},q=function(t,e,i){return(t-e.top)*(i/e.height)},j=function(){var t=T[0].getBoundingClientRect(),e={width:T[0].width,height:T[0].height},i=!1,r={x:-1,y:-1};this.mousedown=function(n){n.preventDefault(),r.x=L(n.pageX,t,e.width),r.y=q(n.pageY,t,e.height),i=!0},this.mousemove=function(n){i&&(n.preventDefault(),S.beginPath(),S.moveTo(r.x,r.y),r.x=L(n.pageX,t,e.width),r.y=q(n.pageY,t,e.height),S.lineTo(r.x,r.y),S.stroke(),S.closePath())},this.mouseup=function(t){i&&(t.preventDefault(),i=!1)},this.updateCanvasInfo=function(i,r){t=i,e.width=e.width,e.height=r.height}},z=function(){var t=T[0].getBoundingClientRect(),e={width:T[0].width,height:T[0].height},i=!1,r={x:-1,y:-1};this.touchstart=function(n){n.preventDefault();var o=n.touches[0];r.x=L(o.pageX,t,e.width),r.y=q(o.pageY,t,e.height),i=!0},this.touchmove=function(n){if(n.preventDefault(),i){var o=n.touches[0];S.beginPath(),S.moveTo(r.x,r.y),r.x=L(o.pageX,t,e.width),r.y=q(o.pageY,t,e.height),S.lineTo(r.x,r.y),S.stroke(),S.closePath()}},this.touchend=function(t){t.preventDefault(),i&&(i=!1)},this.updateCanvasInfo=function(i,r){t=i,e.width=e.width,e.height=r.height}},H=function(){p=l.width(),g=l.height(),m=.5*g,v=t.width,w=t.height,b=(x=w>m?m:w)*(v/w),y=Math.min(B,p-20),b>y&&(x=(b=y)*(w/v)),k=Math.max(b+2,210),C=g-(_=x+30+44)-20},U=function(){H(),d.css({left:(p-k)/2,top:C,width:k+"px",height:_+"px"}),u.css("height",_-30-44-6+"px"),$(T[0]).width(b).height(x),E.updateCanvasInfo(T[0].getBoundingClientRect(),{width:T[0].width,height:T[0].height}),M&&M.updateCanvasInfo(T[0].getBoundingClientRect(),{width:T[0].width,height:T[0].height}),setTimeout((function(){r.scrollToElementWithFrame(e[0],1e3,_+20)}),500)},V=function(){d.remove(),c.remove();var t=$("body");T.off("mousedown",E.mousedown),t.off("mousemove",E.mousemove),t.off("mouseup",E.mouseup),window.removeEventListener("resize",U,!1),e.removeClass("crownix-formfield-blink"),r.enable(),r.restore(),a.focusHiddenTab()},W=function(){S.clearRect(0,0,T[0].width,T[0].height),S.drawImage(t,0,0,T[0].width,T[0].height)},Y=function(t){var e=$("<li>").addClass("crownix-mask-item"),i="string"==typeof t.title?t.title:t.title[0],r="string"==typeof t.svg?t.svg:t.svg[0],n=$("<button>").attr({type:"button",title:i,id:"crownix-mask-button-"+i}).addClass("crownix-mask-button").on("click tab",t.handler);return n.appendTo(e),$(r).appendTo(n),e},G=function(){H(),d=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none",left:(p-k)/2,top:C,width:k+"px",height:_+"px","z-index":P.WINDOW_Z_INDEX,background:"#FFFFFF","text-align":"center"}).prependTo(l),r.save(),r.zoom(1),r.scrollToElementWithFrame(e[0],1e3,_+20),h=$("<div>").addClass("crownix-window-header").css(N).appendTo(d),$("<span>").addClass("crownix-window-title").text(F).appendTo(h),$("<span>").addClass("crownix-window-close").bind("click",V).append($("<img>").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC")).appendTo(h),u=$("<div>").addClass("crownix-window-body").css(N).css({width:"100%",height:_-30-44-6+"px"}).appendTo(d),f=$("<div>").addClass("crownix-window-footer").css("text-align","right").appendTo(d);var t=$("<ul>").css({"list-style-type":"none",padding:"0px",margin:"0px"}).appendTo(f);for(var i in s)Y(s[i]).appendTo(t);d.fadeIn(500,(function(){!function(t,e){T=$("<canvas>").css(N).css({border:"1px solid grey",cursor:"crosshair"}).attr({width:t+"px",height:e+"px"}).appendTo(u),(S=T[0].getContext("2d")).strokeStyle=R,S.lineWidth=4,S.lineJoin="round",S.lineCap="round",W(),E=new j;var i=$("body");T.on("mousedown",E.mousedown),i.on("mousemove",E.mousemove),i.on("mouseup",E.mouseup),"ontouchstart"in window&&!/hp-tablet/gi.test(navigator.appVersion)&&(M=new z,T[0].addEventListener("touchstart",M.touchstart,!1),T[0].addEventListener("touchmove",M.touchmove,!1),T[0].addEventListener("touchend",M.touchend,!1)),r.disable()}(b,x)}))},X=function(t,e,i){var r=$("#crownix-mask-button-"+t),n=(t=s[e].title[i],s[e].svg[i]);$(r).attr({title:t,id:"crownix-mask-button-"+t}).children().remove(),$(n).appendTo(r)},K=function(l,c,d,h,u,f,p){t=l,c,e=d,i=h,r=u,n=f,o=p,a=m2soft.crownix.FieldOrder.getInstance(),s={ok:{svg:I.MASK_OK,title:A.get("ok_button_text"),handler:function(){var t=e[0].getContext("2d");o(t,T[0],e),V(),n()}},init:{svg:I.MASK_RESET,title:A.get("refresh_button_text"),handler:function(){W()}},weight:{svg:[I.MASK_THIN,I.MASK_BOLD],title:[A.get("mask_dialog_thin"),A.get("mask_dialog_bold")],handler:function(t){S.lineWidth=4===S.lineWidth?16:4,X(s.weight.title[Number(4===S.lineWidth)],"weight",Number(16===S.lineWidth))}},color:{svg:[I.MASK_BLACK,I.MASK_WHITE],title:[A.get("mask_dialog_black"),A.get("mask_dialog_white")],handler:function(t){S.strokeStyle=S.strokeStyle===R?O:R,X(s.color.title[Number(S.strokeStyle===R)],"color",Number(S.strokeStyle===O))}}}};return K.prototype={show:function(){l=$("#m2soft-crownix-container"),(c=$("<div>").addClass("crownix-overlay").css({display:"none","z-index":P.WINDOW_OVERLAY_Z_INDEX}).prependTo(l))[0].addEventListener("touchstart",(function(t){t.preventDefault()})),i&&c.fadeIn(100),G(),window.addEventListener("resize",U,!1)}},K}(),m2soft.ns("m2soft.crownix.submit.Preview"),m2soft.crownix.submit.Preview=function(){var t,e,i,r,n,o,a,s,l=m2soft.crownix.Resource,c=m2soft.crownix.Window,d=m2soft.crownix.resource.Icon,h=m2soft.crownix.Util,u=1,f="crownix-submit-preview-viewer",p="#5874AD",g=function(e,o){t=e,s={zoomin:{svg:d.ZOOM_IN,title:l.get("zoom_in"),handler:function(){(u+=.2)>r.options.zoomMax&&(u=r.options.zoomMax),r.zoom(u,n.width()/2,n.height()/2)}},zoomout:{svg:d.ZOOM_OUT,title:l.get("zoom_out"),handler:function(){(u-=.2)<r.options.zoomMin&&(u=r.options.zoomMin),r.zoom(u,n.width()/2,n.height()/2)}},submit:{text:l.get("submit_button_text"),title:l.get("submit_button_text"),handler:function(){"function"==typeof o&&($("#"+this.id).removeClass("crownix-toolbar-item-enable").addClass("crownix-toolbar-item-disable").off(),o())}},cancel:{text:l.get("cancel_button_text"),title:l.get("cancel_button_text"),handler:function(){b(),i.close()}}},w()},m=function(){return $("<div>").attr("id","crownix-toolbar").css({float:"left",width:"50%",padding:"0px 0px","border-bottom":"0px"})},v=function(t){return $("<ul>").attr("id","#crownix-toolbar-menu").css({float:t,padding:"0px 10px"})},w=function(){n=$("<div>").attr("id",f).addClass("crownix-container-gradient").addClass("crownix-storage-dialog").css({width:"100%",overflow:"hidden","text-align":"center","-moz-border-radius":"0px 0px 0px 0px","-webkit-border-radius":"0px 0px 0px 0px","-ms-border-radius":"0px 0px 0px 0px","-o-border-radius":"0px 0px 0px 0px","order-radius":"0px 0px 0px 0px"}),o=$("<div>").attr("id","crownix-submit-preview-canvas").css("padding","20px").appendTo(n),a=$("<div>").addClass("crownix-window-footer").css("height","50px");var e,i,r=v("left").appendTo(m().appendTo(a)),l=v("right").appendTo(m().appendTo(a));for(var c in s)e=s[c],i=$("<li>").attr({id:c,title:e.title}).bind("click tab",e.handler).addClass("crownix-toolbar-item-enable").addClass("crownix-toobar-dropitem").css({width:"inherit","border-color":p,width:75}),t.options.submitPreview&&t.options.submitPreview.scrollEndBtnEnable&&"submit"==c&&i.unbind("click tab",e.handler).removeClass("crownix-toolbar-item-enable").addClass("crownix-toolbar-item-disable"),e.svg?(i.appendTo(r),$(e.svg).attr("class","crownix-toolbar-icon-svg").css({fill:p,stroke:p}).appendTo(i)):e.text&&(i.appendTo(l),$("<div>").text(e.text).addClass("crownix-toolbar-icon-color").css({color:p,"margin-top":0,"line-height":"32px"}).appendTo(i))},x=function(){r&&r.destroy();var e={zoom:!0,zoomMin:.25,zoomMax:2.5,useTransition:!0,scrollX:!0,scrollY:!0,scrollbars:"custom",interactiveScrollbars:!0,freeScroll:!0,keepCenter:!0,tap:h.hasTouch(),doubleTap:h.hasTouch(),mouseWheel:!0,click:!1,HWCompositing:t.options.enableTranslateZ};(h.browser.android||h.browser.ios)&&(e.disablePointer=!0,e.disableTouch=!1),r=new IScroll("#"+f,e),t.options.submitPreview&&t.options.submitPreview.scrollEndBtnEnable&&r.on("scrollEnd",(function(){r.y==r.getMaxScrollY()&&a.find("#submit").bind("click tab",s.submit.handler).removeClass("crownix-toolbar-item-disable").addClass("crownix-toolbar-item-enable")}));var i=function(){var t=n.innerWidth()-2,e=o.width();return(t-40*t/e)/e}();i<1&&(u=i,r.zoom(u,n.width()/2,n.height()/2,0))},b=function(){for(var e=$("#crownix-submit-preview-canvas").find("canvas"),i=0,n=0;n<e.length;n++)if((i+=e[n].height)>Math.abs(r.y)){t.viewer.movePage(n+1);break}};return g.prototype={show:function(r){e=new m2soft.crownix.ImageConverter,t.formManager&&e.setFormManager(t.formManager),t.license.isAllowedFeature("Note")&&t.options.enableNote&&("editable"===t.noteManager.getMode()||"disable"===t.noteManager.getMode())&&e.setNoteManager(t.noteManager),e.convert(t.report,"canvas",(function(t){var e=0,s=0;for(var d in t)t[d].css({display:"block",margin:"0px auto 5px auto"}),t[d].attr("width")>e&&(e=t[d].attr("width")),s+=parseInt(t[d].attr("height"));o.css({width:e,height:s}).append(t),(i=new c(l.get("submit_preview_title"),n,!0)).setFooterHeight(50),i.show({},x),a.appendTo($("#crownix-window-frame").css("height","90%")),"function"==typeof r&&r()}))},close:function(){i.close()}},g}(),m2soft.ns("m2soft.crownix.ChartConverter"),m2soft.crownix.ChartConverter=function(){this.convertMml=function(element){var series,options;return element.find("CC").children().each((function(){var elementName=this.tagName,element=$(this);"SR"==elementName?series=eval("("+$(this).text()+")"):options=eval("("+$(this).text()+")")})),{series,options}}},m2soft.ns("m2soft.crownix.BatchSignWindow"),m2soft.crownix.BatchSignWindow=function(t){var e,i,r,n,o,a,s,l,c,d,h,u=m2soft.crownix.Resource,f=m2soft.crownix.Util,p=m2soft.crownix.SignWindow.prototype.MouseDrawer,g=m2soft.crownix.SignWindow.prototype.TouchDrawer,m=[],v=[],w=!1,x={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box"},b=function(){a.css({visibility:"visible","margin-left":(window.innerWidth-a.width())/2,"margin-top":(window.innerHeight-(s.height()+(c?c.height():0)))/2})},y=function(){$(".crownix-group-sign-area").find("input:checkbox, button").each((function(){$(this).removeAttr("disabled")})),d.css("display","none")},k=function(){$(".crownix-group-sign-area").find("input:checkbox, button").each((function(){$(this).attr("disabled","disabled")})),d.css("display","block")},_=function(){(w=!!$(this).is(":checked"))?y():k()},C=function(){var t=!1,e=$(this);e.is(":checked")&&(t=!0),t?v.push(e.data("field")):v.forEach((function(t,i){$(t).attr("id")==e.data("field").id&&v.splice(i,1)}))},T=function(t){return{width:m2soft.crownix.Painter.adjustCoord(t.element.attr("ri"))-m2soft.crownix.Painter.adjustCoord(t.element.attr("le")),height:m2soft.crownix.Painter.adjustCoord(t.element.attr("bo"))-m2soft.crownix.Painter.adjustCoord(t.element.attr("to"))}},S=function(){r[0].getContext("2d").clearRect(0,0,r.width(),r.height()),n.getContext("2d").clearRect(0,0,n.width,n.height)},E=function(){for(var e=0,i=m.length;e<i;e++)if("1"==m[e].required&&-1==v.indexOf(m[e]))return void t.dialog.show(u.get("not_check_require"));if(v.length)for(e=0,i=m.length;e<i;e++){var r=$("#"+m[e].elementId);r.is("canvas")||(r=$("<canvas>").css({width:T(m[e]).width,height:T(m[e]).height})),f.browser.android&&f.browser.chrome&&(r[0].width++,r[0].width--);var o=r[0].getContext("2d");if(o.clearRect(0,0,r.width(),r.height()),-1!=$.inArray(m[e],v)){var a=n.width/n.height;r.width()/r.height()>a?o.drawImage(n,0,0,r.height()*a,r.height()):o.drawImage(n,0,0,r.width(),r.width()/a),m[e].value=n.toDataURL("image/png"),$("[for="+m[e].elementId+"]").hide()}else m[e].value="",$("[for="+m[e].elementId+"]").show();t.shareManager&&t.shareManager.isConnected()&&t.shareManager.sendFormField({formId:m[e].formId,fieldId:m[e].id,value:m[e].value})}A()},M=function(){a=$("<div>").addClass("crownix-batch-group-sign").prependTo(o),s=$("<div>").addClass("crownix-group-sign crownix-group-sign-enable").appendTo(a),$("<div>").addClass("crownix-group-sign-close").on("click",A).appendTo(s),$("<input>",{type:"checkbox",id:"crownix-group-sign_checkbox"}).on("click",_).appendTo(s),$("<label>",{text:u.get("agree_group_sign")}).attr("for","crownix-group-sign_checkbox").appendTo(s),c=$("<div>").addClass("crownix-group-sign-wrapper crownix-group-sign").appendTo(a),l=$("<div>").addClass("crownix-group-sign-area").appendTo(c);var f=$("<div>").addClass("crownix-group-sign crownix-required-sign-list").appendTo(l),w=$("<div>").addClass("crownix-group-sign crownix-required-sign-list").appendTo(l);$("<label>",{text:u.get("required_sign")}).appendTo(f),$("<label>",{text:u.get("tts_select")}).appendTo(w);var y=t.formManager.getFormList();for(var k in y)if(!y[k].isSubmitted){var M=y[k].fieldList;for(var P in M){var I=M[P];if("sg"==I.type&&I.groupSignId&&I.groupSignId==e){if("1"!=I.editable)continue;var D,F=I.elementId?I.elementId:I.formId+I.id;i||(i=I.elementId&&$("#"+F).length?$("#"+F):$("<canvas>").css({width:T(I).width,height:T(I).height})).data("dpi",I.dpi),D="1"==I.required?$("<div>").appendTo(f):$("<div>").appendTo(w);var O=!1;v&&-1!=v.indexOf(I)&&(O=!0),$("<label>").attr("for",F+"_checkbox").text(I.title?I.title:I.id).appendTo(D),$("<span>").text(I.page+"page").data("page",I.page).appendTo(D),$("<input>",{type:"checkbox",id:F+"_checkbox"}).attr({disabled:"disabled",checked:O}).data("field",I).on("click",C).prependTo(D),m.push(I)}}}if(!i)return A(),void t.dialog.show(u.get("not_group_signId").replace("%s",e));1==f.children().length&&f.remove(),1==w.children().length&&w.remove();var R=$("<div>").css({width:.9*a.width(),height:a.width()*$(i).height()/$(i).width()*.9,margin:"auto","margin-top":10}).appendTo(l),B=$("<div>").addClass("crownix-group-sign crownix-group-sign-buttons").appendTo(l);$("<button>").addClass("crownix-group-sign").text(u.get("refresh_button_text")).attr("disabled","disabled").on("click",S).appendTo(B),$("<button>").addClass("crownix-group-sign crownix-group-sign-apply").text(u.get("ok_button_text")).attr("disabled","disabled").on("click",E).appendTo(B);scroll=new IScroll(".crownix-group-sign-wrapper",{scrollY:!0,scrollX:!1,scrollbars:!0,interactiveScrollbars:!0,mouseWheel:!0}),b(),function(t){r=$("<canvas>").css(x).attr({width:t.width(),height:t.height()}).appendTo(t),n=m2soft.crownix.SignWindow.prototype.createDPICanvas(i);var e=r[0].getContext("2d");e.strokeStyle="#000000",e.lineWidth=r.width()/$(i).width()+1,e.lineJoin="round",e.lineCap="round";var o=r.offset(),a=o.left,s=o.top;(h=new p(r[0],a,s,scroll)).on(),"ontouchstart"in window&&!/hp-tablet/gi.test(navigator.appVersion)&&new g(r[0],a,s,scroll).on()}(R),d=$("<div>").css({position:"absolute",width:.9*a.width(),height:a.width()*$(i).height()/$(i).width()*.9,background:"#c3c3c3",margin:"auto"}).appendTo(R)},A=function(){o.remove(),v=[],i="",h&&h.off(),m2soft.crownix.SignWindow.prototype.removeDpiCanvas(),window.removeEventListener("orientationchange",P),window.removeEventListener("resize",b)},P=function(){a.remove(),m=[],i="",h.off(),setTimeout((function(){M(),w?(y(),s.find("input").prop("checked",!0)):k()}),500)};this.show=function(i){if(t.license.isAllowedFeature("FormField")&&t.isFormEditMode){e=i,t.slide.closeSlide();var r=$("#"+t.containerDom.parent().attr("id"));(o=$("<div>").addClass("crownix-overlay")).appendTo(r),M(),window.addEventListener("orientationchange",P),window.addEventListener("resize",b)}else t.dialog.show(u.get("unsupported_feature_without_formedit_mode"))}},m2soft.ns("m2soft.crownix.Field"),m2soft.crownix.Field=function(){var R=m2soft.crownix.Resource,Util=m2soft.crownix.Util,Constructor=function(){this.type="",this.id="",this.value="",this.page="",this.required="1",this.editable="1",this.index=0,this.ignore=!1,drilldownId=null,this.reset_=function(){this.value=this.originalValue,this.editable=this.originalEditable},this.reset=this.reset_};return Constructor.prototype={toData:function(){return{id:this.id,value:this.value,type:this.type}},validate:function(t){return t||(t=this.value),!("1"==this.required&&!t)},getEventHandler:function(t){return this.eventHandler&&this.eventHandler[t]||null},setEventHandler:function(t,e){this.eventHandler||(this.eventHandler={}),this.eventHandler[t]=e},getEventList:function(){var t=[];if(this.eventList)for(var e in this.eventList)t.push(e);return t},getEvent:function(t){return this.eventList&&this.eventList[t]||null},setEvent:function(t){this.eventList||(this.eventList={});var e=t.attr("evc");e&&(this.eventList.change=e);var i=t.attr("click");i&&(this.eventList.click=i)},setElementId:function(t){this.elementId=t},setIndex:function(t){null==t&&(t=0),this.index=parseInt(t)},getValue:function(){return null},setValue:function(t){},getLabel:function(){return null},setLabel:function(t){},getEditable:function(){return null},setEditable:function(t){},getRequired:function(){return"1"===this.required},setRequired:function(t,e){t?(this.required="1",this.showRequiredMark(e)):(this.required="0",this.hideRequiredMark())},getSelected:function(){return null},setSelected:function(t){},getIgnore:function(){return this.ignore},setIgnore:function(t){this.ignore=t},trigger:function(t,e,i){var r=this.getEvent(t);if(r){var n=this.getEventHandler(t);n||(n=this.bindEvent(r,t)),n(e,this.index,i)}},bindEvent:function(t,e){var i=this.decodeFormFieldScriptFunction(t);return this.setEventHandler(e,i),i},decodeFormFieldScriptFunction:function(encodedScript){var planeScript=Util.base64.utf8Decode(encodedScript);return eval('var func = function(form, index, viewer) { "use strict"; '+planeScript+"}"),func},showRequiredMark:function(t,e){if(""!=t&&"1"==this.required){var i=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper").children(".requiredFieldHinting");0!=i.length?i.show():(e||(e=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper")),i=$(document.createElement("div")).css({"border-color":t+" transparent"}).attr("id","crownix_form_field_hintingbox").addClass("requiredFieldHinting").appendTo(e))}return i},hideRequiredMark:function(){var t=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper").children(".requiredFieldHinting");return 0!=t.length&&t.hide(),t}},Constructor}(),m2soft.ns("m2soft.crownix.Field.CheckBox"),m2soft.crownix.Field.CheckBox=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="cb",this.id=t.attr("id"),this.originalValue=this.value=t.attr("se")||"0",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.setEvent(t),this.page=e,this.originalLabel=this.label=t.attr("lb"),this.title=t.attr("tt")||this.id,this.size=t.attr("sz")||16};return(e.prototype=new t).reset=function(){this.reset_(),this.label=this.originalLabel},e.prototype.validate=function(t){return t||(t=this.value),"1"!=this.required||"0"!=t},e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){this.label=t,$("[for="+this.elementId+"] [class=crownix_form_field_label]").text(t)},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled",0==this.editable),"0"===this.editable?e.siblings(".crownix-css-checkborder").addClass("crownix-formfield-disable"):e.siblings(".crownix-css-checkborder").removeClass("crownix-formfield-disable")},e.prototype.getSelected=function(){return"1"===this.value},e.prototype.setSelected=function(t){var e=$("#"+this.elementId);t?(this.value="1",e.val("1"),e.prop("checked",!0),e.siblings(".crownix-css-checkmark").css("visibility","visible")):(this.value="0",e.val("0"),e.prop("checked",!1),e.siblings(".crownix-css-checkmark").css("visibility","hidden"))},e}(),m2soft.ns("m2soft.crownix.Field.ComboBox"),m2soft.crownix.Field.ComboBox=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="co",this.id=t.attr("id"),this.formId=t.attr("fi"),this.value="",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.selectedIndex=-1,this.setEvent(t),this.displayValues=[],this.actualValues=[];for(var i=t.attr("sv"),r=t.children("item"),n=0;n<r.length;n++){var o=r[n].getAttribute("sd"),a=r[n].getAttribute("ad");this.displayValues.push(o),this.actualValues.push(a),i===o&&(this.originalSelectedIndex=this.selectedIndex=n,this.originalValue=this.value=a)}this.page=e,this.element=t,this.title=t.attr("tt")||this.id};return(e.prototype=new t).reset=function(){this.reset_(),this.selectedIndex=this.originalSelectedIndex},e.prototype.validate=function(t){return t||(t=this.value),"1"!=this.required||!!t},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){var e=$("#"+this.elementId),i=this.actualValues.indexOf(t);-1==i&&""!==t||(e.children("option").prop("selected",!1),e.children('[value="'+t+'"]').prop("selected",!0),this.value=t,this.selectedIndex=i)},e.prototype.setValueByIndex=function(t,e,i){var r=$("#"+this.elementId),n=this.actualValues[t];-1==t&&(n=""),r.children("option").prop("selected",!1),r.children('[value="'+n+'"]').prop("selected",!0),this.value=n,this.selectedIndex=t,e&&e.ttsManager&&e.ttsManager.update(i,this.id)},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled","0"===this.editable)},e.prototype.getDisplayValue=function(){return this.displayValues[this.selectedIndex]},e}(),m2soft.ns("m2soft.crownix.Field.RadioButton"),m2soft.crownix.Field.RadioButton=function(){var t=m2soft.crownix.Field,e=(m2soft.crownix.Resource,function(t,e){this.type="rb",this.id=t.attr("id"),this.gid=t.attr("gi"),this.originalValue=this.value=t.attr("vl"),this.selected="1"==t.attr("se"),this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.invalid=!1,this.originalLabel=this.label=t.attr("lb"),this.setEvent(t),this.size=t.attr("sz")||16});return(e.prototype=new t).reset=function(){this.reset_(),this.label=this.originalLabel},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t,e){e.selectedId===this.id&&(e.value=t),this.value=t,$("#"+this.elementId).attr("value",t)},e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){this.label=t,$("[for="+this.elementId+"] [class=crownix_form_field_label]").text(t)},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled",0==this.editable),"0"===this.editable?e.siblings(".crownix-radio-outer").addClass("crownix-formfield-disable"):e.siblings(".crownix-radio-outer").removeClass("crownix-formfield-disable")},e.prototype.getSelected=function(){return this.selected},e.prototype.setSelected=function(t,e,i,r){var n=$("#"+this.elementId);t?(t="1",e.select(this.id,i,r),$("[name="+n.attr("name")+"]").prop("checked",!1)):(t="0",e.unselect(this.id,i,r)),n.prop("checked","1"===t)},e}(),m2soft.ns("m2soft.crownix.Field.RadioGroup"),m2soft.crownix.Field.RadioGroup=function(){var t=m2soft.crownix.Field,e=m2soft.crownix.Resource,i=function(t,e){this.type="rg",this.id=t.attr("gi"),this.value="",this.selectedId="",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.invalid=!1,this.buttonList={},this.page=e,this.title=t.attr("tt")||this.id};return(i.prototype=new t).reset=function(){this.reset_(),this.selectedId=this.originalSelectedId},i.prototype.putButton=function(t,i){var r=this.buttonList;if(!i&&r[t.id])throw new Error(e.get("form_duplicated_id_error")+"("+this.id+"."+t.id+")");t.selected&&(this.originalSelectedId=this.selectedId=t.id,this.originalValue=this.value=t.value),r[t.id]=t},i.prototype.isSelected=function(t){return this.selectedId==t},i.prototype.validate=function(){return"1"!=this.required||""!==this.selectedId},i.prototype.select=function(t,e,i){var r=this.buttonList;for(var n in r)r[n].selected=!1,$("#"+r[n].elementId).siblings(".crownix-radio-inner-"+e+"-"+this.id).css("display","none");var o=r[t];if(o&&(o.selected=!0,this.selectedId=o.id,this.value=o.value,$("#"+o.elementId).siblings(".crownix-radio-inner-"+e+"-"+this.id).css("display","inline-block")),i.ttsManager)for(var n in r)i.ttsManager.update(e,n)},i.prototype.unselect=function(t,e,i){var r=this.buttonList,n=r[t];if(n&&(n.selected=!1,this.selectedId===n.id&&(this.selectedId="",this.value="",$("#"+n.elementId).siblings(".crownix-radio-inner-"+e+"-"+this.id).css("display","none"))),i.ttsManager)for(var o in r)i.ttsManager.update(e,o)},i.prototype.getValue=function(){return this.selectedId?this.buttonList[this.selectedId].getValue():""},i.prototype.setValue=function(t){var e;for(buttonId in this.buttonList)if(this.buttonList[buttonId].value===t){e=this.buttonList[buttonId];break}e&&(this.value=t,this.selectedId=e.id,e.setSelected(!0,this))},i.prototype.getEditable=function(){return"1"===this.editable},i.prototype.setEditable=function(t){for(var e in this.editable=t?"1":"0",this.buttonList){this.buttonList[e].setEditable("1"===this.editable)}},i.prototype.getRequired=function(){return"1"===this.required},i.prototype.setRequired=function(t,e){for(var i in this.required=t?"1":"0",this.buttonList)this.buttonList[i].setRequired(t,e)},i}(),m2soft.ns("m2soft.crownix.Field.Signature"),m2soft.crownix.Field.Signature=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="sg",this.formId=t.attr("fi"),this.id=t.attr("id"),this.originalValue=this.value=t.attr("dt")||"",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.setEvent(t),this.placeHolder=null,this.element=t,this.page=e,this.title=t.attr("tt")||this.id,this.groupSignId=t.attr("gi"),this.dpi=t.attr("dpi")};return(e.prototype=new t).toData=function(){var t;return this.value&&(t=this.value.split(",")[1]||""),{id:this.id,value:t,type:this.type}},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){var e,i=$("#"+this.elementId)[0];if(t){if("string"==typeof t){var r=new Image,n=this;r.onload=function(){i&&((e=i.getContext("2d")).clearRect(0,0,i.width,i.height),setTimeout((function(){var t;r.width!=i.width||r.height!=i.height?(t=r.width/r.height,i.width/i.height>t?e.drawImage(r,0,0,i.height*t,i.height):e.drawImage(r,0,0,i.width,i.width/t)):e.drawImage(r,0,0,i.width,i.height)}),0),n.placeHolder&&n.placeHolder.hide()),n.value=t},r.src=t}}else i&&((e=i.getContext("2d")).clearRect(0,0,i.width,i.height),this.placeHolder&&this.placeHolder.show()),this.value=t},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled","0"===this.editable)},e}(),m2soft.ns("m2soft.crownix.Field.TextArea"),m2soft.crownix.Field.TextArea=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="ta",this.id=t.attr("id"),this.formId=t.attr("fi"),this.originalValue=this.value=t.text(),this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.regExpression=t.attr("re"),this.referenceId=t.attr("rfi"),this.limitiedLineLength=t.attr("ll"),this.setEvent(t),this.disableColor=!t.attr("nc")||"0"!==t.attr("nc"),this.page=e,this.element=t,this.valid=!0,this.title=t.attr("tt")||this.id};return(e.prototype=new t).validateRegEx=function(t){if(t||(t=this.value),this.regExpression){var e=new RegExp(this.regExpression),i=$("#crownix_form_field_"+this.id+"_warnning");""==t||e.test(t)?(i.hide(),this.valid=!0):(i.show(),this.valid=!1)}},e.prototype.spreadToShareField=function(t,e,i){if(this.referenceId)e[this.referenceId].spreadToShareField(t,e,i);else for(var r in this.id!=t.id&&(this.value=t.value,this.validateRegEx(),$("#crownix_form_field_"+ +i+"_"+this.id).val(t.value)),$('textarea[rfi="crownix_form_field_'+i+"_"+this.id+'"][id!="crownix_form_field_'+i+"_"+t.id+'"]').val(t.value),e)e[r].referenceId==this.id&&(e[r].value=t.value,e[r].validateRegEx())},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t,$("#"+this.elementId).val(t)},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr({readonly:"0"===this.editable})},e}(),m2soft.ns("m2soft.crownix.Field.TextField"),m2soft.crownix.Field.TextField=function(){var t=m2soft.crownix.Field,e=m2soft.crownix.util.DateUtil,i=m2soft.crownix.util.NumberUtil,r=function(t,e){this.type="tf",this.id=t.attr("id"),this.formId=t.attr("fi"),this.value=this.originalValue=this.value=t.text(),this.originalEditable=this.editable=t.attr("ed")||"1",this.required=t.attr("rq")||"1",this.regExpression=t.attr("re"),this.referenceId=t.attr("rfi"),this.password=t.attr("pw"),this.inputType=t.attr("it")||"text",this.realDateFormat=t.attr("df")||"yyyy-MM-dd",this.displayDateFormat=t.attr("dfv")||"yyyy-MM-dd",this.disableColor=!t.attr("nc")||"0"!==t.attr("nc"),this.numberFormat=t.attr("ft"),this.checkZero=t.attr("cz"),this.checkNoZero=t.attr("cnz"),this.japanYear=t.attr("jy"),this.setEvent(t),this.page=e,this.element=t,this.valid=!0,this.title=t.attr("tt")||this.id};return(r.prototype=new t).validateRegEx=function(t){if(t||(t=this.value),this.regExpression){var e=new RegExp(this.regExpression),i=$("#crownix_form_field_"+this.id+"_warnning");""==t||e.test(t)?(i.hide(),this.valid=!0):(i.show(),this.valid=!1)}},r.prototype.toData=function(){return{id:this.id,value:this.value,type:this.type}},r.prototype.spreadToShareField=function(t,e,i){if(this.referenceId)e[this.referenceId].spreadToShareField(t,e,i);else for(var r in this.id!=t.id&&(this.value=t.value,this.validateRegEx(),$("#crownix_form_field_"+i+"_"+this.id).val(t.value)),$('input[rfi="crownix_form_field_'+i+"_"+this.id+'"][id!="crownix_form_field_'+i+"_"+t.id+'"]').val(t.value),e)e[r].referenceId==this.id&&(e[r].value=t.value,e[r].validateRegEx())},r.prototype.getValue=function(){return this.value},r.prototype.setValue=function(t){var r;this.value=t,r="date"===this.inputType?e.convertDateFormat(t,this.realDateFormat,this.displayDateFormat,this.japanYear,this.checkZero):"text"===this.inputType&&this.numberFormat?new i(this.numberFormat,this.checkZero,this.checkNoZero).formatNumber(t.toString()):t.toString(),$("#"+this.elementId).val(r)},r.prototype.getEditable=function(){return"1"===this.editable},r.prototype.setEditable=function(t){var e=$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr({readonly:"0"===this.editable})},r}(),m2soft.crownix.Field.Picture=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="im",this.id=t.attr("id"),this.formId=t.attr("fi"),this.originalValue=this.value=t.attr("dt")||"",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.setEvent(t),this.ratio=t.attr("ra")||0,this.placeHolder=null,this.element=t,this.page=e,this.title=t.attr("tt")||this.id};return(e.prototype=new t).toData=function(){var t;return this.value&&(t=this.value.split(",")[1]||""),{id:this.id,value:t,type:this.type}},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){var e,i=$("#"+this.elementId+"-canvas")[0];if(t){if("string"==typeof t){var r=new Image,n=this;r.onload=function(){if(i){if(e=i.getContext("2d"),1==n.ratio){var o=r.width/r.height,a=i.width/i.height;if(o>a){var s=i.height*(a/o),l=(i.height-s)/2;e.drawImage(r,0,l,i.width,s)}else{var c=i.width*(o/a),d=(i.width-c)/2;e.drawImage(r,d,0,c,i.height)}}else 2==n.ratio?e.drawImage(r,0,0):e.drawImage(r,0,0,i.width,i.height);n.placeHolder&&n.placeHolder.hide()}n.value=t},r.src=t}}else i&&((e=i.getContext("2d")).clearRect(0,0,i.width,i.height),this.placeHolder&&this.placeHolder.show()),this.value=""},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId+"-canvas");this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled","0"===this.editable)},e}(),m2soft.crownix.Field.Submit=function(){var t,e,i,r,n=m2soft.crownix.Resource,o=m2soft.crownix.security.IKE,a=m2soft.crownix.WorkerUtil,s=m2soft.crownix.Constant,l=m2soft.crownix.Message,c=m2soft.crownix.Util,d=function(e,i,r){this.type="sm",this.id=e.attr("id"),this.url=e.attr("su"),this.datasource=e.attr("ds"),this.service=e.attr("sc"),this.editable=e.attr("ed")||"1",this.target=e.attr("sf"),this.formId=e.attr("fi"),this.mode=e.attr("rf")||"0",this.builder=i,this.title=e.attr("tt")||this.id,secure=r,t=m2soft.crownix.FieldOrder.getInstance()},h=function(t,e,i,r){var n=a.getCryptoWorker(t,i,r),o=$.Deferred();return n.addEventListener("message",(function(t){"finalize"===t.data.method&&(o.resolve(t.data.text),n.terminate())})),n.postMessage({method:"finalize",text:e}),o},u=function(t,e,i,o,a){var l=new m2soft.crownix.Ajax,c=$.Deferred();if(l.setConnectTimeout(i),l.setHandler({done:function(t){c.resolve(t.responseText)},error:function(t,e){e?c.reject({status:!1,code:"error",message:e}):0==t.status?c.reject({status:!1,code:"error",message:n.get("server_connect_error")}):c.reject({status:!1,code:"error",message:n.get("request_server_error")})},abort:function(){c.reject({status:!1,code:"abort",message:n.get("request_abort_error")})},timeout:function(){c.reject({status:!1,code:"timeout",message:n.get("request_timeout_error")})}}),l.setRequestHeader("crownix-version",s.INFO_TALK_PROTOCOL_VERSION),secure&&(l.setRequestHeader("crownix-encrypt-type","content"),l.setRequestHeader("crownix-rdid",o)),a&&l.setRequestHeader("crownix-data-hash",a),Object.keys(r).length>0){var d=new FormData;for(var h in d.append("request",e),r)d.append(h,r[h]);l.setRequestHeader("Content-Type",null),l.invoke(t,d)}else l.invoke(t,e);return c},f=function(t,e){var i={};if(this.target)if(this.target.indexOf(",")>=0){var r=this.target.split(",");for(var n in r)if(e[r[n]].isRepeated)for(var o in t)o.indexOf(r[n]+"-")>=0&&(i[o]=t[o]);else i[r[n]]=t[r[n]]}else if(t[this.formId]&&!t[this.formId].isRepeatForm())i[this.formId]=t[this.formId];else if(t[this.formId]&&t[this.formId].isRepeatForm()&&"1"==this.mode)i[this.formId]=t[this.formId];else for(var o in t)o.indexOf("-")>=0&&this.target==o.substring(0,o.indexOf("-"))&&(i[o]=t[o]);else i=t;return i};return d.prototype={submit:function(a,d,p,g,m,v,w,x){if(this.url&&this.service&&this.datasource){var b,y=f.call(this,v,w);if($.isEmptyObject(y))return l.log(n.get("form_submit_not_found_form")+" [form id:"+this.formId+"] [target:"+this.target+"]"),void m.show(n.get("form_submit_not_found_form"),null,(function(){t.blur()}));var k=x.formManager.validator.onSubmit(y);if("object"==typeof k&&!1===k.isInvalid){i=k.forms,r=k.files,(b=k.submitFieldList).push({formId:this.formId,fieldId:this.id});var _=function(){var r={};if(this.service==s.SERVICE_EXPORT_HANDLER||this.service>=2e3){r={mrd_path:a,mrd_param:d};var f=this.builder();r.mrd_path=f.concatMrdPath(r.mrd_path),null!=p&&""!=p&&(r.mrd_data=f.concatMrdPath(p)),x.encType>3?(r.mrd_param=f.concatMrdPath(r.mrd_param),r.enc_type=x.encType,r.mrd_plain_param=f.concatMrdParam(y,x.mrdPlainParam?x.mrdPlainParam:"")):r.mrd_param=f.concatMrdParam(y,r.mrd_param?r.mrd_param:"")}var w,k,_,C,T={version:s.INFO_TALK_PROTOCOL_VERSION,service:this.service,datasource:this.datasource,forms:i,parameters:r},S=m.message(n.get("submit_formfield"),null,!0,x.options.submitMsgPosition),E=this,M=function(t){try{var e=$.parseJSON(t);if(e.status){for(var i in y)v[i].unbindEvent(),v[i].disableEdit(),v[i].isSubmitted=!0;E.disableEdit(),A({status:!0})}else A({status:!1,code:"insert error",message:e.message})}catch(t){l.log(t.stack),A({status:!1,code:"invalid protocol",message:n.get("invalid_protocol")})}},A=function(i){!0===i.status?m.show(n.get("submit_formfield_insert_ok"),null,(function(){t.removeField(b),t.blur()})):m.show(i.message,null,(function(){t.blur()})),S.fadeOut(500,(function(){S.remove()})),g(i,y),e&&e.close()};secure?o.request({serverUrl:this.url}).pipe((function(t){return w=o.getAlgorithm(t),k=t,_=o.getKey(t),T.rdid=t,T=JSON.stringify(T).split("\\u0004").join(""),h("encrypt",T,w,_)}),(function(t){return $.Deferred().reject({status:!1,code:"security error",message:t})})).pipe((function(t){return x.options.infotalk.dataVerification&&(C=c.sha256(T)),u(E.url,t,x.options.infotalk.timeout,k,C)}),(function(t){A(t)})).pipe((function(t){return h("decrypt",t,w,_)})).pipe((function(t){M(t)})):(T=JSON.stringify(T).split("\\u0004").join(""),x.options.infotalk.dataVerification&&(C=c.sha256(T)),u(this.url,T,x.options.infotalk.timeout,null,C).pipe((function(t){M(t)}),(function(t){A({status:!1,message:t.message})})))};if(x.options.submitPreview&&!this.target){var C=m.message(n.get("print_submit_preview")),T=this;setTimeout((function(){(e=new m2soft.crownix.submit.Preview(x,(function(){x.shareManager&&x.shareManager.isConnected()?x.shareManager.submitRequest(T.formId,T.id,T.target,(function(){_.call(T)})):_.call(T)}))).show((function(){C.remove()}))}),0)}else{T=this;x.shareManager&&x.shareManager.isConnected()?x.shareManager.submitRequest(T.formId,T.id,T.target,(function(){_.call(T)})):_.call(T)}}}else m.show(n.get("form_submit_info_leak_error"))},disableEdit:function(){this.editable="0",$("[formid="+this.formId+"][fieldid="+this.id+"]").removeClass("crownix-dialog-button-action").attr("disabled",!0).off()}},d}(),m2soft.ns("m2soft.crownix.Field.File"),m2soft.crownix.Field.File=function(){var t=m2soft.crownix.Field,e=(m2soft.crownix.FieldOrder,function(t,e){this.type="fl",this.file=null,this.value=t.attr("vl")||"",this.formId=t.attr("fi"),this.id=t.attr("id"),this.required=t.attr("rq")||"0",this.editable=t.attr("ed")||"1",this.placeHolder=t.attr("ph")||"",this.drilldownId,this.page=e,this.setEvent(t),this.setFileName,this.editableMode,this.readonlyMode,this.element=t,this.title=t.attr("tt")||this.id});return(e.prototype=new t).validate=function(t){return t||(t=this.file&&this.file.size>0),"1"!=this.required||!!t},e.prototype.toData=function(){return{id:this.id,value:this.value,type:this.type}},e.prototype.getValue=function(){return this.value},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){this.editable!=t&&(this.editable=t?"1":"0","1"===this.editable?this.editableMode():this.readonlyMode())},e}(),m2soft.ns("m2soft.crownix.Field.Pen"),m2soft.crownix.Field.Pen=function(){var t=m2soft.crownix.Field,e=function(t,e){this.type="pn",this.formId=t.attr("fi"),this.id=t.attr("id"),this.originalValue=this.value=t.attr("dt")||"",this.required=t.attr("rq")||"1",this.originalEditable=this.editable=t.attr("ed")||"1",this.setEvent(t),this.placeHolder=null,this.page=e,this.element=t,this.title=t.attr("tt")||this.id,this.backgroundText=t.attr("bt")||""};return(e.prototype=new t).toData=function(){var t;return this.value&&(t=this.value.split(",")[1]||""),{id:this.id,value:t,type:this.type}},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){var e,i=$("#"+this.elementId+"-canvas")[0]||$("#"+this.elementId)[0];if(t){if("string"==typeof t){var r=new Image,n=this;r.onload=function(){i&&((e=i.getContext("2d")).clearRect(0,0,i.width,i.height),setTimeout((function(){e.drawImage(r,0,0,i.width,i.height)}),0),n.placeHolder&&n.placeHolder.hide()),n.value=t},r.src=t}}else i&&((e=i.getContext("2d")).clearRect(0,0,i.width,i.height),this.placeHolder&&this.placeHolder.show()),this.value=t},e.prototype.getEditable=function(){return"1"===this.editable},e.prototype.setEditable=function(t){var e=$("#"+this.elementId+"-canvas")||$("#"+this.elementId);this.editable=t?"1":"0","0"!==this.editable&&("1"!==this.editable||e.hasClass("crownix-field-lock")||e.hasClass("crownix-auth-lock"))||e.attr("disabled","0"===this.editable)},e.prototype.getBackgroundText=function(){return this.backgroundText},e}(),m2soft.ns("m2soft.crownix.Form"),m2soft.crownix.Form=function(){var R=m2soft.crownix.Resource,Util=m2soft.crownix.Util,Message=m2soft.crownix.Message,TextField=m2soft.crownix.Field.TextField,TextArea=m2soft.crownix.Field.TextArea,CheckBox=m2soft.crownix.Field.CheckBox,ComboBox=m2soft.crownix.Field.ComboBox,RadioGroup=m2soft.crownix.Field.RadioGroup,RadioButton=m2soft.crownix.Field.RadioButton,Signature=m2soft.crownix.Field.Signature,Picture=m2soft.crownix.Field.Picture,File=m2soft.crownix.Field.File,Pen=m2soft.crownix.Field.Pen,Converter=m2soft.crownix.util.Converter,DateUtil=m2soft.crownix.util.DateUtil,Constructor=function(t,e,i){this.formId=t,this.go=e,this.eventNameList=[],this.fieldList={},i||(i={}),this.commonFieldHint={type:i.commonFieldHintingType,color:i.commonFieldHintingColor,displayType:i.commonFieldHintingDisplayType},this.requiredFieldHint={color:i.requiredFieldHintingColor},this.eventList={};var r=i.formLoadComplete;r&&(this.eventList.formLoadComplete=r),this.formLoadComplete=!1,this.isSubmitted=!1,i.isRepeated&&(this.isRepeated=!0)},decodeFormFieldScriptFunction=function(encodedScript){var planeScript=Util.base64.utf8Decode(encodedScript);return eval('var func = function(form, viewer) { "use strict"; '+planeScript+"}"),func};return Constructor.prototype={disableEdit:function(){for(var t in $(":not(button)[formId="+this.formId+"], label","#m2soft-crownix-text").off().attr("disabled",!0).bind("touchstart mousedown focus",(function(t){t.preventDefault()})),this.fieldList){var e=this.fieldList[t];if("rg"===e.type)for(var i in e.buttonList)e.buttonList[i].setEditable(!1);else e.setEditable(!1)}},putField:function(t,e,i,r){var n=t.attr("id"),o=t.attr("ty"),a=t.attr("idx"),s=null;if(!i&&this.fieldList[n])throw new Error(R.get("form_duplicated_id_error")+"("+n+")");var l=this,c=function(t){t.setIndex(a);var e=t.getEventList();for(var i in e){var r=e[i];l.eventNameList.indexOf(r)<0&&l.eventNameList.push(r)}};if("tf"===o)s=new TextField(t,e);else if("ta"===o)s=new TextArea(t,e);else if("cb"===o)s=new CheckBox(t,e);else if("co"===o)s=new ComboBox(t,e);else if("sg"===o)s=new Signature(t,e);else if("im"===o)s=new Picture(t,e);else if("rb"===o){n=t.attr("gi"),(s=this.fieldList[n])||(s=new RadioGroup(t,e));var d=new RadioButton(t,e);c(d),s.putButton(d,i)}else"fl"===o?s=new File(t,e):"pn"===o&&(s=new Pen(t,e));s.drilldownId=r,s&&(c(s),this.fieldList[n]=s)},getField:function(t){var e=this.fieldList[t];if(e)return e;for(var i in this.fieldList)if("rg"===(e=this.fieldList[i]).type){var r=e.buttonList[t];if(r)return r}},getFields:function(){return this.fieldList},getFieldsWithRadioBtns:function(){var t={};for(var e in this.fieldList){var i=this.fieldList[e];if(t[e]=i,"rg"==i.type)for(var r in i.buttonList)t[r]=i.buttonList[r]}return t},makeFormDataParameter:function(){var t=[];for(var e in this.fieldList){var i=this.fieldList[e];t.push(this.formId+"."+i.id),t.push("["),"sg"===i.type||"im"===i.type||"pn"===i.type?(t.push("<*BASE64_DATA*>"),i.value&&t.push(i.value.split(",")[1])):i.value&&t.push(i.value),t.push("] ")}return t.join("")},makeFormInfoParameter:function(){var t=[],e=this.getFieldsWithRadioBtns();for(var i in e){var r=e[i],n=String.fromCharCode(5);t.push(this.formId+"."+r.id),t.push("["),t.push(n),"string"==typeof r.editable&&t.push(r.editable),t.push(n),t.push(n),"string"==typeof r.label&&t.push(r.label),t.push(n),"string"==typeof r.value&&"rb"===r.type&&t.push(r.value),t.push("] ")}return t.join("")},getHintingColor:function(t){if(!this.commonFieldHint||!this.commonFieldHint.type)return"";var e=this.getField(t);return void 0!==e&&this.commonFieldHint.type.indexOf(e.type)>=0?{color:this.commonFieldHint.color,displayType:this.commonFieldHint.displayType}:""},getRequiredHintingColor:function(t){return this.requiredFieldHint.color?this.requiredFieldHint.color:""},export:function(t){var e,i={id:this.formId,fields:{field:[]}},r=this.getFieldsWithRadioBtns();for(var n in r)("fl"!==r[n].type||this.go.shareManager&&this.go.shareManager.isConnected())&&(e={id:n,value:{__cdata:r[n].value},type:r[n].type,label:{__cdata:r[n].label},editable:r[n].editable,required:r[n].required},"co"===r[n].type?e.selectedIndex=r[n].selectedIndex:"rg"===r[n].type&&(e.selectedId=r[n].selectedId),i.fields.field.push(e));return i},import:function(t,e){var i,r,n=t.fields.field;for(var o in this.fieldList)(r=this.fieldList[o]).reset();for(o=0;o<n.length;o++)if(i=(r=n[o]).id,"rb"==r.type){for(var a in this.fieldList)if("rg"==this.fieldList[a].type&&this.fieldList[a].buttonList[r.id]){this.fieldList[a].buttonList[r.id].value=r.value.__cdata,this.fieldList[a].buttonList[r.id].label=r.label.__cdata,this.fieldList[a].buttonList[r.id].editable=r.editable,this.fieldList[a].buttonList[r.id].required=r.required;break}}else{if(!this.fieldList[i])continue;"cb"===r.type?"1"===r.value.__cdata||!0===r.value.__cdata?this.fieldList[i].value="1":this.fieldList[i].value="0":this.fieldList[i].value=r.value.__cdata,this.fieldList[i].label=r.label.__cdata,this.fieldList[i].editable=r.editable,this.fieldList[i].required=r.required,"co"===r.type?this.fieldList[i].setValueByIndex(r.selectedIndex,this.go,this.formId):("1.0"===e&&"rb"===r.type||"1.1"===e&&"rg"===r.type)&&this.fieldList[i].select(r.selectedId,this.formId,this.go),"tf"!==r.type&&"ta"!==r.type||""===r.value.__cdata||this.fieldList[i].validateRegEx()}},unbindEvent:function(){$("#m2soft-crownix-container").off(".formfield","[formId="+this.formId+"]")},bindEvent:function(t,e){for(var i in this.unbindEvent(),this.eventNameList){var r=this.eventNameList[i],n=this;$("#m2soft-crownix-container").on(r+".formfield","[formId="+this.formId+"]",(function(i){try{var r=$(i.target),o=r.attr("buttonId")||r.attr("name"),a=n.getField(o);if(!a)return;a.trigger(i.type,t,e)}catch(t){Message.error(t.stack),n.go.dialog.show(R.get("formfield_event_error")+"<br>(fieldId:"+a.id+")")}}))}},onLoadComplete:function(t,e){if(!this.formLoadComplete){try{var i=this.eventList.formLoadComplete;if(i)decodeFormFieldScriptFunction(i)(t,e)}catch(t){Message.error(t.stack),this.go.dialog.show(R.get("formfield_event_error")+"<br>(formId:"+this.formId+")")}this.removePreventEvent()}},removePreventEvent:function(){$("*","#m2soft-crownix-text").off(".prevent"),this.formLoadComplete=!0},isRepeatForm:function(){return this.isRepeated},resetLoadingState:function(){this.formLoadComplete=!1},isLoadingComplete:function(){return this.formLoadComplete},setFiles:function(t){var e,i=this.fieldList;for(var r in i)"fl"===(e=i[r]).type&&e.file&&e.file.size>0&&(t[this.formId+"."+r]=e.file)}},Constructor}(),m2soft.ns("m2soft.crownix.FormWrapper"),m2soft.crownix.FormWrapper=function(t,e){var i=t,r=e;this.get=function(t,e){return t="number"==typeof e?t+"-"+e:t,i.getFieldWrapper(r,t)},this.getList=function(t){return i.getFieldWrapperList(r,t)},this.showGroupSign=i.showGroupSign},m2soft.ns("m2soft.crownix.FieldWrapper"),m2soft.crownix.FieldWrapper=function(t,e,i){var r=e,n=t,o=i,a=o.formManager,s=o.drilldownManager,l={OnChange:"change",change:"change",OnClick:"click",click:"click"};this.getValue=function(){return r.getValue()},this.setValue=function(t,e){var i;null!=t&&("rb"==r.type&&(i=a.getField(n,r.gid)),r.setValue(t.toString(),i),"tf"!==r.type&&"ta"!==r.type||r.spreadToShareField(r,a.getFields(n),n),e||a.sendScript({formId:n,fieldId:r.id,value:"co"==r.type?r.selectedIndex:t}),o.ttsManager&&o.ttsManager.update(n,r.id))},this.getLabel=function(){return r.getLabel()},this.setLabel=function(t,e){null!=t&&(r.setLabel(t.toString()),e||a.sendScript({name:"label",formId:n,fieldId:r.id,value:t.toString()}))},this.getEditable=function(){return r.getEditable()},this.setEditable=function(t,e){if(r.setEditable(t),"cb"!=r.type&&"rb"!=r.type){var i=m2soft.crownix.FieldOrder.getInstance();t&&!i.exist(r.elementId)?i.push(r.element,r.page):t||(i.getFocusField()?(r.elementId===i.getFocusField().id&&(i.setPreventMove(!1),i.moveNext()),i.removeField([{formId:r.formId,fieldId:r.id}]),i.focus(i.getFocusField().id)):i.removeField([{formId:r.formId,fieldId:r.id}]))}if(e||a.sendScript({name:"editable",formId:n,fieldId:r.id,value:t}),"cb"!=r.type&&"rb"!=r.type&&"fl"!=r.type&&"tf"!=r.type&&"ta"!=r.type||r.disableColor){var o=$("#"+r.elementId).parents("#m2soft-crownix-field-wrapper");t?o.removeClass("crownix-formfield-disable"):o.addClass("crownix-formfield-disable")}},this.getRequired=function(){return r.getRequired()},this.setRequired=function(t,i){var o=a.getRequiredHintingColor(n,e.id)||"";"rb"==r.type?(btnGroupField=a.getField(n,r.gid),btnGroupField.setRequired(t,o)):(r.setRequired(t,o),i||a.sendScript({name:"required",formId:n,fieldId:r.id,value:t}))},this.getSelected=function(){return r.getSelected()},this.setSelected=function(t,e){var i;"rb"==r.type&&(i=a.getField(n,r.gid)),r.setSelected(t,i,n,o),e||a.sendScript({name:"selected",formId:n,fieldId:r.id,groupId:r.gid,value:t}),"cb"==r.type&&o.ttsManager&&o.ttsManager.update(n,r.id)},this.expandDrilldown=function(t){return s.open(n+"."+e.id,t)},this.collapseDrilldown=function(){return s.close(n+"."+e.id)},this.getDrilldownInfo=function(){return s.getDrilldownInfo(n+"."+e.id)},this.isDrilldownOpened=function(){return s.isOpened(n+"."+e.id)},this.trigger=function(t){r.trigger(l[t],a.getFormWrapper(n))}},m2soft.ns("m2soft.crownix.Validator"),m2soft.crownix.Validator=function(){var t,e,i,r=m2soft.crownix.Resource,n=(m2soft.crownix.Painter,m2soft.crownix.FieldOrder),o=(m2soft.crownix.Util,{}),a=function(i){t=i,e=new c},s=function(){i={},(o={}).invalidCount=0},l=function(t,e){var i=Object.keys(t);return e>=i.length?i[i.length-1]:i[e]},c=function(){var a,s,c=function(t,e,i){var r=[];for(var n in i){var o=i[n],a=e[o],s=a.type;("tf"!==s&&"ta"!==s||!1!==a.valid)&&("cb"===s||"rg"===s?r.push("."+o+" > span > [formid="+t+"]"):r.push("[formid="+t+'][name="'+o+'"]'))}return r.join(",")},d=function(t){var e=t.hasClass("invalid-field"),i=e?-6:6,r=e?3:-3;t.css({width:parseInt(t.css("width"))+i,height:parseInt(t.css("height"))+i,left:parseInt(t.css("left"))+r,top:parseInt(t.css("top"))+r}),t.toggleClass("invalid-field")};this.removeBorder=function(){$("#m2soft-crownix-text .invalid-field").each((function(){d($(this))}))},this.setBorder=function(t){$(t).each((function(){d($(this).parents("#m2soft-crownix-field-wrapper"))}))},this.highlighting=function(){var e=l(i,0),n=i[e],a=[],d=[],h="",u=!0,f=!0;if(e){for(var p in n){var g,m=o[p],v=n[p],w=[],x=[];for(var b in m.message&&0===h.length&&(h=m.message),!1===m.isValidRegExp&&!0===u&&(u=!1),v){var y=t.formManager.getField(p,b);m.invalid.indexOf(b)>-1&&f&&"fl"!==y.type&&(f=!1),m.valid.indexOf(b)>-1?w.push(b):x.push(b)}if(w.length>0)(g=c(p,v,w)).length>0&&a.push(g);if(x.length>0)(g=c(p,v,x)).length>0&&d.push(g)}a=a.join(","),d=d.join(",")}else this.removeBorder();if(this.setBorder(a),x&&x.length>0){var k=n[l(n,0)],_=(k[l(k,0)].elementId,this),C=function(){var e;_.setBorder(d);var i=Number.MAX_VALUE,n=[];$("#m2soft-crownix-container .invalid-field").each((function(){var t=$(this).offset().top;t<i&&(i=t,e=this)})),u?n.push(r.get(f&&h?h:"submit_fail_not_filled_required_form")):n.push(r.get("validate_invalid_regex")),t.options.showInvalid&&(n.push("<br/>"),n.push(r.get("validate_invalid_count").replace("%d",o.invalidCount))),t.dialog.show(n.join(""),null,(function(){e&&t.scroll.scrollToElement(e),t.options.showInvalid&&(_.makeTreeDom(),t.slide.openSlide(s))}))};(e=t.report.getDestPageNum(e))==t.currentPage?C():(t.onDrawPage=C,t.viewer.movePage(e)),$('input[type="text"],input[type="password"],textarea').blur()}};var h=function(i){var r=$(i.target),o=r.attr("pageno"),a=function(t){var i=t.attr("type"),r=t.attr("formId"),o=t.attr("fieldId"),a=t.attr("inputtype"),s="crownix_form_field_"+r+"_"+o,l=function(){a&&"date"===a||$.crownixdatepicker._hideDatepicker()};return"tf"===i||"ta"===i||"im"===i||"co"===i||"fl"===i?function(){$("#"+s).focus(),"fl"===i&&($(".crownix-formfield-blink").length>0&&$(".crownix-formfield-blink").removeClass("crownix-formfield-blink"),$("#"+s).addClass("crownix-formfield-blink")),l()}:"cb"===i||"rg"===i||"sg"===i||"pn"===i?function(){var t;t="rg"===i?'input[name="'+r+"_"+o+'"]':"#"+s,$(".crownix-formfield-blink").length>0&&$(".crownix-formfield-blink").removeClass("crownix-formfield-blink"),l(),e.removeBorder(),e.setBorder(t),n.getInstance().blinkOff(),n.getInstance().focusHiddenTab()}:void 0}(r);($("#invalid-container .active").removeClass("active"),r.addClass("active"),e.removeBorder(),t.currentPage!=o)?(t.drilldownManager.hasOpenedDrilldown(o)?t.drilldownManager.addOpenCallback(a):t.onDrawPage=a,n.getInstance().setMovepageFlag(!0),t.viewer.movePage(o)):a()};this.makeTreeDom=function(){var e=$("<div>"),n="invalid-wrapper";e.attr("id",n);var o=$('<div id="invalid-container">');for(var l in o.appendTo(e),i){var c=i[l],d=$('<ul class="invalid-page">');$('<div class="invalid-triangle">').appendTo(d);var u=$('<span class="invalid-page-text">');u.text(r.get("page_no").replace("%d",l)),u.appendTo(d);var f=$('<ul class="invalid-page-inner">');for(var p in f.appendTo(d),c){var g=c[p];for(var m in g){var v=g[m],w=$('<li class="invalid-title">');l=v.page,v.elementId;w.attr("pageno",l),w.attr("formid",p),w.attr("fieldId",m),w.attr("type",v.type),v.inputType&&w.attr("inputtype",v.inputType),w.text(v.title),w.appendTo(f),w.on("click touchstart",h)}}d.appendTo(o)}s?(a=null,t.slide.redraw(s,e)):s=t.slide.addSlideTab(r.get("validate_tab_title"),e),function(t){a||(a=new IScroll("#"+t,{scrollY:!0,scrollX:!0,scrollbars:!0,freeScroll:!0,interactiveScrollbars:!0,mouseWheel:!0,doubleTap:!1}))}(n)},this.removeTreeDom=function(){t.slide.removeTab(s),t.slide.closeSlide(),s=null}},d=function(t,e,r){void 0===i[t]&&(i[t]={}),void 0===i[t][e]&&(i[t][e]={}),i[t][e][r.id]=r},h=function(e){var i,n=[],a=[],s=!0,l="";for(var c in e){var d=e[c],h=d.type;if(void 0===d)return void t.dialog.show(r.get("formfield_not_exist"));t.report.isRemovedPage(d.page)||(d.validate()?"tf"===h||"ta"===h?(d.validateRegEx(),!1===d.valid?(s=!1,i=n):i=a):i=a:"fl"===h?d.file?0===d.file.size&&(l="invalid_attached_file",i=n):d.value?(l=t.shareManager&&t.shareManager.isConnected()?"invalid_submit_request":"invalid_attached_file",i=n):i=n:i=n,i.push(c))}return o.invalidCount+=n.length,{valid:a,invalid:n,isValidRegExp:s,isInvalid:n.length>0||!s,message:l}},u=function(i){var r={forms:[],files:{},submitFieldList:[],isInvalid:!1};for(var n in s(),i){var a=i[n],l=a.fieldList,c=[];for(var u in o[n]=h(l),o[n].isInvalid?r.isInvalid=!0:a.setFiles(r.files),l){var f=l[u];f.ignore||(f.referenceId||c.push(f.toData()),r.submitFieldList.push({formId:n,fieldId:u}),o[n].invalid.indexOf(f.id)>-1&&d(f.page,n,f))}n.indexOf("-")>0&&(n=n.substring(0,n.indexOf("-"))),r.forms.push({id:n,fields:c})}return t.options.showInvalid&&!1===r.isInvalid&&e.removeTreeDom(),e.highlighting(),r},f=function(i,r){s();var n=t.formManager.getFields(i);for(var a in o[i]=function(e,i){var r=[],n=[],o=!0,a=t.formManager.getFields(e);for(var s in i)if(void 0!==(c=a[s])&&!t.report.isRemovedPage(c.page)){var l=i[s];c.validate(l)?n.push(s):r.push(s)}for(var s in i){var c,d=(c=a[s]).type;t.report.isRemovedPage(c.page)||"tf"!==d&&"ta"!==d||(l=i[s],c.validateRegEx(l),!1===c.valid&&(o=!1))}return{valid:n,invalid:r,isValidRegExp:o,isInvalid:r.length>0||!o}}(i,r),n){var l=n[a];l.ignore||o[i].invalid.indexOf(l.id)>-1&&d(l.page,i,l)}return e.highlighting(),o[i]};return a.prototype={validate:function(e){var i=e||t.formManager.getFormList();return u(i)},onSubmit:function(t){return u(t)},onExport:function(t){return u(t)},onCxopener:function(t,e){return f(t,e),o[t]}},a}(),m2soft.ns("m2soft.crownix.FormManager"),m2soft.crownix.FormManager=function(){var t,e,i,r,n,o,a,s,l=m2soft.crownix.Form,c=m2soft.crownix.Field.Submit,d=m2soft.crownix.Resource,h=m2soft.crownix.FormWrapper,u=m2soft.crownix.FieldWrapper,f=m2soft.crownix.FieldOrder,p=m2soft.crownix.Field.ComboBox,g={},m={},v={},w=!1,x={},b=function(l,c,d){e=(t=d).dialog,t.viewer.movePage,i=t.mrdPath,r=t.mrdParam,n=t.mrdData,o=l,g={},m={},v={},a=c,s={moveFirstPage:t.viewer.moveFirstPage,moveLastPage:t.viewer.moveLastPage,movePage:t.viewer.movePage,prevPage:t.viewer.prevPage,nextPage:t.viewer.nextPage,hidePage:function(){t.report.removePage(arguments)},showPage:function(){t.report.restorePage(arguments)},expandGrid:function(e){return t.gridManager.expandDepth(e)},nextDepth:function(){return t.gridManager.nextDepth()},prevDepth:function(){return t.gridManager.prevDepth()}},this.validator=new m2soft.crownix.Validator(d)};return b.prototype={submit:function(a){var s=$(a.currentTarget).attr("formid"),l=s+"."+$(a.currentTarget).attr("fieldid");t.emit("before-submit",this.getFormWrapper(s)),t.options.showSubmitConfirm.show?e.show(t.options.showSubmitConfirm.message||d.get("submit_confirm_message"),{verify:!0,input:!1,title:t.options.showSubmitConfirm.title,textYes:t.options.showSubmitConfirm.textYes,textNo:t.options.showSubmitConfirm.textNo},(function(a){a&&v[l].submit(i,r,n,o,e,g,m,t)})):v[l].submit(i,r,n,o,e,g,m,t)},addFormAttr:function(t){var e=t.id;e&&!m[e]&&(m[e]=t)},validateForm:function(t,e){return this.validator.onCxopener(t,e)},buildFormField:function(e,i,r,n){var o=$(e),s=this.isLoadComplete;o.find("FF").each((function(){var e=$(this),o=e.attr("ty"),d=e.attr("fi");if("co"!=o||!e.attr("ct")||"0"==e.attr("ct"))if(s||f.getInstance().push(e,i),"sm"===o){var h=e.attr("id");v[d+"."+h]=new c(e,a,t.options.enableSecure)}else{if(!g[d]){var u;if(d.indexOf("-")>0){var p=d.substring(0,d.indexOf("-"));(u=m[p]).isRepeated=!0}else(u=m[d]).isRepeated=!1;g[d]=new l(d,t,u)}g[d].resetLoadingState(),g[d].putField(e,i,r,n)}}))},export:function(t){var e={formdata:{version:"1.1",form:[]}};if(!0===t){var i=this.validator.onExport(g);if("object"!=typeof i||!1!==i.isInvalid)throw d.get("submit_fail_not_filled_required_form");for(var r in g){var n=g[r];e.formdata.form.push(n.export(t))}}else for(var r in g){n=g[r];e.formdata.form.push(n.export(t))}return e},import:function(t){var e=t.formdata.form;for(var i in e)g[e[i].id]&&g[e[i].id].import(e[i],t.formdata.version)},getFormList:function(){return g},getHintingColor:function(t,e){return g[t]?g[t].getHintingColor(e):""},getRequiredHintingColor:function(t,e){return g[t]?g[t].getRequiredHintingColor(e):""},getField:function(t,e){return g[t]?g[t].getField(e):{}},getFields:function(t){return g[t].getFields()},getSubmit:function(t){return v[t]},disableEdit:function(){for(var t in g)g[t].disableEdit();for(var e in v)v[e].disableEdit()},makeFormParameter:function(t,e){var i=[];for(var r in i.push("/rformmode [0] "),i.push(e),i.push(" /rformdata "),t)i.push(g[r].makeFormDataParameter());for(var r in i.push(this.makeNormalFieldDataParam(!1)),i.push(" /rforminfo "),t)i.push(g[r].makeFormInfoParameter());return i.push(" /rformmode [0]"),i.join("")},modified:function(){w||(w=!0,$(window).bind("beforeunload",(function(t){var e=d.get("confirm_page_out");return(t||window.event).returnValue=e,e})))},isModified:function(){return w},saved:function(){w&&(w=!1,$(window).unbind("beforeunload"))},getFormWrapper:function(t){return new h(this,t)},getFieldWrapper:function(e,i){i=function(t){if(t.indexOf(".")>=0){var e=t.split(".");t=e[1]}return t}(i);var r=this.getField(e,i);return r?new u(e,r,t):null},getFieldWrapperList:function(e,i){var r,n=[],o=[],a=this.getFields(e);if(i.indexOf(".")>=0){var s=i.split(".");r=s[0],i=s[1]}for(var l in a)if(r&&"rg"===a[l].type&&0===l.indexOf(r+"-")){var c=a[l].buttonList;for(var d in c)0===d.indexOf(i+"-")&&o.push(d)}else 0===l.indexOf(i+"-")&&o.push(l);for(var l in o=o.sort((function(t,e){return t.split("-")[1]-e.split("-")[1]})))n.push(new u(e,this.getField(e,o[l]),t));return n},bindEvent:function(){for(var t in g)g[t].bindEvent(this.getFormWrapper(t),s)},trigger:function(t,e,i){g[e].getField(i).trigger(t,this.getFormWrapper(e),s)},isLoadComplete:!1,fireLoadCompleteEvent:function(){if(this.isLoadComplete=!0,!t.shareManager||!t.shareManager.isConnected()||t.shareManager.isHost())for(var e in g)g[e].onLoadComplete(this.getFormWrapper(e),s)},checkFormLoadComplete:function(t){var e=g[t];return!!e&&e.formLoadComplete},removePreventEvent:function(){for(var t in g)g[t].removePreventEvent()},isAllFormSubmitted:function(){for(var t in g)if(!g[t].isSubmitted)return!1;return!0},submitForMethod:function(s,l,d,h){var u=$("<element>").attr({su:s,ds:l,sc:d,target:h});new c(u,a,t.options.enableSecure).submit(i,r,n,o,e,g,m,t)},ignoreField:function(t,e){var i,r;for(i in g)for(i in r=g[i].getFields())field=r[i],field.page==t&&(field.ignore=e)},removeDrilldownField:function(t){var e,i;for(e in g)for(e in i=g[e].getFields())field=i[e],field.drilldownId===t&&delete i[e]},sendScript:function(e){t.shareManager&&t.shareManager.isConnected()&&t.shareManager.sendScript(e)},existRequiredFileField:function(){var t,e;for(var i in g)for(var r in e=g[i].getFields())if("fl"===(t=e[r]).type&&t.editable&&"1"===t.editable&&t.required&&"1"===t.required)return!0;return!1},getRequiredFileFields:function(){var t,e,i=[];for(var r in g)for(var n in e=g[r].getFields())"fl"===(t=e[n]).type&&t.editable&&"1"===t.editable&&t.required&&"1"===t.required&&i.push(t);return i},getNormalField:function(t){var e=t.attr("fi"),i=t.attr("id"),r=t.attr("idx"),n=r?e+"-"+i+"-"+r:e+"-"+i;if(x[n])return x[n];var o=null;return"co"===t.attr("ty")&&(o=new p(t)),o?(x[n]=o,o):null},makeNormalFieldDataParam:function(t){var e=[];for(var i in x){var r=x[i];e.push(i.split("-")[0]+"."+r.id),e.push("["),r.value&&e.push(r.value),e.push("] ")}return t&&e.length>0&&e.unshift(" /rformdata "),e.join("")},showGroupSign:function(i){t.license.isAllowedFeature("FormField")&&t.isFormEditMode?new m2soft.crownix.BatchSignWindow(t).show(i):e.show(d.get("unsupported_feature_without_formedit_mode"))}},b}(),m2soft.ns("m2soft.crownix.ImageConverter"),m2soft.crownix.ImageConverter=function(){m2soft.crownix.Resource;var t=m2soft.crownix.Util,e=m2soft.crownix.util.Unit,i=m2soft.crownix.util.DateUtil,r=null,n=null,o=!0,a={},s=[],l=function(t,e){return e?Math.floor(t/10.3+24.3)+(e%2==0?0:.5):Math.floor(t/10.3+24.3)},c=function(t,e){var i=t.attr("fc"),r=t.attr("pt"),n=t.attr("al");if(i||r||n){var o=$.extend({},e);return i&&(o.fc=i),r&&(o.pt=r),n&&(o.al=n),o}return e},d=function(t,e){var i=t.attr("lc"),r=t.attr("wd"),n=t.attr("st"),o=t.attr("ap");if(i||r||n||o){var a=$.extend({},e);return i&&(a.lc=i),r&&(a.wd=m2soft.crownix.Painter.adjustWidth(r)),n&&(a.st=n),o&&(a.ap=o),a}return e},h=function(t,e,i){var r=l(e.attr("sx"),i.wd),n=l(e.attr("sy"),i.wd),o=l(e.attr("ex"),i.wd),a=l(e.attr("ey"),i.wd);t.drawLine(r,n,o,a,i)},u=function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd);t.drawRect(n,o,a,s,i,r)},f=function(t,e,i){var r=e[t.attr("tid")]||{};return{fontFamily:'"'+(t.attr("fn")?t.attr("fn"):i.get(r.fi)||"")+'", '+m2soft.crownix.Font.FONT_FAMILY_PREFIX+r.fi,fontSize:((t.attr("pt")?t.attr("pt")/10:r.pt/10)||10)+"pt",fillStyle:(t.attr("cl")?t.attr("cl"):r.cl)||"#000000",fontStyle:(t.attr("ci")?"1"===t.attr("ci"):"1"===r.ci)?"Italic":"",fontWeight:(t.attr("cb")?"1"===t.attr("cb"):"1"===r.cb)?"Bold":"",underLine:(t.attr("cu")?"1"===t.attr("cu"):"1"===r.cu)||!!t.attr("hl"),lineThrough:t.attr("cs")?"1"===t.attr("cs"):"1"===r.cs,shade:t.attr("cr")?"1"===t.attr("cr"):"1"===r.cr}},p=function(t,i,r,n,a){if("0"!==i.attr("vs")){a=a||{};var s,c,d=l(i.attr("le"))+(a.padding||0),h=l(i.attr("ri"))-(a.padding||0),u=l(i.attr("to"))+(a.padding||0),p=l(i.attr("bo"))-(a.padding||0),g=parseInt(i.attr("ha"))||0,m=parseFloat(i.attr("ls"))/1e3||0,v=e.inToPx(m);if(g=1===g?"center":2===g?"right":"left",i.children("TX").length>0){var w,x=0,b=0;o&&"hidden"!==a.overflow&&(w=0,i.children().each((function(){var e=$(this);c=e.text(),s=f(e,n,r),w+=t.measureText(c,s).width+v*c.length}),(function(){var t=h-d+2+v;c.length>1&&w>t&&(v-=(w-t)/c.length)}))),"center"===g?x=(h-d-w+v)/2:"right"===g&&(x=h-d-w),i.children().each((function(){var e=$(this);c=e.text(),(s=f(e,n,r)).textAlign="left",s.textBaseline="bottom",s.letterSpacing=v,t.drawText(c,d+x+b,u,h,p,s),b+=t.measureText(c,s).width+v*c.length}))}else{if((s=f(i,n,r)).textAlign=g,"1"==i.attr("cbo")&&"1"!==i.attr("cto")?s.textBaseline="top":"1"==i.attr("cto")&&"1"!==i.attr("cbo")?s.textBaseline="bottom":s.textBaseline="middle",c=i.text(),o&&"hidden"!==a.overflow){var y=t.measureText(c,s).width+v*c.length,k=h-d+2+v;c.length>1&&y>k&&(v-=(y-k)/c.length)}s.letterSpacing=v,t.drawText(c,d,u,h,p,s)}}},g=function(t,e,i){var r=l(e.attr("sx")),n=l(e.attr("ex")),o=l(e.attr("sy")),a=l(e.attr("ey")),s=(e.attr("dt"),e.attr("ra")),c=n-r,d=a-o;t.drawImage(i,r,o,c,d,s)},m=function(t,e,i,r,n,o,a,s,l,c){var d=e.attr("lb")||"",h=e.attr("la")||"0",u=parseInt(e.attr("ha"))||"0",p=parseInt(e.attr("va"))||"0",g=n-i,m=(r+o)/2,v=f(e,c,l);v.textAlign="left";var w,x,b=parseInt(e.attr("sz"))||16,y=t.measureText(d,v).width;"0"==u?w=i+4:"1"==u?w=i+(g-b-4-y)/2:"2"==u&&(w=n-b-4-y),"1"==h&&(w+=y),"0"==p?(v.textBaseline="top",x=r+4):"1"==p?(v.textBaseline="middle",x=m-b/2):"2"==p&&(v.textBaseline="bottom",x=o-b-4);var k=w+b,_=x+b;if("radio"===a){if(t.drawEllipse(w,x,k,_,{lc:"#5D5D5D",wd:2},{fc:"#FFFFFF",pt:0}),s){var C=.25*b;t.drawEllipse(w+C,x+C,k-C,_-C,{lc:"#000000",wd:1},{fc:"#000000",pt:0})}}else if("check"===a&&(t.drawRect(w,x,k,_,{lc:"#5D5D5D",wd:2},{fc:"#FFFFFF",pt:0},1,1),s)){g=Math.round(.35*b*.3);var T=w+.2*b,S=x+.5*b,E=w+.45*b,M=x+.75*b,A=w+.8*b,P=x+.25*b;t.drawPolyLine({lc:"#000000",wd:g+(g%2==0?0:.5)},[[T,S],[E,M],[A,P]])}"1"==h?t.drawText(d,i+2,r,n,o,v):t.drawText(d,k+2,r,n,o,v)},v=function(t){var e=t.attr("fi"),i=t.attr("id"),n=t.attr("gi"),o=t.attr("ty");if(r){var a;if(a="rb"===o?r.getField(e,n):r.getField(e,i),"tf"===o||"ta"===o||"im"===o||"sg"===o||"fl"===o||"pn"===o)return a.value;if("co"===o)return a.getDisplayValue();if("rb"===o)return a.isSelected(i);if("cb"===o)return"1"===a.value}else{if("tf"===o||"ta"===o)return t.text();if("rb"===o||"cb"===o)return"1"===t.attr("se");if("im"===o||"sg"===o||"pn"===o)return t.attr("dt");if("co"===o)return t.attr("sv")}},w=function(t,e,r,n){var o=l(e.attr("le")),a=l(e.attr("ri")),c=l(e.attr("to")),d=l(e.attr("bo")),h=e.attr("ty"),u=(e.attr("fi"),e.attr("id"),v(e));if("tf"===h){if("1"===e.attr("pw"))e.text(u.replace(/./g,"*"));else if("date"===e.attr("it")){var g=e.attr("df")||"yyyy-MM-dd",w=e.attr("dfv")||"yyyy-MM-dd",x=i.convertDateFormat(v(e),g,w);e.text(x)}else e.text(u);p(t,e,r,n,{overflow:"hidden",padding:3})}else if("ta"===h){var b=f(e,n,r);t.wrapText(u,o+2,c+2,a-2,d-2,b)}else if("rb"===h)m(t,e,o,c,a,d,"radio",u,r,n);else if("cb"===h)m(t,e,o,c,a,d,"check",u,r,n);else if("co"===h||"fl"===h)e.text(u),p(t,e,r,n,{overflow:"hidden",padding:3});else if(("sg"===h||"im"===h||"pn"===h)&&("pn"===h&&(e.text(e.attr("bt")),p(t,e,r,n,{overflow:"hidden",padding:3})),u)){var y=new Image;s.push(y),y.src=u,y.onload=function(){var e;y.width!=a-o-2||y.height!=d-c-2?(e=y.width/y.height,(a-o-2)/(d-c-2)>e?t.drawImage(y,o+1,c+1,(d-c-2)*e,d-c-2,0):t.drawImage(y,o+1,c+1,a-o-2,(a-o-2)/e,0)):t.drawImage(y,o+1,c+1,a-o-2,d-c-2,0)}}},x=function(t,e,i,r,n,o,a){e.children().each((function(){var e=this.tagName.toUpperCase(),s=$(this),l=(s.attr("ect"),n[s.attr("lid")]),f=o[s.attr("fid")];l&&(l=d(s,l)),f&&(f=c(s,f)),"LN"===e?h(t,s,l):"RA"===e?u(t,s,l,f):"TL"===e?p(t,s,i,r):"IM"===e?g(t,s,a.nextImage()):"FF"===e?w(t,s,i,r):"CT"===e?drawChart(t,s):"PR"===e&&x(t,s,i,r,n,o,a)}))};this.convertPage=function(e,i,r,o,f){var m=Math.floor(i.attr("wd")/10.3),v=Math.floor(i.attr("ht")/10.3);1===o&&(a.width=i.attr("wd")/1e3,a.height=i.attr("ht")/1e3,a.size=i.attr("si")||"A4");var b=$("<canvas>").attr({width:m,height:v}),y=new m2soft.crownix.Canvas(b[0]);y.clear();var k=e.lineAttrList,_=e.faceAttrList,C=e.textAttrList,T=e.fontList,S=new m2soft.crownix.ImageLoader;S.loadImage(i,e.indexedImageList,(function(){i.children().each((function(){var e=this.tagName,i=$(this),r=k[i.attr("lid")],n=_[i.attr("fid")];r&&(r=d(i,r)),n&&(n=c(i,n)),"1"===i.attr("ft")&&i.text(t.formatPageNumber(i.text(),o,a.totalPage)),"LN"===e?h(y,i,r):"RA"===e?u(y,i,r,n):"TL"===e?p(y,i,T,C):"SC"===e?function(t,e,i){for(var r=e.attr("dt").split("|"),n=[],o=0,a=r.length;o<a;o++){var s=r[o].split(","),c=l(s[0]),d=l(s[1]);n.push([c,d])}t.drawScribble(i,n)}(y,i,r):"LL"===e?function(t,e,i){for(var r=e.attr("dt").split("|"),n=[],o=0,a=r.length;o<a;o++){var s=r[o].split(","),c=l(s[0],i.wd),d=l(s[1],i.wd);n.push([c,d])}t.drawPolyLine(i,n)}(y,i,r):"PO"===e?function(t,e,i,r){for(var n=e.attr("dt").split("|"),o=[],a=0,s=n.length;a<s;a++){var c=n[a].split(","),d=l(c[0],i.wd),h=l(c[1],i.wd);o.push([d,h])}t.drawPolygon(i,r,o)}(y,i,r,n):"EP"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd);t.drawEllipse(n,o,a,s,i,r)}(y,i,r,n):"DM"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd);t.drawDiamond(n,o,a,s,i,r)}(y,i,r,n):"PL"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd),c=e.attr("cx")/10.3;t.drawParallelogram(n,o,a,s,i,r,c)}(y,i,r,n):"HH"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd),c=e.attr("cx")/10.3,d=e.attr("cy")/10.3;t.drawHexaheron(n,o,a,s,c,d,i,r)}(y,i,r,n):"RR"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd),c=e.attr("aw")/10.3,d=e.attr("ah")/10.3,h=e.attr("ap");t.drawRect(n,o,a,s,i,r,c,d,h),t.setClip(e.attr("cl"))}(y,i,r,n):"CY"===e?function(t,e,i,r){var n=l(e.attr("sx"),i.wd),o=l(e.attr("sy"),i.wd),a=l(e.attr("ex"),i.wd),s=l(e.attr("ey"),i.wd),c=e.attr("sh")/10.3;t.drawCylinder(n,o,a,s,i,r,c)}(y,i,r,n):"CV"===e?function(t,e,i){var r=l(e.attr("sx"),i.wd),n=l(e.attr("sy"),i.wd),o=l(e.attr("ex"),i.wd),a=l(e.attr("ey"),i.wd),s=l(e.attr("cx1"),i.wd),c=l(e.attr("cy1"),i.wd),d=l(e.attr("cx2"),i.wd),h=l(e.attr("cy2"),i.wd);t.drawCurve(r,n,o,a,i,s,c,d,h)}(y,i,r):"IM"===e?g(y,i,S.nextImage()):"FF"===e?w(y,i,T,C):"CT"===e?function(t,e){var i=l(e.attr("sx")),r=l(e.attr("sy")),n=l(e.attr("ex")),o=l(e.attr("ey"));canvg(t,e.html(),{offsetX:i,offsetY:r,scaleWidth:n-i,scaleHeight:o-r,ignoreClear:!0,ignoreMouse:!0})}(b[0],i):"PR"===e&&x(y,i,T,C,k,_,S)}));var e=setInterval((function(){for(var t=0,i=s.length;t<i;t++)if(!s[t].complete)return;n&&function(t,e){$(e).find("element").each((function(){var e=$(this);if("text"!=e.attr("type")){for(var i=e.attr("path").split(/M|m|L|l|,/),r=[],n=1,o=i.length;n<o;n+=2)r.push([i[n],i[n+1]]);t.drawPolyLine({lc:e.attr("stroke-color"),wd:96*parseInt(e.attr("stroke-width"))/72,al:e.attr("stroke-opacity")},r)}else{var a,s=Number(e.attr("x")),l=Number(e.attr("y")),c=s+Number(e.attr("width")),d=l+Number(e.attr("height")),h=e.text();a="middle"==e.attr("text-anchor")?"center":"end"==e.attr("text-anchor")?"right":"left",t.drawRect(s,l,c,d,{lc:"true"==e.attr("line")?"#000000":e.attr("fill"),wd:2},{fc:e.attr("fill"),pt:0}),t.wrapText(h,s,l,c,d,{fontFamily:"Times, Arial",textBaseline:"top",fillStyle:e.attr("font-color"),fontStyle:e.attr("font-style"),fontWeight:e.attr("font-weight"),fontSize:e.attr("font-size")+"pt",underLine:"underline"==e.attr("text-decoration"),lineThrough:"line-through"==e.attr("text-decoration"),textAlign:a})}}))}(y,n.getNoteXml(o)),f(o,"canvas"!==r?y.toDataURL("image/"+r):b),clearInterval(e)}),50)}))},this.convert=function(t,e,i){if("function"!=typeof i)throw"Invalid Callback Function";var r=[],n=a.totalPage=t.getTotalPage()-t.getRemovedPage().length,o=0;s=[];for(var l=1;l<=n;l++){var c=t.getHeadForPage(l),d=$(t.getPage(l));this.convertPage(c,d,e,l,(function(t,e){r[t-1]=e,++o==n&&i(r,a)}))}},this.setFormManager=function(t){r=t},this.setNoteManager=function(t){n=t},this.setUseAdjustLetterSpace=function(t){o=t}},m2soft.ns("m2soft.crownix.PdfConverter"),m2soft.crownix.PdfConverter=function(){m2soft.crownix.Resource;var t=m2soft.crownix.ImageConverter,e=null,i=null,r=!0;this.convert=function(n,o,a,s){s=$.extend({},s);var l=new t;l.setFormManager(e),l.setNoteManager(i),l.setUseAdjustLetterSpace(r),l.convert(n,"jpeg",(function(t,e){var i,r=e.width<e.height?"portrait":"landscape";i="CUSTOM"===e.size?new jsPDF(r,"in",[e.width,e.height]):new jsPDF(r,"in",e.size);for(var n=0;n<t.length;n++)0!=n&&i.addPage(),i.addImage(t[n],"jpeg",0,0,e.width,e.height);s.save&&i.save(),"function"==typeof a&&a(i.output("datauristring"))}))},this.setFormManager=function(t){e=t},this.setNoteManager=function(t){i=t},this.setUseAdjustLetterSpace=function(t){r=t}},m2soft.ns("m2soft.crownix.MMLTokenizer"),m2soft.crownix.MMLTokenizer=function(){var t=function(){this.reenterStep=0,this.findOffset=-1};return t.prototype={openHandlerList:{},closeHandlerList:{},parse:function(t,e){var i="<MML",r="</MML>",n="<LICENSE",o="</LICENSE>",a="<DOCUMENT",s="</DOCUMENT>",l="<HEAD>",c="</HEAD>",d="<PG ",h="</PG>",u="<MMLFOOTER",f="</MMLFOOTER>",p="<ERR",g="</ERR>",m=this.reenterStep,v=t.indexOf(i,this.findOffset);if(m<1&&v>=0){this.findOffset=v+i.length;var w=t.indexOf(">",v);this.openHandlerList.mml&&this.openHandlerList.mml(t.slice(v,w+1)),this.reenterStep=1,m=0}var x=t.indexOf(n,this.findOffset);if(m<2&&x>=0){this.findOffset=x+n.length;var b=t.indexOf(">",x);this.openHandlerList.license&&this.openHandlerList.license(t.slice(x,b+1)),this.reenterStep=2,m=0}var y=t.indexOf(o,this.findOffset);for(m<3&&y>=0&&(x=this.findOffset-n.length,this.findOffset=y+o.length,this.closeHandlerList.license&&this.closeHandlerList.license(t.slice(x,this.findOffset)),this.reenterStep=3,m=0);;){var k=t.indexOf(a,this.findOffset),_=t.indexOf(l,this.findOffset);if(m<4&&k>=0&&(k<_||_<0)){this.findOffset=k+a.length;var C=t.indexOf(">",k);this.openHandlerList.document&&this.openHandlerList.document(t.slice(k,C+1)),this.reenterStep=4,m=0}_=t.indexOf(l,this.findOffset),m<5&&_>=0&&(this.findOffset=_+l.length,this.openHandlerList.head&&this.openHandlerList.head(),this.reenterStep=5,m=0);var T=t.indexOf(c,this.findOffset);for(m<6&&T>=0&&(_=this.findOffset-l.length,this.findOffset=T+c.length,this.closeHandlerList.head&&this.closeHandlerList.head(t.slice(_,this.findOffset)),this.reenterStep=6,m=0);;){k=t.indexOf(a,this.findOffset);var S=t.indexOf(d,this.findOffset);m<7&&S>=0&&(S<k||k<0)&&(this.findOffset=S+d.length,this.openHandlerList.page&&this.openHandlerList.page(),this.reenterStep=7,m=0);var E=t.indexOf(h,this.findOffset);if(m<8&&E>=0&&(E<k||k<0)&&(S=this.findOffset-d.length,this.findOffset=E+h.length,this.closeHandlerList.page&&this.closeHandlerList.page(e,S,this.findOffset,t.slice(S,this.findOffset)),this.reenterStep=6,m=0),S<0&&E<0||(S>k||E>k)&&k>0)break}var M=t.indexOf(p,this.findOffset);if(m<9&&M>=0&&(M<k||k<0)){this.findOffset=M+p.length;t.indexOf(">",M);this.openHandlerList.err&&this.openHandlerList.err(),this.reenterStep=9,m=0}var A=t.indexOf(g,this.findOffset);m<10&&A>=0&&(A<k||k<0)&&(M=this.findOffset-p.length,this.findOffset=A+g.length,this.closeHandlerList.err&&this.closeHandlerList.err(t.slice(M,this.findOffset)),this.reenterStep=10,m=0);var P=t.indexOf(s,this.findOffset);if(m<11&&P>=0&&(this.findOffset=P+s.length,this.closeHandlerList.document&&this.closeHandlerList.document(),this.reenterStep=3,m=0),k<0&&_<0&&T<0&&P<0)break}var I=t.indexOf(u,this.findOffset);if(m<12&&I>=0){this.findOffset=I+u.length;var D=t.indexOf(">",I);this.openHandlerList.mmlfooter&&this.openHandlerList.mmlfooter(t.slice(I,D+1)),this.reenterStep=12,m=0}var F=t.indexOf(f,this.findOffset);m<13&&F>=0&&(I=this.findOffset-u.length,this.findOffset=F+f.length,this.closeHandlerList.mmlfooter&&this.closeHandlerList.mmlfooter(t.slice(I,this.findOffset)),this.reenterStep=13,m=0);var O=t.indexOf(r,this.findOffset);O>=0&&(this.findOffset=O+r.length,this.closeHandlerList.mml&&this.closeHandlerList.mml())},onOpen:function(t,e){this.openHandlerList[t.toLowerCase()]=e},onClose:function(t,e){this.closeHandlerList[t.toLowerCase()]=e}},t}(),m2soft.ns("m2soft.crownix.TTSManager"),m2soft.crownix.TTSManager=function(){var t,e,i,r,n,o,a=m2soft.crownix.Util,s=m2soft.crownix.Resource,l=[],c=[],d=!1,h=null,u=null,f=null,p=!1,g=!1,m=37,v=38,w=39,x=40,b="item",y="drop-item",k="crownix-toolbar-item-enable-hover",_="crownix-toobar-dropitem-enable-hover",C="hoverd",T={position:"absolute","-webkit-box-shadow":"0px 0px 3px 3px rgba(0,0, 255,0.8)","-moz-box-shadow":"0px 0px 3px 3px rgba(0,0,255,0.8)","box-shadow":"0px 0px 3px 3px rgba(0,0,255,0.8)"},S=function(t,e,i,r,n,o){this.type=t,this.value=e,this.left=Number(i),this.top=Number(r),this.right=Number(n),this.bottom=Number(o)},E=function(t){var e;void 0===t&&(t=""),d=!d,"H4"===(e=$(l[Number(d)])[0]).tagName?$(e).text(t):$(e).val(t),e.focus()},M=function(t,e){return Math.abs(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))},A=function(t){return{x:t.left+(t.right-t.left)/2,y:t.top+(t.bottom-t.top)/2}},P=function(t,e){return e===m?t.left:e===v?t.top:e===w?t.right:e===x?t.bottom:void 0},I=function(t,e){return t.map((function(t){return P(t,e)}))},D=function(t,e){return Math.floor(t/10.3+24.3)},F=function(t,e){return Math.min.apply(null,I(t,e))},O=function(t,e){return Math.max.apply(null,I(t,e))},R=function(t){"T"===t.type?(p=!0,h=0,o=e.indexOf(t)):"C"===t.type?h=e[o].value.indexOf(t):(o=e.indexOf(t),p=!1)},B=function(t,e,i){return t.filter((function(r){return Math.abs(P(r,e)-i(t,e))<=70}))},N=function(t,e){var i=t.value,r=i[h];return!i.filter((function(t){return e===v?r.top>=t.bottom:r.bottom<=t.top})).length},L=function(){var t=p?e[o].value[h]:e[o],i=D(t.left),r=D(t.top);return{width:D(t.right)-i,height:D(t.bottom)-r,left:i,top:r}},q=function(t){t.map((function(t){$("."+t).removeClass(t)}))},j=function(){var t,e;g&&c[u]?(q([k,_,C]),null!==f?(t=$("#crownix-toolbar-"+c[u]).find("li:eq("+f+")")).addClass(C):(e=((t=$("#crownix-toolbar-"+c[u])).hasClass("crownix-toolbar-item")?b:y)===b?k:_,t.addClass(e))):g||null===o||i.css(L())},z=function(e){var i,o,a,l=function(t,e,i){var r=t;return i===w||i===x?r===e||null===r?r=0:++r:0===r||null===r?r=e:--r,i===m||i===w?u=r:f=r,r},d=function(e){var i=n[c[l(u,c.length-1,e)]];for(f=null;!i.visible||!t.toolbar.isEnableItem(c[u]);)i=n[c[l(u,c.length-1,e)]];return i},h=function(t,e){for(var i=Object.keys(t.items),r=t.items[i[l(f,i.length-1,e)]];!r.visible;)r=t.items[i[l(f,i.length-1,e)]];return r};if(null===u)a=(i=d(w)).title;else{var p=c[u];i=n[p],(o=e===v?i.type===y?h(i,e):d(m):e===x?i.type===y?h(i,e):d(w):d(e)).type===y?$("#crownix-toolbar-"+c[u]).click():e!==m&&e!==w||i.type!==y||$("#crownix-toolbar-"+p).click(),a=o.title||o.text}E(a+s.get("tts_button")),"2"===r&&j()},H=function(t){return t===v||t===x},U=function(n){if(0!==e.length)if(g)z(n);else{var c,u,f,b=function(t,e){var i=H(n)?"top":"left",r=H(n)?"bottom":"right";return t[i]>=e[r]},y=function(t,e){var i=H(n)?"left":"top",r=H(n)?"right":"bottom";return t[i]>=e[i]&&t[r]<=e[r]||t[i]>=e[i]&&t[i]<e[r]||t[i]<e[i]&&t[r]>e[r]||t[r]>e[i]&&t[r]<=e[r]},k=function(e,i){var r,n;H(i)?(r=i===v?x:v,n=i===v?O:F):(r=i===m?w:m,n=i===m?O:F),0===(e=B(e,r,n)).length?f=t.currentPage==t.totalPage?s.get("tts_last_parag"):s.get("tts_next_page"):1===e.length?R(e[0]):e.length>1&&(r=H(i)?m:v,R(B(e,r,n=F).pop()))},_=function(i,r){p&&h<(p?e[o].value.length:1)-1?++h:0===(r=r.filter((function(t){return i!==t&&b(t,i)&&y(i,t)}))).length?0===(r=e.filter((function(t){return i!==t&&i.bottom<=t.top}))).length?(f=t.currentPage==t.totalPage?s.get("tts_last_parag"):s.get("tts_next_page"),t.scroll.scrollTo(t.scroll.x,t.scroll.maxScrollY,0)):(r=B(r,v,F)).length>1?R(B(r,m,F).pop()):R(r[0]):1===r.length?R(r[0]):r.length>1&&k(r,w)},C=function(i,r){p&&h>0?--h:0===(r=r.filter((function(t){return i!=t&&b(i,t)&&y(i,t)}))).length?0===(r=e.filter((function(t){return i!==t&&i.top>=t.bottom}))).length?(f=1==t.currentPage?s.get("tts_first_parag"):s.get("tts_prev_page"),t.scroll.scrollTo(t.scroll.x,0,0)):(r=B(r,x,O)).length>1?R(B(r,w,O).pop()):R(r[0]):1===r.length?R(r[0]):r.length>1&&k(r,m)},T=function(t){for(var e,i,r,n=A(p?u.value[h]:u),o=function(t){return t.map((function(t){return A(t)}))}(t),a=0,s=o.length;a<s;a++)point=o[a],i=M(n,point),e&&e>=i?(e=i,r=a):void 0===e&&(e=i,r=0);R(t[r])};if(null===o)(c=B(e,v,F)).length>1&&(c=B(c,m,F)),R(c.pop()),"2"===r&&i.show();else if(u=e[o],n===m)C(u,e);else if(n===w)_(u,e);else if(n===v)if(p&&!N(u,n)){var S=(D=u.value)[h];if(0===(c=D.filter((function(t){return S!==t&&S.top===t.bottom&&(S.left<=t.left&&S.right>t.left||S.left<t.right)}))).length){if((c=D.filter((function(t){return S!==t&&S.top===t.bottom}))).length>1){c=c.filter((function(t){return S.left>t.left}));var P=Math.min.apply(null,I(c,m).map((function(t){return Math.abs(S.left-t)})));c=c.filter((function(t){return P===Math.abs(S.left-t.left)}))}R(c[0])}else 1===c.length?R(c[0]):c.length>1&&R(B(c,m,F)[0])}else 0===(c=e.filter((function(t){return u!==t&&u.top>=t.bottom}))).length?(n=m,C(u,e)):1===c.length?R(c[0]):T(c);else if(n===x)if(p&&!N(u,n)){var D;S=(D=u.value)[h];if(0===(c=D.filter((function(t){return S!==t&&S.bottom===t.top&&(S.left<=t.left&&S.right>t.left||S.left<t.right)}))).length){if((c=D.filter((function(t){return S!==t&&S.bottom===t.top}))).length>1){c=c.filter((function(t){return S.left>t.left}));P=Math.min.apply(null,I(c,m).map((function(t){return Math.abs(S.left-t)})));c=c.filter((function(t){return P===Math.abs(S.left-t.left)}))}R(c[0])}else 1===c.length?R(c[0]):c.length>1&&R(B(c,m,F)[0])}else 0===(c=e.filter((function(t){return u!==t&&u.bottom<=t.top}))).length?(n=w,_(u,e)):1===c.length?R(c[0]):T(c);l.map((function(t){t.css(L())})),E(f||(p?e[o].value[h].value:e[o].value)),"2"===r&&j(),f||function(e){var i=t.containerDom,r=t.scroll,n=e.position(),o=e.offset(),s=i.offset();(a.browser.mobile||s.left>o.left||s.top>o.top||s.left+i.outerWidth()<o.left||s.top+i.outerHeight()<o.top)&&setTimeout((function(){var t=-n.left,e=45-n.top+$(document).scrollTop();t>0?t=0:t<r.maxScrollX&&(t=r.maxScrollX),e>0?e=0:e<r.maxScrollY&&(e=r.maxScrollY),r.scrollToKeepCenter(t,e,0)}),a.browser.mobile?500:0)}(l[Number(d)])}},V=function(e){var a=[9,13,27,m,v,w,x],l=e.keyCode||e.which;if(a.indexOf(l)>-1)if(e.preventDefault(),e.stopPropagation(),m<=l&&l<=x)U(e.keyCode);else if(e.shiftKey&&9===l){Y();var d=c[u];g=!0,d&&n[d].type===y&&$("#crownix-toolbar-"+d).click(),E(s.get("tts_toolbar_area")),null===u||t.toolbar.isEnableItem(c[u])||z(w),"2"===r&&(i.hide(),j())}else if(g&&9===l){var h=s.get("tts_report_area");d=c[u];g=!1,d&&n[d].type===y&&$("#crownix-toolbar-"+d).click(),t.isFormEditMode&&(h+=s.get("tts_form_edit_mode")),E(h),"2"===r&&(q([k,_,C]),null!==o&&i.show(),j())}else if(t.isFormEditMode&&!g&&9===l&&null!==o){"2"===r&&i.hide();var p=$.Event("keydown",{keyCode:9});$("#crownix_hidden_tab").trigger(p)}else if(g&&13===l&&t.toolbar.isEnableItem(c[u])){if((d=n[c[u]]).type===y){var b=d.items;d=b[Object.keys(b)[f]]}d&&d.handler&&d.handler(),setTimeout((function(){E(s.get("tts_select"))}),0)}else if(g&&27===l){var T=$(".crownix-window-close")[0]||$(".aButtons > button[value=cancel]")[0]||$(".iButtons > button[value=cancel]")[0],S=T&&$._data(T,"events").click;S&&S[0]&&S[0].handler&&S[0].handler()}else if(null===o&&9===l){var M=s.get("tts_report_area");t.isFormEditMode&&(M+=s.get("tts_form_edit_mode")),E(M)}},W=function(e,i){var r,n=[],o=e.attr("sx"),a=e.attr("sy"),l=e.attr("ex"),c=e.attr("ey");return 0===e.children().length&&"C"===i?n.push(s.get("tts_no_content")):(e.find("TL, FF, IM, CT").each((function(){var i=$(this),r=i.prop("tagName");"TL"===r?i.attr("ft")?n.push(s.get("page_no").replace("%d",t.currentPage)):n.push(i.text()):"FF"===r?n.push(function(e){var i=e.attr("ty"),r="";if(t.isFormEditMode){var n=t.formManager.getField(e.attr("fi"),e.attr("id"));if("cb"===i||"rb"===i){var o=[];o.push(n.getSelected()?s.get("tts_select"):s.get("tts_release")),o.push(n.getLabel()),o.push("cb"===i?s.get("tts_check_box"):s.get("tts_radio_button")),r=o.join("")}else r="sm"===i?e.text()+s.get("tts_button"):"sg"===i?s.get("sign_window_title"):"im"===i?s.get("mask_dialog_title"):"fl"===i?n.getValue()||s.get("no_attach_file"):"co"===i?n.getValue()+s.get("tts_combo_box"):"pn"===i?n.getBackgroundText()+s.get("pen_field"):n.getValue()||s.get("tts_no_content")}else if("tf"===i||"ta"===i||"sm"===i)r=e.text()||s.get("tts_no_content");else if("fl"===i)r=e.attr("vl")&&e.attr("vl").substring(e.attr("vl").lastIndexOf("/")+1)||s.get("no_attach_file");else if("cb"===i||"rb"===i){var a=e.attr("se");a&&(r="0"===a?s.get("tts_release"):s.get("tts_select")),r+=e.attr("lb")+("cb"===i?s.get("tts_check_box"):s.get("tts_radio_button"))}else"co"===i?r=e.attr("sv")||s.get("tts_no_content"):"sg"===i?r=s.get("sign_window_title"):"im"===i?r=s.get("mask_dialog_title"):"pn"===i&&(r=n.getBackgroundText()+s.get("pen_field"));return r}(i)):"IM"!==r&&"CT"!==r||("bc"===e.attr("ty")?n.push(s.get("text_barcode")):"ct"===e.attr("ty")&&n.push(s.get("text_chart")),n.push(s.get("mask_dialog_title")))})),0===n.length&&n.push(s.get("tts_no_content"))),(r=n.join(""))?new S(i||"P",r,o,a,l,c):null},Y=function(){var e=t.toolbar.getToolbarItemInfo();n=e.items,c=e.menu},G=function(e,i){var n,o;a.browser.firefox||a.browser.msie&&9==a.browser.version?(n=$('<input readonly="readonly">'),o=$('<input readonly="readonly">')):(n=$("<h4>"),o=$("<h4>")),t=e,r=i,l.push(n),l.push(o),Y()};return G.prototype.makeParagraphs=function(n){e=[],o=null,l.forEach((function(t,e){t.attr("tabindex","-1").css({opacity:0,margin:0,position:"absolute",left:"0px",top:"0px"}).addClass("crownix-virtual-cursor").prependTo("#m2soft-crownix-text"),t.off("keydown"),t.on("keydown",V),t.focus((function(){"2"!==r||null===o||g||"none"!==i.css("display")||i.show()}))})),n.children().each((function(){var t=$(this);if("PR"===t.prop("tagName")){if(t.attr("ect")&&t.attr("ect").indexOf("d")>-1)return!0;var i="tb"===t.attr("ty")?function(t){var e,i,r,n,o=[];return 0===t.find("PR").length?null:(e=t.attr("sx"),i=t.attr("sy"),r=t.attr("ex"),n=t.attr("ey"),t.find("PR").each((function(){o.push(W($(this),"C"))})),new S("T",o,e,i,r,n))}(t):W(t);i&&e.push(i)}})),E(),"2"===r&&((i=$("<div>").prependTo("#m2soft-crownix-text").attr("id","crownix_focus_mark").css(T)).hide(),null===u||t.toolbar.isEnableItem(c[u])||z(w))},G.prototype.update=function(i,r){var n,o=$(t.report.getPage(t.currentPage)),a=-1,s=-1,l=!1,c=function(t){return!(l=$(t).attr("fi")===i&&$(t).attr("id")===r)};o.children().each((function(){var t=$(this);if("PR"===t.prop("tagName")&&(++a,"tb"===t.attr("ty")?t.children().each((function(){var t=$(this);if("PR"===t.prop("tagName")&&(++s,$(t).find("FF").each((function(t,e){return c(e)})),l&&(n=W(t,"C"))),l)return!1})):($(t).find("FF").each((function(t,e){return c(e)})),l&&(n=W(t)))),l)return!1;s=-1})),s<0?e[a]=n:e[a].value[s]=n},G.prototype.setFocus=function(){E()},G}(),m2soft.ns("m2soft.crownix.Painter"),m2soft.crownix.Painter=function(globalObject,canvasDom,textDom,movePage,serverUrl){var SignWindow=m2soft.crownix.SignWindow,PenWindow=m2soft.crownix.PenWindow,MaskWindow=m2soft.crownix.MaskWindow,FieldOrder=m2soft.crownix.FieldOrder,R=m2soft.crownix.Resource,Util=m2soft.crownix.Util,Unit=m2soft.crownix.util.Unit,DateUtil=m2soft.crownix.util.DateUtil,Font=m2soft.crownix.Font,ChartConverter=m2soft.crownix.ChartConverter,Message=m2soft.crownix.Message,go=globalObject,self=this,drawMedia="",Icon=m2soft.crownix.resource.Icon,ActionEvents=m2soft.crownix.Util.ActionEvents,NumberUtil=m2soft.crownix.util.NumberUtil,cxCanvas=new m2soft.crownix.Canvas(canvasDom,go),viewerOpenFile=go.openFile,viewerMovePage=movePage,viewerServerUrl=serverUrl,viewerTextDom=textDom,formManager=go.formManager,options=go.options,dialog=go.dialog,useAdjustLetterSpace=!0,useAdjustCharacterScale=!1,updateCallback=[],viewerScroll=go.scroll,offset={x:0,y:0},drilldownAPI={expand:go.drilldownManager.expand,next:go.drilldownManager.drilldownNext,prev:go.drilldownManager.drilldownPrev},viewerAPI={moveFirstPage:go.viewer.moveFirstPage,moveLastPage:go.viewer.moveLastPage,movePage:go.viewer.movePage,prevPage:go.viewer.prevPage,nextPage:go.viewer.nextPage,hidePage:function(){go.report.removePage(arguments)},showPage:function(){go.report.restorePage(arguments)},expandGrid:function(t){return go.gridManager.expandDepth(t)},nextDepth:function(){return go.gridManager.nextDepth()},prevDepth:function(){return go.gridManager.prevDepth()}},formAPI={showGroupSign:go.formManager.showGroupSign},HLINK_TYPE={NONE:0,RD:1,WEB:2,OTHER:3,EMAIL:4,RD_CURRENT:5,DRILLDOWN:7},WARNNING_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFQUY0MjE0MkJCMzNFMzExQThCQ0ZENjNBMThBMjY0NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpENjk5RDlFNDM2NzExMUUzOERCN0EwNDc2RkI1OUZGNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpENjk5RDlFMzM2NzExMUUzOERCN0EwNDc2RkI1OUZGNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc5MjQ4RDFBNzEzNkUzMTFCRkRFQ0ExN0Y0NTU3RTY3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVBRjQyMTQyQkIzM0UzMTFBOEJDRkQ2M0ExOEEyNjQ1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pFczmAAAAgRJREFUeNp0U01rFEEQ7e6ZTbIYZ/GLGLxvJBD3Eu+5iRC9iCcvkqMgkUAu/oUcouLV/IE1l0DIwaPgKV7EYFBRREFYJLJuZz56pqt9NbOT7OhOwaO6aqpe11RXSb25KerEOXcK2DRqA2z7w8g8YOi8CL0GLANtKvyHjmgH354Bv8pk1n6aZWLEcQd40RCiNSGl8AAmtkJ0YqLOcZquIm4FMdtEVFSQpGl+IE4m6gZCSE4uhU9c5jQAwuBHHHeRfJeGJH5kjMDhEhxbqF1OiHppApeVkp/CcAvxr5HX88MkYYKH54iCKecqCVMbG7mO19dPfGeBC84FX6PokXXusX8cx0xw+4q1eTPHShRVzPOIfRdFy8QEuiC4OolfqZUwrJhnAOTNWe6BBjs3Q/T79QRHRxUTtYqBMYZKAjAd9rXutPCklYuXlsby/cYraSG+5AQDrsC5nc9Z1rmmdSWwtb+f6/7iYsX/3vOEVmr3tALnnr/xvNXpLAtmR3oRzc//d/s3JL9qNP7g0idFBUUTezxhL5vN7o0kkbMYrnHyHcldpRwlyQrie0zgXZ+ZEQYJJss+QB8ceN7N2NpJyf3Ac4V42p/AW6XEnlIDY+09jP82r0CK7/LBwkIxymArlwlYg30L9hzOBviI8y70U/fPMsn77fbJMtHImjomrFnhcr158P4KMAC3UsepYGz8PwAAAABJRU5ErkJggg==",adjustCoord=function(t,e){return e?Math.floor(t/10.3+24.3)+(e%2==0?0:.5):Math.floor(t/10.3+24.3)},applyPriorityToFaceAttr=function(t,e){var i=t.attr("fc"),r=t.attr("pt"),n=t.attr("al");if(i||r||n){var o=$.extend({},e);return i&&(o.fc=i),r&&(o.pt=r),n&&(o.al=n),o}return e},isDrawingTo={screen:function(){return"d"==drawMedia},printer:function(){return"p"==drawMedia},save:function(){return"s"==drawMedia}},applyPriorityToLineAttr=function(t,e){var i=t.attr("lc"),r=t.attr("wd"),n=t.attr("st"),o=t.attr("ap");if(i||r||n||o){var a=$.extend({},e);return i&&(a.lc=i),r&&(a.wd=m2soft.crownix.Painter.adjustWidth(r)),n&&(a.st=n),o&&(a.ap=o),a}return e},drawLine=function(t,e){var i=adjustCoord(t.attr("sx"),e.wd),r=adjustCoord(t.attr("sy"),e.wd),n=adjustCoord(t.attr("ex"),e.wd),o=adjustCoord(t.attr("ey"),e.wd);cxCanvas.drawLine(i,r,n,o,e)},drawCurve=function(t,e){var i=adjustCoord(t.attr("sx"),e.wd),r=adjustCoord(t.attr("sy"),e.wd),n=adjustCoord(t.attr("ex"),e.wd),o=adjustCoord(t.attr("ey"),e.wd),a=adjustCoord(t.attr("cx1"),e.wd),s=adjustCoord(t.attr("cy1"),e.wd),l=adjustCoord(t.attr("cx2"),e.wd),c=adjustCoord(t.attr("cy2"),e.wd);cxCanvas.drawCurve(i,r,n,o,e,a,s,l,c)},drawPolyLine=function(t,e){for(var i=t.attr("dt").split("|"),r=[],n=0,o=i.length;n<o;n++){var a=i[n].split(","),s=adjustCoord(a[0],e.wd),l=adjustCoord(a[1],e.wd);r.push([s,l])}cxCanvas.drawPolyLine(e,r)},drawScribble=function(t,e){for(var i=t.attr("dt").split("|"),r=[],n=0,o=i.length;n<o;n++){var a=i[n].split(","),s=adjustCoord(a[0]),l=adjustCoord(a[1]);r.push([s,l])}cxCanvas.drawScribble(e,r)},drawRect=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd);cxCanvas.drawRect(r,n,o,a,e,i)},drawRoundeRect=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd),s=t.attr("aw")/10.3,l=t.attr("ah")/10.3,c=t.attr("ap");cxCanvas.drawRect(r,n,o,a,e,i,s,l,c),cxCanvas.setClip(t.attr("cl"))},drawEllipse=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd);cxCanvas.drawEllipse(r,n,o,a,e,i)},drawDiamond=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd);cxCanvas.drawDiamond(r,n,o,a,e,i)},drawParallelogram=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd),s=t.attr("cx")/10.3;cxCanvas.drawParallelogram(r,n,o,a,e,i,s)},drawPolygon=function(t,e,i){for(var r=t.attr("dt").split("|"),n=[],o=0,a=r.length;o<a;o++){var s=r[o].split(","),l=adjustCoord(s[0],e.wd),c=adjustCoord(s[1],e.wd);n.push([l,c])}cxCanvas.drawPolygon(e,i,n)},drawHexaheron=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd),s=t.attr("cx")/10.3,l=t.attr("cy")/10.3;cxCanvas.drawHexaheron(r,n,o,a,s,l,e,i)},drawCylinder=function(t,e,i){var r=adjustCoord(t.attr("sx"),e.wd),n=adjustCoord(t.attr("sy"),e.wd),o=adjustCoord(t.attr("ex"),e.wd),a=adjustCoord(t.attr("ey"),e.wd),s=t.attr("sh")/10.3;cxCanvas.drawCylinder(r,n,o,a,e,i,s)},drawSVG=function(t){var e=adjustCoord(t.attr("sx")),i=adjustCoord(t.attr("ex")),r=adjustCoord(t.attr("sy")),n=adjustCoord(t.attr("ey"));t.find("svg").clone().attr({width:i-e+"px",height:n-r+"px"}).css({position:"absolute",left:e+offset.x,top:r+offset.y}).appendTo(viewerTextDom)},drawCxChart=function(t){var e=adjustCoord(t.attr("sx")),i=adjustCoord(t.attr("ex")),r=adjustCoord(t.attr("sy")),n=adjustCoord(t.attr("ey")),o=$("<div>").css({position:"absolute",left:e,top:r,width:i-e+"px",height:n-r+"px"}).appendTo(viewerTextDom);try{var a=(new ChartConverter).convertMml(t);new crownix.Chart(o[0]).build(a.series,a.options)}catch(t){Message.log(t.stack)}},drawChart=function(t){t.children().each((function(){var e=this.tagName;"svg"==e?drawSVG(t):"CC"==e&&drawCxChart(t)}))},drawGrid=function(t){var e=adjustCoord(t.attr("sx")),i=adjustCoord(t.attr("ex")),r=adjustCoord(t.attr("sy")),n=adjustCoord(t.attr("ey")),o=$("<div>").css({position:"absolute",left:e+"px",top:r+"px",width:i-e+2+"px",height:n-r+2+"px",border:"1px solid #AEB6BF"}).appendTo(viewerTextDom);go.gridManager||(go.gridManager=new m2soft.crownix.GridManager);try{go.gridManager.build(t.attr("id"),o[0],t.text(),go)}catch(t){console.log("[Crownix Viewer] could not build grid."),console.log(t)}},applyHyperLink=function(target,targetTop,targetLeft,hyperlinkInfoElement,element){var text=target.text(),hlel=hyperlinkInfoElement,type=hlel.attr("hl"),id=hlel.attr("hi"),url=hlel.attr("hr")||hlel.attr("ht"),balloon=hlel.attr("hb"),eventString=hlel.attr("he"),browser_close=hlel.attr("bc");target.addClass("crownix_hyperlink");var width=target.width(),height=target.height(),anchor=$("<a>").attr("href",url).attr("title",balloon).css({position:"absolute",top:targetTop,left:targetLeft,width,height,visibility:go.options.textOnCanvas?"hidden":"visible"});if(target.css("position",""),target.css("left",""),target.css("top",""),type==HLINK_TYPE.RD){var isNewWindow=hlel.attr("hn")||0,params=hlel.attr("hp")||"",isFullScreen=hlel.attr("hf")||1,width=isNewWindow&&hlel.attr("hw"),height=hlel.attr("hh"),x=hlel.attr("hx"),y=hlel.attr("hy"),showToolbar=hlel.attr("ht")||1,showMenubar=hlel.attr("hm")||1,showStatusbar=hlel.attr("hs")||1,resizable=hlel.attr("ha")||1,isPopup=window.location.href.indexOf("popup/viewer.html")>0,template=hlel.attr("hd")||isPopup?"viewer.html":"popup/viewer.html",windowOpenOptionString=1==isFullScreen?"fullscreen="+isFullScreen:"left="+x+",top="+y+",width="+width+",height="+height;windowOpenOptionString=windowOpenOptionString+",toolbar="+showToolbar+",menubar="+showMenubar+",status="+showStatusbar+",resizable="+resizable,anchor.attr("href","#"),target.bind(Util.browser.mobile?"tap":"click",(function(ev){if("string"==typeof eventString)"function"==typeof HLinkClicked&&eval("HLinkClicked")(eventString,url,params);else if(isNewWindow)window.open("./"+template+"?mrd_path="+url+"&mrd_param="+params+encodeURI("&server_url="+viewerServerUrl),"_blank",windowOpenOptionString);else{if(go.shareManager&&go.shareManager.isConnected())return void dialog.show(R.get("unsupported_feature_localStorage"));options.isHyperlink=!0,formManager&&formManager.isModified()?dialog.show(R.get("confirm_page_out")+" "+R.get("confirm_hyperlink_move"),{confirm:!0,input:!1},(function(t){t&&(formManager.saved(),viewerOpenFile(url,params,options))})):viewerOpenFile(url,params,options)}return!1}))}else type==HLINK_TYPE.DRILLDOWN?(anchor.attr("href","#"),target.bind("click",(function(){if(!go.shareManager||!go.shareManager.isConnected()||go.shareManager.isHost()){var t="#"+go.containerDom.parent().attr("id");return Message.progress.show(t,"",(function(){try{go.drilldownManager.toggle(id).fail((function(e){Message.progress.hide(t),dialog.show(e)})).done((function(e){Message.progress.hide(t)}))}catch(e){Message.progress.hide(t),dialog.show(e)}return!1})),!1}dialog.show(R.get("unsupported_feature_localStorage"))}))):type==HLINK_TYPE.WEB?anchor.attr("target","_blank"):type==HLINK_TYPE.OTHER||(type==HLINK_TYPE.RD_CURRENT?(anchor.attr("href","#"),target.bind(Util.browser.mobile?"tap":"click",(function(t){return url&&viewerMovePage(parseInt(url)),!1}))):type==HLINK_TYPE.EMAIL?anchor.attr("href","mailto:"+url):"1"==browser_close&&(anchor.attr("href","#"),target.bind(Util.browser.mobile?"tap":"click",(function(t){return window.close(),!1}))));target.wrap(anchor)},makeTextCss=function(t,e,i){var r={};return r["font-family"]='"'+(t.attr("fn")?t.attr("fn"):i.get(e.fi)||"")+'", '+Font.FONT_FAMILY_PREFIX+e.fi,r["font-size"]=((t.attr("pt")?t.attr("pt")/10:e.pt/10)||10)+"pt",r.color=(t.attr("cl")?t.attr("cl"):e.cl)||"#000000",(t.attr("cb")?"1"===t.attr("cb"):null==t.attr("cb")&&"1"===e.cb)&&(r["font-weight"]="bold"),(t.attr("ci")?"1"===t.attr("ci"):null==t.attr("ci")&&"1"===e.ci)&&(r["font-style"]="italic"),(t.attr("cu")?"1"===t.attr("cu"):null==t.attr("cu")&&"1"===e.cu)&&(r["text-decoration"]="underline"),(t.attr("cs")?"1"===t.attr("cs"):null==t.attr("cs")&&"1"===e.cs)&&(r["text-decoration"]?r["text-decoration"]+=" line-through":r["text-decoration"]="line-through"),"0"===t.attr("vs")&&(r.visibility="hidden"),r},drawText=function(t,e,i){var r=adjustCoord(t.attr("le")),n=adjustCoord(t.attr("ri")),o=adjustCoord(t.attr("to"))-1,a=adjustCoord(t.attr("bo"))+1,s=parseInt(t.attr("ha"))||0,l=parseFloat(t.attr("ls"))/1e3||0,c=t.attr("ba");0===s?s="left":1===s?s="center":2===s&&(s="right");var d=$("<div>").css({position:"absolute","white-space":"pre",left:r+offset.x+"px",top:o+offset.y+"px","text-align":s,"line-height":a-o+"px"});"1"===c&&d.addClass("crownix-background-object");var h={},u={},f="",p=0,g=!1;if(t.children().length>0){var m=0;t.children().each((function(){var t=$(this);h=i[t.attr("tid")]||{},u=makeTextCss(t,h,e),f=t.text(),p+=f.length,m=Math.max(m,u["font-size"].replace("pt","")),g=t.attr("sc")||h.sc||0;var r=$("<span>").css(u).text(f).appendTo(d);"1"!==t.attr("cr")&&"1"!==h.cr||("#000000"===u.color&&r.css("color","#ffffff"),r.wrapInner('<span style="background-color:#000000"></span>'));var n=t.attr("ss")||h.ss||"0";"1"===n?r.wrapInner("<sup></sup>"):"2"===n&&r.wrapInner("<sub></sub>")})),d.css("font-size",m+"pt")}else{h=i[t.attr("tid")]||{},u=makeTextCss(t,h,e),f=t.text(),p=f.length,g=t.attr("sc")||h.sc||0,d.css(u).text(f),"1"!==t.attr("cr")&&"1"!==h.cr||("#000000"===u.color&&d.css("color","#ffffff"),d.wrapInner('<span style="background-color:#000000"></span>'));var v=t.attr("ss")||h.ss||"0";"1"===v?d.wrapInner("<sup></sup>"):"2"===v&&d.wrapInner("<sub></sub>")}a&&d.css("height",a-o+"px"),d.css("letter-spacing",l+"in"),"1"===t.attr("ft")&&d.attr("pagenum-format",d.text()).addClass("crownix-pagenum"),d.appendTo(viewerTextDom);var w,x,b,y=n-r+2;if(useAdjustCharacterScale&&g)(x=(y-1)/d.width())<1&&(w={"transform-origin":"0%",transform:"scale("+x+",1)"});else if(useAdjustLetterSpace&&p>1&&d.width()>y+Unit.inToPx(l)){var k=l-Unit.pxToIn((d.width()-y)/p);k=k.toFixed(3),d.css("letter-spacing",k+"in")}if(t.attr("ve")&&d.css({"writing-mode":Util.browser.msie?"tb-lr":"vertical-lr","-webkit-writing-mode":"vertical-lr"}),"1"==t.attr("cbo")&&"1"!==t.attr("cto")?b="top":"1"==t.attr("cto")&&"1"!==t.attr("cbo")&&(b="bottom"),b){var _=0,C=d.wrapInner("<span>").find(":first");C.children().length>0?C.children().each((function(){_=Math.max(_,$(this).height())})):_=C.height(),d.css("overflow","hidden"),C.css("position","relative").css(b,Math.abs(_/2-(a-o)/2)),w&&(y/=x)}if(w&&d.css(w),d.css("width",y+"px"),d.find("span").css("white-space","pre"),Util.browser.webkit&&d.css("min-height",parseInt(d.css("height"))+1+"px"),t.attr("hl")||t.attr("hi")){var T=t.parent();"PR"===T.prop("tagName").toUpperCase()&&(T=T.parent());var S=T.find('[hi="'+t.attr("hi")+'"][hl]');0==S.length&&(S=t),applyHyperLink(d,o+offset.y,r+offset.x,S,t)}},makeFontStyle=function(t,e,i){var r=e[t.attr("tid")]||{};return{fontFamily:'"'+(t.attr("fn")?t.attr("fn"):i.get(r.fi)||"")+'", '+m2soft.crownix.Font.FONT_FAMILY_PREFIX+r.fi,fontSize:((t.attr("pt")?t.attr("pt")/10:r.pt/10)||10)+"pt",fillStyle:(t.attr("cl")?t.attr("cl"):r.cl)||"#000000",fontStyle:(t.attr("ci")?"1"===t.attr("ci"):"1"===r.ci)?"Italic":"",fontWeight:(t.attr("cb")?"1"===t.attr("cb"):"1"===r.cb)?"Bold":"",underLine:(t.attr("cu")?"1"===t.attr("cu"):"1"===r.cu)||!!t.attr("hl"),lineThrough:t.attr("cs")?"1"===t.attr("cs"):"1"===r.cs,shade:t.attr("cr")?"1"===t.attr("cr"):"1"===r.cr}},drawTextToCanvas=function(t,e,i,r){if("0"!==t.attr("vs")){if("1"===t.attr("ft")){if(!go.reportFinished&&-1!=t.text().indexOf("#"))return void(go.redrawOnFinished=!0);t.text(Util.formatPageNumber(t.text(),go.currentPage-go.report.getCoverPage()+(go.startPageNo-1),go.totalPage-go.report.getCoverPage()+(go.startPageNo-1)))}r=r||{};var n,o,a=adjustCoord(t.attr("le"))+(r.padding||0),s=adjustCoord(t.attr("ri"))-(r.padding||0),l=adjustCoord(t.attr("to"))+(r.padding||0),c=adjustCoord(t.attr("bo"))-(r.padding||0),d=parseInt(t.attr("ha"))||0,h=parseFloat(t.attr("ls"))/1e3||0,u=Unit.inToPx(h);if(d=1===d?"center":2===d?"right":"left",t.children("TX").length>0){var f,p=0,g=0;useAdjustLetterSpace&&"hidden"!==r.overflow&&(f=0,t.children().each((function(){var t=$(this);o=t.text(),n=makeFontStyle(t,i,e),f+=cxCanvas.measureText(o,n).width+u*o.length}),(function(){var t=s-a+2+u;o.length>1&&f>t&&(u-=(f-t)/o.length)}))),"center"===d?p=(s-a-f+u)/2:"right"===d&&(p=s-a-f),t.children().each((function(){var t=$(this);o=t.text(),(n=makeFontStyle(t,i,e)).textAlign="left",n.textBaseline="bottom",n.letterSpacing=u,cxCanvas.drawText(o,a+p+g,l,s,c,n),g+=cxCanvas.measureText(o,n).width+u*o.length}))}else{if((n=makeFontStyle(t,i,e)).textAlign=d,"1"==t.attr("cbo")&&"1"!==t.attr("cto")?n.textBaseline="top":"1"==t.attr("cto")&&"1"!==t.attr("cbo")?n.textBaseline="bottom":n.textBaseline="middle",o=t.text(),useAdjustLetterSpace&&"hidden"!==r.overflow){var m=cxCanvas.measureText(o,n).width+u*o.length,v=s-a+2+u;o.length>1&&m>v&&(u-=(m-v)/o.length)}n.letterSpacing=u,cxCanvas.drawText(o,a,l,s,c,n)}}},drawImage=function(t,e){var i=adjustCoord(t.attr("sx")),r=adjustCoord(t.attr("ex")),n=adjustCoord(t.attr("sy")),o=adjustCoord(t.attr("ey")),a=t.attr("dt"),s=t.attr("ra"),l=t.attr("ba"),c=r-i,d=o-n;if(go.options.imageDrawOption.useCanvas||l){if(cxCanvas.drawImage(e,i,n,c,d,s),t.attr("hl")||t.attr("hi")){var h,u,f=$("<div>").css({position:"absolute",left:i+"px",top:n+"px",width:c+"px",height:d+"px"}).appendTo(viewerTextDom);"PR"===(h=t.parent()).prop("tagName").toUpperCase()&&(h=h.parent()),0==(u=h.find('[hi="'+t.attr("hi")+'"][hl]')).length&&(u=t),applyHyperLink(f,n+offset.y,i+offset.x,u,t)}}else(f="1"===s?$("<img>").css("background",["url(",a,")"].join("")):$("<img>").attr("src",a)).attr({width:c,height:d}).css({position:"absolute",left:i+offset.x,top:n+offset.y}).appendTo(viewerTextDom),(t.attr("hl")||t.attr("hi"))&&("PR"===(h=t.parent()).prop("tagName").toUpperCase()&&(h=h.parent()),0==(u=h.find('[hi="'+t.attr("hi")+'"][hl]')).length&&(u=t),applyHyperLink(f,n+offset.y,i+offset.x,u,t))},getElementId=function(t,e){return"rb"===e?"crownix_form_field_"+t.attr("fi")+"_"+t.attr("gi")+"_"+t.attr("id"):"crownix_form_field_"+t.attr("fi")+"_"+t.attr("id")},drawFormField=function(t,e,i){var r=adjustCoord(t.attr("le"))+2+offset.x,n=adjustCoord(t.attr("ri"))-1+offset.x,o=adjustCoord(t.attr("to"))+2+offset.y,a=adjustCoord(t.attr("bo"))-1+offset.y,s=t.attr("ty"),l=t.attr("dt")||t.attr("vl")||t.text(),c=t.attr("rq")||"1",d=t.attr("ed")||"1",h=t.attr("hd")||"0",u=t.attr("fi"),f=t.attr("id"),p=formManager.getField(u,f)||{},g=getElementId(t,s),m=i[t.attr("tid")]||{},v=makeTextCss(t,m,e),w=t.attr("sa")||"All";if("tf"===s){var x=t.attr("tl"),b=t.attr("ph")||"",y=parseInt(t.attr("ha"))||0,k=parseInt(t.attr("dn"))||0,_=t.attr("pw"),C=t.attr("re"),T={type:t.attr("it")||"text",realDateFormat:t.attr("df")||"yyyy-MM-dd",displayDateFormat:t.attr("dfv")||"yyyy-MM-dd",attributes:Util.deserialize(t.attr("ia")),displayFormat:t.attr("ft"),checkZero:t.attr("cz"),checkNoZero:t.attr("cnz"),japanYear:t.attr("jy")},S="";(E={}).url=t.attr("pu"),E.width=t.attr("puw"),E.height=t.attr("puh"),E.top=t.attr("put"),E.left=t.attr("pul"),y&&"0"!=y?"1"==y?S="center":"2"==y?S="right":"3"!=y&&"4"!=y||(S="justify"):S="left",drawTextField(p,g,r,n,o,a,u,f,l,b,S,k,x,d,h,c,v,C,_,E,T,w)}else if("ta"===s){x=t.attr("tl");var E,M=t.attr("ll");b=t.attr("ph")||"",y=parseInt(t.attr("ha"))||0,k=parseInt(t.attr("dn"))||0,S="";(E={}).url=t.attr("pu"),E.width=t.attr("puw"),E.height=t.attr("puh"),E.top=t.attr("put"),E.left=t.attr("pul"),y&&"0"!=y?"1"==y?S="center":"2"==y?S="right":"3"!=y&&"4"!=y||(S="justify"):S="left",drawTextArea(p,g,r,n,o,a,u,f,l,b,S,k,x,M,d,h,c,v,C,E,w)}else if("cb"===s){var A=t.attr("lb"),P=t.attr("la"),I=(y=parseInt(t.attr("ha"))||0,parseInt(t.attr("va"))||0),D=t.attr("se"),F=(S="left","middle"),O=p&&p.size||t.attr("sz")||16;y&&"0"!=y?"1"==y?S="center":"2"==y&&(S="right"):S="left",I&&"0"!=I?"1"==I?F="middle":"2"==I&&(F="bottom"):F="top",drawCheckBox(p,g,r,n,o,a,u,f,l,D,d,h,c,A,P,v,S,F,w,O)}else if("co"===s){var R=[],B=[];t.children("item").each((function(){var t=$(this);R.push(t.attr("sd")),B.push(t.attr("ad"))}));var N=t.attr("sv");"0"==(t.attr("ct")||"0")?drawComboBox(p,g,r,n,o,a,u,f,N,d,h,c,v,R,B,w):(p=formManager.getNormalField(t),drawNormalCombo(p,r,n,o,a,N,v,R,B,getEventHandlers(t)))}else if("rb"===s){A=t.attr("lb"),P=t.attr("la"),y=parseInt(t.attr("ha"))||0,I=parseInt(t.attr("va"))||0,D=t.attr("se");var L=t.attr("gi");S="left",F="middle",O=p&&p.size||t.attr("sz")||16;y&&"0"!=y?"1"==y?S="center":"2"==y&&(S="right"):S="left",I&&"0"!=I?"1"==I?F="middle":"2"==I&&(F="bottom"):F="top",drawRadioButton(p,g,r,n,o,a,u,f,L,l,D,d,h,c,A,P,v,S,F,w,O)}else if("sg"===s){b=t.attr("ph")||"";(y=parseInt(t.attr("ha"))||0)&&"0"!=y?"1"==y?v["text-align"]="center":"2"==y?v["text-align"]="right":"3"!=y&&"4"!=y||(v["text-align"]="justify"):v["text-align"]="left",drawSignature(p,g,r,n,o,a,u,f,l,d,h,c,b,v,w)}else if("im"===s){var q=t.attr("ra")||0,j=(b=t.attr("ph")||"",y=parseInt(t.attr("ha"))||0,t.attr("mk"));y&&"0"!=y?"1"==y?v["text-align"]="center":"2"==y?v["text-align"]="right":"3"!=y&&"4"!=y||(v["text-align"]="justify"):v["text-align"]="left",drawPicture(p,g,r,n,o,a,u,f,l,d,h,c,q,b,v,w,j)}else if("sm"===s){var z=t.attr("su"),H=t.attr("sc"),U=t.attr("sn"),V=t.text()||"",W={normalImage:t.attr("bi")||t.attr("rbi"),clickImage:t.attr("pi")||t.attr("rpi")};"0"==(t.attr("bt")||"0")?drawSubmit(r,n,o,a,u,f,z,H,U,V,v,d,W,w):drawNormalButton(r,n,o,a,V,v,W,getEventHandlers(t))}else if("fl"===s){y=parseInt(t.attr("ha"))||0,I=parseInt(t.attr("va"))||0;var Y=t.attr("ms"),G=t.attr("ex")&&t.attr("ex").split(",").map((function(t){return t.toUpperCase()})),X=self.formFieldMode?t.attr("ph"):"",K=t.attr("re");drawFile(p,r,n,o,a,y,I,u,f,l,v,c,d,Y,G,X,K,w)}else if("pn"===s){b=t.attr("ph")||"";var Z=t.attr("bt");drawPenField(p,g,r,n,o,a,u,f,l,d,h,c,b,Z,v,t,e,i,w)}self.formFieldMode&&"sm"!==s&&p.setElementId(g)},getEventHandlers=function(t){return eventHandler={change:getEventHandler(t.attr("evc")),click:getEventHandler(t.attr("click"))}},getEventHandler=function(encodedScript){if(void 0!==encodedScript){var planeScript=Util.base64.utf8Decode(encodedScript);return eval('var func = function(viewer, drilldown, value, form) { "use strict"; '+planeScript+"};"),func}},cxOpener=function(t){return{validate:function(e){return formManager.validateForm(t,e)},form:formManager.getFormWrapper(t),set:function(e){for(var i in e){var r=e[i],n=formManager.getField(t,i),o=$("#m2soft-crownix-text").find("[name="+i+"]");switch(n.type){case"ta":case"tf":o.val(r).trigger("input");break;case"cb":o.attr("checked",!!r).trigger("change");break;case"rb":o.filter("[fieldId="+r+"]").attr("checked","checked").trigger("change");break;case"co":o.find('option:contains("'+r+'")').each((function(){$(this).text()==r&&o.val($(this).attr("value")).trigger("change")}));break;case"sg":case"im":case"pn":!function(t,e,i){var r=new Image;r.onload=function(){var i=e,n=i.get(0).getContext("2d");n.clearRect(0,0,i.width(),i.height());var o=i.attr("ratio");if(1==o){var a=r.width/r.height,s=i.width()/i.height();if(a>s){var l=i.height()*(s/a),c=(i.height()-l)/2;n.drawImage(r,0,c,i.width(),l)}else{var d=i.width()*(a/s),h=(i.width()-d)/2;n.drawImage(r,h,0,d,i.height())}}else 2==o?n.drawImage(r,0,0):n.drawImage(r,0,0,i.width(),i.height());$("#m2soft-crownix-text div[for="+t.id+"] span").hide(),t.value=i.get(0).toDataURL("image/png")},r.src=i}(n,o,r)}}}}},preventField=function(t,e){self.formFieldMode&&(formManager.checkFormLoadComplete(t)||e.on("mousedown.prevent touchstart.prevent",(function(t){t.preventDefault(),t.stopPropagation(),dialog.show(R.get("formfield_event_disable_before_done"))})))},getWrapperDiv=function(t,e,i,r){return $(document.createElement("div")).attr("id","m2soft-crownix-field-wrapper").css({position:"absolute",left:t+"px",top:i+"px",width:e-t+"px",height:r-i+"px"}).appendTo(viewerTextDom)},getCommonDiv=function(t,e,i,r,n,o){var a,s,l,c=Util.browser.firefox?2:0;return"2"===e.displayType?(s={background:e.color},l={background:e.color}):(s={"border-style":"dashed",border:"1px dashed "+e.color},l={"border-style":"dashed","border-color":e.color}),a=o?o.css(s):$(document.createElement("div")).attr("id","crownix_form_field_hintingbox").css(l),"2"==e.displayType?a.prependTo(t):a.appendTo(t),a.css({position:"absolute",left:i+"px",top:i+"px",width:r-2*i-c+"px",height:n-2*i-c+"px"}).addClass("commonFieldHinting"),a},getWarningImg=function(t,e,i,r){return $("<img>").attr("id","crownix_form_field_"+e+"_warnning").attr("src",WARNNING_IMAGE).css({position:"absolute",left:i.width()-12+"px",top:r+"px"}).hide().appendTo(t)},drawTextField=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b,y){var k,_=getWrapperDiv(i,r,n,o),C=$(document.createElement("input"));preventField(a,C),t.editable&&(f=t.editable),self.formFieldMode&&"0"===f&&t.disableColor&&_.addClass("crownix-formfield-disable");var T=formManager.getField(a,t.referenceId);if(t.referenceId&&"ta"==T.type)drawTextArea(t,e,i,r,n,o,a,s,l,c,d,h,u,T.limitedLineLength,f,p,g,m,v,x,y);else{C.attr({type:"1"===w?"password":"date"===b.type?"text":b.type,placeholder:self.formFieldMode?c:"",id:e,name:t.referenceId?t.referenceId:s,formId:a,auth:y}).attr(b.attributes).css(m).css({width:r-i+"px",height:o-n+"px",margin:"0px",padding:"0px",border:"0px","text-align":d,"text-indent":h,"background-color":"rgba(0, 0, 0, 0)",cursor:isPopupDataEnabled(x)?"pointer":"default","-webkit-appearance":"none"}).bind("click tap",(function(t){if(!isPopupDataEnabled(x)||this.className.indexOf("crownix-auth-lock")>-1)return!0;$(this).blur();var e=["scrollbars=no","resizeable=yes","menubar=no","toolbar=yes","width="+x.width,"height="+x.height,"top="+x.top,"left="+x.left].join(", ");return window.open(x.url,"crownix_popup_"+s,e),window.cxOpener=cxOpener(a),!1})).appendTo(_),"text"===b.type&&null!=b.displayFormat&&(k=new NumberUtil(b.displayFormat,b.checkZero,b.checkNoZero)),"date"===b.type?(self.formFieldMode&&"1"==f&&C.crownixdatepicker({dateFormat:b.displayDateFormat,japanYear:b.japanYear?b.japanYear:null,checkZero:b.checkZero}),""!==t.value&&null!=t.value||!l?C.val(DateUtil.convertDateFormat(t.value,b.realDateFormat,b.displayDateFormat,b.japanYear,b.checkZero)):(C.val(DateUtil.convertDateFormat(l,b.realDateFormat,b.displayDateFormat,b.japanYear,b.checkZero)),t.value=l)):void 0===k||self.formFieldMode&&!l&&!t.value?C.val(void 0===t.value?l:t.value):C.val(k.formatNumber(void 0===t.value?l:t.value)),self.formFieldMode&&t.validateRegEx(),setTimeout((function(){C.bind("change input",(function(e){t.value="date"===b.type?DateUtil.convertDateFormat($(this).val(),b.displayDateFormat,b.realDateFormat,b.japanYear,b.checkZero,!0):$(this).val(),formManager.modified(),t.validateRegEx(),t.spreadToShareField(t,formManager.getFields(a),a),go.shareManager&&go.shareManager.isConnected()&&(go.shareManager.sendFormField({formId:a,fieldId:s,value:t.value}),"date"===b.type&&go.shareManager.sendFocusOutField()),go.ttsManager&&go.ttsManager.update(a,s)})),Util.browser.msie&&9==Util.browser.version&&C.on("keyup",(function(){var t=event.keyCode||event.charCode;8!=t&&46!=t||C.trigger("date"===b.type&&Util.browser.mobile&&Util.browser.firefox?"change":"input")})),void 0!==k&&C.on("blur keyup",(function(e){if("keyup"!=e.type||13==e.keyCode){var i=k.unformatNumber($(e.currentTarget).val());i&&(t.value=i),C.val(k.formatNumber($(e.currentTarget).val())),self.formFieldMode&&(formManager.modified(),t.validateRegEx(),t.spreadToShareField(t,formManager.getFields(a),a)),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:C.val()})}})),"date"===b.type&&C.on("keydown",(function(t){t.preventDefault(),8!=t.keyCode&&46!=t.keyCode||C.val("")}))})),go.shareManager&&go.shareManager.isConnected()&&C.hasClass("crownix-auth-lock")&&"date"===b.type?C.attr("readonly",!0):C.attr("readonly",!1);var S=formManager.getRequiredHintingColor(a,s)||"";self.formFieldMode&&isDrawingTo.screen()&&t.showRequiredMark(S,_);var E=formManager.getHintingColor(a,s)||"";self.formFieldMode&&""!=E&&isDrawingTo.screen()&&getCommonDiv(_,E,1,C.width(),C.height(),C);var M=getWarningImg(_,s,C,0);null==t.valid||t.valid||M.show(),t.referenceId&&C.attr("rfi","crownix_form_field_"+a+"_"+t.referenceId),self.formFieldMode&&!x.url&&"1"===f||C.attr("readonly","readonly"),"1"===p&&C.css("visibility","hidden"),""!==u&&C.attr("maxlength",u)}},drawTextArea=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b){var y=getWrapperDiv(i,r,n,o),k=$(document.createElement("textarea"));preventField(a,k),t.editable&&(p=t.editable),self.formFieldMode&&"0"===p&&t.disableColor&&y.addClass("crownix-formfield-disable");var _=formManager.getField(a,t.referenceId);if(t.referenceId&&"tf"==_.type)drawTextField(i,r,n,o,a,s,l,c,d,h,u,p,g,m,v,w,_.password,void 0,void 0,b);else{k.attr({id:e,placeholder:self.formFieldMode?c:"",name:t.referenceId?t.referenceId:s,formId:a,auth:b}).css(v).css({width:r-i-h+"px",height:o-n+"px",margin:"0px",padding:"0px 0px 0px "+h+"px",border:"0px","text-align":d,background:"rgba(0, 0, 0, 0)",resize:"none",cursor:isPopupDataEnabled(x)?"pointer":"default","-webkit-appearance":"none"}).bind("click tap",(function(t){if(!isPopupDataEnabled(x)||this.className.indexOf("crownix-auth-lock")>-1)return!0;$(this).blur();var e=["scrollbars=no","resizeable=yes","menubar=no","toolbar=yes","width="+x.width,"height="+x.height,"top="+x.top,"left="+x.left].join(", ");return window.open(x.url,"crownix_popup_"+s,e),window.cxOpener=cxOpener(a),!1})).bind("keydown",(function(t){if(13==t.keyCode&&f>0&&k.val().split("\n").length>=f)return!1})).text(void 0===t.value?l:t.value).appendTo(y),self.formFieldMode&&t.validateRegEx(),setTimeout((function(){k.bind("input",(function(){t.value=$(this).val(),formManager.modified(),t.validateRegEx(),t.spreadToShareField(t,formManager.getFields(a),a),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:t.value})})),go.ttsManager&&k.on("change",(function(){go.ttsManager.update(a,s)})),Util.browser.msie&&9==Util.browser.version&&k.on("keyup",(function(){var t=event.keyCode||event.charCode;8!=t&&46!=t||k.trigger("input")}))}));var C=formManager.getRequiredHintingColor(a,s)||"";self.formFieldMode&&isDrawingTo.screen()&&t.showRequiredMark(C,y);var T=formManager.getHintingColor(a,s)||"";self.formFieldMode&&""!=T&&isDrawingTo.screen()&&getCommonDiv(y,T,1,k.width(),k.height(),k);var S=getWarningImg(y,s,k,0);null==t.valid||t.valid||S.show(),t.referenceId&&k.attr("rfi","crownix_form_field_"+a+"_"+t.referenceId),""!==u&&k.attr("maxlength",u),self.formFieldMode&&!x.url&&"1"===p||k.attr("readonly","readonly"),"1"===g&&k.css("visibility","hidden")}},isPopupDataEnabled=function(t){return t.url&&self.formFieldMode},drawCheckBox=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x){var b=getWrapperDiv(i,r,n,o),y=$(document.createElement("input")),k=$(document.createElement("label")),_=$(document.createElement("span")),C=$('<label class="crownix-css-checkborder">'),T=$('<label class="crownix-css-checkmark">'),S=$('<div class="crownix-check-text-wrap">');preventField(a,y),preventField(a,k),self.formFieldMode&&(d=t.editable,f=t.label,l=c=t.value);var E=formManager.getHintingColor(a,s)||"";self.formFieldMode&&""!=E&&isDrawingTo.screen()&&getCommonDiv(b,E,0,r-i,o-n);var M=formManager.getRequiredHintingColor(a,s)||"";self.formFieldMode&&isDrawingTo.screen()&&t.showRequiredMark(M,b);var A=r-i,P=o-n,I=(_.width(),_.height(),x/16+3);C.attr("for",e).css({width:x,height:x,display:"inline-block",position:"absolute",left:"0",top:"0",border:"1px solid #000000"}),T.css({position:"absolute",left:"0",top:"0",display:"inline-block","margin-left":.3*x+"px",width:.35*x+"px",height:.59*x+"px","border-right":"solid #0f1011","border-bottom":"solid #0f1011","border-width":"0 "+.35*x*.3+"px "+.35*x*.3+"px 0",transform:"rotate(45deg)",visibility:"hidden"}),S.css({display:"inline-block","vertical-align":"top"}),k.attr("for",e).css({"white-space":"nowrap",overflow:"hidden","word-break":"break-all","text-align":m,position:"absolute",width:A+"px",height:P+"px"}).attr("class",s).appendTo(b),_.addClass("crownix_formfield_selector").css({"background-position":("1"==t.value||"1"===c?"-19px":"0px")+" -2px",width:x,height:x,position:"relative","text-align":"left",margin:I+"px",display:"inline-block"}).appendTo(k),y.attr({type:"checkbox",name:s,value:l,id:e,formId:a,auth:w}).bind("change",(function(){var e=y.is(":checked");t.setSelected(e),formManager.modified(),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,name:"selected",value:e}),go.ttsManager&&go.ttsManager.update(a,s)})),y.css({width:"0",height:"0",position:"relative",display:"none"}),isDrawingTo.save()||y.appendTo(_),T.appendTo(_),C.appendTo(_);var D=parseInt(g["font-size"]),F=Math.max(D,16/1.3),O=$(document.createElement("span")).attr("class","crownix_form_field_label").css({"vertical-align":"middle","line-height":F+"pt",display:"inline-block",position:"absolute"}).css(g).text(f);O.appendTo(S),"0"==p?S.appendTo(k):S.prependTo(k);var R=A-x-2*I;O.width()>R&&(O.css({width:R+"px"}),k.css({"white-space":"inherit"}));var B=0,N=0;"middle"==v?(N=(k.height()-_.height())/2,B=k.height()/2-O.height()/2):"top"==v?(_.css({"vertical-align":"top","margin-top":"4px"}),O.css("vertical-align","top")):"bottom"==v&&(_.css({"vertical-align":"bottom","margin-bottom":"4px"}),O.css("vertical-align","bottom"),B=k.height()-O.height()-4),0==O.height()&&(O.css("display","block"),_.css("margin-bottom","0px")),S.css({"margin-top":B+"px",width:O.width()+"px",height:O.height()+"px","text-align":"left"}),O.height()>=_.height()&&S.css("line-height",x+"px"),_.css("margin-top",N+"px"),"1"!=t.value&&"1"!==c||(y.prop("checked",!0),T.css("visibility","visible")),self.formFieldMode&&"0"!==d||(y.attr("disabled","disabled"),C.addClass("crownix-formfield-disable")),"1"===h&&y.css("visibility","hidden")},drawComboBox=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g){var m=getWrapperDiv(i,r,n,o),v=$(document.createElement("select"));preventField(a,v),t.editable&&(c=t.editable),self.formFieldMode&&"0"===c&&m.addClass("crownix-formfield-disable"),void 0!==t.selectedIndex&&(l=-1==t.selectedIndex?"":f[t.selectedIndex]),v.attr({name:s,id:e,formId:a,auth:g}).css(u).css({width:r-i+"px",height:o-n+"px",margin:"0px",padding:"0px",background:"transparent","-webkit-appearance":"none","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAh0lEQVQ4T93TMQrCUAzG8V9x8QziiYSuXdzFC7h4AcELOPQAdXYovZCHEATlgQV5GFTe1ozJlz/kS1IpjKqw3wQBVyy++JI0y1GTe7DCBbMAckeNIQKk/BanALBB+16LtnDELoMcsM/BESDlz2heDR3WePwKSLo5eoxz3z6NNcFD+vu3ij14Aqz/DxGbKB7CAAAAAElFTkSuQmCC)","background-position":"right center","background-repeat":"no-repeat"}).bind("change",(function(){t.value=v.val(),formManager.modified();var e=v.find("option:selected");t.selectedIndex=v.find("option").index(e)-1,go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:t.selectedIndex}),go.ttsManager&&go.ttsManager.update(a,s)})).appendTo(m),Util.browser.android&&v.css("background-color","transparent");$('<option value="">').text("").appendTo(v);for(var w=0;w<f.length;w++){var x=$("<option>").attr("value",p[w]).text(f[w]).appendTo(v);l==f[w]&&x.attr("selected","selected")}var b=formManager.getHintingColor(a,s)||"";self.formFieldMode&&""!=b&&isDrawingTo.screen()&&(getCommonDiv(m,b,0,r-i,o-n).css({overflow:"visible"}).append(v),v.css({top:"0px",left:"0px",width:r-i-2+"px",height:o-n-2+"px","border-style":"1"==b.displayType?"dashed":"",background:"2"==b.displayType?b.color:"transparent","-webkit-appearance":"none","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAh0lEQVQ4T93TMQrCUAzG8V9x8QziiYSuXdzFC7h4AcELOPQAdXYovZCHEATlgQV5GFTe1ozJlz/kS1IpjKqw3wQBVyy++JI0y1GTe7DCBbMAckeNIQKk/BanALBB+16LtnDELoMcsM/BESDlz2heDR3WePwKSLo5eoxz3z6NNcFD+vu3ij14Aqz/DxGbKB7CAAAAAElFTkSuQmCC)","background-position":"right center","background-repeat":"no-repeat"}));var y=formManager.getRequiredHintingColor(a,s)||"";self.formFieldMode&&isDrawingTo.screen()&&t.showRequiredMark(y,m),self.formFieldMode&&"0"!==c||v.attr("disabled","disabled"),"1"===d&&v.css("visibility","hidden")},drawRadioButton=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b){var y=getWrapperDiv(i,r,n,o),k=$(document.createElement("input")),_=$(document.createElement("label")),C=$(document.createElement("span")),T=$('<label class="crownix-radio-outer">'),S=$('<label class="crownix-radio-inner-'+a+"-"+l+'">'),E=$('<div class="crownix-radio-text-wrap">');preventField(a,k),preventField(a,_);var M={};self.formFieldMode&&(M=formManager.getField(a,l)||{},h=t.editable,p=t.label,c=t.value);var A=formManager.getHintingColor(a,s)||"";self.formFieldMode&&""!=A&&isDrawingTo.screen()&&getCommonDiv(y,A,0,r-i,o-n);var P=formManager.getRequiredHintingColor(a,s)||"";self.formFieldMode&&isDrawingTo.screen()&&t.showRequiredMark(P,y);var I=r-i,D=o-n,F=(C.width(),C.height(),Math.round(.2*b)),O=b/16+3;T.attr("for",e).css({position:"absolute",left:"0",top:"0",display:"inline-block",width:"100%",height:"100%",border:"1px solid black","border-radius":"50%","-moz-border-radius":"50%","-wibkit-border-radius":"50%"}),S.css({position:"absolute",left:"1px",top:"1px",display:"none",width:b-2*F+"px",height:b-2*F+"px","margin-left":F+"px","margin-top":F+"px","border-radius":"50%","-moz-border-radius":"50%","-wibkit-border-radius":"50%",background:"#121212"}),E.css({display:"inline-block","vertical-align":"top"}),_.attr("for",e).attr("class",l).css({"white-space":"nowrap",overflow:"hidden","word-break":"break-all","text-align":v,position:"absolute",width:I+"px",height:D+"px"}).appendTo(y),C.addClass("crownix_formfield_selector").css({"background-position":(M.isSelected&&M.isSelected(s)||!self.formFieldMode&&"1"==d?"-58px":"-39px")+" -2px",width:b,height:b,position:"relative",margin:O+"px",display:"inline-block"}).appendTo(_),S.appendTo(C),T.appendTo(C),k.attr({type:"radio",name:a+"_"+l,value:c,id:e,formId:a,buttonId:s,auth:x}).bind("change",(function(){self.formFieldMode&&(k.is(":checked")?M.select(s,a,go):M.unselect(s,a,go),formManager.modified(),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:l,value:s}))})),k.css({opacity:"0",width:"0",height:"0",position:"relative",display:"none"}),isDrawingTo.save()||k.appendTo(C);var R=parseInt(m["font-size"]),B=Math.max(R,16/1.3),N=$("<span>").attr("class","crownix_form_field_label").css({"vertical-align":"middle","line-height":B+"pt",display:"inline-block",position:"absolute"}).css(m).text(p);N.appendTo(E),"0"==g?E.appendTo(_):E.prependTo(_);var L=I-b-2*O;N.width()>L&&(N.css({width:L+"px"}),_.css({"white-space":"inherit"}));var q=0,j=0;"middle"==w?(j=(_.height()-C.height())/2,q=_.height()/2-N.height()/2):"top"==w?(C.css({"vertical-align":"top","margin-top":"4px"}),N.css("vertical-align","top")):"bottom"==w&&(C.css({"vertical-align":"bottom","margin-bottom":"4px"}),N.css("vertical-align","bottom"),q=_.height()-N.height()-4),0==N.height()&&(N.css("display","block"),C.css("margin-bottom","0px")),E.css({"margin-top":q+"px",width:N.width()+"px",height:N.height()+"px","text-align":"left"}),N.height()>=C.height()&&E.css("line-height",b+"px"),C.css("margin-top",j+"px"),(M.isSelected&&M.isSelected(s)||!self.formFieldMode&&"1"==d)&&(k.prop("checked",!0),S.css("display","inline-block")),self.formFieldMode&&"0"!==h||(k.attr("disabled","disabled"),T.addClass("crownix-formfield-disable")),"1"===u&&k.css("visibility","hidden")},drawSignature=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p){var g=getWrapperDiv(i,r,n,o),m=$(document.createElement("canvas")).attr({id:e,width:r-i+"px",height:o-n+"px",formId:a,auth:p}).data("dpi",t.dpi);preventField(a,m),self.formFieldMode&&"0"===t.editable&&g.addClass("crownix-formfield-disable");var v=m[0].getContext("2d"),w=new Image,x=null;w.src=t.value||l,w.onload=function(){var t,e;x&&x.html(""),w.width!=m.width()||w.height!=m.height()?(t=w.width/w.height,e=m.width()/m.height(),v.clearRect(0,0,m.width(),m.height()),e>t?v.drawImage(w,0,0,m.height()*t,m.height()):v.drawImage(w,0,0,m.width(),m.width()/t)):v.drawImage(w,0,0,r-i,o-n)};var b=self;if(m.attr({name:s}).css({position:"absolute",width:r-i+"px",height:o-n+"px",margin:"0px",padding:"0px",border:"0px"}).bind("click tap",(function(i){!b.formFieldMode||"0"===t.editable||this.className.indexOf("crownix-field-lock")>-1||this.className.indexOf("crownix-auth-lock")>-1||(Util.hasTouch()&&formManager.trigger("click",a,s),new SignWindow(R.get("sign_window_title")).show(m,(function(e,i){for(var r=e.data,n=!1,o=r.length-1;o>=0;o--)if(0!=r[o]){n=!0;break}n?(x&&x.hide(),t.value=i,formManager.trigger("change",a,s),formManager.modified()):(x&&x.show(),t.value=null),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:t.value})}),!0,viewerScroll),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFocusOnField(a,s),FieldOrder.getInstance().focus(e))})).appendTo(g),self.formFieldMode){var y=function(t){t.stopPropagation(),t.preventDefault(),m.trigger(t.type,t)},k=formManager.getHintingColor(a,s)||"";if(""!=k&&isDrawingTo.screen())(_=getCommonDiv(g,k,1,r-i,o-n))&&(_.attr("formId",a),preventField(a,_),_.bind("click tap",y));var _,C=formManager.getRequiredHintingColor(a,s)||"";if(isDrawingTo.screen())(_=t.showRequiredMark(C,g))&&(_.attr("formId",a),preventField(a,_),_.bind("click tap",y));u&&((x=getPlaceholderBox(i,n,r,o)).attr("formId",a),preventField(a,x),x.attr("for",e).css(f).css("overflow","hidden").bind("click tap",y).appendTo(viewerTextDom).find("span").html(u),t.placeHolder=x)}"1"===d&&m.css("visibility","hidden")},drawPicture=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m){var v=getWrapperDiv(i,r,n,o),w=$(document.createElement("input")).css({opacity:0,width:0,height:0}).attr({id:e,type:"file",accept:"image/*"}).addClass("crownix_form_field_file").appendTo(v);Util.browser.msie&&w.bind("click",(function(t){FieldOrder.getInstance().focus(this.id),setTimeout((function(){FieldOrder.getInstance().focus(e),w.focus()}),500)}));var x=$(document.createElement("canvas")).attr({id:e+"-canvas",width:r-i+"px",height:o-n+"px",formId:a,auth:g});preventField(a,x),self.formFieldMode&&"0"===t.editable&&v.addClass("crownix-formfield-disable");var b=x[0].getContext("2d"),y=new Image,k=null;y.src=t.value||l,y.onload=function(){k&&k.html(""),b.drawImage(y,0,0,r-i,o-n)},w.bind("change",(function(e){e.stopPropagation(),e.preventDefault();var i=e.target.files[0];if(i&&void 0!==i.type&&!i.type.match("image.*"))return dialog.show(R.get("image_file_format_error")),Util.browser.msie&&Util.browser.version>9?w.replaceWith(w=w.clone(!0)):w.val(""),!1;var r=m2soft.crownix.ImageLoader;r.loadImage.parseMetaData(i,(function(e){var n={canvas:!0};e.exif&&"number"==typeof e.exif.get("Orientation")&&(n.orientation=e.exif.get("Orientation")),r.loadImage(i,(function(e){var i=function(t,e,i){if(t.clearRect(0,0,i.width(),i.height()),1==u){var r=e.width/e.height,n=i.width()/i.height();if(r>n){var o=i.height()*(n/r),a=(i.height()-o)/2;t.drawImage(e,0,a,i.width(),o)}else{var s=i.width()*(r/n),l=(i.width()-s)/2;t.drawImage(e,l,0,s,i.height())}}else 2==u?t.drawImage(e,0,0):t.drawImage(e,0,0,i.width(),i.height())},r=function(){k&&k.hide(),t.value=x[0].toDataURL("image/png"),formManager.trigger("change",a,s),formManager.modified(),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:t.value})};m?new MaskWindow(e,u,x,!0,viewerScroll,r,i).show():(i(b,e,x),r())}),n),Util.browser.msie&&Util.browser.version>9?w.replaceWith(w=w.clone(!0)):w.val("")}))})).bind("keydown keyup",(function(){var t=event.keyCode||event.charCode;if((32==t||13==t)&&(x.hasClass("crownix-field-lock")||x.hasClass("crownix-auth-lock")))return!1;(Util.browser.msie||Util.browser.edge)&&13==t&&w.trigger("click",event)}));var _=self;if(x.attr({name:s,ratio:u}).css({position:"absolute",width:r-i+"px",height:o-n+"px",margin:"0px",padding:"0px",border:"0px"}).bind("click tap",(function(i){!_.formFieldMode||"0"===t.editable||this.className.indexOf("crownix-field-lock")>-1||this.className.indexOf("crownix-auth-lock")>-1||(Util.hasTouch()&&formManager.trigger("click tap",a,s),w.trigger("click",i),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFocusOnField(a,s),Util.browser.msie||setTimeout((function(){FieldOrder.getInstance().focus(e),w.focus()}),500))})).appendTo(v),self.formFieldMode){var C=function(t){t.stopPropagation(),t.preventDefault(),x.trigger(t.type,t)},T=formManager.getHintingColor(a,s)||"";if(""!=T&&isDrawingTo.screen())(S=getCommonDiv(v,T,1,r-i,o-n))&&(S.attr("formId",a),preventField(a,S),S.bind("click tap",C));var S,E=formManager.getRequiredHintingColor(a,s)||"";if(isDrawingTo.screen())(S=t.showRequiredMark(E,v))&&(S.attr("formId",a),preventField(a,S),S.bind("click tap",C));f&&((k=getPlaceholderBox(i,n,r,o)).attr("formId",a),preventField(a,k),k.attr("for",e).css(p).css("overflow","hidden").bind("click tap",C).appendTo(viewerTextDom).find("span").html(f),t.placeHolder=k)}"1"===d&&x.css("visibility","hidden")},drawFile=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v){var w=getWrapperDiv(e,i,r,n),x=$('<input type="file">'),b=$("<div>"),y=$("<div>"),k=$("<label>"),_=$("<div>").text(R.get("attach_file_button")),C=$("<div>"),T=function(t,e){return 0===a?0:1===a?t.height()/2-e.height()/2+"px":2===a?t.height()-e.height()+"px":void 0},S=function(e,i){if(e){if(i&&"inquiry"===i){var r=e.substring(e.lastIndexOf("/")+1);if(go.downloadUrl){var n=go.downloadUrl+"/download?filename="+c+"&attachment=true",o=$("<a>").text(r).appendTo(y);$(o).on("click touchstart",(function(t){t.preventDefault(),location.replace(n)}))}else $("<span>").text(r).appendTo(y);C.remove()}else c&&(e=e.substring(e.lastIndexOf("/")+1)),y.text(e);y.css({"margin-top":T(b,y)}).css(c||t.value||t.file||i&&"sharing"===i?d:g?{color:"#BDBDBD"}:d),i&&"placeHolder"!==i&&(t.value=e),go.ttsManager&&go.isFormEditMode&&go.ttsManager.update(s,l)}},E=function(){Util.browser.msie&&Util.browser.version>9?x.replaceWith(x=x.clone(!0)):x.val(""),x.focus()},M=function(e){dialog.show(R.get("not_support_file_append"),"",(function(){t.required&&"1"===t.required&&(t.required="0",I&&I.remove())}))};if(w.addClass("crownix_form_field_file_wrapper"),x.attr({id:"crownix_form_field_input_file_"+s+"_"+l,name:l,auth:v,formname:s,fieldtype:"file"}).appendTo(w),k.css(d).css("height",w.height()-2).attr({id:"crownix_form_field_file_label_"+s+"_"+l,formid:s,name:l}).appendTo(w),_.appendTo(k).css({"margin-top":k.height()/2-_.height()/2+"px",cursor:"default"}),b.css(d).css({height:k.height(),width:w.width()-k.innerWidth()-6+"px","text-align":o?o-1?"right":"center":"left"}).attr({id:"crownix_form_field_file_name_"+l,tabindex:"-1"}).addClass("crownix_form_field_file_name").appendTo(w),y.attr("id","crownix_form_field_file_name_text_"+l).addClass("crownix_form_field_file_name_text").appendTo(b),C.css({position:"absolute",width:w.width(),height:w.height(),border:"0",top:"0",outline:"none"}).attr({tabindex:"-1",id:"crownix_form_field_"+s+"_"+l,name:l,formname:s,auth:v}).addClass("crownix_form_field_file").focus((function(){x.focus()})).appendTo(w),self.formFieldMode){var A,P=formManager.getHintingColor(s,l)||"";""!==P&&isDrawingTo.screen()&&("2"===P.displayType?b.css("background",P.color):(A=getCommonDiv(w,P,1,w.width(),w.height()))&&A.attr({name:l,auth:v,formname:s}).css("background-color","rgba(255, 255, 255, 0)"));var I,D=formManager.getRequiredHintingColor(s,l)||"";self.formFieldMode&&""!==D&&isDrawingTo.screen()&&(I=t.showRequiredMark(D,w))&&I.css("z-index","1"),x.on("change",(function(e){formManager.modified();var i=e.target.files[0];if(i){var r=i.name,n=r.lastIndexOf("."),o=r.substring(0,n),a=r.substring(n+1).toUpperCase(),c=m&&new RegExp(m);f&&f<i.size/1048576?dialog.show(R.get("file_size_over").replace("%d",f),"",E):p&&p.indexOf(a)<0?dialog.show(R.get("wrong_file_extension").replace("%s",p),"",E):!c||c.test(o)?(t.file=i,t.value=r,S(r),formManager.trigger("change",s,l),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:s,fieldId:l,value:r})):dialog.show(R.get("invalid_file_name"),"",E)}})),S(t.value?t.value:t.file?t.file.name:g,t.value||t.file?"normal":"placeHolder");var F=function(){if(b.hasClass("crownix-formfield-disable")&&b.removeClass("crownix-formfield-disable").css("background-color","2"===P.displayType?P.color:"rgba(255, 255, 255, 0)"),k.hasClass("crownix-formfield-disable")&&k.removeClass("crownix-formfield-disable"),window.FormData){k.on("click touchstart",(function(){C.focus()})),k.attr("for","crownix_form_field_input_file_"+s+"_"+l);var t=function(t){t.on("click touchend touchcancel",(function(t){t.preventDefault(),t.stopPropagation(),k.click()}))};A?(preventField(s,A),t(A)):t(C)}else A?(preventField(s,A),A.bind("click touchstart",M)):C.on("click touchstart",M),FieldOrder.getInstance().removeField([{formId:s,fieldId:l}]);x.bind("keydown",(function(t){Util.browser.msie&&13==t.keyCode&&k.click()}))},O=function(){b.hasClass("crownix-formfield-disable")||b.addClass("crownix-formfield-disable").css("background-color","2"===P.displayType?P.color:"#CCCCCC"),k.hasClass("crownix-formfield-disable")||k.addClass("crownix-formfield-disable"),A?A.off("click touchstart"):C.off("click touchstart"),FieldOrder.getInstance().removeField([{formId:this.formId,fieldId:this.id}])};t.setFileName=S,t.editableMode=F,t.readonlyMode=O,t.editable&&"0"===t.editable?O():F()}else if(k.remove(),b.css({width:w.width()-2,"border-style":"none"}),c){S(c,"inquiry");var B=$(Icon.FILE_CLIP),N=y.height();y.css({display:"inline-block","max-width":b.width()-N-5+"px","vertical-align":"top"}),B.css({width:N,height:N}).css("margin-top",T(b,B)).prependTo(b)}else S(R.get("no_attach_file"))},drawPenField=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w){var x=getWrapperDiv(i,r,n,o),b=$(document.createElement("canvas")).attr({id:e,width:r-i+"px",height:o-n+"px",formId:a,name:s,auth:w});preventField(a,b),self.formFieldMode&&"0"===t.editable&&x.addClass("crownix-formfield-disable");var y=b[0].getContext("2d"),k=new Image,_=null;k.src=t.value||l,k.onload=function(){_&&_.hide(),y.drawImage(k,0,0,r-i,o-n)};var C=self;if(b.css({position:"absolute",width:r-i+"px",height:o-n+"px",margin:"0px",padding:"0px",border:"0px"}).bind("click tap",(function(){if(!(!C.formFieldMode||"0"===t.editable||this.className.indexOf("crownix-field-lock")>-1||this.className.indexOf("crownix-auth-lock")>-1)){go.slide.closeSlide(),_&&_.hide();new PenWindow(go).show(x,viewerScroll,b,viewerTextDom,(function(e,c){if(e){for(var d=e.data,h=!1,u=d.length-1;u>=0;u--)if(0!=d[u]){h=!0;break}h?(_&&_.hide(),t.value=b[0].toDataURL("image/png"),formManager.trigger("change",a,s),formManager.modified()):(_&&_.show(),c?(k.src=t.value||l,k.onload=function(){_&&_.hide(),y.drawImage(k,0,0,r-i,o-n)}):t.value=null)}go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFormField({formId:a,fieldId:s,value:t.value})})),go.shareManager&&go.shareManager.isConnected()&&go.shareManager.sendFocusOnField(a,s),FieldOrder.getInstance().focus(e)}})).appendTo(x),self.formFieldMode){var T=function(t){t.stopPropagation(),t.preventDefault(),b.trigger(t.type,t)},S=formManager.getHintingColor(a,s)||"";if(""!=S&&isDrawingTo.screen())if("2"===S.displayType)cxCanvas.fillRect(i+2,n+2,r-1,o-1,S.color);else(E=getCommonDiv(x,S,1,r-i,o-n))&&(E.attr("formId",a),preventField(a,E),E.bind("click tap",T));var E,M=formManager.getRequiredHintingColor(a,s)||"";if(isDrawingTo.screen())(E=t.showRequiredMark(M,x))&&(E.attr("formId",a),preventField(a,E),E.bind("click tap",T));u&&((_=getPlaceholderBox(i,n,r,o)).attr("formId",a),preventField(a,_),_.attr("for",e).css(p).css("overflow","hidden").bind("click tap",T).appendTo(viewerTextDom).find("span").html(u),t.placeHolder=_)}drawTextToCanvas(g.text(f),m,v,void 0),"1"===d&&b.css("visibility","hidden")},drawSubmit=function(t,e,i,r,n,o,a,s,l,c,d,h,u,f){var p=$('<button type="image"></button>'),g=$("<span>").text(c).css({cursor:"pointer","word-break":"break-all"}).on("click tap",(function(t){p.focus()})).attr("id",o+"_label"),m={button:p,textWrapper:g,size:{width:e-t,height:r-i},position:{left:t,top:i}},v=self.formFieldMode&&formManager.getSubmit(n+"."+o)||{};if(v.editable&&(h=v.editable),u.normalImage){p.css({background:"none",filter:"none",border:"0px"});var w=new Image;if(w.onload=function(){p.prepend(w),applyImageSubmitButton(w,m)},w.src=u.normalImage,u.clickImage){var x=new Image;x.onload=function(){var t=getFitSize(m.size,x);$(x).css({width:t.width,height:t.height,position:"absolute",top:"0px",left:"0px"}),p.bind(ActionEvents.start+" touchstart",(function(){$(w).hide(),$(x).show(),applyImageSubmitButton(x,m)})).bind(ActionEvents.end+" touchend",(function(){$(x).hide(),$(w).show(),applyImageSubmitButton(w,m)})).bind(ActionEvents.out,(function(t){$(t.toElement).parent("#"+o).attr("id")!=o&&p.trigger(ActionEvents.end)})).prepend(x),$(x).hide()},x.src=u.clickImage}}p.append(g).addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").attr({id:"crownix_form_field_"+n+"_"+o,formId:n,fieldId:o,auth:f}).css(d).css({overflow:"hidden",padding:"0px",position:"absolute",left:t+"px",top:i+"px",width:e-t+"px",height:r-i+"px",cursor:"pointer"}).bind(Util.browser.mobile?"tap":"click",(function(t){self.formFieldMode&&"1"==h&&(p.trigger("mouseout",t),formManager.submit(t))})).appendTo(viewerTextDom),m.textWrapperOriginalSize=g.width(),self.formFieldMode&&"1"==h||p.removeClass("crownix-dialog-button-action").attr("disabled",!0)},applyImageSubmitButton=function(t,e){var i=$(t),r=getFitSize(e.size,{width:i.width(),height:i.height()});i.css({width:r.width,height:r.height,position:"absolute",top:"0px",left:"0px"});var n={};n.left=e.position.left+(e.size.width-r.width)/2,n.top=e.position.top+(e.size.height-r.height)/2,e.button.css(r),e.button.css(n),e.textWrapper.width("");var o=(r.width-e.textWrapperOriginalSize)/2;e.textWrapperOriginalSize>r.width&&(o=0,e.textWrapper.css({width:r.width})),e.textWrapper.css({"margin-left":o,position:"absolute",top:"0px",left:"0px"}),setTimeout((function(){var t=(r.height-e.textWrapper.height())/2;e.textWrapper.css({"margin-top":t})}),0)},drawNormalButton=function(t,e,i,r,n,o,a,s){var l=$('<button type="image"></button>'),c=$("<span>").text(n).css({cursor:"pointer","word-break":"break-all"}).on("click tap",(function(t){l.focus()})),d={button:l,textWrapper:c,size:{width:e-t,height:r-i},position:{left:t,top:i}};if(a.normalImage){l.css({background:"none",filter:"none",border:"0px"});var h=new Image;if(h.onload=function(){l.prepend(h),applyImageSubmitButton(h,d)},h.src=a.normalImage,a.clickImage){var u=new Image;u.onload=function(){var t=getFitSize(d.size,u);$(u).css({width:t.width,height:t.height,position:"absolute",top:"0px",left:"0px"}),l.bind(ActionEvents.start+" touchstart",(function(){$(h).hide(),$(u).show(),applyImageSubmitButton(u,d)})).bind(ActionEvents.end+" touchend",(function(){$(u).hide(),$(h).show(),applyImageSubmitButton(h,d)})).bind(ActionEvents.out,(function(t){l.trigger(ActionEvents.end)})).prepend(u),$(u).hide()},u.src=a.clickImage}}l.attr("id","m2soft-crownix-normal-button").append(c).addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").css(o).css({overflow:"hidden",padding:"0px",position:"absolute",left:t+"px",top:i+"px",width:e-t+"px",height:r-i+"px",cursor:"pointer"}).bind(Util.browser.mobile?"tap":"click",(function(t){l.trigger("mouseout",t),s&&s.click&&s.click(viewerAPI,drilldownAPI,void 0,formAPI)})).appendTo(viewerTextDom),textWrapperOriginalSize=c.width()},drawNormalCombo=function(t,e,i,r,n,o,a,s,l,c){var d=getWrapperDiv(e,i,r,n),h=$(document.createElement("select"));void 0!==t.selectedIndex&&(o=-1==t.selectedIndex?"":s[t.selectedIndex]),h.attr("id","m2soft-crownix-normal-combo").css(a).css({width:i-e+"px",height:n-r+"px",margin:"0px",padding:"0px"}).bind("change",(function(){c&&c.change&&c.change(viewerAPI,drilldownAPI,h.val()),t.value=h.val();var e=h.find("option:selected");t.selectedIndex=h.find("option").index(e)-1})).appendTo(d),Util.browser.android&&h.css("background-color","transparent");$('<option value="">').text("").appendTo(h);for(var u=0;u<s.length;u++){var f=$("<option>").attr("value",l[u]).text(s[u]).appendTo(h);o==s[u]&&f.attr("selected","selected")}},getFitSize=function(t,e){var i=t.width/e.width,r=t.height/e.height,n=Math.min(i,r);return{width:e.width*n,height:e.height*n}},getPlaceholderBox=function(t,e,i,r){var n=$("<div>").css({position:"absolute",left:t+"px",top:e+"px",width:i-t+"px",height:r-e+"px",margin:"0px",padding:"0px",border:"0px","text-align":"center","line-height":r-e+"px"});$("<span>").attr("id","crownix_form_field_placeholder").addClass("placeholder").appendTo(n);return n},loadFont=function(t){if(go.useWebFont)for(var e=t.keys(),i=0;i<e.length;i++){var r=e[i],n=t.get(r),o=new Font(r,n);o.setFontURL(viewerServerUrl.replace("service","font/")),o.load()}},drawWhenSpeechMode=function(t,e,i,r,n,o,a){t.children().each((function(){var t=this.tagName,s=$(this),l=s.attr("ect");if(!(l&&l.indexOf(drawMedia)>-1)){drawMedia=e||"d";var c=n[s.attr("lid")],d=o[s.attr("fid")];c&&(c=applyPriorityToLineAttr(s,c)),d&&(d=applyPriorityToFaceAttr(s,d)),"LN"===t?drawLine(s,c):"RA"===t?drawRect(s,c,d):"TL"===t?!go.options.textOnCanvas||s.attr("hl")||s.attr("hi")?drawText(s,i,r):drawTextToCanvas(s,i,r):"IM"===t?drawImage(s,a.nextImage()):"FF"===t?drawFormField(s,i,r):"CT"===t?drawChart(s):"PR"===t&&drawWhenSpeechMode(s,e,i,r,n,o,a)}}))};m2soft.crownix.Painter.updatePageNum=function(){viewerTextDom.find(".crownix-pagenum").each((function(){var t=$(this).attr("pagenum-format");$(this).text(Util.formatPageNumber(t,go.currentPage-go.report.getCoverPage()+(go.startPageNo-1),go.totalPage-go.report.getCoverPage()+(go.startPageNo-1)))}))},this.drawNoteToCanvas=function(t,e){var i=$(t).find("path"),r=e.getContext("2d");i.each((function(){var t=$(this),e=t.attr("d"),i=t.attr("stroke"),n=t.attr("stroke-opacity"),o=t.attr("stroke-width"),a=t.attr("stroke-linecap"),s=t.attr("stroke-linejoin"),l=e.indexOf("L")>-1?"L":"l",c=e.indexOf(",")>-1?",":" ",d=e.split(l);if(r.save(),r.beginPath(),r.strokeStyle=i,r.lineWidth=1.3*parseInt(o),r.globalAlpha=n,r.lineCap=a,r.lineJoin=s,"M"==d[0][0]||"M"==d[0][0]){var h=$.trim(d[0].substring(1)).split(c);r.moveTo(parseInt(h[0]),parseInt(h[1]))}for(var u=1;u<d.length;u++){var f=$.trim(d[u]).split(c);r.lineTo(parseInt(f[0]),parseInt(f[1]))}r.stroke(),r.restore()}))},this.drawPage=function(t,e,i,r,n,o,a){a||cxCanvas.clear();var s=e.fontList,l=e.textAttrList,c=e.lineAttrList,d=e.faceAttrList,h=e.indexedImageList;drawMedia=r||"d",n&&(offset=n),cxCanvas.setOffset(offset);var u=new m2soft.crownix.ImageLoader;u.loadImage(t,h,(function(){t.children().each((function(){var t=this.tagName,e=$(this),i=e.attr("ect");if(!(i&&i.indexOf(drawMedia)>-1)){drawMedia=r||"d";var n=c[e.attr("lid")],o=d[e.attr("fid")];n&&(n=applyPriorityToLineAttr(e,n)),o&&(o=applyPriorityToFaceAttr(e,o)),"LN"===t?drawLine(e,n):"RA"===t?drawRect(e,n,o):"TL"===t?go.options.textOnCanvas?(drawTextToCanvas(e,s,l),(e.attr("hl")||e.attr("hi"))&&drawText(e,s,l)):drawText(e,s,l):"SC"===t?drawScribble(e,n):"LL"===t?drawPolyLine(e,n):"PO"===t?drawPolygon(e,n,o):"EP"===t?drawEllipse(e,n,o):"DM"===t?drawDiamond(e,n,o):"PL"===t?drawParallelogram(e,n,o):"HH"===t?drawHexaheron(e,n,o):"RR"===t?drawRoundeRect(e,n,o):"CY"===t?drawCylinder(e,n,o):"CV"===t?drawCurve(e,n):"IM"===t?drawImage(e,u.nextImage()):"FF"===t?drawFormField(e,s,l):"CT"===t?drawChart(e):"PR"===t?drawWhenSpeechMode(e,r,s,l,c,d,u):"TG"===t&&drawGrid(e)}})),loadFont(e.fontList),m2soft.crownix.Painter.updatePageNum(),null!==i&&i()}))},this.useAdjustLetterSpace=function(t){useAdjustLetterSpace=t},this.useAdjustCharacterScale=function(t){useAdjustCharacterScale=t},this.updatePage=function(){for(var t=0;t<updateCallback.length;t++)"function"==typeof updateCallback[t]&&updateCallback[t]()},this.setUpdatePageCallback=function(t){updateCallback.push(t)},this.setFormFieldMode=function(t){this.formFieldMode=t},this.clearPage=function(){cxCanvas.clear()}},m2soft.crownix.Painter.adjustWidth=function(t){return void 0===t||.5==t||1==t?1:0==t?0:t>0?2*t-1:1},m2soft.crownix.Painter.adjustCoord=function(t,e,i){return null!=i&&null!=i||(i=24.3),e||(e=0),Math.floor(t/10.3+i)+(e%2==0?0:.5)},m2soft.ns("m2soft.crownix.Inquery"),m2soft.crownix.Inquery=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u,f,p=m2soft.crownix.Resource,g=m2soft.crownix.Util,m=m2soft.crownix.Dialog,v=m2soft.crownix.Message,w=m2soft.crownix.DateParser,x="yyyy/MM/dd HH:mm:ss",b=0,y=function(){"en"==m2soft.crownix.Resource.language&&$(".crownix-inquery-inner .title").css({"font-size":"9pt","padding-left":"15px"}),g.os.windows&&g.browser.safari?$(".iqSelect").css({"margin-top":"0px",height:"27px"}):g.browser.android&&$(".iqSelect").css({height:"27px"}),g.browser.firefox||(g.browser.msie?$(".iqSelect").css("width","250px"):($(".iqSelect").css("padding-right","18px"),$(".selectArrow").css("position","relative"),$(".selectArrow").append('<style>.crownix-inquery-inner label:after{content:"▼"; font:14px; color:#000; right:8px; top:0px; padding:0 0 2px; border-bottom:0px solid #ddd; position:absolute; pointer-events:none;}</style>'),$(".selectArrow").append('<style>.crownix-inquery-inner label:before{content:""; right:6px; top:0px; width:20px; height:20px; background:#fff; position:absolute; pointer-events:none; display:block;}</style>'))),g.browser.mobile&&$(".iqSelect").css("width","255px")},k=function(){var t;b>4&&$(".crownix-inquery-overlay").width()>600?($(".scroll-area").css({width:"580px",float:"left"}),$(".crownix-inquery-scroll").css({width:"560px"}),$(".iqitem").css({width:"50%",float:"left",height:"60px"}),t=60*Math.ceil(b/2)+16+100,$(".crownix-inquery-outer").css({width:"580px","margin-left":"-300px"})):($(".crownix-inquery-scroll").css({width:"288px"}),$(".iqitem").css({width:"",float:"",height:"43px"}),t=55*b+16+100,$(".crownix-inquery-outer").css({width:"308px","margin-left":"-150px"}));$(".crownix-inquery-outer").css("height",t+"px"),$(".crownix-inquery-outer").css("max-height","50%"),(t=$(".crownix-inquery-outer").height())>226?$(".crownix-inquery-outer").css("min-height","226px"):$(".crownix-inquery-outer").css("min-height","171px"),$(".crownix-inquery-outer").css("max-height",$(".crownix-inquery-outer").height()+"px"),$(".crownix-inquery-scroll").css("height",$(".crownix-inquery-outer").height()-100+"px"),$(".crownix-inquery-outer").css({"margin-top":$(".crownix-inquery-outer").height()/-1.8+"px"})},_=function(t){$(Q("tb"+t.id)).on("change input keyup",(function(e){if(e.preventDefault(),e.stopPropagation(),"input"==e.type||"keyup"==e.type){var i=$(Q("tb"+t.id)).val(),n=$(Q("save"+t.id)).val();if($(Q(t.id)).val(i).attr("selected","selected"),void 0!==n&&""!=i&&i!=n){var o=R(t.id,i);void 0!==o&&(r[t.id]=o,$(Q("save"+t.id)).val(i),j(t.id))}}"1"==t.rq&&(""==$(Q("tb"+t.id)).val()?$(Q("tb"+t.id)).css({color:"#4D3838",background:"#D37979"}):$(Q("tb"+t.id)).css({color:"initial",background:"#fff"}))}))},C=function(t){$(Q(t.id)).change((function(e){e.preventDefault(),e.stopPropagation();var i=$(this).find("option:selected").text(),n=$(this).find("option:selected").val();r[$(this).attr("id")]=n,$(Q("tb"+$(this).attr("id"))).val(i).change(),j(t.id)}))},T=function(t){$(Q("tb"+t.id)).on("focusout",(function(e){e.preventDefault(),e.stopPropagation();var i=$(Q("tb"+t.id)).val(),n=$(Q("save"+t.id)).val();if(""!=i&&i!=n){var o=R(t.id,i);void 0===o&&(r[t.id]=o,$(Q("save"+t.id)).val(i),S(t.id))}}))},S=function(t){for(var e in n){var i=n[e],r=i.pv;e!=t&&"co"==i.ty&&void 0!==r&&r.indexOf(t)>-1&&($(Q(e)).empty(),$(Q(e)).append('<option value=""></option>'))}},E=function(t){$(Q("date"+t.id)).on("change",(function(e){var i=t.sc,r=t.ac,n=$(Q("date"+t.id)).val(),o=P(t.cl);if(n.length>0){var a=new Date(w.getDateFromFormat(x,n,o));$(Q("tb"+t.id)).val(w.formatDate(i,a,o)),$(Q("tb"+t.id)).css({color:"initial",background:"#fff"}),$(Q("ca"+t.id)).val(w.formatDate(r,a,o))}}))},M=function(t){$(Q("tb"+t.id)).on("change input keyup",(function(e){var i=t.sc,r=$(Q("date"+t.id)).val(),n=$(Q("tb"+t.id)).val(),o=t.cl;"1"==t.rq&&0==n||!A(r,i,n,o)?$(Q("tb"+t.id)).css({color:"#4D3838",background:"#D37979"}):$(Q("tb"+t.id)).css({color:"initial",background:"#fff"})}))},A=function(t,e,i,r){if(0==i.length)return!0;var n=O(t,e,i,P(r),x);return w.isDate(x,n,P(r))},P=function(t){var e=t;return t.indexOf("english")>-1?e="en":t.indexOf("korean")>-1?e="ko":t.indexOf("japanese")>-1?e="ja":t.indexOf("chinese")>-1&&(e="zh-CN"),e},I=function(t){var e=P(t.cl);$.crownixdatepicker.setDefaults($.crownixdatepicker.regional[e]),$.crownixdatepicker.locale=e,$(Q("date"+t.id)).crownixdatepicker({dateFormat:x,showOn:"button",buttonImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REQ2QTZFQjI2NUNDMTFFNEE3MTM4OTE2QTA5QUUwODciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REQ2QTZFQjM2NUNDMTFFNEE3MTM4OTE2QTA5QUUwODciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERDZBNkVCMDY1Q0MxMUU0QTcxMzg5MTZBMDlBRTA4NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERDZBNkVCMTY1Q0MxMUU0QTcxMzg5MTZBMDlBRTA4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoPHgkcAAADwSURBVHjaYviPAb5u3fomOxtI/scBsCpgBGIGVPAqPBzCEFu5kgEbwKqABYj/vX//fc+enydO/HnyBE0zXA8coCl4V1zMbmHB6eICMghoytc1axjIAkC7/4D1ggyCmCJQW8umo4PffkwA1PWhuRloAhNcCG4KT3w8s6gokMSlGVkBXBcosCEBgdVygmEEV8PEQCXAgl+aYBjBAQ1c9Hn2bOoYxJuaSp4RwGRIy8BGzkfEsKkf2FQziEDKJgZAtI+GEeEwQrjo15UrZJgC1wVy0ZfFi79t2UKJv7h8fFggFCMHB6TwJzlnyMhACn+AAAMATZTDsO74jnoAAAAASUVORK5CYII=",buttonImageOnly:!0,onClose:function(t,e){$(this).attr("disabled",!1)},beforeShow:function(t,e){$(this).attr("disabled",!0)}})},D=function(t){if(h.isAllowedFeature("FormField")&&c)$(this).blur(),e.show(p.get("inquery_formfield_reset"),{confirm:!0,input:!1},(function(i){i&&(h.isAllowedFeature("Note")&&d.enableNote&&g.isSupportSVG()?e.show(p.get("inquery_note_reset"),{confirm:!0,input:!1},(function(e){t(e)})):t(!0))}));else{if(!(h.isAllowedFeature("Note")&&d.enableNote&&g.isSupportSVG()))return t(!0);$(this).blur(),e.show(p.get("inquery_note_reset"),{confirm:!0,input:!1},(function(i){i&&(h.isAllowedFeature("FormField")&&c?e.show(p.get("inquery_formfield_reset"),{confirm:!0,input:!1},(function(e){t(e)})):t(!0))}))}},F=function(t,i){if(t)i.length>0&&($(this).blur(),e.show(p.get("submit_fail_not_filled_required_form")+"<br />"+i));else{for(var c in n){var h=$(Q("tb"+c)).val(),f=R(c,h);h.length>0&&void 0!==f&&(h=f),void 0!==$(Q("ca"+c)).val()&&(h=$(Q("ca"+c)).val()),r[c]=h}$(".crownix-inquery-overlay").hide(),$(".crownix-inquery-outer").hide(),u>3?l=N():(L(),q()),d.isInquery=!0,o(a,s,d)}},O=function(t,e,i,r,n){var o=new Date(w.getDateFromFormat(x,t,r)),a=new Date(w.getDateFromFormat(e,i,r,o));return w.formatDate(n,a,r)},R=function(t,e){return $(Q(t)).find("option").filter((function(t){return e===$(this).text()})).val()},B=function(t,e){var i=$(Q(t)).find("option").filter((function(t){return e===$(this).val()})).text();return i||(i=e),i},N=function(){var t=["/rp "],e=["/rv"],i=0;for(var n in r)0==n.indexOf("$")?i=Math.max(i,Number(n.replace("$",""))):e.push(" "+n+"["+r[n]+"]");for(var o=1;o<=i;o++)void 0!==r["$"+o]?t.push("["+r["$"+o]+"]"):t.push("[]");return t.join("")+" "+e.join("")},L=function(){var t=["/rp "],e=["/rv"],i=0;for(var n in r)0==n.indexOf("$")?i=Math.max(i,Number(n.replace("$",""))):e.push(" "+n+"["+r[n]+"]");for(var o=1;o<=i;o++)void 0!==r["$"+o]?t.push("["+r["$"+o]+"]"):t.push("[]");s=null!==(s=null!==s.match(/\/rp\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g)?s.replace(/\/rp\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g,t.join("")):s.concat(" ",t.join(""))).match(/\/rv\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g)?s.replace(/\/rv\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g,e.join("")):s.concat(" ",e.join(""))},q=function(){var t=s.match(/\B\/rdonotreport(ex|)\s*(\[[^\]]*\])/g);null!==t?(t=t.toString(),a=t.substring(t.indexOf("[")+1,t.indexOf("]")),s=s.replace(/\B\/rdonotreport(ex|)\s*(\[[^\]]*\])/g,"")):s=s.replace(/\B\/rdonotreport(ex|)\b/g,"")},j=function(t){for(var e in n){var i=n[e],r=i.pv;e!=t&&"co"==i.ty&&void 0!==r&&r.indexOf(t)>-1&&z(i)}},z=function(t){if(0==t.db)void 0===t.sp?H(t):U(t);else if(1==t.db){for(var e=t.ad.split(t.se),i=t.sd.split(t.se),n=['<option value=""></option>'],o=0;o<e.length;o++){var a="";""!=r[t.id]&&r[t.id]==i[o]&&(a=" selected"),n.push('<option value="'+e[o]+'"'+a+">"+i[o]+"</option>")}$(Q(t.id)).append(n.join(""))}},H=function(t){var e={opcode:106,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",RDFile:"viewer.rdf",RDClient:"RD.Viewer",ComName:"HTML5Viewer",RDParam:"viewer.rdf",charset:"UTF-8",checkcache:0,checkcachedate:0,cachedate:0,service:t.ds,encsql:1,charset:"UTF-8",queryinfo:1,selectquery:t.qr,inquery:JSON.stringify(r)};$.ajax({type:"POST",url:i,data:Z(e),async:!1,success:function(e,i,r){V(r,t)},error:function(t,e,i){X(t,e,i)},complete:function(t){K(t)}})},U=function(t){var e={opcode:112,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",RDFile:"viewer.rdf",RDClient:"RD.Viewer",ComName:"HTML5Viewer",RDParam:"viewer.rdf",charset:"UTF-8",service:t.ds,encsql:1,charset:"UTF-8",queryinfo:1,spname:t.sp,vcount:t.pa.length,inquery:JSON.stringify(r)};$.ajax({type:"POST",url:i,data:Z(e)+J(t),async:!1,success:function(e,i,r){V(r,t)},error:function(t,e,i){X(t,e,i)},complete:function(t){K(t)}})},V=function(t,e){if(!W(t)){var i=Y(t);$(Q(e.id)).empty(),$(Q(e.id)).append(G(i,e))}},W=function(i){return 0===i.responseText.indexOf("0")&&($(this).blur(),e.show(i.responseText.replace("0|","")),v.progress.hide(t),!0)},Y=function(i){var r=i.responseText.split("\n");if("1|1008|0"!=r[0])return $(this).blur(),e.show(p.get("request_server_error")),void v.progress.hide(t);for(var n=r[1],o={},a=0;a<n;a++){var s=r[2+a].split("|");o[a]={name:s[0],type:s[1],size:s[2],data:[]}}if("1|1008|0"!=r[2+Number(n)])return $(this).blur(),e.show(p.get("request_server_error")),void v.progress.hide(t);var l=r[Number(n)+3].split("|");for(a=0;a<l.length-1;a+=Number(n))for(var c=0;c<n;c++)o[c].data.push(l[a+c]);return o},G=function(t,e){for(var i,n=Object.keys(t).length,o=[],a=[],s=['<option value=""></option>'],l=e.ad.toUpperCase(),c=e.sd.toUpperCase(),d=0;d<n;d++)l!=(i=t[d].name.toUpperCase())&&l.replace(/.*\./,"")!=i||(a=t[d].data),c!=i&&c.replace(/.*\./,"")!=i||(o=t[d].data);for(d=0;d<a.length;d++){var h="";""!=r[e.id]&&r[e.id]==o[d]&&(h=" selected"),s.push('<option value="'+a[d].replace(/\s+$/,"")+'"'+h+">"+o[d].replace(/\s+$/,"")+"</option>")}return s.join("")},X=function(i,r,n){$(this).blur(),"error"==r?e.show(p.get("server_connect_error")):"timeout"==r?e.show(p.get("request_timeout_error")):"abort"==r?e.show(p.get("request_abort_error")):null!=n&&e.show(n),v.progress.hide(t)},K=function(t){var e={opcode:99,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",rdid:"-"+t.getResponseHeader("RDID")};$.ajax({type:"POST",url:i,data:Z(e),async:!1})},Z=function(t){var e=[];for(var i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},J=function(t){var e=["&"];for(var i in t.pa)e.push("colval="+encodeURIComponent(t.pa[i]));return e.join("&")},Q=function(t){return"#"+(t=t.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&"))},tt=function(t,e,i,r,n){var o=new Date;if(void 0!==e&&w.isDate(t,e,i)){var a=w.formatDate(r,o,i),s=O(a,t,e,i,r);unixtime=w.getDateFromFormat(r,s,i),o=new Date(unixtime)}return w.formatDate(n,o,"en")};return(f=function(i){t=$("#"+i),e=new m(i)}).prototype={constructor:m2soft.crownix.InqueryDialog,setData:function(t,e,l,f,p,g,m,v,w,x){i=t,r=e,n=l,o=f,a=p,s=g,c=m,d=v,h=w,u=x,0!==b&&(b=0,$(".crownix-inquery-overlay").remove(),$(".crownix-inquery-outer").remove())},show:function(){$(".crownix-inquery-outer").length>0?(k(),$(".crownix-inquery-overlay").fadeIn(100),$(".crownix-inquery-outer").fadeIn(200)):v.progress.show(t,"",(function(){t.parent().append('<div class="crownix-inquery-overlay" id="iOverlay">&nbsp;</div>'),$(".crownix-inquery-overlay").css("height","100%").css("width","100%").fadeIn(100),t.parent().append('<div class="crownix-inquery-outer"></div>'),$(".crownix-inquery-outer").append('<div class="crownix-inquery-inner" id="inquery-inner"></div>'),$(".crownix-inquery-inner").append('<div class="title"></div>'),$(".crownix-inquery-outer").fadeIn(200),function(){for(var t in $(".crownix-inquery-inner").append('<div class="crownix-inquery-scroll" id="inquery-scroll"></div>'),$(".crownix-inquery-scroll").append('<hr class="scroll-area" />'),n){var e="iq"+t,i=n[t];if($("<div>").attr("id",e).addClass("iqitem").appendTo(".crownix-inquery-scroll"),$("<div>").attr("class","iqCaption").appendTo(Q(e)).text(i.ca),"co"==i.ty){var o="";"1"==i.il&&(o="  readonly"),$(Q(e)).append('<input id="tb'+t+'" type="text" class="iqCombo iqInput"'+o+"/>"),$(Q(e)).append('<label class="selectArrow"><select id="'+t+'" class="iqSelect"></select></label>'),$(Q(e)).append('<input id="save'+t+'" type="hidden" />'),z(i),_(i),C(i),T(i)}else"tf"==i.ty?($(Q(e)).append('<input id="tb'+t+'" type="text" class="iqCombo" />'),_(i)):"ca"==i.ty&&($(Q(e)).append('<input id="tb'+t+'" type="text" class="iqCombo iqInput" />'),$(Q(e)).append('<input id="date'+t+'" type="text" style="font-size: 1px; border: 0px; height: 0px"/>'),$(Q(e)).append('<input id="ca'+t+'" type="hidden" />'),I(i),E(i),M(i));var a=Q("tb"+t);if("co"==i.ty)$(a).val(B(t,r[t])),$(Q("save"+t)).val(r[t]);else if("ca"==i.ty){var s=tt(i.ac,r[t],P(i.cl),i.sc,x);$(Q("date"+t)).val(s).change()}else $(a).val(r[t]);b++}$(".crownix-inquery-scroll").append('<hr class="scroll-area" style="margin-top: 10px"/>'),$(".crownix-inquery-inner .title").append(p.get("insert_inquery_condition").replace("%d",b)),k(),y()}(),$(".crownix-inquery-inner").append('<div class="iButtons"></div>'),$(".iButtons").append('<button value="ok">'+p.get("ok_button_text")+"</button>"),$(".iButtons").append('<button value="cancel">'+p.get("cancel_button_text")+"</button>"),$(".crownix-inquery-outer").keydown((function(t){$(".crownix-inquery-overlay").is(":visible")&&(13==t.keyCode&&$('.iButtons > button[value="ok"]').click(),27==t.keyCode&&$('.iButtons > button[value="cancel"]').click())})),$('.iButtons > button[value="ok"]').click((function(){var t=!1,i="";for(var r in n){var o=n[r],a=Q("tb"+r);if("1"==o.rq&&""==$(a).val()&&($(a).change(),i+="["+(""!=o.ca?o.ca:o.id)+"]",t=!0),"ca"==o.ty){var s=o.sc,l=$(Q("date"+o.id)).val(),c=$(Q("tb"+o.id)).val(),d=o.cl;if(A(l,s,c,d)){if(c.length>0){s=o.sc;var h=o.ac,u=P(o.cl),f=$(Q("tb"+o.id)).val(),g=(l=$(Q("date"+o.id)).val(),O(l,s,f,u,h));$(Q("ca"+o.id)).val(g)}}else $(this).blur(),e.show(p.get("inquery_calendar_format_error")),t=!0}}D((function(e){e&&F(t,i)}))})),$('.iButtons > button[value="cancel"]').click((function(){$(".crownix-inquery-overlay").hide(),$(".crownix-inquery-outer").hide()})),v.progress.hide(t)}))},getMrdPlainParam:function(){return l}},f}(),m2soft.ns("m2soft.crownix.ShapeEditor"),m2soft.crownix.ShapeEditor=function(t,e){var i=m2soft.crownix.Util,r=m2soft.crownix.util.Unit,n=m2soft.crownix.Resource,o=m2soft.crownix.TextDialog,a=m2soft.crownix.Util.ActionEvents,s={},l={},c={},d={},h={},u={},f={},p={},g=!1,m=[],v={stroke:"#000000","stroke-width":"2pt","stroke-opacity":1,"stroke-linecap":"round","stroke-linejoin":"round"},w=1,x=null,b={},y={},k=96;isFocus=focusing=moving=!1;var _=function(t){if(0==t.length)return"";for(var e=$("<note>"),i=0,n=t.length;i<n;i++){var o=t[i];"text"!=o.type?$("<element>").attr({type:o.tool,svgType:o.type,path:o.getPath?o.getPath().toString():o.path,"stroke-color":o.attrs?o.attrs.stroke:o.stroke,"stroke-opacity":o.attrs?o.attrs["stroke-opacity"]:o["stroke-opacity"],"stroke-width":o.attrs?o.attrs["stroke-width"]:o["stroke-width"],"stroke-linecap":o.attrs?o.attrs["stroke-linecap"]:o["stroke-linecap"],"stroke-linejoin":o.attrs?o.attrs["stroke-linejoin"]:o["stroke-linejoin"]}).appendTo(e):$("<element>").attr({type:o.tool,svgType:o.type,x:o.x,y:o.y,width:o.width,height:o.height,"font-color":Raphael.color(o["font-color"]).hex,"font-size":Math.round(r.pxToPt(parseInt(o["font-size"]))),"text-anchor":o["text-anchor"],"font-weight":o["font-weight"],"font-style":o["font-style"],"text-decoration":o["text-decoration"],line:0!=o["stroke-width"],fill:o.fill}).text(o.text).appendTo(e)}return e[0].outerHTML},C=function(){var t={},i=[];this.start=function(t,e){g=!0,i.push(["M",t,e]),y.beginPath(),y.moveTo(t,e)},this.move=function(t,e){g=!0,i.push(["L",t,e]),y.clearRect(0,0,b.width(),b.height()),y.lineTo(t,e),y.stroke()},this.end=function(r){i.length>2&&(i[0][0]="M",(t=l.path(i).attr(v)).type="path",t.realId=t.id,t.tool="scribble",m.push(t),r||(f.add({action:"scribble",element:t}),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"scribble",xml:_([t]),id:t.id})),y.closePath(),y.clearRect(0,0,b.width(),b.height())),g=!1,i=[]},this.getName=function(){return"scribble"}},T=function(){var t,i,r,n;this.start=function(e,o){t=r=e,i=n=o},this.move=function(t,e){r=t,n=e},this.end=function(o){if(Math.abs(r-t)<5&&Math.abs(n-i)<5)for(var a=m.length-1;a>=0;a--){var s=m[a];if(s&&"text"!=s.type){if(s.isInsidePath(r,n,k)){m.splice(a,1),o||(f.add({action:"erase",element:s}),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"erase",xml:_([s]),id:s.id})),l.clear();for(var c=0,d=m.length;c<d;c++){var h,u=m[c];"text"!=u.type?((h=l[u.type]().attr(u.attrs)).realId=u.id,h.tool=h.tool):E(u)}break}}else if((s=P(t,i))&&m[a]==s.element){m.splice(a,1),o||(f.add({action:"erase",element:s}),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"erase",xml:_([s.element]),elementType:"text"})),A();break}}},this.getName=function(){return"eraser"}},S=function(){var t,r,o,a,l=newObj=rectEl=textEl=null,c=isHResize=tapped=isDoubleClicked=!1,d=function(t,e,i){return t=Math.max(t,0),e=Math.max(e,0),{x:t=Math.min(t,s.width()-i.width()),y:e=Math.min(e,s.height()-i.height())}},h=function(){return{left:(newObj.offset().left-s.offset().left)/w,top:(newObj.offset().top-s.offset().top)/w}},u=function(t,e){var i=e.css("text-align");"right"==i?i="end":"center"==i?i="middle":"left"==i&&(i="start");var r={x:t.parentNode?t.parentNode.offsetLeft:t.x,y:t.parentNode?t.parentNode.offsetTop:t.y,width:t.parentNode?$(t.parentNode).width():t.width,height:t.parentNode?$(t.parentNode).height():t.height,"font-size":t.parentNode?e.css("font-size"):Math.round(parseFloat(e.css("font-size"))),text:e.val(),"font-weight":e.css("font-weight"),"font-style":e.css("font-style"),"text-decoration":e.css("text-decoration"),"font-color":e.css("color"),"stroke-width":"solid #000000"==e.attr("border")?2:0,fill:e.attr("background-color")?e.attr("background-color"):"#FAF4C0","text-anchor":i},n=E(r),o=M(n.textEl,n.rectEl);return $(t.parentNode).hasClass("crownix-note-textnote")&&$(t.parentNode).remove(),o},p=function(t){var r;e.shareManager&&e.shareManager.isConnected()&&((!i.browser.mobile||i.browser.mobile&&l)&&(l&&(r=_([l.element])),e.shareManager.sendNote({type:"text",xml:_([t]),oldXml:r})));if(l){for(var n=m.length-1;n>=0;n--)"text"==m[n].type&&l&&JSON.stringify(m[n])==JSON.stringify(l.element)&&(m[n]=t);A(),f.getHistory().forEach((function(e){e.element&&"text"==e.element.type&&JSON.stringify(e.element)==JSON.stringify(l.element)&&(e.element=t)}))}else m.push(t),f.add({action:"text",element:t})},g=function(t){t.preventDefault(),t.stopPropagation(),e.scroll.enabled=!1,i.browser.mobile?$(t.currentTarget).blur():isFocus||(textDialog.showToolbar(t.currentTarget,s),isFocus=!0)},v=function(t){if(focusing)return i.browser.msie&&$(t.currentTarget).focus(),void(focusing=!1);t.preventDefault(),t.stopPropagation(),isFocus=!1,e.scroll.enabled=!0;var r=u(t.currentTarget,$(t.currentTarget));p(r),i.browser.mobile&&textDialog.showDialog(t.currentTarget,r)};this.init=function(){newObj&&newObj.css("border","none"),isHResize=c=isDoubleClicked=moving=!1,newObj=null},this.start=function(e,i){(l=P(t=e,r=i))?(c=l.isWResize,isHResize=l.isHResize,newObj=$("<div>").addClass("crownix-note-textnote").appendTo(s),newObj.css({left:l.element.x,top:l.element.y,width:l.element.width,height:l.element.height}),tapped?(clearTimeout(tapped),tapped=null,isDoubleClicked=!0):tapped=setTimeout((function(){tapped=null}),300)):(newObj=$("<div>").addClass("crownix-note-textnote").appendTo(s),newObj.css({left:d(t-newObj.width()/2,r-newObj.width()/2,newObj).x,top:d(t-newObj.width()/2,r-newObj.width()/2,newObj).y}))},this.move=function(i,n){var l,u;o=i,a=n,moving=!0,newObj.css("border","dotted #FFC19E"),c||isHResize?(l=c?newObj.width()+o-t:newObj.width(),u=isHResize?newObj.height()+a-r:newObj.height(),$(newObj).css({width:Math.min(l,s.width()-h().left),height:Math.min(u,s.height()-h().top)})):(l=h().left+o-t,u=h().top+a-r,$(newObj).css({left:d(l,u,newObj).x,top:d(l,u,newObj).y}),newObj.offset().left<=0&&s.offset().left<=0&&e.scroll.scrollTo(e.scroll.x+5*w,e.scroll.y,1e3),newObj.offset().top<=e.toolbar.getHeight()&&s.offset().top<=e.toolbar.getHeight()&&e.scroll.scrollTo(e.scroll.x,e.scroll.y+5*w,1e3),e.scroll.wrapperWidth-5<=newObj.offset().left+newObj.width()*w&&e.scroll.scrollTo(e.scroll.x-5*w,e.scroll.y,1e3),e.scroll.wrapperHeight-5<=newObj.offset().top+newObj.height()*w&&e.scroll.scrollTo(e.scroll.x,e.scroll.y-5*w,1e3)),t=o,r=a},this.end=function(){var t=$("<textarea>").attr("placeholder",n.get("text_placeholder")).bind("focus",g).bind("blur",v).appendTo(newObj);if(l)if(function(t){for(var e=m.length-1;e>=0;e--)m[e]==l.element&&A(e);var i=l.element["text-anchor"];i="end"==i?"right":"middle"==i?"center":"left",t.css({color:l.element["font-color"],"font-size":l.element["font-size"],"font-weight":l.element["font-weight"],"font-style":l.element["font-style"],"text-align":i,"text-decoration":l.element["text-decoration"],border:0==l.element["stroke-width"]?"none":"solid #000000"}),t.attr({border:0==l.element["stroke-width"]?"none":"solid #000000","background-color":l.element.fill}),t.val(l.element.text)}(t),isDoubleClicked)t.focus();else if(i.browser.mobile){var e=u(t[0],$(t[0]));p(e)}else t.blur();else t.focus();this.init()},this.getName=function(){return"text"},this.textareaToSvg=function(t,i){!function(t,i){var r,n=!1;e.shareManager&&e.shareManager.isConnected()&&(l&&(r=_([i])),e.shareManager.sendNote({type:"text",xml:_([t]),oldXml:r})),f.getHistory().forEach((function(e){"text"==e.element.type&&JSON.stringify(e.element)==JSON.stringify(i)&&(e.element=t,n=!0)})),n||l||m.push(t);for(var o=m.length-1;o>=0;o--)"text"==m[o].type&&JSON.stringify(m[o])==JSON.stringify(i)&&(m[o]=t,n=!0);A()}(u(t,i),t)},this.redrawElement=function(){A()}},E=function(t,e){var i=e||l,r=i.rect(t.x,t.y,t.width,t.height).attr({fill:t.fill,"stroke-width":t["stroke-width"]}),n=i.text(0,0,t.text).attr({"text-anchor":t["text-anchor"],"font-size":Math.round(parseFloat(t["font-size"]))+"px","font-weight":t["font-weight"],"font-style":t["font-style"],fill:t["font-color"],"clip-rect":[t.x,t.y,t.width,t.height].join(" ")}).data("text",t.text);n.attr("text",function(t,e){for(var i=t.data("text").split("\n"),r=[],n="",o=0,a=i.length;o<a;o++)if(i[o])for(;i[o];){t.attr("text",i[o]);var s=t.getBBox().width/t.attr("text").length,l=Math.floor(e/Math.ceil(s));r.push(i[o].substring(0,l)),i[o]=i[o].substring(0+l,i[o].length)}else r.push(i[o]);for(o=0,a=r.length;o<a;o++)n+=r[o],r[o]||(n+=""),o<a-1&&(n+="\n");return n}(n,t.width-6)),$(n.node).css({"text-decoration":t["text-decoration"]}).append(" ");var o=n.getBBox(),a=t.x+3,s=t.y+o.height/2+3,c=t.width-6;t.height;return"middle"==n.attr("text-anchor")?a+=c/2:"end"==n.attr("text-anchor")&&(a+=c),n.attr({x:a,y:s}),i.path(["M",t.x+t.width-.5,t.y+t.height-9.5,"l",-9.5,9.5,"M",t.x+t.width-.5,t.y+t.height-4.5,"l",-4.5,4.5].join(",")).attr({stroke:"#8C8C8C"}),{textEl:n,rectEl:r}},M=function(t,e){return{type:"text",tool:"text",x:e.attrs.x,y:e.attrs.y,width:e.attrs.width,height:e.attrs.height,text:t.data("text"),"font-color":t.attrs.fill,"font-size":t.attrs["font-size"],"text-anchor":t.attrs["text-anchor"],"font-weight":t.attrs["font-weight"],"font-style":t.attrs["font-style"],"text-decoration":$(t.node).css("text-decoration"),"stroke-width":e.attrs["stroke-width"],fill:e.attrs.fill}},A=function(t){l.clear();for(var e=0,i=m.length;e<i;e++)"text"==m[e].type&&t!=e?E(m[e]):"text"!=m[e].type&&l[m[e].type]().attr(m[e].attrs)},P=function(t,e){var r=i.browser.mobile?20:8;if(!moving){for(var n=m.length-1;n>=0;n--)if("text"==m[n].type&&m[n].x<t&&m[n].x+m[n].width+r>t&&m[n].y<e&&m[n].y+m[n].height+r>e){var o=isHResize=!1;return m[n].x+m[n].width-r<t&&m[n].x+m[n].width+r>t&&(o=!0),m[n].y+m[n].height-r<e&&m[n].y+m[n].height+r>e&&(isHResize=!0),{element:m[n],isWResize:o,isHResize}}return null}},I=function(){var t=!1,r=function(t,e){return{x:Math.round((t-s.offset().left)/w),y:Math.round((e-s.offset().top)/w)}},n=function(t){if(isFocus)$(t.target).parents().each((function(t,e){if($(e).hasClass("crownix-note-textnote"))return focusing=!0,!1;focusing=!1}));else{t.preventDefault(),t.stopPropagation(),$(document).on(a.move,o),$(document).on(a.end,l);var i=r(t.originalEvent.pageX,t.originalEvent.pageY);c.start(i.x,i.y),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"start",x:i.x,y:i.y,tool:c.getName(),attribute:v})}},o=function(t){t.preventDefault(),t.stopPropagation();var i=r(t.originalEvent.pageX,t.originalEvent.pageY);c.move(i.x,i.y),e.shareManager&&e.shareManager.isConnected()&&"text"!=c.getName()&&e.shareManager.sendNote({x:i.x,y:i.y})},l=function(t){e.shareManager&&e.shareManager.isConnected()&&"text"!=c.getName()&&e.shareManager.sendNote({type:"end"}),t.preventDefault(),t.stopPropagation(),$(document).off(a.move,o),$(document).off(a.end,l),c.end()},d=function(t){t.preventDefault(),t.stopPropagation(),"text"==c.getName()?s.on(a.move,h):(t.target.style.cursor="",s.off(a.move,h)),s.on(a.out,u)},h=function(t){if(isFocus)t.target.style.cursor="";else{var e=r(t.originalEvent.pageX,t.originalEvent.pageY),i=P(e.x,e.y);if(i){var n=i.isWResize,o=i.isHResize;t.target.style.cursor=n&&!o?"e-resize":!n&&o?"n-resize":n&&o?"nw-resize":"move"}else t.target.style.cursor=""}},u=function(t){t.preventDefault(),t.stopPropagation(),s.off(a.move,h),s.off(a.out,u)},f=function(i){if(i.originalEvent.touches.length>=2)t=!0;else{t=!1,i.preventDefault(),i.stopPropagation(),s.on("touchmove",p),s.on("touchend",g);var n=r(i.originalEvent.touches[0].pageX,i.originalEvent.touches[0].pageY);c.start(n.x,n.y),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"start",x:n.x,y:n.y,tool:c.getName(),attribute:v})}},p=function(i){if(t)c.init();else{i.preventDefault(),i.stopPropagation();var n=r(i.originalEvent.touches[0].pageX,i.originalEvent.touches[0].pageY);c.move(n.x,n.y),e.shareManager&&e.shareManager.isConnected()&&"text"!=c.getName()&&e.shareManager.sendNote({x:n.x,y:n.y})}},g=function(i){t||(e.shareManager&&e.shareManager.isConnected()&&"text"!=c.getName()&&e.shareManager.sendNote({type:"end"}),i.preventDefault(),i.stopPropagation(),s.off("touchmove",p),s.off("touchend",g),c.end())};this.on=function(){i.hasTouch()?s.on("touchstart",f):(s.on(a.start,n),s.on(a.over,d))},this.off=function(){i.hasTouch()?(s.off("touchstart",f),s.off("touchmove",p),s.off("touchend",g)):(s.off(a.start,n),s.off(a.move,o),s.off(a.end,l),s.off(a.over,d),s.off(a.move,h))}},D=function(){var t=this,i=[],r=-1,n=-1,o=function(){"function"==typeof x&&x({undoable:t.undoable(),redoable:t.redoable(),clearable:m.length>0})};t.undoable=function(){return r>-1&&r>n},t.redoable=function(){return r<i.length-1},t.add=function(t,e){r+1<i.length&&i.splice(r+1,i.length-(r+1)),i.push(t),r=i.length-1,!0!==e&&o()},t.undo=function(){t.undoable()&&(r--,t.rebuildElements(),o())},t.redo=function(){t.redoable()&&(r++,t.rebuildElements(),o())},t.freeze=function(t){n=void 0===t?r:t,o()},t.clear=function(){i=[],r=-1,n=-1,o()},t.rebuildElements=function(){var t=[];e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"clearElement",rebuild:!0});for(var n=0;n<=r;n++){var o=i[n];switch(o.action){case"scribble":case"text":t.push(o.element);break;case"erase":for(var a=0,s=t.length;a<s;a++){var c=t[a];if(null!=c.realId&&c.realId==o.element.realId){t.splice(a,1);break}if(null==c.realId&&o.element.element&&JSON.stringify(o.element.element)==JSON.stringify(c)){t.splice(a,1);break}}break;case"clear":t=[]}}if(l.clear(),e.shareManager&&e.shareManager.isConnected()){for(n=m.length-1;n>=0;n--)for(a=0;a<i.length;a++)if(m[n].tool==i[a].element.tool&&"scribble"==m[n].tool&&m[n].getPath().toString()==i[a].element.getPath().toString()||"text"==m[n].tool&&JSON.stringify(m[n])==JSON.stringify(i[a].element)){m.splice(n,1);break}for(n=0;n<m.length;n++)t.push(m[n])}m=[];for(n=0,s=t.length;n<s;n++){var d,h=t[n];if("text"!=h.type)(d=l[h.type]().attr(h.attrs)).realId=h.id,d.tool=h.tool,m.push(d);else{var u=E(h);m.push(M(u.textEl,u.rectEl))}e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"scribble",xml:_([h]),rebuild:!0})}},t.getHistory=function(){return i},o()},F=function(){var t=v.stroke,e=v["stroke-opacity"],i=v["stroke-width"],r=Raphael.getRGB(t);if(y.strokeStyle="rgba("+r.r+","+r.g+","+r.b+","+e+")","string"==typeof i&&-1!==i.indexOf("pt",i.length-2)){var n=i.substring(0,i.length-2),o=parseInt(n,10);y.lineWidth=o*k/72}else y.lineWidth=i;y.lineCap=v["stroke-linecap"],y.lineJoin=v["stroke-linejoin"]},O=function(t){var e=i.browser.firefox?122:26,r=i.browser.firefox?121:25;t.ctrlKey&&t.which===e?f.undo():t.ctrlKey&&t.which===r&&f.redo()};Raphael.el.isInsidePath=function(t,e,i){var r=this.realPath=Raphael._getPath[this.type](this);this.attr("transform")&&this.attr("transform").length&&(r=Raphael.transformPath(r,this.attr("transform")));var n=this.attr("stroke-width")||1;if("string"==typeof n&&-1!==n.indexOf("pt",n.length-2)&&"number"==typeof i){var o=n.substring(0,n.length-2);n=parseInt(o,10)*i/72}var a,s,l,c,d,h,u,f,p,g=n/2+3,m=Raphael.pathBBox(r);if(t<m.x-g&&t>m.x2+g&&e<m.y-g&&e>m.y2+g)return!1;for(var v=0,w=r.length-1;v<w;v++)if(a=r[v][1],s=r[v][2],l=r[v+1][1],c=r[v+1][2],d=Math.min(a,l),h=Math.max(a,l),u=Math.min(s,c),f=Math.max(s,c),!(t<d-g||t>h+g||e<u-g||e>f+g)){if(d==h||u==f)return!0;if(p=(c-s)/(l-a),Math.abs(p*(t-a)-e+s)/Math.sqrt(p*p+1)<g)return!0}return!1};var R=$("<div>").css({width:"1in",height:"1in",display:"none"}).appendTo("body");k=R.width(),R.remove();var B=function(){e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"start"})},N=function(){e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"end"})};this.newPage=function(e,i){s=e,b=$("<canvas>").attr({width:s.width(),height:s.height()}).css({position:"absolute",left:0,top:0}).appendTo(s),y=b[0].getContext("2d"),i&&b.addClass("crownix-auth-lock"),F(),l=Raphael(s[0],s.width(),s.height()),s.find("svg").css("left",0),p=new I,d=new C,h=new T,u=new S,textDialog=new o(t,this,B,N),c=d,f=new D},this.disposePage=function(){$(document).off("keypress",O),p.off(),textDialog.destroyDialog(),l.remove&&l.remove(),s.remove&&s.remove(),m=[]},this.setMode=function(t){"editable"===t?(p.off(),s.css({cursor:"crosshair",display:"none"}),s.fadeIn(500),this.isLock()||(p.on(),$(document).on("keypress",O))):"disable"===t?(p.off(),s.css({cursor:"auto",display:"none"}),s.fadeIn(500),$(document).off("keypress",O)):"hide"===t&&(p.off(),s.css("cursor","auto"),s.fadeOut(500),$(document).off("keypress",O))},this.getToolName=function(){return c.getName()},this.setTool=function(t){"scribble"===t?c=d:"eraser"===t?c=h:"text"===t&&(c=u)},this.getTool=function(){return c},this.isDrawing=function(){return g},this.setRatio=function(t){w=t},this.getShapeAttribute=function(){return v},this.setShapeAttribute=function(t){if("object"==typeof t)for(var e in t)e in v&&(v[e]=t[e]);F()},this.applySketchAttribute=function(){F()},this.undo=function(){f.undo()},this.redo=function(){f.redo()},this.clear=function(t){m=[],l.clear(),t?f.clear():f.add({action:"clear"})},this.setHistoryChageHandler=function(t){x=t},this.getElements=function(){return m},this.addElements=function(t){for(var e=0,i=t.length;e<i;e++){var r,n=t[e];if("text"!=n.type)(r=l[n.type]().attr(n)).tool=n.tool,r.type=n.type,r.realId=r.id,m.push(r);else{var o=E(n);r=M(o.textEl,o.rectEl),m.push(r)}f.add({action:n.tool,element:r},!0)}f.freeze()},this.setZIndex=function(t){1==t?(i.browser.msie&&i.browser.version<=10&&b.hide(),s.css("pointer-events","none")):3==t&&(i.browser.msie&&i.browser.version<=10&&b.show(),s.css("pointer-events","auto"))},this.disableNote=function(){p.off(),$(document).off("keypress",O)},this.enableNote=function(){p.off(),p.on(),$(document).on("keypress",O)},this.draw=function(t){"start"==t.type?(c.start(t.x,t.y),this.disableNote()):"end"==t.type?(c.end(!0),this.isLock()||this.enableNote()):"clear"==t.type?this.clear():c.move(t.x,t.y)},this.lock=function(){b&&(b.addClass("crownix-auth-lock"),this.disableNote())},this.unlock=function(t){b.removeClass("crownix-auth-lock"),"editable"==t&&this.enableNote()},this.isLock=function(){return!!b.hasClass("crownix-auth-lock")},this.convertToXML=function(t){return _(t)},this.convertToElements=function(t){return function(t){var e=$(t),i=[],n=function(t){var e=Raphael.getRGB(t);return"rgb("+e.r+", "+e.g+", "+e.b+")"};return e.children().each((function(){var t=$(this);"text"!=t.attr("type")?i.push({type:t.attr("svgType"),tool:t.attr("type"),path:t.attr("path"),stroke:t.attr("stroke-color"),"stroke-opacity":t.attr("stroke-opacity"),"stroke-width":t.attr("stroke-width"),"stroke-linecap":t.attr("stroke-linecap"),"stroke-linejoin":t.attr("stroke-linejoin")}):i.push({type:t.attr("svgType"),tool:t.attr("type"),x:parseInt(t.attr("x")),y:parseInt(t.attr("y")),width:parseInt(t.attr("width")),height:parseInt(t.attr("height")),text:t.text(),"font-color":n(t.attr("font-color")),"font-size":Math.round(r.ptToPx(parseInt(t.attr("font-size"))))+"px","text-anchor":t.attr("text-anchor"),"font-weight":"bold"==t.attr("font-weight")?t.attr("font-weight"):parseInt(t.attr("font-weight")),"font-style":t.attr("font-style"),"text-decoration":t.attr("text-decoration"),"stroke-width":"true"==t.attr("line")?2:0,fill:t.attr("fill")})})),i}(t)},this.convertToRaphaelElement=function(t){return t.forEach((function(t){var e;if("text"!=t.type)(e=l[t.type]().attr(t)).tool=t.tool,e.type=t.type,e.realId=e.id,m.push(e);else{var i=E(t);if(e=M(i.textEl,i.rectEl),t.oldElement){for(var r=!1,n=m.length-1;n>=0;n--)if("text"==m[n].type&&e&&JSON.stringify(m[n])==JSON.stringify(t.oldElement)){m[n]=e,r=!0,f.clear();break}r||m.push(e)}else m.push(e)}})),m},this.hasElement=function(t){for(var e=0;e<m.length;e++)if(t.tool==m[e].tool&&("text"!=t.tool&&t.path==m[e].getPath()||"text"==t.tool&&JSON.stringify(t)==JSON.stringify(m[e])))return!0;return!1},this.textareaToSvg=function(t,e){c.textareaToSvg(t,e)},this.redrawTextBox=function(){"text"==c.getName()&&c.redrawElement()},this.drawTextnote=function(t,e){E(t,e)}},m2soft.ns("m2soft.crownix.NoteManager"),m2soft.crownix.NoteManager=function(t,e){var i=m2soft.crownix.Util,r=m2soft.crownix.Constant,n=-1,o=new m2soft.crownix.Map,a=new m2soft.crownix.ShapeEditor(t,e);notetoolbar=new m2soft.crownix.NoteToolbar(t,this),currentMode="disable",currentTool="scribble",currentAttr=null,isFormFieldMode=!1,removedPage=[],options=e.options,e.shapeEditor=a,a.setHistoryChageHandler((function(t){t.undoable?notetoolbar.enableToolbarItem(["undo"]):notetoolbar.disableToolbarItem(["undo"]),t.redoable?notetoolbar.enableToolbarItem(["redo"]):notetoolbar.disableToolbarItem(["redo"]),t.clearable?notetoolbar.enableToolbarItem(["eraseAll"]):notetoolbar.disableToolbarItem(["eraseAll"])}));var s=function(t){return removedPage.forEach((function(e){e<=t&&t++})),t};this.setMode=function(t,n){a.setMode(t),"disable"===t?a.setZIndex(1):a.setZIndex(3),isFormFieldMode&&(fieldOrder=m2soft.crownix.FieldOrder.getInstance(),n||fieldOrder.blur(),"editable"==t?fieldOrder.disable():fieldOrder.enable()),currentMode=t,function(t,e,n){var o=$("#"+r.PAGE_ID);if("editable"==t){var a=(s=parseInt(e.width))+10;i.changeScrollbar(s,s,e.color,Math.ceil(s/2),a),o.find(".iScrollHorizontalScrollbar").hide(),o.find(".iScrollVerticalScrollbar").hide()}else{var s;a=(s=parseInt(n.width))+10,i.changeScrollbar(s,s,n.color,"",a),o.find(".iScrollHorizontalScrollbar").show(),o.find(".iScrollVerticalScrollbar").show()}}(t,options.scrollbarOnNote,options.scrollbarOnViewer),e.shareManager&&e.shareManager.isConnected()&&e.shareManager.isHost()&&e.shareManager.relocateLockControl()},this.getMode=function(){return currentMode},this.getToolName=function(){return a.getToolName()},this.setTool=function(t){a.setTool(t),currentTool=t},this.setShapeAttribute=function(t){a.setShapeAttribute(t),currentAttr=t},this.drawPage=function(t,e){e=s(e);var i=!1;if(n>0){if(a.isLock()&&(i=!0),a.isDrawing())a.getTool().end();var r=a.getElements(),l=a.convertToXML(r);o.put(n,l),a.disposePage()}if(a.newPage(t,i),l=o.get(e)){r=a.convertToElements(l);a.addElements(r)}a.setTool(currentTool),this.setMode(currentMode,!0),currentAttr&&a.setShapeAttribute(currentAttr),n=e},this.drawNote=function(t,e){if(e=s(e),n>0){var i=a.convertToXML(a.getElements());o.put(n,i)}if(i=o.get(e)){var r=a.convertToElements(i);if(r.length>0)for(var l=Raphael(t[0],t.width(),t.height()),c=0,d=r.length;c<d;c++)"text"!=r[c].type?l[r[c].type]().attr(r[c]):a.drawTextnote(r[c],l)}},this.setRatio=function(t){a.setRatio(t)},this.undo=function(){a.undo()},this.redo=function(){a.redo()},this.clear=function(t){a.clear(t),!t&&e.shareManager&&e.shareManager.isConnected()&&e.shareManager.sendNote({type:"clear"})},this.destroyNoteToolbar=function(){notetoolbar.destroy()},this.toNoteParameter=function(t,e){if(n>0){var i=a.convertToXML(a.getElements());o.put(n,i)}for(var r=[" /rnotedata "],s=t;s<=e;s++){r.push("[");var l=o.get(s);l&&r.push(l),r.push("] ")}return r.join("")},this.getNoteXml=function(t){return t===n?a.convertToXML(a.getElements()):o.get(t)},this.getShapeAttribute=function(){return a.getShapeAttribute()},this.setFormFieldMode=function(t){isFormFieldMode=t},this.export=function(t){for(var e=t,i={},r=1;r<=e;r++)i[r]=this.getNoteXml(r);return i},this.import=function(t){for(var e in t)if(e==n){var i=a.convertToElements(t[e]);a.addElements(i)}else o.put(e,t[e])},this.removeNote=function(t){removedPage.push(t),removedPage.sort(i.ASCENDING_COMPARATOR)},this.restoreNote=function(t){var e=removedPage.indexOf(t);-1!=e&&removedPage.splice(e,1)},this.draw=function(t){a.draw(t)},this.lock=function(){a.lock()},this.unlock=function(){a.unlock(currentMode)},this.addElement=function(t,i,r,n){var l=a.convertToElements(t)[0],c=[];if(r){if(a.hasElement(l))return;n&&(l.oldElement=a.convertToElements(n)[0]),c=a.convertToRaphaelElement([l]),e.shareManager&&e.shareManager.isConnected()&&l&&"text"==l.type&&e.shareManager.scrollToPos(l.x,l.y)}else{i=s(i);var d,h=o.get(i);if(h&&(c=a.convertToElements(h)),n&&(d=a.convertToElements(n)[0]),d)for(var u=c.length-1;u>=0;u--)"text"==c[u].type&&l&&JSON.stringify(c[u])==JSON.stringify(d)&&(c[u]=l);else c.push(l)}o.put(i,a.convertToXML(c))},this.removeElement=function(t,e,i){var r=a.convertToElements(t)[0],n=[];if(!i){e=s(e);var l=o.get(e);l&&(n=a.convertToElements(l));for(var c=n.length-1;c>=0;c--)("text"==r.type&&JSON.stringify(n[c])==JSON.stringify(r)||"text"!=r.type&&n[c].path==r.path)&&n.splice(c,1)}o.put(e,a.convertToXML(n))},this.removeAllElement=function(t){t=s(t),o.remove(t)},this.isLock=function(){return a.isLock()},this.redrawTextBox=function(){a.redrawTextBox()},this.disableNote=function(){a.disableNote()},this.enableNote=function(){a.isLock()||a.enableNote()},this.hideNoteItem=function(t){notetoolbar.hideNoteItem(t)},this.showNoteItem=function(t){notetoolbar.showNoteItem(t)}},m2soft.ns("m2soft.crownix.LinkManager"),m2soft.crownix.LinkManager=function(t){var e=t,i=[],r=[],n={};MAX_DATA_SIZE=104857600,this.getStateDataSize=function(){var t=0;for(var e in n){var i=n[e].mmlData.mml;for(var r in n[e].mmlData.drilldownInfo)i+=n[e].mmlData.drilldownInfo[r];for(var o in n[e].formData&&(i+=n[e].formData),n[e].noteData)i+=n[e].noteData[o];t+=function(t,e,i,r){for(e=i=0;r=t.charCodeAt(i++);e+=r>>11?3:r>>7?2:1);return e}(i)}return t},this.isFullStack=function(){return!(this.getStateDataSize()<MAX_DATA_SIZE)},this.pushPrevDocStack=function(t){i.push(t)},this.popPrevDocStack=function(){return i.pop()},this.pushNextDocStack=function(t){r.push(t)},this.popNextDocStack=function(){return r.pop()},this.deleteNextDocStack=function(){r=[]},this.setStateData=function(t,e){n[t]=e},this.getStateData=function(t){return this.isExistData(t)?n[t]:null},this.isExistData=function(t){return!!n[t]},this.isEmptyPrevDocStack=function(){return!(i.length>0)},this.isEmptyNextDocStack=function(){return!(r.length>0)},this.makeStateData=function(){return{mrdPath:e.viewer.getMrdPath(),mrdParam:e.viewer.getMrdParam(),curPageNum:e.currentPage,noteData:e.noteManager?e.noteManager.export(e.totalPage):null,formData:e.isFormEditMode?e.exportFormData():null,mmlData:e.exportMML()}},this.saveState=function(t){if(this.isFullStack()&&"new"==t)return!1;var i=e.viewer.getMrdPath()+"_"+e.viewer.getMrdParam(),r=this.makeStateData();return"prev"==t?this.pushNextDocStack(i):this.pushPrevDocStack(i),this.setStateData(i,r),!0},this.restoreState=function(t){var i=this.getStateData(t);e.viewer.setMrdPath(i.mrdPath),e.viewer.setMrdParam(i.mrdParam),e.importMML(i.mmlData),setTimeout((function(){1!=i.curPageNum?e.viewer.movePage(i.curPageNum):e.drilldownManager.disableForgery()}),0),null!=i.noteData&&e.noteManager.import(i.noteData),setTimeout((function(){null!=i.formData&&e.importFormData(i.formData)}),0)},this.prevDoc=function(){var t=this.popPrevDocStack();t&&(this.saveState("prev"),this.restoreState(t))},this.nextDoc=function(){var t=this.popNextDocStack();t&&(this.saveState("next"),this.restoreState(t))}},m2soft.ns("m2soft.crownix.ShareDialog"),m2soft.crownix.ShareDialog=function(){var t,e,i,r,n,o=m2soft.crownix.Window,a=m2soft.crownix.Resource;(i=function(i){r=i,e=!($(window).width()>$(window).height())||$(window).height()>520,t=$("<div>").attr("id","crownix-sharedialog-container"),d(),$(window).on("orientationchange",(function(){var t=window.orientation;(e=90!==t&&-90!==t||$(window).height()>520)?n.setOrientation(e,c):n.setOrientation(e,l)}))}).prototype={show:function(i){var d=e?{css:{"max-width":"450px","max-height":"520px"}}:{css:{"max-width":"700px","max-height":"380px"}};d.setVerticalAlign=s,(n=new o(a.get("share_dialog_title"),t,!0)).show(d),e?c():l(),$(".crownix-window-close").bind("click",(function(){i.close()})),r.report||($("input[name=reportTitle]").attr({disabled:"disabled"}),$(".crownix-create-content-isPublic-input > input[type=checkbox]").attr({disabled:"disabled"}),$("#registerBtn").attr({disabled:"disabled"}))},close:function(){n.close()},addReportList:function(t){p(t)},addReport:function(t,e,i){g(t,e,i)},removeReport:function(t){v(t)},renewUserCount:function(t,e){w(t,e)}};var s=function(){$(".crownix-span-input").each((function(){$(this).css("margin-top",$(this).parent().height()/2-$(this).height()/2+"px")}))},l=function(){$("#crownix-sharedialog-container").css("min-height","220px"),$(".crownix-sharedialog-listfield").css({height:"95%",width:"46%",float:"left"}),$(".crownix-sharedialog-createfield").css({height:"95%",width:"46%",float:"left"}),$(".crownix-create-content").css("height","60%")},c=function(){$("#crownix-sharedialog-container").css("min-height","400px"),$(".crownix-sharedialog-listfield").css({height:"54%",width:"95%"}),$(".crownix-sharedialog-createfield").css({height:"42%",width:"95%"}),$(".crownix-create-content").css("height","74%")},d=function(){h(),u()},h=function(){var e=$("<div>").addClass("crownix-sharedialog-listfield").appendTo(t);$("<h4>").text(a.get("share_list_title")).addClass("crownix-sharedialog-h4").appendTo(e);var i=$("<div>").addClass("crownix-sharedialog-listfield-inner").appendTo(e),n=$("<div>").addClass("crownix-report-list").appendTo(i),o=$("<div>").addClass("crownix-report-list-header").appendTo(n),s=$("<div>").addClass("crownix-report-title ").appendTo(o);$("<span>").text(a.get("share_report_title")).appendTo(s);var l=$("<div>").addClass("crownix-report-isPublic").appendTo(o);$("<span>").text(a.get("share_is_public")).appendTo(l);var c=$("<div>").addClass("crownix-report-userCount").appendTo(o);$("<span>").text(a.get("share_user_count")).appendTo(c);$("<div>").addClass("crownix-report-list-body").appendTo(n);var d=$("<div>").addClass("crownix-report-list-footer").appendTo(i),h=$("<div>").addClass("crownix-report-list-footer-span crownix-span-input").appendTo(d);$("<span>").text(a.get("share_password")).appendTo(h);var u=$("<div>").addClass("crownix-report-list-footer-input crownix-span-input").appendTo(d),f=($("<input>").attr({type:"password",name:"joinPassword",disabled:"disabled"}).addClass("crownix-sharedialog-input").appendTo(u),$("<div>").addClass("crownix-report-list-footer-button crownix-span-input").appendTo(d));$("<button>").attr({type:"button",id:"joinBtn"}).text(a.get("share_join")).addClass("crownix-sharedialog-button").appendTo(f).on("click",(function(){0===$(".crownix-report-title-checkbox > input:checked").length?r.dialog.show(a.get("share_no_select_report")):$('input[name="joinPassword"]').attr("disabled")?x():0===$('input[name="joinPassword"]').val().length?r.dialog.show(a.get("share_need_password")):x()}))},u=function(){var e=$("<div>").addClass("crownix-sharedialog-createfield").appendTo(t);$("<h4>").text(a.get("share_create_title")).addClass("crownix-sharedialog-h4").appendTo(e);var i=$("<div>").addClass("crownix-create-content").appendTo(e),n=$("<div>").addClass("crownix-create-content-title").appendTo(i),o=$("<div>").addClass("crownix-create-content-title-span crownix-span-input").appendTo(n);$("<span>").text(a.get("share_report_title")).appendTo(o);var s=$("<div>").addClass("crownix-create-content-title-input crownix-span-input").appendTo(n);$("<input>").attr({type:"text",name:"reportTitle"}).addClass("crownix-sharedialog-input").appendTo(s);var l=$("<div>").addClass("crownix-create-content-isPublic").appendTo(i),c=$("<div>").addClass("crownix-create-content-isPublic-span crownix-span-input").appendTo(l);$("<span>").text(a.get("share_private")).appendTo(c);var d=$("<div>").addClass("crownix-create-content-isPublic-input crownix-span-input").appendTo(l);$("<input>").attr("type","checkbox").on("change",(function(){this.checked?$('input[name="createPassword"]').removeAttr("disabled").focus():$('input[name="createPassword"]').attr({disabled:"disabled"}).val("")})).addClass("crownix-sharedialog-checkbox").appendTo(d);var h=$("<div>").addClass("crownix-create-content-password").appendTo(i),u=$("<div>").addClass("crownix-create-content-password-span crownix-span-input").appendTo(h);$("<span>").text(a.get("share_password")).appendTo(u);var f=$("<div>").addClass("crownix-create-content-password-input crownix-span-input").appendTo(h);$("<input>").attr({type:"password",name:"createPassword",disabled:"disabled"}).addClass("crownix-sharedialog-input").appendTo(f);var p=$("<div>").addClass("crownix-create-content-password-button crownix-span-input").appendTo(h);$("<button>").attr({type:"button",id:"registerBtn"}).text(a.get("share_create")).addClass("crownix-sharedialog-button").appendTo(p).on("click",(function(){""===$("input[name=reportTitle]").val().trim()?(r.dialog.show(a.get("share_need_report_title")),$("input[name=reportTitle]").val("").focus()):$('input[name="createPassword"]').attr("disabled")?b():0===$('input[name="createPassword"]').val().length?r.dialog.show(a.get("share_need_password")):b()}))},f=function(t,e,i){i||(i=1),this.report=$("<div>").attr("id","report-"+t).addClass("crownix-sharedialog-report");var r=$("<div>").addClass("crownix-report-title").appendTo(this.report),n=$("<div>").addClass("crownix-report-title-checkbox").appendTo(r);$("<input>").attr("type","checkbox").addClass("crownix-sharedialog-checkbox").appendTo(n).on("change",(function(){this.checked?($(".crownix-report-title-checkbox > input:checked").attr("checked",!1),this.checked=!0,l.text()===a.get("share_private")?$('input[name="joinPassword"]').removeAttr("disabled").focus():$('input[name="joinPassword"]').attr("disabled","disabled").val("")):$('input[name="joinPassword"]').attr("disabled","disabled").val("")}));var o=$("<div>").addClass("crownix-report-title-span").appendTo(r);$("<span>").text(t).appendTo(o);var s=$("<div>").addClass("crownix-report-isPublic").appendTo(this.report),l=$("<span>").text(e?a.get("share_public"):a.get("share_private")).addClass("isPublic").appendTo(s),c=$("<div>").addClass("crownix-report-userCount").appendTo(this.report);return $("<span>").text(i).addClass("crownix-userCount").appendTo(c),this.report},p=function(t){$(".crownix-report-list-body").children().each((function(){$(this).remove()}));for(var e=0;e<t.length;e++){var i=new f(t[e].name,t[e].isPublic,t[e].userCount);$(".crownix-report-list-body").append(i),m(i)}},g=function(t,e){var i=new f(t,e),r=$(".crownix-report-list-body");r.children().each((function(){if($(this).attr("id").substring(7)>t)return $(i).insertBefore(this),!1})),0===$(i).parent().length&&r.append(i),m(i)},m=function(t){$(t).children().each((function(){$(this).is(".crownix-report-title")?$(this).children().each((function(){$(this).css("margin-top",t.height()/2-$(this).height()/2+"px")})):$(this).css("margin-top",t.height()/2-$(this).height()/2+"px")}))},v=function(t){$('div[id="report-'+t+'"]').remove()},w=function(t,e){var i=$('div[id="report-'+t+'"] > .crownix-report-userCount > .crownix-userCount').text();$('div[id="report-'+t+'"] > .crownix-report-userCount > .crownix-userCount').text(e?++i:--i)},x=function(){var t=$(".crownix-report-title-checkbox > input:checked").parent().next().children().text(),e=$("input[name=joinPassword]").val();r.shareManager.joinReport(t,e)},b=function(){var t=$("input[name=reportTitle]").val(),e=$("input[name=createPassword]").val();r.shareManager.createReport(t,e)};return i}(),m2soft.ns("m2soft.crownix.LockControl"),m2soft.crownix.LockControl=function(){var t,e,i,r,n=m2soft.crownix.Resource,o=m2soft.crownix.resource.Icon;(t=function(t,e){i="#"+t,r=e}).prototype={createBtnDom:function(){a()},removeBtnDom:function(){s()},relocate:function(){c()}};var a=function(){e=!0;var t=$("<div>").attr("id","crownix-share-lock-control").addClass("crownix-share-lock-control").appendTo(i).bind("click tab",l).css("right",$(".iScrollVerticalScrollbar").width()+58+"px"),r=$("<button>").attr({type:"button",id:"crownix-share-lock-control-button",title:n.get("share_do_unlock")}).addClass("crownix-share-lock-control-button").appendTo(t);$(o.SHARE_LOCK).css("display","none").appendTo(r).fadeIn(500)},s=function(){$("#crownix-share-lock-control").remove()},l=function(){var t,i,a=$("#crownix-share-lock-control-button");(e=!e)?(t=n.get("share_do_unlock"),i=o.SHARE_LOCK,r.sendLockFields()):(t=n.get("share_do_lock"),i=o.SHARE_UNLOCK,r.sendUnlockFields()),a.attr("title",t).children().remove(),$(i).css("display","none").appendTo(a).fadeIn(500)},c=function(){$(".crownix-share-lock-control").css("right",$(".iScrollVerticalScrollbar").width()+58+"px")};return t}(),m2soft.ns("m2soft.crownix.ShareManager"),m2soft.crownix.ShareManager=function(t,e,i){var r,n,o,a,s,l,c,d,h,u,f=m2soft.crownix.Resource,p=m2soft.crownix.ShareDialog,g=m2soft.crownix.LockControl,m=m2soft.crownix.FieldOrder,v=m2soft.crownix.Util,w=(t=t,i=i,this),x=(e=e,{}),b=!1,y=!1,k=function(){setTimeout((function(){var t=l?"Client":"Host";$('[id^="crownix_form_field_"][auth='+t+"]").filter("input[type=checkbox], input[type=radio], input[type=file], :not(input):not(textarea)").addClass("crownix-auth-lock").attr("disabled",!0),$('[id^="crownix_form_field_"][auth='+t+"]").filter("input[type!=checkbox][type!=radio][type!=file], textarea").addClass("crownix-auth-lock").attr("readonly",!0)}),0)},_=function(){setTimeout((function(){l||($('[id^="crownix_form_field_"][auth]').filter("input[type=checkbox], input[type=radio], input[type=file], :not(input):not(textarea)").addClass("crownix-auth-lock").attr("disabled",!0),$('[id^="crownix_form_field_"][auth]').filter("input[type!=checkbox][type!=radio][type!=file], textarea").addClass("crownix-auth-lock").attr("readonly",!0),e.noteManager&&e.noteManager.lock())}),0)},C=function(){setTimeout((function(){if(!l){for(var t=$(".crownix-auth-lock[auth=Client], .crownix-auth-lock[auth=All]").removeClass("crownix-auth-lock"),i=0;i<t.length;i++)if(!$(t[i]).hasClass("crownix-formfield-blink-lock")||!$(t[i]).hasClass("crownix-field-lock"))if("submit"!==t[i].type){var r=t[i].getAttribute("formid")||t[i].getAttribute("formname"),n=t[i].getAttribute("name");"radio"===t[i].type&&(n=t[i].getAttribute("buttonid"));var o=e.formManager.getField(r,n);o.getEditable()&&("tf"==o.type?t[i].readOnly=!1:$(t[i]).attr("disabled",!1))}else t[i].disabled=!1;e.noteManager&&e.noteManager.unlock()}}),0)},T=function(t,e){var i;"cb"!=t&&"rb"!=t&&(i="im"==t?$("#"+e+"-canvas"):$("#"+e),"fl"==t&&i.siblings("input").addClass("crownix-formfield-blink-lock"),i.addClass("crownix-formfield-blink-lock"))},S=function(t,e){var i;"cb"!=t&&"rb"!=t&&(i="im"==t?$("#"+e+"-canvas"):$("#"+e),"im"!==t&&"sg"!==t&&("tf"==t?i.attr("readonly",!0):"fl"==t?(i.siblings("input").attr("disabled",!0).addClass("crownix-field-lock"),i.attr("disabled",!0)):i.attr("disabled",!0)),i.addClass("crownix-field-lock"))},E=function(t){if("scribble"==t.type)e.noteManager.addElement(t.xml,t.pageNo,t.pageNo==e.currentPage);else if("erase"==t.type)e.noteManager.removeElement(t.xml,t.pageNo,t.pageNo==e.currentPage);else if("clearElement"==t.type)t.pageNo==e.currentPage&&e.noteManager.clear(t.rebuild),e.noteManager.removeAllElement(t.pageNo);else if("text"==t.type)e.noteManager.addElement(t.xml,t.pageNo,t.pageNo==e.currentPage,t.oldXml),t.pageNo==e.currentPage&&e.noteManager.redrawTextBox(),d&&(e.noteManager.setShapeAttribute(d.attr),e.noteManager.setTool(d.tool),e.noteManager.setMode(d.mode),d=void 0),b=!1,e.noteManager.enableNote();else if("start"==t.type){if(t.pageNo!=e.currentPage)return;b=!0,d||(d={attr:$.extend(!0,{},e.noteManager.getShapeAttribute()),tool:e.noteManager.getToolName(),mode:e.noteManager.getMode()}),e.noteManager.setTool(t.tool),e.noteManager.setShapeAttribute(t.attribute),"text"==t.tool?e.noteManager.disableNote():(e.noteManager.draw(t),M(t.x,t.y))}else"clear"==t.type?t.pageNo==e.currentPage?e.noteManager.draw(t):e.noteManager.removeAllElement(t.pageNo):b&&(e.noteManager.draw(t),"end"==t.type&&(d&&(e.noteManager.setShapeAttribute(d.attr),e.noteManager.setTool(d.tool),e.noteManager.setMode(d.mode),d=void 0),b=!1))},M=function(t,i){var r=e.containerDom,n=e.scroll,o=(r.scrollLeft(),r.scrollTop(),r.offset());(v.browser.mobile||o.left>0||o.top>0)&&setTimeout((function(){var e=-t,r=45-i+$(document).scrollTop();e>0?e=0:e<n.maxScrollX&&(e=n.maxScrollX),r>0?r=0:r<n.maxScrollY&&(r=n.maxScrollY),n.scrollToKeepCenter(e,r,0)}),v.browser.mobile?500:0)},A=function(){a&&(r.on("reportList",(function(t){a.addReportList(t)})),r.on("newReport",(function(t){a.addReport(t.name,t.isPublic,1)})),r.on("renewUserCount",(function(t){a.renewUserCount(t.name,t.incCount)})),r.on("removeReport",(function(t){a.removeReport(t)}))),r.on("shareError",(function(t){e.dialog.show(f.get(t.message))})),r.on("openFile",(function(t){if(h=function(){e.isFormEditMode?e.viewer.importFormData(t.formData):e.drilldownManager.import(t.formData.drilldownInfo),1!=t.pageNo?e.viewer.movePage(t.pageNo):t.isLock?_():C(),setTimeout((function(){e.isFormEditMode&&function(t){for(var i=0;i<t.formData.formdata.form.length;i++)for(var r=t.formData.formdata.form[i],n=0;n<r.fields.field.length;n++){var o=r.fields.field[n];if(o.owner){var a=e.formManager.getField(r.id,o.id);T(a.type,a.elementId),S(a.type,a.elementId)}}}(t.formData),function(t){for(var e in t)t[e].forEach((function(t){E(t)}))}(t.noteData)}),0)},t.mrd.openMml)t.mrd.mml.drilldownInfo&&(t.mrd.mml.drilldownInfo=void 0),e.viewer.importMML(t.mrd.mml);else if(v.isArray(t.mrd.path)){for(var i=[],r=0;r<t.mrd.path.length;r++)i.push({mrdPath:t.mrd.path[r],mrdParam:t.mrd.param[r]});e.viewer.openFile(i,t.mrd.options)}else e.viewer.openFile(t.mrd.path,t.mrd.param,t.mrd.options)})),r.on("startSharing",(function(t){a&&a.close(),e.toolbar.toggleShareButton(!0),e.viewer.hideToolbarItem(["storage"]),"host"===t?(s||(s=new g(i,w)).createBtnDom(),l=!0,k()):l=!1})),r.on("formField",(function(t){var i=e.formManager.getField(t.formId,t.fieldId),r=e.formManager.getFieldWrapper(t.formId,t.fieldId);"cb"==i.type?r.setSelected(t.value,!0):"rg"==i.type?e.formManager.getFieldWrapper(t.formId,t.value).setSelected(!0,!0):"co"==i.type?i.setValueByIndex(t.value,e,t.formId):"fl"==i.type?i.setFileName(t.value,"sharing"):r.setValue(null===t.value?"":t.value,!0)})),r.on("focusOn",(function(t){var i=e.formManager.getField(t.formId,t.fieldId);if(T(i.type,i.elementId),S(i.type,i.elementId),!l&&t.isLock){var r=i.elementId;"rg"==i.type&&(r=i.buttonList[i.selectedId].elementId),m.getInstance().scrollToField($("#"+r))}})),r.on("focusOut",(function(t){var i=e.formManager.getField(t.formId,t.fieldId);!function(t,e){var i;"cb"!=t&&"rb"!=t&&(i="im"==t?$("#"+e+"-canvas"):$("#"+e),"fl"==t&&i.siblings("input").removeClass("crownix-formfield-blink-lock"),i.removeClass("crownix-formfield-blink-lock"))}(i.type,i.elementId),function(t,e,i){var r;"cb"!=t&&"rb"!=t&&((r="im"==t?$("#"+e+"-canvas"):$("#"+e)).hasClass("crownix-auth-lock")||!0!==i||"im"!==t&&"sg"!==t&&("tf"==t?r.attr("readonly",!1):"fl"==t?(r.siblings("input").attr("disabled",!1).removeClass("crownix-field-lock"),r.attr("disabled",!1)):r.attr("disabled",!1)),r.removeClass("crownix-field-lock"))}(i.type,i.elementId,i.getEditable())})),r.on("lockFields",(function(){_(),r.emit("focusOut"),m.getInstance().blur()})),r.on("unlockFields",(function(){C()})),r.on("note",(function(t){E(t)})),r.on("script",(function(t){!function(t){if("expandDrilldown"==t.name||"collapseDrilldown"==t.name)"expandDrilldown"==t.name?e.drilldownManager.open(t.id,t.option,!0):e.drilldownManager.close(t.id,!0);else{var i=e.formManager.getField(t.formId,t.fieldId),r=e.formManager.getFieldWrapper(t.formId,t.fieldId);"label"===t.name?r.setLabel(t.value,!0):"editable"===t.name?r.setEditable(t.value,!0):"required"===t.name?r.setRequired(t.value,!0):"cb"==i.type||"rb"==i.type&&"selected"===t.name?r.setSelected(t.value,!0):"rg"==i.type?e.formManager.getFieldWrapper(t.formId,t.value).setSelected(!0,!0):"co"==i.type?i.setValueByIndex(t.value,e,t.formId):r.setValue(t.value,!0)}}(t)})),r.on("movePage",(function(t){t!=e.currentPage&&e.viewer.movePage(t)})),r.on("syncFormData",(function(t){e.viewer.importFormData(t),r.emit("syncDone"),u=e.dialog.message(f.get("submit_formfield"),null,!0,e.options.submitMsgPosition)})),r.on("submitFinished",(function(t){for(var i=t.submitFormIds,r=e.formManager.getFormList(),n=[],o=0;o<i.length;o++){r[i[o]].unbindEvent(),r[i[o]].disableEdit(),r[i[o]].isSubmitted=!0;var a=r[i[o]].getFields();for(var s in a)n.push({formId:i[o],fieldId:s})}u.fadeOut(500,(function(){u.remove()})),e.formManager.isAllFormSubmitted()&&(e.toolbar.enableToolbarItem(["save","print","print_pdf","cloud_print"]),e.viewer.setPreventPrintExport(!1)),e.emit("submit-finished",t.result),e.formManager.saved(),e.dialog.show(f.get("submit_formfield_insert_ok"),null,(function(){m.getInstance().removeField(n),m.getInstance().blur(),$("[formid="+t.submitFormId+"][fieldid="+t.submitFieldId+"]").removeClass("crownix-dialog-button-action").attr("disabled",!0).off()}))})),r.on("submitFailed",(function(){u.fadeOut(500,(function(){u.remove()})),e.dialog.show(f.get("submit_formfield_insert_fail"))})),r.on("hostDoesNotExist",(function(t){r.close(),e.dialog.show(f.get(t))})),r.on("connect_timeout",(function(){e.dialog.show(f.get("request_timeout_error"))})),r.on("reconnect",(function(t){x&&r.emit("joinReport",{name:x.name,password:x.password,reconnect:!0,isHost:l},(function(t){x.name=t.name,x.password=t.password}))})),r.on("disconnect",(function(t){o.unbindEvent(),n&&clearTimeout(n),$(window).off("blur focus"),"transport close"===t?r.io.reconnect():"io client disconnect"===t&&x.name?e.viewer.initViewer():"ping timeout"===t?x.name?(e.viewer.initViewer(),e.dialog.show(f.get("share_stop_sharing"))):a.close():"transport error"===t&&e.dialog.show(f.get("request_server_error"))})),$(window).on("blur",o.setBlurTimeout).on("focus",o.setFocusTimeout),o.setFocusTimeout()},P=function(){var t=18e5,i=function(){n&&clearTimeout(n),n=x.name?setTimeout((function(){var n=setTimeout((function(){$("#aOverlay").remove(),$(".crownix-dialog-outer").remove(),r.close(),e.dialog.show(f.get("share_stop_sharing"))}),2e4);a(),e.dialog.show(f.get("share_session_timeout").replace("%s",t/6e4),null,(function(){o(),clearTimeout(n),i()}))}),t):setTimeout((function(){r.close(),e.dialog.show(f.get("share_stop_sharing"))}),t)},o=function(){$(document).on("mousemove touchend",i)},a=function(){$(document).off("mousemove touchend",i)};this.setIdleTime=function(e){t=e},this.getIdleTime=function(){return t},this.setBlurTimeout=function(){n&&clearTimeout(n),n=setTimeout((function(){r.close(),e.dialog.show(f.get("share_stop_sharing"))}),t)},this.setFocusTimeout=function(){i()},this.bindEvent=function(){o()},this.unbindEvent=function(){a()}},I=function(){return t&&!t.url?(e.dialog.show("no_share_server_url"),!1):(r=io.connect(t.url,{reconnection:t.reconnection||!1,"reconectionDelay ":2e4,reconnectionAttempts:3,timeout:t.timeout?1e3*t.timeout:2e4}),o||(o=new P),A(),!0)};this.disconnect=function(){confirm(f.get("share_disconnect_confirm"))&&(e.toolbar.toggleShareButton(!1),s&&s.removeBtnDom(),r.close())},this.createReport=function(i,n){if(y||r||I()){0!==i.replace(/(^\s*)|(\s*$)/gi,"").length?/\s/g.test(n)?e.dialog.show(f.get("share_not_allowed_space")):(null==t.mmlFromServer&&(t.mmlFromServer=!0),D("createReport",i,n)):e.dialog.show(f.get("share_need_report_title"))}};var D=function(i,n,a){var s={name:n,password:a,curPage:e.currentPage,mrd:{openMml:t.mmlFromServer}};e.isFormEditMode&&(s.formData=e.viewer.exportFormData({includeExtra:!0})),t.mmlFromServer?s.mrd.mml=e.viewer.exportMML({includeImage:!0}):(s.mrd.path=e.mrdPath,s.mrd.param=e.mrdParam,s.mrd.options=e.options),e.noteManager&&(s.noteData=JSON.stringify(e.noteManager.export(e.totalPage))),"createReport"===i?r.emit("createReport",s,(function(t){x.name=t.name,x.password=t.password,o.bindEvent(),o.setFocusTimeout(),e.emit("sharing-finished",x)})):(r.emit("reopenReport",s),o.bindEvent(),o.setFocusTimeout())};this.joinReport=function(t,e){(y||r||I())&&r.emit("joinReport",{name:t,password:e},(function(t){x.name=t.name,x.password=t.password,o.bindEvent(),o.setFocusTimeout()}))},this.sendFormField=function(t){r&&r.emit("formField",t)},this.sendFocusOnField=function(t,e){r&&r.emit("focusOn",{formId:t,fieldId:e})},this.sendFocusOutField=function(){r&&r.emit("focusOut")},this.sendLockFields=function(){r&&r.emit("lockFields")},this.sendUnlockFields=function(){r&&r.emit("unlockFields")},this.sendScript=function(t){r&&r.emit("script",t)},this.submitRequest=function(t,i,n,o){t,c=i,r.emit("submitRequest",n,(function(t){"done"===t?o():e.dialog.show(f.get(t))}))},this.submitFinished=function(t,e){var i=[];for(var n in e)i.push(n);r.emit("submitFinished",{submitFormIds:i,submitFormId:n,submitFieldId:c,result:t})},this.submitFailed=function(){r.emit("submitFailed"),e.dialog.show(f.get("submit_formfield_insert_fail"))},this.showDialog=function(){a=new p(e),I()&&a.show(r)},this.isHost=function(){return l},this.isConnected=function(){return!!r&&r.connected},this.sendNote=function(t){r&&(t.pageNo=e.currentPage,r.emit("note",t))},this.movePage=function(t){r&&r.emit("movePage",{isHost:l,page:t})},this.initFields=function(){r&&(k(),l||(_(),r.emit("isLock",(function(){C()}))))},this.unableLicense=function(){y=!0},this.relocateLockControl=function(){s&&s.relocate()},this.reportFinished=function(){l?D("reopenReport"):h&&h()},this.sendDrilldownInfo=function(){var t;r&&(t=e.isFormEditMode?e.viewer.exportFormData({includeExtra:!0}):{drilldownInfo:e.drilldownManager.export()},r.emit("drilldownInfo",t))},this.scrollToPos=function(t,e){M(t,e)}},m2soft.ns("m2soft.crownix.TextDialog"),m2soft.crownix.TextDialog=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b=m2soft.crownix.Resource,y=m2soft.crownix.Util,k=m2soft.crownix.util.Unit,_=m2soft.crownix.resource.Icon,C=[8,10,12,14,16,18,20,22,24,26,28,30],T=["#000000","#808080","#C0C0C0","#FFFFFF","#FFFF00","#00FF00","#00FFFF","#FF00FF","#FF0000","#008000","#0000FF","#000080","#800000","#808000","#008080","#800080"],S=function(t,e,a,s){i=t,r=e,n=a,o=s};S.prototype={showDialog:function(e,r){n(),function(){var t=$("<div>").addClass("crownix-textnote-dialog-modal").appendTo(i),e=$("<div>").addClass("crownix-textnote-dialog").appendTo(t);$("<textarea>").attr("placeholder",b.get("text_placeholder")).appendTo(e);var r=$("<div>").addClass("crownix-textnote-btnGroup").appendTo(e);$("<button>",{text:b.get("cancel_button_text")}).addClass("crownix-textnote-dialog-left").bind("click",H).appendTo(r),$("<button>",{text:b.get("text_attr")}).addClass("crownix-textnote-dialog-center").bind("click",U).appendTo(r),$("<button>",{text:b.get("ok_button_text")}).addClass("crownix-textnote-dialog-right").bind("click",W).appendTo(r);var n=$("<div>").addClass("crownix-textEdit-dialog").appendTo(t);$("<div>",{text:b.get("text_attr")}).addClass("crownix-textEdit-title").appendTo(n);var o=$("<div>").addClass("crownix-textEdit-layout").appendTo(n),d=($("<p>",{text:b.get("text_style")}).addClass("crownix-textEdit-subtitle").appendTo(o),$("<div>").addClass("crownix-textEdit-contents").appendTo(o)),h=$("<li>").appendTo(d);a=$("<div>",{text:"B"}).css("font-weight","bold").bind("click",M).appendTo(h);var p=$("<li>").appendTo(d);s=$("<div>",{text:"I"}).css("font-style","italic").bind("click",A).appendTo(p);var w=$("<li>").appendTo(d);l=$("<div>",{text:"U"}).css("text-decoration","underline").bind("click",P).appendTo(w);var x=$("<li>").appendTo(d);c=$("<div>",{text:"S"}).css("text-decoration","line-through").bind("click",I).appendTo(x);for(var y=$("<div>").addClass("crownix-textEdit-layout").appendTo(n),k=($("<p>",{text:b.get("text_font")}).addClass("crownix-textEdit-subtitle").appendTo(y),$("<div>").addClass("crownix-textEdit-font").appendTo(y)),S=$("<div>").addClass("crownix-textEdit-fontSize").appendTo(k),E=0,D=C.length;E<D;E++)$("<div>",{text:"Aa"}).data("fontSize",C[E]).css("font-size",C[E]+"pt").bind("click",L).appendTo(S);var B=$("<div>").addClass("crownix-textEdit-font").appendTo(y),q=$("<div>").addClass("crownix-textEdit-colorselector-mobile").appendTo(B);for(E=0,D=T.length;E<D;E++)$("<div>").data("fontColor",T[E]).css("background-color",T[E]).bind("click",F).appendTo(q);var j=$("<div>").addClass("crownix-textEdit-layout").appendTo(n),z=($("<p>",{text:b.get("text_align")}).addClass("crownix-textEdit-subtitle").appendTo(j),$("<div>").addClass("crownix-textEdit-contents").appendTo(j));g=$("<li>").prepend(_.LEFT_ALIGN).data("align","start").bind("click",N).appendTo(z),m=$("<li>").prepend(_.CENTER_ALIGN).data("align","middle").bind("click",N).appendTo(z),v=$("<li>").prepend(_.RIGHT_ALIGN).data("align","end").bind("click",N).appendTo(z);var G=$("<div>").addClass("crownix-textEdit-layout").appendTo(n),X=($("<p>",{text:b.get("textnote_format")}).addClass("crownix-textEdit-subtitle").appendTo(G),$("<div>").addClass("crownix-textEdit-contents").appendTo(G));u=$("<li>").prepend(_.OUTLINE).bind("click",O).appendTo(X),f=$("<li>").prepend(_.BACKGROUND).data("isTransparent",!1).bind("click",R).appendTo(X);var K=$("<div>").addClass("crownix-textnote-btnGroup").appendTo(n);$("<button>",{text:b.get("cancel_button_text")}).addClass("crownix-textnote-dialog-left").bind("click",Y).appendTo(K),$("<button>",{text:b.get("ok_button_text")}).addClass("crownix-textnote-dialog-right").bind("click",V).appendTo(K)}(),w=$(".crownix-textnote-dialog-modal textarea"),t=e,x=r,$(".crownix-textnote-dialog-modal").fadeIn(),$(".crownix-textnote-dialog").fadeIn(),w.focus(),""!=x.text?w.val(x.text):w.val(""),z(t)},showToolbar:function(i,r){t=i,e=r,function(){var i,r=$("<div>").addClass("crownix-textnote-toolbar").appendTo(t.parentNode);i=r,e.width()<$(i).offset().left-e.offset().left+$(i).width()?(i.offset().top-e.offset().top+i.height()+96>e.height()?(i.remove(),i=$("<div>").addClass("crownix-textnote-toolbar").prependTo(t.parentNode)):i.offset().top-e.offset().top+i.height()+96<=e.height()&&(i.remove(),i=$("<div>").addClass("crownix-textnote-toolbar").appendTo(t.parentNode)),$(i).css({float:"right"})):e.width()>=$(i).offset().left-e.offset().left+$(i).width()&&(i.offset().top-e.offset().top+i.height()+96>e.height()?(i.remove(),i=$("<div>").addClass("crownix-textnote-toolbar").prependTo(t.parentNode)):i.offset().top-e.offset().top+i.height()+96<=e.height()&&(i.remove(),i=$("<div>").addClass("crownix-textnote-toolbar").appendTo(t.parentNode)),$(i).css({float:"left"})),r=i.bind("click",E);var n=$("<li>").appendTo(r);a=$("<div>",{text:"B",title:b.get("mask_dialog_bold")}).css("font-weight","bold").bind("click",M).appendTo(n);var o=$("<li>").appendTo(r);s=$("<div>",{text:"I",title:b.get("text_italic")}).css("font-style","italic").bind("click",A).appendTo(o);var w=$("<li>").appendTo(r);l=$("<div>",{text:"U",title:b.get("text_underline")}).css("text-decoration","underline").bind("click",P).appendTo(w);var x=$("<li>").appendTo(r);c=$("<div>",{text:"S",title:b.get("text_strike")}).css("text-decoration","line-through").bind("click",I).appendTo(x),$("<div>").addClass("crownix-textnote-separator").appendTo(r),d=$("<li>").attr("title",b.get("text_fontsize")).appendTo(r);for(var y=$("<select>").data("isClick",!1).bind("click",L).bind("change",q).appendTo(d),k=0,S=C.length;k<S;k++)$("<option>",{text:C[k]}).appendTo(y);h=$("<li>").attr("title",b.get("text_fontcolor")).prepend(_.FONT_COLOR).bind("click",D).appendTo(r),$("<div>").addClass("crownix-textnote-separator").appendTo(r),p=$("<li>").attr("title",b.get("text_align")).prepend(_.LEFT_ALIGN).bind("click",B).appendTo(r),$("<div>").addClass("crownix-textnote-separator").appendTo(r),u=$("<li>").attr("title",b.get("text_outline")).prepend(_.OUTLINE).bind("click",O).appendTo(r),f=$("<li>").attr("title",b.get("text_background")).prepend(_.BACKGROUND).bind("click",R).appendTo(r);var j=$("<div>").addClass("crownix-textnote-colorselector").appendTo(r);for(k=0,S=T.length;k<S;k++)$("<div>").data("fontColor",T[k]).css("background-color",T[k]).bind("click",F).appendTo(j);var z=$("<div>").addClass("crownix-textnote-alignselector").appendTo(r);v=$("<div>").attr("title",b.get("text_rightalign")).prepend(_.RIGHT_ALIGN).data("align","end").bind("click",N).appendTo(z),m=$("<div>").attr("title",b.get("text_centeralign")).prepend(_.CENTER_ALIGN).data("align","middle").bind("click",N).appendTo(z),g=$("<div>").attr("title",b.get("text_leftalign")).prepend(_.LEFT_ALIGN).data("align","start").bind("click",N).appendTo(z)}(),z(t)},destroyDialog:function(){$(".crownix-textnote-dialog-modal").remove()}};var E=function(e){"SELECT"!=e.target.nodeName&&$(t).focus()},M=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),a.hasClass("button-selected")?($(t).css("font-weight",""),a.removeClass("button-selected")):($(t).css("font-weight","bold"),a.addClass("button-selected"))},A=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),s.hasClass("button-selected")?($(t).css("font-style",""),s.removeClass("button-selected")):($(t).css("font-style","italic"),s.addClass("button-selected"))},P=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),l.hasClass("button-selected")?($(t).attr("text-decoration",""),$(t).css("text-decoration",""),l.removeClass("button-selected")):($(t).attr("text-decoration","underline"),$(t).css("text-decoration","underline"),l.addClass("button-selected"),c.removeClass("button-selected"))},I=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),c.hasClass("button-selected")?($(t).attr("text-decoration",""),$(t).css("text-decoration",""),c.removeClass("button-selected")):($(t).attr("text-decoration","line-through"),$(t).css("text-decoration","line-through"),c.addClass("button-selected"),l.removeClass("button-selected"))},D=function(t){$(".crownix-textnote-alignselector").fadeOut((function(){"none"==$(".crownix-textnote-colorselector").css("display")?($(".crownix-textnote-colorselector").fadeIn(),$(".crownix-textnote-colorselector").css("zIndex",1)):($(".crownix-textnote-colorselector").fadeOut(),$(".crownix-textnote-colorselector").css("zIndex",""))}))},F=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut();var i=e?$(e.target).data("fontColor"):$(t).css("color");$(t).css("color",i),y.browser.mobile?($(".crownix-textEdit-colorselector-mobile div").removeClass("fontColor-selected"),$(e.target).addClass("fontColor-selected"),h=$(e.target)):$(".crownix-textnote-fontcolor").css({stroke:i})},O=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),u.hasClass("button-selected")?($(t).css("border",""),$(t).attr("border",""),u.removeClass("button-selected")):($(t).css("border","solid #000000"),$(t).attr("border","solid #000000"),u.addClass("button-selected"))},R=function(e){y.browser.mobile||$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),f.hasClass("button-selected")?($(t).css("background-color",""),$(t).attr("background-color",""),f.removeClass("button-selected")):($(t).css("background-color","transparent"),$(t).attr("background-color","transparent"),f.addClass("button-selected"))},B=function(t){y.browser.mobile||$(".crownix-textnote-colorselector").fadeOut((function(){"none"==$(".crownix-textnote-alignselector").css("display")?($(".crownix-textnote-alignselector").fadeIn(),$(".crownix-textnote-alignselector").css("zIndex",1)):($(".crownix-textnote-alignselector").fadeOut(),$(".crownix-textnote-alignselector").css("zIndex",""))}))},N=function(e){y.browser.mobile||$(".crownix-textnote-alignselector").fadeOut(),g.removeClass("button-selected"),m.removeClass("button-selected"),v.removeClass("button-selected"),$(e.currentTarget).addClass("button-selected"),"start"==$(e.currentTarget).data("align")?($(t).css("text-align","left"),p&&(p.children("svg").remove(),p.prepend(_.LEFT_ALIGN))):"middle"==$(e.currentTarget).data("align")?($(t).css("text-align","center"),p&&(p.children("svg").remove(),p.prepend(_.CENTER_ALIGN))):"end"==$(e.currentTarget).data("align")&&($(t).css("text-align","right"),p&&(p.children("svg").remove(),p.prepend(_.RIGHT_ALIGN))),$(t).val($(t).val())},L=function(e){y.browser.mobile?($(t).css("font-size",$(e.currentTarget).data("fontSize")+"pt"),d=$(e.currentTarget),$(".crownix-textEdit-fontSize div").removeClass("fontSize-selected"),$(e.currentTarget).addClass("fontSize-selected")):($(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut(),$(e.currentTarget).data("isClick")?($(e.currentTarget).data("isClick",!1),$(t).focus()):$(e.currentTarget).data("isClick",!0))},q=function(e){$(t).css("font-size",e.target.value+"pt"),$(t).focus()},j=function(){y.browser.mobile&&(a.hasClass("button-selected")?w.css("font-weight","bold"):w.css("font-weight",""),s.hasClass("button-selected")?w.css("font-style","italic"):w.css("font-style",""),l.hasClass("button-selected")?w.css("text-decoration","underline"):c.hasClass("button-selected")?w.css("text-decoration","line-through"):w.css("text-decoration","none"),u.hasClass("button-selected")?(w.css("border","solid #000000"),w.attr("border","solid #000000")):(w.css("border","none"),w.attr("border","none")),f.hasClass("button-selected")?(w.css("background-color","transparent"),w.attr("background-color","transparent")):(w.css("background-color",""),w.attr("background-color","")),m.hasClass("button-selected")?w.css("text-align","center"):v.hasClass("button-selected")?w.css("text-align","right"):w.css("text-align","left"),w.css("font-size",d.data("fontSize")+"pt"),w.css("color",h.data("fontColor")))},z=function(t){"bold"==$(t).css("font-weight")?a.addClass("button-selected"):a.removeClass("button-selected"),"italic"==$(t).css("font-style")?s.addClass("button-selected"):s.removeClass("button-selected"),"underline"==$(t).css("text-decoration")?l.addClass("button-selected"):l.removeClass("button-selected"),"line-through"==$(t).css("text-decoration")?c.addClass("button-selected"):c.removeClass("button-selected"),-1!=$(t).css("border").indexOf("solid")?u.addClass("button-selected"):u.removeClass("button-selected"),"transparent"==$(t).attr("background-color")?f.addClass("button-selected"):f.removeClass("button-selected"),v.removeClass("button-selected"),g.removeClass("button-selected"),m.removeClass("button-selected"),p&&p.children("svg").remove(),"center"==$(t).css("text-align")?(m.addClass("button-selected"),p&&p.prepend(_.CENTER_ALIGN)):"right"==$(t).css("text-align")?(v.addClass("button-selected"),p&&p.prepend(_.RIGHT_ALIGN)):(g.addClass("button-selected"),p&&p.prepend(_.LEFT_ALIGN));var e=parseInt($(t).css("font-size")?Math.round(k.pxToPt(parseInt($(t).css("font-size")))):"12");if(y.browser.mobile){d=null;for(var i=0,r=$(".crownix-textEdit-fontSize div").length;i<r;i++){var n=$(".crownix-textEdit-fontSize div")[i];$(n).removeClass("fontSize-selected"),$(n).data("fontSize")==e&&($(n).addClass("fontSize-selected"),d=$(n))}d||(d=$(".crownix-textEdit-fontSize")).data("fontSize",e)}else d.children("select").val(e);if(y.browser.mobile){var o=$(t).css("color")?Raphael.color($(t).css("color")).hex:"#000000";for(i=0,r=$(".crownix-textEdit-colorselector-mobile div").length;i<r;i++){var w=$(".crownix-textEdit-colorselector-mobile div")[i];$(w).removeClass("fontColor-selected"),$(w).data("fontColor").toLowerCase()==o.toLowerCase()&&($(w).addClass("fontColor-selected"),h=$(w))}}else F();j()},H=function(){$(".crownix-textnote-dialog-modal").fadeOut(),$(".crownix-textEdit-dialog").fadeOut(),$(".crownix-textnote-dialog-modal").remove(),o()},U=function(){$(".crownix-textnote-dialog").fadeOut((function(){$(".crownix-textEdit-dialog").fadeIn(),z(w)}))},V=function(){$(".crownix-textEdit-dialog").fadeOut((function(){$(".crownix-textnote-dialog").fadeIn(),w.focus(),j()}))},W=function(){$(".crownix-textnote-dialog-modal").fadeOut(),$(".crownix-textEdit-dialog").fadeOut(),r.textareaToSvg(x,w),$(".crownix-textnote-dialog-modal").remove()},Y=function(){$(".crownix-textEdit-dialog").fadeOut((function(){$(".crownix-textnote-dialog").fadeIn(),w.focus()}))};return S}(),m2soft.ns("m2soft.crownix.Runtime"),m2soft.crownix.Runtime=function(){var t=[];this.addColumn=function(e,i,r){return t.push({objectName:e,width:i,option:r,cellInfos:[]}),this},this.addCell=function(e,i,r,n,o,a,s,l){return t[t.length-1].cellInfos.push({index:e,title:i,variable:r,summarize:n,command:o,attribute:a,option:s,refField:l}),this},this.toJson=function(){return t.length>0?JSON.stringify({columnInfos:t}):""}},m2soft.ns("m2soft.crownix.Forgery"),function(){var t,e=m2soft.crownix.Forgery,i=function(t){if(!function(t){var e=t.target,i=$(e),r=t.data.isFormEdit,n=t.originalEvent&&(t.originalEvent.srcElement||t.originalEvent.originalTarget);return!!i.hasClass("crownix-pagenum")||"svg"==e.tagName||i.parents("svg").length>0||"A"==e.tagName||"a"==e.tagName||!(!n||"crownix_focus_mark"!==n.id&&"crownix-virtual-cursor"!==n.className)||!!(e.id&&"m2soft-crownix-normal-button"===e.id||("img"===e.tagName.toLowerCase()||"span"===e.tagName.toLowerCase())&&e.parentElement&&"m2soft-crownix-normal-button"===e.parentElement.id||e.id&&"m2soft-crownix-normal-combo"===e.id)||!!r&&(e.id&&0==e.id.indexOf("crownix_form_field_")||i.parents('[id^="crownix_form_field_"]').length>0||i.attr("for")&&0==i.attr("for").indexOf("crownix_form_field_")||i.parents('[for^="crownix_form_field_"]').length>0||e.id&&"m2soft-crownix-field-wrapper"===e.id)}(t)){var i="Not Approved",r=t.data.text,n=r.width(),o=r.height(),a=Math.min(n,o)/8,s="#CB1111",l=t.data.canvas,c=l.getContext("2d"),d=$("<div>").attr({id:"crownix-forgery-mark"}).css({position:"absolute",color:s,"font-family":"Arial","font-size":a+"px",transform:"rotate(330deg)"}).text(i);r.off("DOMSubtreeModified"),d.appendTo(r),d.css({left:n/2-d.width()/2+"px",top:o/2-d.height()/2+"px"}),c.save(),c.translate(n/2,o/2),c.rotate(11/6*Math.PI),c.font=a+"px Arial",c.textAlign="center",c.textBaseline="middle",c.fillStyle=s,c.fillText(i,0,0),c.restore(),e.detect(r,l,t.data.isFormEdit)}};m2soft.crownix.Forgery.detect=function(e,r,n){return clearTimeout(t),t=setTimeout((function(){var t=$._data(e[0],"events");t&&t.DOMSubtreeModified||e.on("DOMSubtreeModified",{text:e,canvas:r,isFormEdit:n},i)}),1e3)}}(),m2soft.ns("m2soft.crownix.CanvasManager"),m2soft.crownix.CanvasManager=function(t){var e,i,r,n,o,a,s,l,c,d=m2soft.crownix.Util,h=0,u=0;this.saveParts=function(){if(n){var t=e.getContext("2d"),i=r.scale,d=h*i,f=u*i,p=e.width,g=e.height;o=t.getImageData(0,0,p,g),h>0&&u>0?(a=t.getImageData(0,0,d,f),s=t.getImageData(d,0,p,f),l=t.getImageData(0,f,d,g),c=t.getImageData(d,f,p,g)):h>0?(a=t.getImageData(0,0,d,g),s=t.getImageData(d,0,p,g)):u>0&&(a=t.getImageData(0,0,p,f),l=t.getImageData(0,f,p,g))}},this.moveParts=function(){if(n&&(0!=r.maxScrollX||0!=r.maxScrollY)){var t=e.getContext("2d"),i=r.scale,o=h*i,d=u*i,f=r.x<0?Math.abs(r.x):0,p=r.y<0?Math.abs(r.y):0,g=e.width,m=e.height;t.save(),t.scale(1,1),t.clearRect(0,0,g,m),t.restore(),h>0&&u>0?(t.putImageData(c,o,d,f,p,g,m),t.putImageData(s,o,p,f,0,g,m),t.putImageData(l,f,d,0,p,g,m),t.putImageData(a,f,p)):h>0?(t.putImageData(s,o,0,f,0,g,m),t.putImageData(a,f,0)):u>0&&(t.putImageData(l,0,d,0,p,g,m),t.putImageData(a,0,p))}},this.restore=function(){if(n){var t=e.getContext("2d");r.scale,e.width,e.height;t.putImageData(o,0,0)}},this.setPage=function(t,o,a,s,l){e=s[0],r=l,i=a;var c=$(o.getPage(t)).find("FL");void 0!==c?(h=c.attr("fx")?c.attr("fx")/10.3-4.8:0,u=c.attr("fy")?c.attr("fy")/10.3:0,h>0||u>0?(n=!0,r.options.momentum=!1,r.options.bounce=!1):n=!1):n=!1,$(a).on(d.browser.mobile?"touchend":"click",(function(t){if(!r.moved){var e=r.scale,i=d.browser.mobile?(t.originalEvent.pageX-a.offset().left)/e:t.offsetX,n=d.browser.mobile?(t.originalEvent.pageY-a.offset().top)/e:t.offsetY,o=$(t.target);isNaN(i)||isNaN(n)||(r.x<0&&i+r.x/e<h&&(i+=r.x/e),r.y<0&&n+r.y/e<u&&(n+=r.y/e),i*=e,n*=e,o.find("a").each((function(t,r){var o=$(this),a=o.position(),s=o.width()*e,l=o.height()*e;i>a.left&&i<a.left+s&&n>a.top&&n<a.top+l&&o.find("div").trigger("click")})))}}))},this.transformCanvas=function(){if(e){var t=-$(i).width()/2*(r.scale-1),n=-$(i).height()/2*(r.scale-1);$(e).css("transform","translate("+t+"px, "+n+"px) scale("+1/r.scale+")")}},this.redraw=function(n,o,a,s,l,c,d,h){e=l[0],r=d,i=s;var u=$(o.getPage(n)),f=o.getHeadForPage(n),p=u.attr("wd")/10.3,g=u.attr("ht")/10.3,m=e.getContext("2d"),v=r.scale;e.width=p*v,e.height=g*v,m.fillStyle="#FFFFFF",m.fillRect(0,0,e.width,e.height),m.scale(v,v),this.transformCanvas(),$(s).children().remove(),r.disable(),h(e,s,u,f,(function(){t.drilldownManager.updateInfo(n,u,a,s,l,c),t.drilldownManager.reload(n),t.ttsManager&&t.ttsManager.makeParagraphs(u),a.css("visibility","visible")}))}},function(t){var e,i,r="0.4.2",n="hasOwnProperty",o=/[\.\/]/,a=function(){},s=function(t,e){return t-e},l={n:{}},c=function(t,r){t=String(t);var n,o=i,a=Array.prototype.slice.call(arguments,2),l=c.listeners(t),d=0,h=[],u={},f=[],p=e;e=t,i=0;for(var g=0,m=l.length;m>g;g++)"zIndex"in l[g]&&(h.push(l[g].zIndex),l[g].zIndex<0&&(u[l[g].zIndex]=l[g]));for(h.sort(s);h[d]<0;)if(n=u[h[d++]],f.push(n.apply(r,a)),i)return i=o,f;for(g=0;m>g;g++)if("zIndex"in(n=l[g]))if(n.zIndex==h[d]){if(f.push(n.apply(r,a)),i)break;do{if((n=u[h[++d]])&&f.push(n.apply(r,a)),i)break}while(n)}else u[n.zIndex]=n;else if(f.push(n.apply(r,a)),i)break;return i=o,e=p,f.length?f:null};c._events=l,c.listeners=function(t){var e,i,r,n,a,s,c,d,h=t.split(o),u=l,f=[u],p=[];for(n=0,a=h.length;a>n;n++){for(d=[],s=0,c=f.length;c>s;s++)for(i=[(u=f[s].n)[h[n]],u["*"]],r=2;r--;)(e=i[r])&&(d.push(e),p=p.concat(e.f||[]));f=d}return p},c.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var i=t.split(o),r=l,n=0,s=i.length;s>n;n++)r=(r=r.n).hasOwnProperty(i[n])&&r[i[n]]||(r[i[n]]={n:{}});for(r.f=r.f||[],n=0,s=r.f.length;s>n;n++)if(r.f[n]==e)return a;return r.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},c.f=function(t){var e=[].slice.call(arguments,1);return function(){c.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},c.stop=function(){i=1},c.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},c.nts=function(){return e.split(o)},c.off=c.unbind=function(t,e){if(t){var i,r,a,s,d,h,u,f=t.split(o),p=[l];for(s=0,d=f.length;d>s;s++)for(h=0;h<p.length;h+=a.length-2){if(a=[h,1],i=p[h].n,"*"!=f[s])i[f[s]]&&a.push(i[f[s]]);else for(r in i)i[n](r)&&a.push(i[r]);p.splice.apply(p,a)}for(s=0,d=p.length;d>s;s++)for(i=p[s];i.n;){if(e){if(i.f){for(h=0,u=i.f.length;u>h;h++)if(i.f[h]==e){i.f.splice(h,1);break}!i.f.length&&delete i.f}for(r in i.n)if(i.n[n](r)&&i.n[r].f){var g=i.n[r].f;for(h=0,u=g.length;u>h;h++)if(g[h]==e){g.splice(h,1);break}!g.length&&delete i.n[r].f}}else for(r in delete i.f,i.n)i.n[n](r)&&i.n[r].f&&delete i.n[r].f;i=i.n}}else c._events=l={n:{}}},c.once=function(t,e){var i=function(){return c.unbind(t,i),e.apply(this,arguments)};return c.on(t,i)},c.version=r,c.toString=function(){return"You are running Eve "+r},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],(function(){return c})):t.eve=c}(this),function(t,e){"function"==typeof define&&define.amd?define(["eve"],(function(i){return e(t,i)})):e(t,t.eve)}(this,(function(t,e){function i(t){if(i.is(t,"function"))return x?t():e.on("raphael.DOMload",t);if(i.is(t,G))return i._engine.create[P](i,t.splice(0,3+i.is(t[0],W))).add(t);var r=Array.prototype.slice.call(arguments,0);if(i.is(r[r.length-1],"function")){var n=r.pop();return x?n.call(i._engine.create[P](i,r)):e.on("raphael.DOMload",(function(){n.call(i._engine.create[P](i,r))}))}return i._engine.create[P](i,arguments)}function r(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[S](i)&&(e[i]=r(t[i]));return e}function n(t,e){for(var i=0,r=t.length;r>i;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function o(t,e,i){return function r(){var o=Array.prototype.slice.call(arguments,0),a=o.join("␀"),s=r.cache=r.cache||{},l=r.count=r.count||[];return s[S](a)?(n(l,a),i?i(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=t[P](e,o),i?i(s[a]):s[a])}}function a(){return this.hex}function s(t,e){for(var i=[],r=0,n=t.length;n-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?n-4==r?o[3]={x:+t[0],y:+t[1]}:n-2==r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[n-2],y:+t[n-1]}:n-4==r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}function l(t,e,i,r,n){return t*(t*(-3*e+9*i-9*r+3*n)+6*e-12*i+6*r)-3*e+3*i}function c(t,e,i,r,n,o,a,s,c){null==c&&(c=1);for(var d=(c=c>1?1:0>c?0:c)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],u=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;12>p;p++){var g=d*h[p]+d,m=l(g,t,i,n,a),v=l(g,e,r,o,s),w=m*m+v*v;f+=u[p]*q.sqrt(w)}return d*f}function d(t,e,i,r,n,o,a,s){if(!(j(t,i)<z(n,a)||z(t,i)>j(n,a)||j(e,r)<z(o,s)||z(e,r)>j(o,s))){var l=(t-i)*(o-s)-(e-r)*(n-a);if(l){var c=((t*r-e*i)*(n-a)-(t-i)*(n*s-o*a))/l,d=((t*r-e*i)*(o-s)-(e-r)*(n*s-o*a))/l,h=+c.toFixed(2),u=+d.toFixed(2);if(!(h<+z(t,i).toFixed(2)||h>+j(t,i).toFixed(2)||h<+z(n,a).toFixed(2)||h>+j(n,a).toFixed(2)||u<+z(e,r).toFixed(2)||u>+j(e,r).toFixed(2)||u<+z(o,s).toFixed(2)||u>+j(o,s).toFixed(2)))return{x:c,y:d}}}}function h(t,e,r){var n=i.bezierBBox(t),o=i.bezierBBox(e);if(!i.isBBoxIntersect(n,o))return r?0:[];for(var a=c.apply(0,t),s=c.apply(0,e),l=j(~~(a/5),1),h=j(~~(s/5),1),u=[],f=[],p={},g=r?0:[],m=0;l+1>m;m++){var v=i.findDotsAtSegment.apply(i,t.concat(m/l));u.push({x:v.x,y:v.y,t:m/l})}for(m=0;h+1>m;m++)v=i.findDotsAtSegment.apply(i,e.concat(m/h)),f.push({x:v.x,y:v.y,t:m/h});for(m=0;l>m;m++)for(var w=0;h>w;w++){var x=u[m],b=u[m+1],y=f[w],k=f[w+1],_=H(b.x-x.x)<.001?"y":"x",C=H(k.x-y.x)<.001?"y":"x",T=d(x.x,x.y,b.x,b.y,y.x,y.y,k.x,k.y);if(T){if(p[T.x.toFixed(4)]==T.y.toFixed(4))continue;p[T.x.toFixed(4)]=T.y.toFixed(4);var S=x.t+H((T[_]-x[_])/(b[_]-x[_]))*(b.t-x.t),E=y.t+H((T[C]-y[C])/(k[C]-y[C]))*(k.t-y.t);S>=0&&1.001>=S&&E>=0&&1.001>=E&&(r?g++:g.push({x:T.x,y:T.y,t1:z(S,1),t2:z(E,1)}))}}return g}function u(t,e,r){t=i._path2curve(t),e=i._path2curve(e);for(var n,o,a,s,l,c,d,u,f,p,g=r?0:[],m=0,v=t.length;v>m;m++){var w=t[m];if("M"==w[0])n=l=w[1],o=c=w[2];else{"C"==w[0]?(f=[n,o].concat(w.slice(1)),n=f[6],o=f[7]):(f=[n,o,n,o,l,c,l,c],n=l,o=c);for(var x=0,b=e.length;b>x;x++){var y=e[x];if("M"==y[0])a=d=y[1],s=u=y[2];else{"C"==y[0]?(p=[a,s].concat(y.slice(1)),a=p[6],s=p[7]):(p=[a,s,a,s,d,u,d,u],a=d,s=u);var k=h(f,p,r);if(r)g+=k;else{for(var _=0,C=k.length;C>_;_++)k[_].segment1=m,k[_].segment2=x,k[_].bez1=f,k[_].bez2=p;g=g.concat(k)}}}}}return g}function f(t,e,i,r,n,o){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+r,this.e=+n,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+O+this.y+O+this.width+" × "+this.height}function g(t,e,i,r,n,o){function a(t){return((d*t+c)*t+l)*t}var s,l=3*e,c=3*(r-e)-l,d=1-l-c,h=3*i,u=3*(n-i)-h,f=1-h-u;return s=function(t,e){var i,r,n,o,s,h;for(n=t,h=0;8>h;h++){if(o=a(n)-t,H(o)<e)return n;if(H(s=(3*d*n+2*c)*n+l)<1e-6)break;n-=o/s}if(r=1,(i=0)>(n=t))return i;if(n>r)return r;for(;r>i;){if(o=a(n),H(o-t)<e)return n;t>o?i=n:r=n,n=(r-i)/2+i}return n}(t,1/(200*o)),((f*s+u)*s+h)*s}function m(t,e){var i=[],r={};if(this.ms=e,this.times=1,t){for(var n in t)t[S](n)&&(r[tt(n)]=t[n],i.push(tt(n)));i.sort(ut)}this.anim=r,this.top=i[i.length-1],this.percents=i}function v(t,r,n,o,a,s){n=tt(n);var l,c,d,h,u,p,m=t.ms,v={},w={},x={};if(o)for(y=0,k=se.length;k>y;y++){var b=se[y];if(b.el.id==r.id&&b.anim==t){b.percent!=n?(se.splice(y,1),d=1):c=b,r.attr(b.totalOrigin);break}}else o=+w;for(var y=0,k=t.percents.length;k>y;y++){if(t.percents[y]==n||t.percents[y]>o*t.top){n=t.percents[y],u=t.percents[y-1]||0,m=m/t.top*(n-u),h=t.percents[y+1],l=t.anim[n];break}o&&r.attr(t.anim[t.percents[y]])}if(l){if(c)c.initstatus=o,c.start=new Date-c.ms*o;else{for(var C in l)if(l[S](C)&&(nt[S](C)||r.paper.customAttributes[S](C)))switch(v[C]=r.attr(C),null==v[C]&&(v[C]=rt[C]),w[C]=l[C],nt[C]){case W:x[C]=(w[C]-v[C])/m;break;case"colour":v[C]=i.getRGB(v[C]);var T=i.getRGB(w[C]);x[C]={r:(T.r-v[C].r)/m,g:(T.g-v[C].g)/m,b:(T.b-v[C].b)/m};break;case"path":var E=Bt(v[C],w[C]),M=E[1];for(v[C]=E[0],x[C]=[],y=0,k=v[C].length;k>y;y++){x[C][y]=[0];for(var A=1,P=v[C][y].length;P>A;A++)x[C][y][A]=(M[y][A]-v[C][y][A])/m}break;case"transform":var D=r._,F=jt(D[C],w[C]);if(F)for(v[C]=F.from,w[C]=F.to,x[C]=[],x[C].real=!0,y=0,k=v[C].length;k>y;y++)for(x[C][y]=[v[C][y][0]],A=1,P=v[C][y].length;P>A;A++)x[C][y][A]=(w[C][y][A]-v[C][y][A])/m;else{var O=r.matrix||new f,$={_:{transform:D.transform},getBBox:function(){return r.getBBox(1)}};v[C]=[O.a,O.b,O.c,O.d,O.e,O.f],Lt($,w[C]),w[C]=$._.transform,x[C]=[($.matrix.a-O.a)/m,($.matrix.b-O.b)/m,($.matrix.c-O.c)/m,($.matrix.d-O.d)/m,($.matrix.e-O.e)/m,($.matrix.f-O.f)/m]}break;case"csv":var N=R(l[C])[B](_),L=R(v[C])[B](_);if("clip-rect"==C)for(v[C]=L,x[C]=[],y=L.length;y--;)x[C][y]=(N[y]-v[C][y])/m;w[C]=N;break;default:for(N=[][I](l[C]),L=[][I](v[C]),x[C]=[],y=r.paper.customAttributes[C].length;y--;)x[C][y]=((N[y]||0)-(L[y]||0))/m}var q=l.easing,j=i.easing_formulas[q];if(!j)if((j=R(q).match(J))&&5==j.length){var z=j;j=function(t){return g(t,+z[1],+z[2],+z[3],+z[4],m)}}else j=ft;if(b={anim:t,percent:n,timestamp:p=l.start||t.start||+new Date,start:p+(t.del||0),status:0,initstatus:o||0,stop:!1,ms:m,easing:j,from:v,diff:x,to:w,el:r,callback:l.callback,prev:u,next:h,repeat:s||t.times,origin:r.attr(),totalOrigin:a},se.push(b),o&&!c&&!d&&(b.stop=!0,b.start=new Date-m*o,1==se.length))return ce();d&&(b.start=new Date-b.ms*o),1==se.length&&le(ce)}e("raphael.anim.start."+r.id,r,t)}}function w(t){for(var e=0;e<se.length;e++)se[e].el.paper==t&&se.splice(e--,1)}i.version="2.1.2",i.eve=e;var x,b,y,k,_=/[, ]+/,C={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},T=/\{(\d+)\}/g,S="hasOwnProperty",E={doc:document,win:t},M={was:Object.prototype[S].call(E.win,"Raphael"),is:E.win.Raphael},A=function(){this.ca=this.customAttributes={}},P="apply",I="concat",D="ontouchstart"in E.win||E.win.DocumentTouch&&E.doc instanceof DocumentTouch,F="",O=" ",R=String,B="split",$="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[B](O),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},L=R.prototype.toLowerCase,q=Math,j=q.max,z=q.min,H=q.abs,U=q.pow,V=q.PI,W="number",Y="string",G="array",X=Object.prototype.toString,K=(i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Z={NaN:1,Infinity:1,"-Infinity":1},J=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=q.round,tt=parseFloat,et=parseInt,it=R.prototype.toUpperCase,rt=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},nt=i._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},ot=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,at={hs:1,rg:1},st=/,?([achlmqrstvxz]),?/gi,lt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,dt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ht=(i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(t,e){return tt(t)-tt(e)},ft=function(t){return t},pt=i._rectPath=function(t,e,i,r,n){return n?[["M",t+n,e],["l",i-2*n,0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-i,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-r],["a",n,n,0,0,1,n,-n],["z"]]:[["M",t,e],["l",i,0],["l",0,r],["l",-i,0],["z"]]},gt=function(t,e,i,r){return null==r&&(r=i),[["M",t,e],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]]},mt=i._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return gt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return gt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return pt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return pt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return pt(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return pt(e.x,e.y,e.width,e.height)}},vt=i.mapPath=function(t,e){if(!e)return t;var i,r,n,o,a,s,l;for(n=0,a=(t=Bt(t)).length;a>n;n++)for(o=1,s=(l=t[n]).length;s>o;o+=2)i=e.x(l[o],l[o+1]),r=e.y(l[o],l[o+1]),l[o]=i,l[o+1]=r;return t};if(i._g=E,i.type=E.win.SVGAngle||E.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==i.type){var wt,xt=E.doc.createElement("div");if(xt.innerHTML='<v:shape adj="1"/>',(wt=xt.firstChild).style.behavior="url(#default#VML)",!wt||"object"!=typeof wt.adj)return i.type=F;xt=null}i.svg=!(i.vml="VML"==i.type),i._Paper=A,i.fn=b=A.prototype=i.prototype,i._id=0,i._oid=0,i.is=function(t,e){return"finite"==(e=L.call(e))?!Z[S](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||X.call(t).slice(8,-1).toLowerCase()==e},i.angle=function(t,e,r,n,o,a){if(null==o){var s=t-r,l=e-n;return s||l?(180+180*q.atan2(-l,-s)/V+360)%360:0}return i.angle(t,e,o,a)-i.angle(r,n,o,a)},i.rad=function(t){return t%360*V/180},i.deg=function(t){return 180*t/V%360},i.snapTo=function(t,e,r){if(r=i.is(r,"finite")?r:10,i.is(t,G)){for(var n=t.length;n--;)if(H(t[n]-e)<=r)return t[n]}else{var o=e%(t=+t);if(r>o)return e-o;if(o>t-r)return e-o+t}return e},i.createUUID=(y=/[xy]/g,k=function(t){var e=0|16*q.random();return("x"==t?e:8|3&e).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(y,k).toUpperCase()}),i.setWindow=function(t){e("raphael.setWindow",i,E.win,t),E.win=t,E.doc=E.win.document,i._engine.initWin&&i._engine.initWin(E.win)};var bt=function(t){if(i.vml){var e,r=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(t){e=createPopup().document.body}var a=e.createTextRange();bt=o((function(t){try{e.style.color=R(t).replace(r,F);var i=a.queryCommandValue("ForeColor");return"#"+("000000"+(i=(255&i)<<16|65280&i|(16711680&i)>>>16).toString(16)).slice(-6)}catch(t){return"none"}}))}else{var s=E.doc.createElement("i");s.title="Raphaël Colour Picker",s.style.display="none",E.doc.body.appendChild(s),bt=o((function(t){return s.style.color=t,E.doc.defaultView.getComputedStyle(s,F).getPropertyValue("color")}))}return bt(t)},yt=function(){return"hsb("+[this.h,this.s,this.b]+")"},kt=function(){return"hsl("+[this.h,this.s,this.l]+")"},_t=function(){return this.hex},Ct=function(t,e,r){if(null==e&&i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,e=t.g,t=t.r),null==e&&i.is(t,Y)){var n=i.getRGB(t);t=n.r,e=n.g,r=n.b}return(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255),[t,e,r]},Tt=function(t,e,r,n){var o={r:t*=255,g:e*=255,b:r*=255,hex:i.rgb(t,e,r),toString:_t};return i.is(n,"finite")&&(o.opacity=n),o};i.color=function(t){var e;return i.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=i.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):i.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=i.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(i.is(t,"string")&&(t=i.getRGB(t)),i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=i.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=i.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=_t,t},i.hsb2rgb=function(t,e,i,r){var n,o,a,s,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,r=(t=t.h).o),s=(l=i*e)*(1-H((t=(t*=360)%360/60)%2-1)),n=o=a=i-l,Tt(n+=[l,s,0,0,s,l][t=~~t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],r)},i.hsl2rgb=function(t,e,i,r){var n,o,a,s,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),s=(l=2*e*(.5>i?i:1-i))*(1-H((t=(t*=360)%360/60)%2-1)),n=o=a=i-l/2,Tt(n+=[l,s,0,0,s,l][t=~~t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],r)},i.rgb2hsb=function(t,e,i){var r,n;return t=(i=Ct(t,e,i))[0],e=i[1],i=i[2],{h:((0==(n=(r=j(t,e,i))-z(t,e,i))?null:r==t?(e-i)/n:r==e?(i-t)/n+2:(t-e)/n+4)+360)%6*60/360,s:0==n?0:n/r,b:r,toString:yt}},i.rgb2hsl=function(t,e,i){var r,n,o,a;return t=(i=Ct(t,e,i))[0],e=i[1],i=i[2],r=((n=j(t,e,i))+(o=z(t,e,i)))/2,{h:((0==(a=n-o)?null:n==t?(e-i)/a:n==e?(i-t)/a+2:(t-e)/a+4)+360)%6*60/360,s:0==a?0:.5>r?a/(2*r):a/(2-2*r),l:r,toString:kt}},i._path2string=function(){return this.join(",").replace(st,"$1")},i._preload=function(t,e){var i=E.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,E.doc.body.removeChild(this)},i.onerror=function(){E.doc.body.removeChild(this)},E.doc.body.appendChild(i),i.src=t},i.getRGB=o((function(t){if(!t||(t=R(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!at[S](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=bt(t));var e,r,n,o,s,l,c=t.match(K);return c?(c[2]&&(n=et(c[2].substring(5),16),r=et(c[2].substring(3,5),16),e=et(c[2].substring(1,3),16)),c[3]&&(n=et((s=c[3].charAt(3))+s,16),r=et((s=c[3].charAt(2))+s,16),e=et((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][B](ot),e=tt(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=tt(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),n=tt(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=tt(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][B](ot),e=tt(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=tt(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),n=tt(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=tt(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),i.hsb2rgb(e,r,n,o)):c[6]?(l=c[6][B](ot),e=tt(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=tt(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),n=tt(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=tt(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),i.hsl2rgb(e,r,n,o)):((c={r:e,g:r,b:n,toString:a}).hex="#"+(16777216|n|r<<8|e<<16).toString(16).slice(1),i.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}}),i),i.hsb=o((function(t,e,r){return i.hsb2rgb(t,e,r).hex})),i.hsl=o((function(t,e,r){return i.hsl2rgb(t,e,r).hex})),i.rgb=o((function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)})),i.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=function(t){if(!t)return null;var e=St(t);if(e.arr)return Mt(e.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return i.is(t,G)&&i.is(t[0],G)&&(n=Mt(t)),n.length||R(t).replace(lt,(function(t,e,i){var o=[],a=e.toLowerCase();if(i.replace(dt,(function(t,e){e&&o.push(+e)})),"m"==a&&o.length>2&&(n.push([e][I](o.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)n.push([e][I](o));else for(;o.length>=r[a]&&(n.push([e][I](o.splice(0,r[a]))),r[a]););})),n.toString=i._path2string,e.arr=Mt(n),n},i.parseTransformString=o((function(t){if(!t)return null;var e=[];return i.is(t,G)&&i.is(t[0],G)&&(e=Mt(t)),e.length||R(t).replace(ct,(function(t,i,r){var n=[];L.call(i),r.replace(dt,(function(t,e){e&&n.push(+e)})),e.push([i][I](n))})),e.toString=i._path2string,e}));var St=function(t){var e=St.ps=St.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var i in e)e[S](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])})),e[t]};i.findDotsAtSegment=function(t,e,i,r,n,o,a,s,l){var c=1-l,d=U(c,3),h=U(c,2),u=l*l,f=u*l,p=d*t+3*h*l*i+3*c*l*l*n+f*a,g=d*e+3*h*l*r+3*c*l*l*o+f*s,m=t+2*l*(i-t)+u*(n-2*i+t),v=e+2*l*(r-e)+u*(o-2*r+e),w=i+2*l*(n-i)+u*(a-2*n+i),x=r+2*l*(o-r)+u*(s-2*o+r),b=c*t+l*i,y=c*e+l*r,k=c*n+l*a,_=c*o+l*s,C=90-180*q.atan2(m-w,v-x)/V;return(m>w||x>v)&&(C+=180),{x:p,y:g,m:{x:m,y:v},n:{x:w,y:x},start:{x:b,y},end:{x:k,y:_},alpha:C}},i.bezierBBox=function(t,e,r,n,o,a,s,l){i.is(t,"array")||(t=[t,e,r,n,o,a,s,l]);var c=Rt.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},i.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},i.isBBoxIntersect=function(t,e){var r=i.isPointInsideBBox;return r(e,t.x,t.y)||r(e,t.x2,t.y)||r(e,t.x,t.y2)||r(e,t.x2,t.y2)||r(t,e.x,e.y)||r(t,e.x2,e.y)||r(t,e.x,e.y2)||r(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},i.pathIntersection=function(t,e){return u(t,e)},i.pathIntersectionNumber=function(t,e){return u(t,e,1)},i.isPointInsidePath=function(t,e,r){var n=i.pathBBox(t);return i.isPointInsideBBox(n,e,r)&&1==u(t,[["M",e,r],["H",n.x2+10]],1)%2},i._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Et=i.pathBBox=function(t){var e=St(t);if(e.bbox)return r(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,n=0,o=0,a=[],s=[],l=0,c=(t=Bt(t)).length;c>l;l++)if("M"==(i=t[l])[0])n=i[1],o=i[2],a.push(n),s.push(o);else{var d=Rt(n,o,i[1],i[2],i[3],i[4],i[5],i[6]);a=a[I](d.min.x,d.max.x),s=s[I](d.min.y,d.max.y),n=i[5],o=i[6]}var h=z[P](0,a),u=z[P](0,s),f=j[P](0,a),p=j[P](0,s),g=f-h,m=p-u,v={x:h,y:u,x2:f,y2:p,width:g,height:m,cx:h+g/2,cy:u+m/2};return e.bbox=r(v),v},Mt=function(t){var e=r(t);return e.toString=i._path2string,e},At=i._pathToRelative=function(t){var e=St(t);if(e.rel)return Mt(e.rel);i.is(t,G)&&i.is(t&&t[0],G)||(t=i.parsePathString(t));var r=[],n=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(a=n=t[0][1],s=o=t[0][2],l++,r.push(["M",n,o]));for(var c=l,d=t.length;d>c;c++){var h=r[c]=[],u=t[c];if(u[0]!=L.call(u[0]))switch(h[0]=L.call(u[0]),h[0]){case"a":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+(u[6]-n).toFixed(3),h[7]=+(u[7]-o).toFixed(3);break;case"v":h[1]=+(u[1]-o).toFixed(3);break;case"m":a=u[1],s=u[2];default:for(var f=1,p=u.length;p>f;f++)h[f]=+(u[f]-(f%2?n:o)).toFixed(3)}else{h=r[c]=[],"m"==u[0]&&(a=u[1]+n,s=u[2]+o);for(var g=0,m=u.length;m>g;g++)r[c][g]=u[g]}var v=r[c].length;switch(r[c][0]){case"z":n=a,o=s;break;case"h":n+=+r[c][v-1];break;case"v":o+=+r[c][v-1];break;default:n+=+r[c][v-2],o+=+r[c][v-1]}}return r.toString=i._path2string,e.rel=Mt(r),r},Pt=i._pathToAbsolute=function(t){var e=St(t);if(e.abs)return Mt(e.abs);if(i.is(t,G)&&i.is(t&&t[0],G)||(t=i.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r=[],n=0,o=0,a=0,l=0,c=0;"M"==t[0][0]&&(a=n=+t[0][1],l=o=+t[0][2],c++,r[0]=["M",n,o]);for(var d,h,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),f=c,p=t.length;p>f;f++){if(r.push(d=[]),(h=t[f])[0]!=it.call(h[0]))switch(d[0]=it.call(h[0]),d[0]){case"A":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]+n),d[7]=+(h[7]+o);break;case"V":d[1]=+h[1]+o;break;case"H":d[1]=+h[1]+n;break;case"R":for(var g=[n,o][I](h.slice(1)),m=2,v=g.length;v>m;m++)g[m]=+g[m]+n,g[++m]=+g[m]+o;r.pop(),r=r[I](s(g,u));break;case"M":a=+h[1]+n,l=+h[2]+o;default:for(m=1,v=h.length;v>m;m++)d[m]=+h[m]+(m%2?n:o)}else if("R"==h[0])g=[n,o][I](h.slice(1)),r.pop(),r=r[I](s(g,u)),d=["R"][I](h.slice(-2));else for(var w=0,x=h.length;x>w;w++)d[w]=h[w];switch(d[0]){case"Z":n=a,o=l;break;case"H":n=d[1];break;case"V":o=d[1];break;case"M":a=d[d.length-2],l=d[d.length-1];default:n=d[d.length-2],o=d[d.length-1]}}return r.toString=i._path2string,e.abs=Mt(r),r},It=function(t,e,i,r){return[t,e,i,r,i,r]},Dt=function(t,e,i,r,n,o){var a=1/3,s=2/3;return[a*t+s*i,a*e+s*r,a*n+s*i,a*o+s*r,n,o]},Ft=function(t,e,i,r,n,a,s,l,c,d){var h,u=120*V/180,f=V/180*(+n||0),p=[],g=o((function(t,e,i){return{x:t*q.cos(i)-e*q.sin(i),y:t*q.sin(i)+e*q.cos(i)}}));if(d)C=d[0],T=d[1],k=d[2],_=d[3];else{t=(h=g(t,e,-f)).x,e=h.y,l=(h=g(l,c,-f)).x,c=h.y;var m=(q.cos(V/180*n),q.sin(V/180*n),(t-l)/2),v=(e-c)/2,w=m*m/(i*i)+v*v/(r*r);w>1&&(i*=w=q.sqrt(w),r*=w);var x=i*i,b=r*r,y=(a==s?-1:1)*q.sqrt(H((x*b-x*v*v-b*m*m)/(x*v*v+b*m*m))),k=y*i*v/r+(t+l)/2,_=y*-r*m/i+(e+c)/2,C=q.asin(((e-_)/r).toFixed(9)),T=q.asin(((c-_)/r).toFixed(9));0>(C=k>t?V-C:C)&&(C=2*V+C),0>(T=k>l?V-T:T)&&(T=2*V+T),s&&C>T&&(C-=2*V),!s&&T>C&&(T-=2*V)}var S=T-C;if(H(S)>u){var E=T,M=l,A=c;T=C+u*(s&&T>C?1:-1),l=k+i*q.cos(T),c=_+r*q.sin(T),p=Ft(l,c,i,r,n,0,s,M,A,[T,E,k,_])}S=T-C;var P=q.cos(C),D=q.sin(C),F=q.cos(T),O=q.sin(T),R=q.tan(S/4),$=4/3*i*R,N=4/3*r*R,L=[t,e],j=[t+$*D,e-N*P],z=[l+$*O,c-N*F],U=[l,c];if(j[0]=2*L[0]-j[0],j[1]=2*L[1]-j[1],d)return[j,z,U][I](p);for(var W=[],Y=0,G=(p=[j,z,U][I](p).join()[B](",")).length;G>Y;Y++)W[Y]=Y%2?g(p[Y-1],p[Y],f).y:g(p[Y],p[Y+1],f).x;return W},Ot=function(t,e,i,r,n,o,a,s,l){var c=1-l;return{x:U(c,3)*t+3*U(c,2)*l*i+3*c*l*l*n+U(l,3)*a,y:U(c,3)*e+3*U(c,2)*l*r+3*c*l*l*o+U(l,3)*s}},Rt=o((function(t,e,i,r,n,o,a,s){var l,c=n-2*i+t-(a-2*n+i),d=2*(i-t)-2*(n-i),h=t-i,u=(-d+q.sqrt(d*d-4*c*h))/2/c,f=(-d-q.sqrt(d*d-4*c*h))/2/c,p=[e,s],g=[t,a];return H(u)>"1e12"&&(u=.5),H(f)>"1e12"&&(f=.5),u>0&&1>u&&(l=Ot(t,e,i,r,n,o,a,s,u),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Ot(t,e,i,r,n,o,a,s,f),g.push(l.x),p.push(l.y)),c=o-2*r+e-(s-2*o+r),h=e-r,u=(-(d=2*(r-e)-2*(o-r))+q.sqrt(d*d-4*c*h))/2/c,f=(-d-q.sqrt(d*d-4*c*h))/2/c,H(u)>"1e12"&&(u=.5),H(f)>"1e12"&&(f=.5),u>0&&1>u&&(l=Ot(t,e,i,r,n,o,a,s,u),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Ot(t,e,i,r,n,o,a,s,f),g.push(l.x),p.push(l.y)),{min:{x:z[P](0,g),y:z[P](0,p)},max:{x:j[P](0,g),y:j[P](0,p)}}})),Bt=i._path2curve=o((function(t,e){var i=!e&&St(t);if(!e&&i.curve)return Mt(i.curve);for(var r=Pt(t),n=e&&Pt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(t,e,i){var r,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][I](Ft[P](0,[e.x,e.y][I](t.slice(1))));break;case"S":"C"==i||"S"==i?(r=2*e.x-e.bx,n=2*e.y-e.by):(r=e.x,n=e.y),t=["C",r,n][I](t.slice(1));break;case"T":"Q"==i||"T"==i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][I](Dt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][I](Dt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][I](It(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][I](It(e.x,e.y,t[1],e.y));break;case"V":t=["C"][I](It(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][I](It(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][I](i.splice(0,6)));t.splice(e,1),h=j(r.length,n&&n.length||0)}},c=function(t,e,i,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=t[a][1],i.y=t[a][2],h=j(r.length,n&&n.length||0))},d=0,h=j(r.length,n&&n.length||0);h>d;d++){r[d]=s(r[d],o),l(r,d),n&&(n[d]=s(n[d],a)),n&&l(n,d),c(r,n,o,a,d),c(n,r,a,o,d);var u=r[d],f=n&&n[d],p=u.length,g=n&&f.length;o.x=u[p-2],o.y=u[p-1],o.bx=tt(u[p-4])||o.x,o.by=tt(u[p-3])||o.y,a.bx=n&&(tt(f[g-4])||a.x),a.by=n&&(tt(f[g-3])||a.y),a.x=n&&f[g-2],a.y=n&&f[g-1]}return n||(i.curve=Mt(r)),n?[r,n]:r}),null,Mt),$t=(i._parseDots=o((function(t){for(var e=[],r=0,n=t.length;n>r;r++){var o={},a=t[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=i.getRGB(a[1]),o.color.error)return null;o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),e.push(o)}for(r=1,n=e.length-1;n>r;r++)if(!e[r].offset){for(var s=tt(e[r-1].offset||0),l=0,c=r+1;n>c;c++)if(e[c].offset){l=e[c].offset;break}l||(l=100,c=n);for(var d=((l=tt(l))-s)/(c-r+1);c>r;r++)s+=d,e[r].offset=s+"%"}return e})),i._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Nt=(i._tofront=function(t,e){e.top!==t&&($t(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},i._toback=function(t,e){e.bottom!==t&&($t(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},i._insertafter=function(t,e,i){$t(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},i._insertbefore=function(t,e,i){$t(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},i.toMatrix=function(t,e){var i=Et(t),r={_:{transform:F},getBBox:function(){return i}};return Lt(r,e),r.matrix}),Lt=(i.transformPath=function(t,e){return vt(t,Nt(t,e))},i._extractTransform=function(t,e){if(null==e)return t._.transform;e=R(e).replace(/\.{3}|\u2026/g,t._.transform||F);var r,n,o=i.parseTransformString(e),a=0,s=1,l=1,c=t._,d=new f;if(c.transform=o||[],o)for(var h=0,u=o.length;u>h;h++){var p,g,m,v,w,x=o[h],b=x.length,y=R(x[0]).toLowerCase(),k=x[0]!=y,_=k?d.invert():0;"t"==y&&3==b?k?(p=_.x(0,0),g=_.y(0,0),m=_.x(x[1],x[2]),v=_.y(x[1],x[2]),d.translate(m-p,v-g)):d.translate(x[1],x[2]):"r"==y?2==b?(w=w||t.getBBox(1),d.rotate(x[1],w.x+w.width/2,w.y+w.height/2),a+=x[1]):4==b&&(k?(m=_.x(x[2],x[3]),v=_.y(x[2],x[3]),d.rotate(x[1],m,v)):d.rotate(x[1],x[2],x[3]),a+=x[1]):"s"==y?2==b||3==b?(w=w||t.getBBox(1),d.scale(x[1],x[b-1],w.x+w.width/2,w.y+w.height/2),s*=x[1],l*=x[b-1]):5==b&&(k?(m=_.x(x[3],x[4]),v=_.y(x[3],x[4]),d.scale(x[1],x[2],m,v)):d.scale(x[1],x[2],x[3],x[4]),s*=x[1],l*=x[2]):"m"==y&&7==b&&d.add(x[1],x[2],x[3],x[4],x[5],x[6]),c.dirtyT=1,t.matrix=d}t.matrix=d,c.sx=s,c.sy=l,c.deg=a,c.dx=r=d.e,c.dy=n=d.f,1==s&&1==l&&!a&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+n):c.dirtyT=1}),qt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},jt=i._equaliseTransform=function(t,e){e=R(e).replace(/\.{3}|\u2026/g,t),t=i.parseTransformString(t)||[],e=i.parseTransformString(e)||[];for(var r,n,o,a,s=j(t.length,e.length),l=[],c=[],d=0;s>d;d++){if(o=t[d]||qt(e[d]),a=e[d]||qt(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(l[d]=[],c[d]=[],r=0,n=j(o.length,a.length);n>r;r++)r in o&&(l[d][r]=o[r]),r in a&&(c[d][r]=a[r])}return{from:l,to:c}};i._getContainer=function(t,e,r,n){var o;return null!=(o=null!=n||i.is(t,"object")?t:E.doc.getElementById(t))?o.tagName?null==e?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:e,height:r}:{container:1,x:t,y:e,width:r,height:n}:void 0},i.pathToRelative=At,i._engine={},i.path2curve=Bt,i.matrix=function(t,e,i,r,n,o){return new f(t,e,i,r,n,o)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function r(t){var i=q.sqrt(e(t));t[0]&&(t[0]/=i),t[1]&&(t[1]/=i)}t.add=function(t,e,i,r,n,o){var a,s,l,c,d=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],u=[[t,i,n],[e,r,o],[0,0,1]];for(t&&t instanceof f&&(u=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;3>a;a++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=h[a][l]*u[l][s];d[a][s]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new f(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,r){null==e&&(e=t),(i||r)&&this.add(1,0,0,1,i,r),this.add(t,0,0,e,0,0),(i||r)&&this.add(1,0,0,1,-i,-r)},t.rotate=function(t,e,r){t=i.rad(t),e=e||0,r=r||0;var n=+q.cos(t).toFixed(9),o=+q.sin(t).toFixed(9);this.add(n,o,-o,n,e,r),this.add(1,0,0,1,-e,-r)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[R.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=q.sqrt(e(n[0])),r(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=q.sqrt(e(n[1])),r(n[1]),t.shear/=t.scaley;var o=-n[0][1],a=n[1][1];return 0>a?(t.rotate=i.deg(q.acos(a)),0>o&&(t.rotate=360-t.rotate)):t.rotate=i.deg(q.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[B]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:F)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:F)+(e.rotate?"r"+[e.rotate,0,0]:F)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(f.prototype);var zt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);b.safari="Apple Computer, Inc."==navigator.vendor&&(zt&&zt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&zt&&zt[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout((function(){t.remove()}))}:function(){};for(var Ht=function(){this.returnValue=!1},Ut=function(){return this.originalEvent.preventDefault()},Vt=function(){this.cancelBubble=!0},Wt=function(){return this.originalEvent.stopPropagation()},Yt=function(t){var e=E.doc.documentElement.scrollTop||E.doc.body.scrollTop,i=E.doc.documentElement.scrollLeft||E.doc.body.scrollLeft;return{x:t.clientX+i,y:t.clientY+e}},Gt=E.doc.addEventListener?function(t,e,i,r){var n=function(t){var e=Yt(t);return i.call(r,t,e.x,e.y)};return t.addEventListener(e,n,!1),D&&N[e]&&t.addEventListener(N[e],(function(e){for(var n=Yt(e),o=e,a=0,s=e.targetTouches&&e.targetTouches.length;s>a;a++)if(e.targetTouches[a].target==t){(e=e.targetTouches[a]).originalEvent=o,e.preventDefault=Ut,e.stopPropagation=Wt;break}return i.call(r,e,n.x,n.y)}),!1),function(){return t.removeEventListener(e,n,!1),D&&N[e]&&t.removeEventListener(N[e],n,!1),!0}}:E.doc.attachEvent?function(t,e,i,r){var n=function(t){t=t||E.win.event;var e=E.doc.documentElement.scrollTop||E.doc.body.scrollTop,n=E.doc.documentElement.scrollLeft||E.doc.body.scrollLeft,o=t.clientX+n,a=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||Vt,i.call(r,t,o,a)};return t.attachEvent("on"+e,n),function(){return t.detachEvent("on"+e,n),!0}}:void 0,Xt=[],Kt=function(t){for(var i,r=t.clientX,n=t.clientY,o=E.doc.documentElement.scrollTop||E.doc.body.scrollTop,a=E.doc.documentElement.scrollLeft||E.doc.body.scrollLeft,s=Xt.length;s--;){if(i=Xt[s],D&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==i.el._drag.id){r=l.clientX,n=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var d,h=i.el.node,u=h.nextSibling,f=h.parentNode,p=h.style.display;E.win.opera&&f.removeChild(h),h.style.display="none",d=i.el.paper.getElementByPoint(r,n),h.style.display=p,E.win.opera&&(u?f.insertBefore(h,u):f.appendChild(h)),d&&e("raphael.drag.over."+i.el.id,i.el,d),r+=a,n+=o,e("raphael.drag.move."+i.el.id,i.move_scope||i.el,r-i.el._drag.x,n-i.el._drag.y,r,n,t)}},Zt=function(t){i.unmousemove(Kt).unmouseup(Zt);for(var r,n=Xt.length;n--;)(r=Xt[n]).el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t);Xt=[]},Jt=i.el={},Qt=$.length;Qt--;)!function(t){i[t]=Jt[t]=function(e,r){return i.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Gt(this.shape||this.node||E.doc,t,e,r||this)})),this},i["un"+t]=Jt["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)r[n].name!=t||!i.is(e,"undefined")&&r[n].f!=e||(r[n].unbind(),r.splice(n,1),!r.length&&delete this.events);return this}}($[Qt]);Jt.data=function(t,r){var n=ht[this.id]=ht[this.id]||{};if(0==arguments.length)return n;if(1==arguments.length){if(i.is(t,"object")){for(var o in t)t[S](o)&&this.data(o,t[o]);return this}return e("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=r,e("raphael.data.set."+this.id,this,r,t),this},Jt.removeData=function(t){return null==t?ht[this.id]={}:ht[this.id]&&delete ht[this.id][t],this},Jt.getData=function(){return r(ht[this.id]||{})},Jt.hover=function(t,e,i,r){return this.mouseover(t,i).mouseout(e,r||i)},Jt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var te=[];Jt.drag=function(t,r,n,o,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,d=l.clientY,h=E.doc.documentElement.scrollTop||E.doc.body.scrollTop,u=E.doc.documentElement.scrollLeft||E.doc.body.scrollLeft;if(this._drag.id=l.identifier,D&&l.touches)for(var f,p=l.touches.length;p--;)if(f=l.touches[p],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,d=f.clientY;break}this._drag.x=c+u,this._drag.y=d+h,!Xt.length&&i.mousemove(Kt).mouseup(Zt),Xt.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),t&&e.on("raphael.drag.move."+this.id,t),n&&e.on("raphael.drag.end."+this.id,n),e("raphael.drag.start."+this.id,a||o||this,l.clientX+u,l.clientY+h,l)}return this._drag={},te.push({el:this,start:l}),this.mousedown(l),this},Jt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Jt.undrag=function(){for(var t=te.length;t--;)te[t].el==this&&(this.unmousedown(te[t].start),te.splice(t,1),e.unbind("raphael.drag.*."+this.id));!te.length&&i.unmousemove(Kt).unmouseup(Zt),Xt=[]},b.circle=function(t,e,r){var n=i._engine.circle(this,t||0,e||0,r||0);return this.__set__&&this.__set__.push(n),n},b.rect=function(t,e,r,n,o){var a=i._engine.rect(this,t||0,e||0,r||0,n||0,o||0);return this.__set__&&this.__set__.push(a),a},b.ellipse=function(t,e,r,n){var o=i._engine.ellipse(this,t||0,e||0,r||0,n||0);return this.__set__&&this.__set__.push(o),o},b.path=function(t){t&&!i.is(t,Y)&&!i.is(t[0],G)&&(t+=F);var e=i._engine.path(i.format[P](i,arguments),this);return this.__set__&&this.__set__.push(e),e},b.image=function(t,e,r,n,o){var a=i._engine.image(this,t||"about:blank",e||0,r||0,n||0,o||0);return this.__set__&&this.__set__.push(a),a},b.text=function(t,e,r){var n=i._engine.text(this,t||0,e||0,R(r));return this.__set__&&this.__set__.push(n),n},b.set=function(t){!i.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(){var t=this.__set__;return delete this.__set__,t},b.setSize=function(t,e){return i._engine.setSize.call(this,t,e)},b.setViewBox=function(t,e,r,n,o){return i._engine.setViewBox.call(this,t,e,r,n,o)},b.top=b.bottom=null,b.raphael=i;b.getElementByPoint=function(t,e){var i=this,r=i.canvas,n=E.doc.elementFromPoint(t,e);if(E.win.opera&&"svg"==n.tagName){var o=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,r=i.body,n=i.documentElement,o=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0;return{y:e.top+(E.win.pageYOffset||n.scrollTop||r.scrollTop)-o,x:e.left+(E.win.pageXOffset||n.scrollLeft||r.scrollLeft)-a}}(r),a=r.createSVGRect();a.x=t-o.x,a.y=e-o.y,a.width=a.height=1;var s=r.getIntersectionList(a,null);s.length&&(n=s[s.length-1])}if(!n)return null;for(;n.parentNode&&n!=r.parentNode&&!n.raphael;)n=n.parentNode;return n==i.canvas.parentNode&&(n=r),n&&n.raphael?i.getById(n.raphaelid):null},b.getElementsByBBox=function(t){var e=this.set();return this.forEach((function(r){i.isBBoxIntersect(r.getBBox(),t)&&e.push(r)})),e},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var i=this.bottom;i;){if(!1===t.call(e,i))return this;i=i.next}return this},b.getElementsByPoint=function(t,e){var i=this.set();return this.forEach((function(r){r.isPointInside(t,e)&&i.push(r)})),i},Jt.isPointInside=function(t,e){var r=this.realPath=mt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=i.transformPath(r,this.attr("transform"))),i.isPointInsidePath(r,t,e)},Jt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=mt[this.type](this),e.bboxwt=Et(this.realPath),e.bboxwt.toString=p,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=mt[this.type](this)),e.bbox=Et(vt(this.realPath,this.matrix)),e.bbox.toString=p,e.dirty=e.dirtyT=0),e.bbox)},Jt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Jt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,r=this.paper,n=r.set(),o=this.realPath||mt[this.type](this);o=this.matrix?vt(o,this.matrix):o;for(var a=1;i+1>a;a++)n.push(r.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*a).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return n.insertBefore(this).translate(e.offsetx,e.offsety)};var ee=function(t,e,r,n,o,a,s,l,d){return null==d?c(t,e,r,n,o,a,s,l):i.findDotsAtSegment(t,e,r,n,o,a,s,l,function(t,e,i,r,n,o,a,s,l){if(!(0>l||c(t,e,i,r,n,o,a,s)<l)){var d,h=.5,u=1-h;for(d=c(t,e,i,r,n,o,a,s,u);H(d-l)>.01;)d=c(t,e,i,r,n,o,a,s,u+=(l>d?1:-1)*(h/=2));return u}}(t,e,r,n,o,a,s,l,d))},ie=function(t,e){return function(r,n,o){for(var a,s,l,c,d,h="",u={},f=0,p=0,g=(r=Bt(r)).length;g>p;p++){if("M"==(l=r[p])[0])a=+l[1],s=+l[2];else{if(f+(c=ee(a,s,l[1],l[2],l[3],l[4],l[5],l[6]))>n){if(e&&!u.start){if(h+=["C"+(d=ee(a,s,l[1],l[2],l[3],l[4],l[5],l[6],n-f)).start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],o)return h;u.start=h,h=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),f+=c,a=+l[5],s=+l[6];continue}if(!t&&!e)return{x:(d=ee(a,s,l[1],l[2],l[3],l[4],l[5],l[6],n-f)).x,y:d.y,alpha:d.alpha}}f+=c,a=+l[5],s=+l[6]}h+=l.shift()+l}return u.end=h,(d=t?f:e?u:i.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},re=ie(1),ne=ie(),oe=ie(0,1);i.getTotalLength=re,i.getPointAtLength=ne,i.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return oe(t,e).end;var r=oe(t,i,1);return e?oe(r,e).end:r},Jt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():re(t)},Jt.getPointAtLength=function(t){var e=this.getPath();if(e)return ne(e,t)},Jt.getPath=function(){var t,e=i._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Jt.getSubpath=function(t,e){var r=this.getPath();if(r)return i.getSubpath(r,t,e)};var ae=i.easing_formulas={linear:function(t){return t},"<":function(t){return U(t,1.7)},">":function(t){return U(t,.48)},"<>":function(t){var e=.48-t/1.04,i=q.sqrt(.1734+e*e),r=i-e,n=-i-e,o=U(H(r),1/3)*(0>r?-1:1)+U(H(n),1/3)*(0>n?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:U(2,-10*t)*q.sin(2*(t-.075)*V/.3)+1},bounce:function(t){var e,i=7.5625,r=2.75;return 1/r>t?e=i*t*t:2/r>t?e=i*(t-=1.5/r)*t+.75:2.5/r>t?e=i*(t-=2.25/r)*t+.9375:e=i*(t-=2.625/r)*t+.984375,e}};ae.easeIn=ae["ease-in"]=ae["<"],ae.easeOut=ae["ease-out"]=ae[">"],ae.easeInOut=ae["ease-in-out"]=ae["<>"],ae["back-in"]=ae.backIn,ae["back-out"]=ae.backOut;var se=[],le=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ce=function(){for(var t=+new Date,r=0;r<se.length;r++){var n=se[r];if(!n.el.removed&&!n.paused){var o,a,s=t-n.start,l=n.ms,c=n.easing,d=n.from,h=n.diff,u=n.to,f=(n.t,n.el),p={},g={};if(n.initstatus?(s=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*l,n.status=n.initstatus,delete n.initstatus,n.stop&&se.splice(r--,1)):n.status=(n.prev+(n.percent-n.prev)*(s/l))/n.anim.top,!(0>s))if(l>s){var m=c(s/l);for(var w in d)if(d[S](w)){switch(nt[w]){case W:o=+d[w]+m*l*h[w];break;case"colour":o="rgb("+[de(Q(d[w].r+m*l*h[w].r)),de(Q(d[w].g+m*l*h[w].g)),de(Q(d[w].b+m*l*h[w].b))].join(",")+")";break;case"path":o=[];for(var x=0,b=d[w].length;b>x;x++){o[x]=[d[w][x][0]];for(var y=1,k=d[w][x].length;k>y;y++)o[x][y]=+d[w][x][y]+m*l*h[w][x][y];o[x]=o[x].join(O)}o=o.join(O);break;case"transform":if(h[w].real)for(o=[],x=0,b=d[w].length;b>x;x++)for(o[x]=[d[w][x][0]],y=1,k=d[w][x].length;k>y;y++)o[x][y]=d[w][x][y]+m*l*h[w][x][y];else{var _=function(t){return+d[w][t]+m*l*h[w][t]};o=[["m",_(0),_(1),_(2),_(3),_(4),_(5)]]}break;case"csv":if("clip-rect"==w)for(o=[],x=4;x--;)o[x]=+d[w][x]+m*l*h[w][x];break;default:var C=[][I](d[w]);for(o=[],x=f.paper.customAttributes[w].length;x--;)o[x]=+C[x]+m*l*h[w][x]}p[w]=o}f.attr(p),function(t,i,r){setTimeout((function(){e("raphael.anim.frame."+t,i,r)}))}(f.id,f,n.anim)}else{if(function(t,r,n){setTimeout((function(){e("raphael.anim.frame."+r.id,r,n),e("raphael.anim.finish."+r.id,r,n),i.is(t,"function")&&t.call(r)}))}(n.callback,f,n.anim),f.attr(u),se.splice(r--,1),n.repeat>1&&!n.next){for(a in u)u[S](a)&&(g[a]=n.totalOrigin[a]);n.el.attr(g),v(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&v(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}i.svg&&f&&f.paper&&f.paper.safari(),se.length&&le(ce)},de=function(t){return t>255?255:0>t?0:t};Jt.animateWith=function(t,e,r,n,o,a){var s=this;if(s.removed)return a&&a.call(s),s;var l=r instanceof m?r:i.animation(r,n,o,a);v(l,s,l.percents[0],null,s.attr());for(var c=0,d=se.length;d>c;c++)if(se[c].anim==e&&se[c].el==t){se[d-1].start=se[c].start;break}return s},Jt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(t){var e=new m(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},m.prototype.repeat=function(t){var e=new m(this.anim,this.ms);return e.del=this.del,e.times=q.floor(j(t,0))||1,e},i.animation=function(t,e,r,n){if(t instanceof m)return t;(i.is(r,"function")||!r)&&(n=n||r||null,r=null),t=Object(t),e=+e||0;var o,a,s={};for(a in t)t[S](a)&&tt(a)!=a&&tt(a)+"%"!=a&&(o=!0,s[a]=t[a]);return o?(r&&(s.easing=r),n&&(s.callback=n),new m({100:s},e)):new m(t,e)},Jt.animate=function(t,e,r,n){var o=this;if(o.removed)return n&&n.call(o),o;var a=t instanceof m?t:i.animation(t,e,r,n);return v(a,o,a.percents[0],null,o.attr()),o},Jt.setTime=function(t,e){return t&&null!=e&&this.status(t,z(e,t.ms)/t.ms),this},Jt.status=function(t,e){var i,r,n=[],o=0;if(null!=e)return v(t,this,-1,z(e,1)),this;for(i=se.length;i>o;o++)if((r=se[o]).el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;n.push({anim:r.anim,status:r.status})}return t?0:n},Jt.pause=function(t){for(var i=0;i<se.length;i++)se[i].el.id!=this.id||t&&se[i].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,se[i].anim)&&(se[i].paused=!0);return this},Jt.resume=function(t){for(var i=0;i<se.length;i++)if(se[i].el.id==this.id&&(!t||se[i].anim==t)){var r=se[i];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Jt.stop=function(t){for(var i=0;i<se.length;i++)se[i].el.id!=this.id||t&&se[i].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,se[i].anim)&&se.splice(i--,1);return this},e.on("raphael.remove",w),e.on("raphael.clear",w),Jt.toString=function(){return"Raphaël’s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;i>e;e++)!t[e]||t[e].constructor!=Jt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ue=he.prototype;for(var fe in ue.push=function(){for(var t,e,i=0,r=arguments.length;r>i;i++)!(t=arguments[i])||t.constructor!=Jt.constructor&&t.constructor!=he||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var i=0,r=this.items.length;r>i;i++)if(!1===t.call(e,this.items[i],i))return this;return this},Jt)Jt[S](fe)&&(ue[fe]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t][P](i,e)}))}}(fe));return ue.attr=function(t,e){if(t&&i.is(t,G)&&i.is(t[0],"object"))for(var r=0,n=t.length;n>r;r++)this.items[r].attr(t[r]);else for(var o=0,a=this.items.length;a>o;o++)this.items[o].attr(t,e);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e){t=0>t?j(this.length+t,0):t,e=j(0,z(this.length-t,e));var i,r=[],n=[],o=[];for(i=2;i<arguments.length;i++)o.push(arguments[i]);for(i=0;e>i;i++)n.push(this[t+i]);for(;i<this.length-t;i++)r.push(this[t+i]);var a=o.length;for(i=0;i<a+r.length;i++)this.items[t+i]=this[t+i]=a>i?o[i]:r[i-a];for(i=this.items.length=this.length-=e-a;this[i];)delete this[i++];return new he(n)},ue.exclude=function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,e,r,n){(i.is(r,"function")||!r)&&(n=r||null);var o,a,s=this.items.length,l=s,c=this;if(!s)return this;n&&(a=function(){!--s&&n.call(c)}),r=i.is(r,Y)?r:a;var d=i.animation(t,e,r,a);for(o=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,d,d),this.items[l]&&!this.items[l].removed||s--;return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],i=[],r=[],n=this.items.length;n--;)if(!this.items[n].removed){var o=this.items[n].getBBox();t.push(o.x),e.push(o.y),i.push(o.x+o.width),r.push(o.y+o.height)}return{x:t=z[P](0,t),y:e=z[P](0,e),x2:i=j[P](0,i),y2:r=j[P](0,r),width:i-t,height:r-e}},ue.clone=function(t){t=this.paper.set();for(var e=0,i=this.items.length;i>e;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Raphaël‘s set"},ue.glow=function(t){var e=this.paper.set();return this.forEach((function(i){var r=i.glow(t);null!=r&&r.forEach((function(t){e.push(t)}))})),e},ue.isPointInside=function(t,e){var i=!1;return this.forEach((function(r){return r.isPointInside(t,e)?(console.log("runned"),i=!0,!1):void 0})),i},i.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var r in t.face)t.face[S](r)&&(e.face[r]=t.face[r]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg)for(var n in e.face["units-per-em"]=et(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[S](n)){var o=t.glyphs[n];if(e.glyphs[n]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,(function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"}))+"z"},o.k)for(var a in o.k)o[S](a)&&(e.glyphs[n].k[a]=o.k[a])}return t},b.getFont=function(t,e,r,n){if(n=n||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,i.fonts){var o,a=i.fonts[t];if(!a){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,F)+"(\\s|$)","i");for(var l in i.fonts)if(i.fonts[S](l)&&s.test(l)){a=i.fonts[l];break}}if(a)for(var c=0,d=a.length;d>c&&((o=a[c]).face["font-weight"]!=e||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=n);c++);return o}},b.print=function(t,e,r,n,o,a,s,l){a=a||"middle",s=j(z(s||0,1),-1),l=j(z(l||1,3),1);var c,d=R(r)[B](F),h=0,u=0,f=F;if(i.is(n,"string")&&(n=this.getFont(n)),n){c=(o||16)/n.face["units-per-em"];for(var p=n.face.bbox[B](_),g=+p[0],m=p[3]-p[1],v=0,w=+p[1]+("baseline"==a?m+ +n.face.descent:m/2),x=0,b=d.length;b>x;x++){if("\n"==d[x])h=0,k=0,u=0,v+=m*l;else{var y=u&&n.glyphs[d[x-1]]||{},k=n.glyphs[d[x]];h+=u?(y.w||n.w)+(y.k&&y.k[d[x]]||0)+n.w*s:0,u=1}k&&k.d&&(f+=i.transformPath(k.d,["t",h*c,v*c,"s",c,c,g,w,"t",(t-g)/c,(e-w)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(i.is(t,"array"))for(var e,r=this.set(),n=0,o=t.length;o>n;n++)e=t[n]||{},C[S](e.type)&&r.push(this[e.type]().attr(e));return r},i.format=function(t,e){var r=i.is(e,G)?[0][I](e):arguments;return t&&i.is(t,Y)&&r.length-1&&(t=t.replace(T,(function(t,e){return null==r[++e]?F:r[e]}))),t||F},i.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return function(i,r){return String(i).replace(t,(function(t,i){return function(t,i,r){var n=r;return i.replace(e,(function(t,e,i,r,o){e=e||r,n&&(e in n&&(n=n[e]),"function"==typeof n&&o&&(n=n()))})),n=(null==n||n==r?t:n)+""}(t,i,r)}))}}(),i.ninja=function(){return M.was?E.win.Raphael=M.is:delete Raphael,i},i.st=ue,function(t,e,r){null==t.readyState&&t.addEventListener&&(t.addEventListener(e,r=function(){t.removeEventListener(e,r,!1),t.readyState="complete"},!1),t.readyState="loading"),function e(){/in/.test(t.readyState)?setTimeout(e,9):i.eve("raphael.DOMload")}()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",(function(){x=!0})),function(){if(i.svg){var t="hasOwnProperty",e=String,r=parseFloat,n=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,c=/[, ]+/,d=i.eve,h="",u=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};i.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,n){if(n)for(var o in"string"==typeof r&&(r=m(r)),n)n[t](o)&&("xlink:"==o.substring(0,6)?r.setAttributeNS(f,o.substring(6),e(n[o])):r.setAttribute(o,e(n[o])));else(r=i._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(t,n){var c="linear",d=t.id+n,u=.5,f=.5,p=t.node,g=t.paper,v=p.style,w=i._g.doc.getElementById(d);if(!w){if(n=(n=e(n).replace(i._radial_gradient,(function(t,e,i){if(c="radial",e&&i){u=r(e);var n=2*((f=r(i))>.5)-1;l(u-.5,2)+l(f-.5,2)>.25&&(f=o.sqrt(.25-l(u-.5,2))*n+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*n)}return h}))).split(/\s*\-\s*/),"linear"==c){var x=n.shift();if(x=-r(x),isNaN(x))return null;var b=[0,0,o.cos(i.rad(x)),o.sin(i.rad(x))],y=1/(a(s(b[2]),s(b[3]))||1);b[2]*=y,b[3]*=y,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var k=i._parseDots(n);if(!k)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&d!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){w=m(c+"Gradient",{id:d}),t.gradient=w,m(w,"radial"==c?{fx:u,fy:f}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(w);for(var _=0,C=k.length;C>_;_++)w.appendChild(m("stop",{offset:k[_].offset?k[_].offset:_?"100%":"0%","stop-color":k[_].color||"#fff"}))}}return m(p,{fill:"url(#"+d+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},w=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},x=function(r,n,o){if("path"==r.type){for(var a,s,l,c,d,u=e(n).toLowerCase().split("-"),f=r.paper,v=o?"end":"start",w=r.node,x=r.attrs,b=x["stroke-width"],y=u.length,k="classic",_=3,C=3,T=5;y--;)switch(u[y]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":k=u[y];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":_=5;break;case"short":_=2}if("open"==k?(_+=2,C+=2,T+=2,l=1,c=o?4:1,d={fill:"none",stroke:x.stroke}):(c=l=_/2,d={fill:x.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&g[r._.arrows.endPath]--,r._.arrows.endMarker&&g[r._.arrows.endMarker]--):(r._.arrows.startPath&&g[r._.arrows.startPath]--,r._.arrows.startMarker&&g[r._.arrows.startMarker]--):r._.arrows={},"none"!=k){var S="raphael-marker-"+k,E="raphael-marker-"+v+k+_+C;i._g.doc.getElementById(S)?g[S]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[k],id:S})),g[S]=1);var M,A=i._g.doc.getElementById(E);A?(g[E]++,M=A.getElementsByTagName("use")[0]):(A=m(m("marker"),{id:E,markerHeight:C,markerWidth:_,orient:"auto",refX:c,refY:C/2}),M=m(m("use"),{"xlink:href":"#"+S,transform:(o?"rotate(180 "+_/2+" "+C/2+") ":h)+"scale("+_/T+","+C/T+")","stroke-width":(1/((_/T+C/T)/2)).toFixed(4)}),A.appendChild(M),f.defs.appendChild(A),g[E]=1),m(M,d);var P=l*("diamond"!=k&&"oval"!=k);o?(a=r._.arrows.startdx*b||0,s=i.getTotalLength(x.path)-P*b):(a=P*b,s=i.getTotalLength(x.path)-(r._.arrows.enddx*b||0)),(d={})["marker-"+v]="url(#"+E+")",(s||a)&&(d.d=i.getSubpath(x.path,a,s)),m(w,d),r._.arrows[v+"Path"]=S,r._.arrows[v+"Marker"]=E,r._.arrows[v+"dx"]=P,r._.arrows[v+"Type"]=k,r._.arrows[v+"String"]=n}else o?(a=r._.arrows.startdx*b||0,s=i.getTotalLength(x.path)-a):(a=0,s=i.getTotalLength(x.path)-(r._.arrows.enddx*b||0)),r._.arrows[v+"Path"]&&m(w,{d:i.getSubpath(x.path,a,s)}),delete r._.arrows[v+"Path"],delete r._.arrows[v+"Marker"],delete r._.arrows[v+"dx"],delete r._.arrows[v+"Type"],delete r._.arrows[v+"String"];for(d in g)if(g[t](d)&&!g[d]){var I=i._g.doc.getElementById(d);I&&I.parentNode.removeChild(I)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},y=function(t,i,r){if(i=b[e(i).toLowerCase()]){for(var n=t.attrs["stroke-width"]||"1",o={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],s=i.length;s--;)a[s]=i[s]*n+(s%2?1:-1)*o;m(t.node,{"stroke-dasharray":a.join(",")})}},k=function(r,o){var l=r.node,d=r.attrs,u=l.style.visibility;for(var p in l.style.visibility="hidden",o)if(o[t](p)){if(!i._availableAttrs[t](p))continue;var g=o[p];switch(d[p]=g,p){case"blur":r.blur(g);break;case"href":case"title":var b=m("title"),k=i._g.doc.createTextNode(g);b.appendChild(k),l.appendChild(b);break;case"target":var C=l.parentNode;if("a"!=C.tagName.toLowerCase()){b=m("a");C.insertBefore(b,l),b.appendChild(l),C=b}"target"==p?C.setAttributeNS(f,"show","blank"==g?"new":g):C.setAttributeNS(f,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":r.transform(g);break;case"arrow-start":x(r,g);break;case"arrow-end":x(r,g,1);break;case"clip-rect":var T=e(g).split(c);if(4==T.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var S=m("clipPath"),E=m("rect");S.id=i.createUUID(),m(E,{x:T[0],y:T[1],width:T[2],height:T[3]}),S.appendChild(E),r.paper.defs.appendChild(S),m(l,{"clip-path":"url(#"+S.id+")"}),r.clip=E}if(!g){var M=l.getAttribute("clip-path");if(M){var A=i._g.doc.getElementById(M.replace(/(^url\(#|\)$)/g,h));A&&A.parentNode.removeChild(A),m(l,{"clip-path":h}),delete r.clip}}break;case"path":"path"==r.type&&(m(l,{d:g?d.path=i._pathToAbsolute(g):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),r._.dirty=1,!d.fx)break;p="x",g=d.x;case"x":d.fx&&(g=-d.x-(d.width||0));case"rx":if("rx"==p&&"rect"==r.type)break;case"cx":l.setAttribute(p,g),r.pattern&&w(r),r._.dirty=1;break;case"height":if(l.setAttribute(p,g),r._.dirty=1,!d.fy)break;p="y",g=d.y;case"y":d.fy&&(g=-d.y-(d.height||0));case"ry":if("ry"==p&&"rect"==r.type)break;case"cy":l.setAttribute(p,g),r.pattern&&w(r),r._.dirty=1;break;case"r":"rect"==r.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(f,"href",g);break;case"stroke-width":(1!=r._.sx||1!=r._.sy)&&(g/=a(s(r._.sx),s(r._.sy))||1),r.paper._vbSize&&(g*=r.paper._vbSize),l.setAttribute(p,g),d["stroke-dasharray"]&&y(r,d["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"stroke-dasharray":y(r,g,o);break;case"fill":var P=e(g).match(i._ISURL);if(P){S=m("pattern");var I=m("image");S.id=i.createUUID(),m(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(I,{x:0,y:0,"xlink:href":P[1]}),S.appendChild(I),function(t){i._preload(P[1],(function(){var e=this.offsetWidth,i=this.offsetHeight;m(t,{width:e,height:i}),m(I,{width:e,height:i}),r.paper.safari()}))}(S),r.paper.defs.appendChild(S),m(l,{fill:"url(#"+S.id+")"}),r.pattern=S,r.pattern&&w(r);break}var D=i.getRGB(g);if(D.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=e(g).charAt())&&v(r,g)){if("opacity"in d||"fill-opacity"in d){var F=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(F){var O=F.getElementsByTagName("stop");m(O[O.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=g,d.fill="none";break}}else delete o.gradient,delete d.gradient,!i.is(d.opacity,"undefined")&&i.is(o.opacity,"undefined")&&m(l,{opacity:d.opacity}),!i.is(d["fill-opacity"],"undefined")&&i.is(o["fill-opacity"],"undefined")&&m(l,{"fill-opacity":d["fill-opacity"]});D[t]("opacity")&&m(l,{"fill-opacity":D.opacity>1?D.opacity/100:D.opacity});case"stroke":D=i.getRGB(g),l.setAttribute(p,D.hex),"stroke"==p&&D[t]("opacity")&&m(l,{"stroke-opacity":D.opacity>1?D.opacity/100:D.opacity}),"stroke"==p&&r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=e(g).charAt())&&v(r,g);break;case"opacity":d.gradient&&!d[t]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(d.gradient){(F=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)))&&(O=F.getElementsByTagName("stop"),m(O[O.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=n(g,10)+"px");var R=p.replace(/(\-.)/g,(function(t){return t.substring(1).toUpperCase()}));l.style[R]=g,r._.dirty=1,l.setAttribute(p,g)}}_(r,o),l.style.visibility=u},_=function(r,o){if("text"==r.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=r.attrs,s=r.node,l=s.firstChild?n(i._g.doc.defaultView.getComputedStyle(s.firstChild,h).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,d=e(o.text).split("\n"),u=[],f=0,p=d.length;p>f;f++)c=m("tspan"),f&&m(c,{dy:1.2*l,x:a.x}),c.appendChild(i._g.doc.createTextNode(d[f])),s.appendChild(c),u[f]=c}else for(f=0,p=(u=s.getElementsByTagName("tspan")).length;p>f;f++)f?m(u[f],{dy:1.2*l,x:a.x}):m(u[0],{dy:0});m(s,{x:a.x,y:a.y}),r._.dirty=1;var g=r._getBBox(),v=a.y-(g.y+g.height/2);v&&i.is(v,"finite")&&m(u[0],{dy:v})}},C=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.matrix=i.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},T=i.el;C.prototype=T,T.constructor=C,i._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var r=new C(i,e);return r.type="path",k(r,{fill:"none",stroke:"#000",path:t}),r},T.rotate=function(t,i,n){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(i=r(t[1]),n=r(t[2])),t=r(t[0]),null==n&&(i=n),null==i||null==n){var o=this.getBBox(1);i=o.x+o.width/2,n=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,i,n]])),this},T.scale=function(t,i,n,o){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(i=r(t[1]),n=r(t[2]),o=r(t[3])),t=r(t[0]),null==i&&(i=t),null==o&&(n=o),null==n||null==o)var a=this.getBBox(1);return n=null==n?a.x+a.width/2:n,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,i,n,o]])),this},T.translate=function(t,i){return this.removed||((t=e(t).split(c)).length-1&&(i=r(t[1])),t=r(t[0])||0,i=+i||0,this.transform(this._.transform.concat([["t",t,i]]))),this},T.transform=function(e){var r=this._;if(null==e)return r.transform;if(i._extractTransform(this,e),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&w(this),this.node&&m(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var n=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},T.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},T.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},T.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;for(var e in t.__set__&&t.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),i._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[e]="function"==typeof this[e]?i._removedFactory(e):null;this.removed=!0}},T._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},T.attr=function(e,r){if(this.removed)return this;if(null==e){var n={};for(var o in this.attrs)this.attrs[t](o)&&(n[o]=this.attrs[o]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==r&&i.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var a=e.split(c),s={},l=0,h=a.length;h>l;l++)s[e=a[l]]=e in this.attrs?this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:i._availableAttrs[e];return h-1?s:s[a[0]]}if(null==r&&i.is(e,"array")){for(s={},l=0,h=e.length;h>l;l++)s[e[l]]=this.attr(e[l]);return s}if(null!=r){var u={};u[e]=r}else null!=e&&i.is(e,"object")&&(u=e);for(var f in u)d("raphael.attr."+f+"."+this.id,this,u[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&u[t](f)&&i.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(u[f]));for(var g in this.attrs[f]=u[f],p)p[t](g)&&(u[g]=p[g])}return k(this,u),this},T.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&i._tofront(this,t),this},T.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;return"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper),this.paper,this},T.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper),this},T.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),i._insertbefore(this,t,this.paper),this},T.blur=function(t){var e=this;if(0!=+t){var r=m("filter"),n=m("feGaussianBlur");e.attrs.blur=t,r.id=i.createUUID(),m(n,{stdDeviation:+t||1.5}),r.appendChild(n),e.paper.defs.appendChild(r),e._blur=r,m(e.node,{filter:"url(#"+r.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},i._engine.circle=function(t,e,i,r){var n=m("circle");t.canvas&&t.canvas.appendChild(n);var o=new C(n,t);return o.attrs={cx:e,cy:i,r,fill:"none",stroke:"#000"},o.type="circle",m(n,o.attrs),o},i._engine.rect=function(t,e,i,r,n,o){var a=m("rect");t.canvas&&t.canvas.appendChild(a);var s=new C(a,t);return s.attrs={x:e,y:i,width:r,height:n,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",m(a,s.attrs),s},i._engine.ellipse=function(t,e,i,r,n){var o=m("ellipse");t.canvas&&t.canvas.appendChild(o);var a=new C(o,t);return a.attrs={cx:e,cy:i,rx:r,ry:n,fill:"none",stroke:"#000"},a.type="ellipse",m(o,a.attrs),a},i._engine.image=function(t,e,i,r,n,o){var a=m("image");m(a,{x:i,y:r,width:n,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new C(a,t);return s.attrs={x:i,y:r,width:n,height:o,src:e},s.type="image",s},i._engine.text=function(t,e,r,n){var o=m("text");t.canvas&&t.canvas.appendChild(o);var a=new C(o,t);return a.attrs={x:e,y:r,"text-anchor":"middle",text:n,font:i._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",k(a,a.attrs),a},i._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t&&t.container,r=t.x,n=t.y,o=t.width,a=t.height;if(!e)throw new Error("SVG container not found.");var s,l=m("svg"),c="overflow:hidden;";return r=r||0,n=n||0,m(l,{height:a=a||342,version:1.1,width:o=o||512,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=c+"position:absolute;left:"+r+"px;top:"+n+"px",i._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),(e=new i._Paper).width=o,e.height=a,e.canvas=l,e.clear(),e._left=e._top=0,s&&(e.renderfix=function(){}),e.renderfix(),e},i._engine.setViewBox=function(t,e,i,r,n){d("raphael.setViewBox",this,this._viewBox,[t,e,i,r,n]);var o,s,l=a(i/this.width,r/this.height),c=this.top,h=n?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+u+this.height):(this._vbSize=l,o=t+u+e+u+i+u+r),m(this.canvas,{viewBox:o,preserveAspectRatio:h});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,i,r,!!n],this},i.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var r=-t.e%1,n=-t.f%1;(r||n)&&(r&&(this._left=(this._left+r)%1,i.left=this._left+"px"),n&&(this._top=(this._top+n)%1,i.top=this._top+"px"))},i.prototype.clear=function(){i.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(i._g.doc.createTextNode("Created with Raphaël "+i.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},i.prototype.remove=function(){for(var t in d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null};var S=i.st;for(var E in T)T[t](E)&&!S[t](E)&&(S[E]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t].apply(i,e)}))}}(E))}}(),function(){if(i.vml){var t="hasOwnProperty",e=String,r=parseFloat,n=Math,o=n.round,a=n.max,s=n.min,l=n.abs,c="fill",d=/[, ]+/,h=i.eve,u=" ",f="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,w="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,b={path:1,rect:1,image:1},y={circle:1,ellipse:1},k=function(t,e,r){var n=i.matrix();return n.rotate(-t,.5,.5),{dx:n.x(e,r),dy:n.y(e,r)}},_=function(t,e,i,r,n,o){var a=t._,s=t.matrix,d=a.fillpos,h=t.node,f=h.style,p=1,g="",m=x/e,v=x/i;if(f.visibility="hidden",e&&i){if(h.coordsize=l(m)+u+l(v),f.rotation=o*(0>e*i?-1:1),o){var w=k(o,r,n);r=w.dx,n=w.dy}if(0>e&&(g+="x"),0>i&&(g+=" y")&&(p=-1),f.flip=g,h.coordorigin=r*-m+u+n*-v,d||a.fillsize){var b=h.getElementsByTagName(c);b=b&&b[0],h.removeChild(b),d&&(w=k(o,s.x(d[0],d[1]),s.y(d[0],d[1])),b.position=w.dx*p+u+w.dy*p),a.fillsize&&(b.size=a.fillsize[0]*l(e)+u+a.fillsize[1]*l(i)),h.appendChild(b)}f.visibility="visible"}};i.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C,T=function(t,i,r){for(var n=e(i).toLowerCase().split("-"),o=r?"end":"start",a=n.length,s="classic",l="medium",c="medium";a--;)switch(n[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=n[a];break;case"wide":case"narrow":c=n[a];break;case"long":case"short":l=n[a]}var d=t.node.getElementsByTagName("stroke")[0];d[o+"arrow"]=s,d[o+"arrowlength"]=l,d[o+"arrowwidth"]=c},S=function(n,l){n.attrs=n.attrs||{};var h=n.node,m=n.attrs,w=h.style,k=b[n.type]&&(l.x!=m.x||l.y!=m.y||l.width!=m.width||l.height!=m.height||l.cx!=m.cx||l.cy!=m.cy||l.rx!=m.rx||l.ry!=m.ry||l.r!=m.r),S=y[n.type]&&(m.cx!=l.cx||m.cy!=l.cy||m.r!=l.r||m.rx!=l.rx||m.ry!=l.ry),M=n;for(var A in l)l[t](A)&&(m[A]=l[A]);if(k&&(m.path=i._getPath[n.type](n),n._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(w.cursor=l.cursor),"blur"in l&&n.blur(l.blur),(l.path&&"path"==n.type||k)&&(h.path=function(t){var r=/[ahqstv]/gi,n=i._pathToAbsolute;if(e(t).match(r)&&(n=i._path2curve),r=/[clmz]/g,n==i._pathToAbsolute&&!e(t).match(r)){var a=e(t).replace(g,(function(t,e,i){var r=[],n="m"==e.toLowerCase(),a=p[e];return i.replace(v,(function(t){n&&2==r.length&&(a+=r+p["m"==e?"l":"L"],r=[]),r.push(o(t*x))})),a+r}));return a}var s,l,c=n(t);a=[];for(var d=0,h=c.length;h>d;d++){s=c[d],"z"==(l=c[d][0].toLowerCase())&&(l="x");for(var m=1,w=s.length;w>m;m++)l+=o(s[m]*x)+(m!=w-1?",":f);a.push(l)}return a.join(u)}(~e(m.path).toLowerCase().indexOf("r")?i._pathToAbsolute(m.path):m.path),"image"==n.type&&(n._.fillpos=[m.x,m.y],n._.fillsize=[m.width,m.height],_(n,1,1,0,0,0))),"transform"in l&&n.transform(l.transform),S){var P=+m.cx,I=+m.cy,D=+m.rx||+m.r||0,F=+m.ry||+m.r||0;h.path=i.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((P-D)*x),o((I-F)*x),o((P+D)*x),o((I+F)*x),o(P*x)),n._.dirty=1}if("clip-rect"in l){var O=e(l["clip-rect"]).split(d);if(4==O.length){O[2]=+O[2]+ +O[0],O[3]=+O[3]+ +O[1];var R=h.clipRect||i._g.doc.createElement("div"),B=R.style;B.clip=i.format("rect({1}px {2}px {3}px {0}px)",O),h.clipRect||(B.position="absolute",B.top=0,B.left=0,B.width=n.paper.width+"px",B.height=n.paper.height+"px",h.parentNode.insertBefore(R,h),R.appendChild(h),h.clipRect=R)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(n.textpath){var $=n.textpath.style;l.font&&($.font=l.font),l["font-family"]&&($.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&($.fontSize=l["font-size"]),l["font-weight"]&&($.fontWeight=l["font-weight"]),l["font-style"]&&($.fontStyle=l["font-style"])}if("arrow-start"in l&&T(M,l["arrow-start"]),"arrow-end"in l&&T(M,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var N=h.getElementsByTagName(c);if(!(N=N&&N[0])&&(N=C(c)),"image"==n.type&&l.src&&(N.src=l.src),l.fill&&(N.on=!0),(null==N.on||"none"==l.fill||null===l.fill)&&(N.on=!1),N.on&&l.fill){var L=e(l.fill).match(i._ISURL);if(L){N.parentNode==h&&h.removeChild(N),N.rotate=!0,N.src=L[1],N.type="tile";var q=n.getBBox(1);N.position=q.x+u+q.y,n._.fillpos=[q.x,q.y],i._preload(L[1],(function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else N.color=i.getRGB(l.fill).hex,N.src=f,N.type="solid",i.getRGB(l.fill).error&&(M.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&E(M,l.fill,N)&&(m.fill="none",m.gradient=l.fill,N.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var j=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+i.getRGB(l.fill).o+1||2)-1);j=s(a(j,0),1),N.opacity=j,N.src&&(N.color="none")}h.appendChild(N);var z=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],H=!1;!z&&(H=z=C("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(z.on=!0),("none"==l.stroke||null===l.stroke||null==z.on||0==l.stroke||0==l["stroke-width"])&&(z.on=!1);var U=i.getRGB(l.stroke);z.on&&l.stroke&&(z.color=U.hex),j=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+U.o+1||2)-1);var V=.75*(r(l["stroke-width"])||1);if(j=s(a(j,0),1),null==l["stroke-width"]&&(V=m["stroke-width"]),l["stroke-width"]&&(z.weight=V),V&&1>V&&(j*=V)&&(z.weight=1),z.opacity=j,l["stroke-linejoin"]&&(z.joinstyle=l["stroke-linejoin"]||"miter"),z.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(z.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=W[t](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:f}H&&h.appendChild(z)}if("text"==M.type){M.paper.canvas.style.display=f;var Y=M.paper.span,G=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);w=Y.style,m.font&&(w.font=m.font),m["font-family"]&&(w.fontFamily=m["font-family"]),m["font-weight"]&&(w.fontWeight=m["font-weight"]),m["font-style"]&&(w.fontStyle=m["font-style"]),G=r(m["font-size"]||G&&G[0])||10,w.fontSize=100*G+"px",M.textpath.string&&(Y.innerHTML=e(M.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=Y.getBoundingClientRect();M.W=m.w=(X.right-X.left)/100,M.H=m.h=(X.bottom-X.top)/100,M.X=m.x,M.Y=m.y+M.H/2,("x"in l||"y"in l)&&(M.path.v=i.format("m{0},{1}l{2},{1}",o(m.x*x),o(m.y*x),o(m.x*x)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,J=K.length;J>Z;Z++)if(K[Z]in l){M._.dirty=1;break}switch(m["text-anchor"]){case"start":M.textpath.style["v-text-align"]="left",M.bbx=M.W/2;break;case"end":M.textpath.style["v-text-align"]="right",M.bbx=-M.W/2;break;default:M.textpath.style["v-text-align"]="center",M.bbx=0}M.textpath.style["v-text-kern"]=!0}},E=function(t,o,a){t.attrs=t.attrs||{};var s=(t.attrs,Math.pow),l="linear",c=".5 .5";if(t.attrs.gradient=o,o=(o=e(o).replace(i._radial_gradient,(function(t,e,i){return l="radial",e&&i&&(e=r(e),i=r(i),s(e-.5,2)+s(i-.5,2)>.25&&(i=n.sqrt(.25-s(e-.5,2))*(2*(i>.5)-1)+.5),c=e+u+i),f}))).split(/\s*\-\s*/),"linear"==l){var d=o.shift();if(d=-r(d),isNaN(d))return null}var h=i._parseDots(o);if(!h)return null;if(t=t.shape||t.node,h.length){t.removeChild(a),a.on=!0,a.method="none",a.color=h[0].color,a.color2=h[h.length-1].color;for(var p=[],g=0,m=h.length;m>g;g++)h[g].offset&&p.push(h[g].offset+u+h[g].color);a.colors=p.length?p.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-d)%360),t.appendChild(a)}return 1},M=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=i.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},A=i.el;M.prototype=A,A.constructor=M,A.transform=function(t){if(null==t)return this._.transform;var r,n=this.paper._viewBoxShift,o=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:f;n&&(r=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||f)),i._extractTransform(this,o+t);var a,s=this.matrix.clone(),l=this.skew,c=this.node,d=~e(this.attrs.fill).indexOf("-"),h=!e(this.attrs.fill).indexOf("url(");if(s.translate(1,1),h||d||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),d&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var p=this.getBBox(),g=this.getBBox(1),m=p.x-g.x,v=p.y-g.y;c.coordorigin=m*-x+u+v*-x,_(this,1,1,m,v,0)}else c.style.filter=f,_(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=f,l.matrix=e(s),l.offset=s.offset();return r&&(this._.transform=r),this},A.rotate=function(t,i,n){if(this.removed)return this;if(null!=t){if((t=e(t).split(d)).length-1&&(i=r(t[1]),n=r(t[2])),t=r(t[0]),null==n&&(i=n),null==i||null==n){var o=this.getBBox(1);i=o.x+o.width/2,n=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,i,n]])),this}},A.translate=function(t,i){return this.removed||((t=e(t).split(d)).length-1&&(i=r(t[1])),t=r(t[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",t,i]]))),this},A.scale=function(t,i,n,o){if(this.removed)return this;if((t=e(t).split(d)).length-1&&(i=r(t[1]),n=r(t[2]),o=r(t[3]),isNaN(n)&&(n=null),isNaN(o)&&(o=null)),t=r(t[0]),null==i&&(i=t),null==o&&(n=o),null==n||null==o)var a=this.getBBox(1);return n=null==n?a.x+a.width/2:n,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,i,n,o]])),this._.dirtyT=1,this},A.hide=function(){return!this.removed&&(this.node.style.display="none"),this},A.show=function(){return!this.removed&&(this.node.style.display=f),this},A._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},A.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),i.eve.unbind("raphael.*.*."+this.id),i._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;this.removed=!0}},A.attr=function(e,r){if(this.removed)return this;if(null==e){var n={};for(var o in this.attrs)this.attrs[t](o)&&(n[o]=this.attrs[o]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==r&&i.is(e,"string")){if(e==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=e.split(d),s={},l=0,u=a.length;u>l;l++)s[e=a[l]]=e in this.attrs?this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:i._availableAttrs[e];return u-1?s:s[a[0]]}if(this.attrs&&null==r&&i.is(e,"array")){for(s={},l=0,u=e.length;u>l;l++)s[e[l]]=this.attr(e[l]);return s}var f;for(var p in null!=r&&((f={})[e]=r),null==r&&i.is(e,"object")&&(f=e),f)h("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&f[t](p)&&i.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(f[p]));for(var m in this.attrs[p]=f[p],g)g[t](m)&&(f[m]=g[m])}f.text&&"text"==this.type&&(this.textpath.string=f.text),S(this,f)}return this},A.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&i._tofront(this,this.paper),this},A.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper)),this},A.insertAfter=function(t){return this.removed||(t.constructor==i.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper)),this},A.insertBefore=function(t){return this.removed||(t.constructor==i.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),i._insertbefore(this,t,this.paper)),this},A.blur=function(t){var e=this.node.runtimeStyle,r=e.filter;return r=r.replace(m,f),0!=+t?(this.attrs.blur=t,e.filter=r+u+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",e.margin=i.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(e.filter=r,e.margin=0,delete this.attrs.blur),this},i._engine.path=function(t,e){var i=C("shape");i.style.cssText=w,i.coordsize=x+u+x,i.coordorigin=e.coordorigin;var r=new M(i,e),n={fill:"none",stroke:"#000"};t&&(n.path=t),r.type="path",r.path=[],r.Path=f,S(r,n),e.canvas.appendChild(i);var o=C("skew");return o.on=!0,i.appendChild(o),r.skew=o,r.transform(f),r},i._engine.rect=function(t,e,r,n,o,a){var s=i._rectPath(e,r,n,o,a),l=t.path(s),c=l.attrs;return l.X=c.x=e,l.Y=c.y=r,l.W=c.width=n,l.H=c.height=o,c.r=a,c.path=s,l.type="rect",l},i._engine.ellipse=function(t,e,i,r,n){var o=t.path();return o.attrs,o.X=e-r,o.Y=i-n,o.W=2*r,o.H=2*n,o.type="ellipse",S(o,{cx:e,cy:i,rx:r,ry:n}),o},i._engine.circle=function(t,e,i,r){var n=t.path();return n.attrs,n.X=e-r,n.Y=i-r,n.W=n.H=2*r,n.type="circle",S(n,{cx:e,cy:i,r}),n},i._engine.image=function(t,e,r,n,o,a){var s=i._rectPath(r,n,o,a),l=t.path(s).attr({stroke:"none"}),d=l.attrs,h=l.node,u=h.getElementsByTagName(c)[0];return d.src=e,l.X=d.x=r,l.Y=d.y=n,l.W=d.width=o,l.H=d.height=a,d.path=s,l.type="image",u.parentNode==h&&h.removeChild(u),u.rotate=!0,u.src=e,u.type="tile",l._.fillpos=[r,n],l._.fillsize=[o,a],h.appendChild(u),_(l,1,1,0,0,0),l},i._engine.text=function(t,r,n,a){var s=C("shape"),l=C("path"),c=C("textpath");r=r||0,n=n||0,a=a||"",l.v=i.format("m{0},{1}l{2},{1}",o(r*x),o(n*x),o(r*x)+1),l.textpathok=!0,c.string=e(a),c.on=!0,s.style.cssText=w,s.coordsize=x+u+x,s.coordorigin="0 0";var d=new M(s,t),h={fill:"#000",stroke:"none",font:i._availableAttrs.font,text:a};d.shape=s,d.path=l,d.textpath=c,d.type="text",d.attrs.text=e(a),d.attrs.x=r,d.attrs.y=n,d.attrs.w=1,d.attrs.h=1,S(d,h),s.appendChild(c),s.appendChild(l),t.canvas.appendChild(s);var p=C("skew");return p.on=!0,s.appendChild(p),d.skew=p,d.transform(f),d},i._engine.setSize=function(t,e){var r=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),r.width=t,r.height=e,r.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&i._engine.setViewBox.apply(this,this._viewBox),this},i._engine.setViewBox=function(t,e,r,n,o){i.eve("raphael.setViewBox",this,this._viewBox,[t,e,r,n,o]);var s,l,c=this.width,d=this.height,h=1/a(r/c,n/d);return o&&(c>r*(s=d/n)&&(t-=(c-r*s)/2/s),d>n*(l=c/r)&&(e-=(d-n*l)/2/l)),this._viewBox=[t,e,r,n,!!o],this._viewBoxShift={dx:-t,dy:-e,scale:h},this.forEach((function(t){t.transform("...")})),this},i._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),C=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){C=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},i._engine.initWin(i._g.win),i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t.container,r=t.height,n=t.width,o=t.x,a=t.y;if(!e)throw new Error("VML container not found.");var s=new i._Paper,l=s.canvas=i._g.doc.createElement("div"),c=l.style;return o=o||0,a=a||0,n=n||512,r=r||342,s.width=n,s.height=r,n==+n&&(n+="px"),r==+r&&(r+="px"),s.coordsize=1e3*x+u+1e3*x,s.coordorigin="0 0",s.span=i._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,r),1==e?(i._g.doc.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),s.renderfix=function(){},s},i.prototype.clear=function(){i.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=i._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},i.prototype.remove=function(){for(var t in i.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;return!0};var P=i.st;for(var I in A)A[t](I)&&!P[t](I)&&(P[I]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t].apply(i,e)}))}}(I))}}(),M.was?E.win.Raphael=i:Raphael=i,i})),function(t,e,i){var r,n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},o=function(){var r={},n=e.createElement("div").style,o=function(){for(var t=["t","webkitT","MozT","msT","OT"],e=0,i=t.length;e<i;e++)if(t[e]+"ransform"in n)return t[e].substr(0,t[e].length-1);return!1}();function a(t){return!1!==o&&(""===o?t:o+t.charAt(0).toUpperCase()+t.substr(1))}r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(t,e){for(var i in e)t[i]=e[i]},r.addEvent=function(t,e,i,r){t.addEventListener(e,i,!!r)},r.removeEvent=function(t,e,i,r){t.removeEventListener(e,i,!!r)},r.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},r.momentum=function(t,e,r,n,o,a){var s,l,c=t-e,d=i.abs(c)/r;return l=d/(a=void 0===a?6e-4:a),(s=t+d*d/(2*a)*(c<0?-1:1))<n?(s=o?n-o/2.5*(d/8):n,l=(c=i.abs(s-t))/d):s>0&&(s=o?o/2.5*(d/8):0,l=(c=i.abs(t)+s)/d),{destination:i.round(s),duration:l}};var s=a("transform");return r.extend(r,{hasTransform:!1!==s,hasPerspective:a("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:a("transition")in n}),r.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),r.extend(r.style={},{transform:s,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")}),r.hasClass=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},r.addClass=function(t,e){if(!r.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},r.removeClass=function(t,e){if(r.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},r.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},r.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){return(t-=1)*t*(5*t+4)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){return 0===t?0:1==t?1:.4*i.pow(2,-10*t)*i.sin((t-.055)*(2*i.PI)/.22)+1}}}),r.tap=function(t,i){var r=e.createEvent("Event");r.initEvent(i,!0,!0),r.pageX=t.pageX,r.pageY=t.pageY,t.target.dispatchEvent(r)},r.click=function(t){var i,r=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(r.tagName)||((i=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,t.view,1,r.screenX,r.screenY,r.clientX,r.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,r.dispatchEvent(i))},r}();function a(t,r){for(var n in this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={zoomMin:1,zoomMax:4,startZoom:1,resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,infiniteUseTransform:!0,deceleration:.004,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|LABEL)$/,className:/crownix_form_field_label|crownix_hyperlink/},HWCompositing:!0,useTransition:!0,useTransform:!0},r)this.options[n]=r[n];this.translateZ=this.options.HWCompositing&&o.hasPerspective?" translateZ(0)":"",this.options.useTransition=o.hasTransition&&this.options.useTransition,this.options.useTransform=o.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?o.ease[this.options.bounceEasing]||o.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),!0===this.options.doubleTap&&(this.options.doubleTap="doubleTap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.infiniteElements&&(this.options.probeType=3),this.options.infiniteUseTransform=this.options.infiniteUseTransform&&this.options.useTransform,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this.doubleTapFlag=!1,this.lastTap=0,this.saveScrollX,this.saveScrollY,this.saveScale,this.scale=i.min(i.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable(),this.resetPosition()}function s(t,i,r){var n=e.createElement("div"),o=e.createElement("div");return!0===r&&(n.style.cssText="position:absolute;z-index:9999",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),o.className="iScrollIndicator","h"==t?(!0===r&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",o.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(!0===r&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",o.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",i||(n.style.pointerEvents="none"),n.appendChild(o),n}function l(i,r){for(var n in this.wrapper="string"==typeof r.el?e.querySelector(r.el):r.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0},r)this.options[n]=r[n];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(o.addEvent(this.indicator,"touchstart",this),o.addEvent(t,"touchend",this)),this.options.disablePointer||(o.addEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.addEvent(t,o.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(o.addEvent(this.indicator,"mousedown",this),o.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[o.style.transform]=this.scroller.translateZ,this.wrapperStyle[o.style.transitionDuration]=o.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}a.prototype={version:"5.1.2",_init:function(){this._initEvents(),this.options.zoom&&this._initZoom(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys(),this.options.infiniteElements&&this._initInfinite()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!t.startedScroll&&(1==o.eventType[t.type]||!0===t.bubbleScroll||0===t.button)&&this.enabled&&(!this.initiated||o.eventType[t.type]===this.initiated)){!this.options.preventDefault||o.isBadAndroid||o.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,r=t.touches?t.touches[0]:t;this.initiated=o.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=o.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=r.pageX,this.pointY=r.pageY,t.startedScroll=!0,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&o.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,r,n,a,s=t.touches?t.touches[0]:t,l=s.pageX-this.pointX,c=s.pageY-this.pointY,d=o.getTime();if(this.pointX=s.pageX,this.pointY=s.pageY,this.distX+=l,this.distY+=c,n=i.abs(this.distX),a=i.abs(this.distY),!(d-this.endTime>300&&n<10&&a<10)){var h=null;if(h=n>a+this.options.directionLockThreshold?"h":a>=n+this.options.directionLockThreshold?"v":"n",this.directionLocked||this.options.freeScroll||(this.directionLocked=h),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,c=this.hasVerticalScroll?c:0,e=this.x+l,r=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+l/3:this.x,this._events.pullOut&&this._execEvent("pullOut",{newX:e,deltaX:l})),(r>0||r<this.maxScrollY)&&(r=this.options.bounce?this.y+c/3:this.y),this.options.parentScroll&&(0==e&&0==this.maxScrollX&&"v"!=h||0==e&&-1==this.directionY&&"v"!=h||e==this.maxScrollX&&1==this.directionX&&"v"!=h||0==r&&0==this.maxScrollY&&"h"!=h||0==r&&-1==this.directionY&&"h"!=h||r==this.maxScrollY&&1==this.directionY&&"h"!=h)&&(t.bubbleScroll=!0,this.options.parentScroll._start(t),this._end(t)),this.directionX=l>0?-1:l<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,r),this._execEvent("scrollMove"),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&(!o.eventType[t.type]||o.eventType[t.type]===this.initiated)){if(this._events.pullEnd&&this._execEvent("pullEnd"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e]._end(t);this.options.preventDefault&&!o.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();t.changedTouches&&t.changedTouches[0];var r,n,a=o.getTime()-this.startTime,s=i.round(this.x),l=i.round(this.y),c=i.abs(s-this.startX),d=i.abs(l-this.startY),h=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=o.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,l),!this.moved){if(this.options.tap&&this.options.doubleTap){if(t.type.indexOf("mouse")>=0)return;if(this.doubleTapFlag)clearTimeout(this.doubleTapFlag),this.doubleTapFlag=null,o.tap(t,this.options.doubleTap);else{var f=this;this.doubleTapFlag=setTimeout((function(){f.doubleTapFlag=null,o.tap(t,f.options.tap)}),250)}}else if(this.options.tap){if(t.type.indexOf("mouse")>=0)return;o.tap(t,this.options.tap)}return this.options.click&&o.click(t),void this._execEvent("scrollCancel")}if(this._events.flick&&a<200&&c<100&&d<100)this._execEvent("flick");else{if(this.options.momentum&&a<300&&(r=this.hasHorizontalScroll?o.momentum(this.x,this.startX,a,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},n=this.hasVerticalScroll?o.momentum(this.y,this.startY,a,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:l,duration:0},s=r.destination,l=n.destination,h=i.max(r.duration,n.duration),this.isInTransition=1),this.options.snap){var p=this._nearestSnap(s,l);this.currentPage=p,h=this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-p.x),1e3),i.min(i.abs(l-p.y),1e3)),300),s=p.x,l=p.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}if(s!=this.x||l!=this.y)return(s>0||s<this.maxScrollX||l>0||l<this.maxScrollY)&&(u=o.ease.quadratic),void this.scrollTo(s,l,h,u);this._execEvent("scrollEnd")}}}},_resize:function(){if(this.enabled){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){t.refresh(),t._execEvent("resize")}),this.options.resizePolling)}},resetPosition:function(t){var e=this.x,r=this.y;if(t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?r=0:this.y<this.maxScrollY&&(r=this.maxScrollY),this.options.keepCenter){var n=this._getMarginToCenter(this.scale);e=n.left>0?n.left:e,r=n.top>0?n.top:r}return(i.floor(e)!=i.floor(this.x)||i.floor(r)!=i.floor(this.y))&&(this.scrollTo(e,r,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var t;this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=i.round(this.scroller.offsetWidth*this.scale),this.scrollerHeight=i.round(this.scroller.offsetHeight*this.scale),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.options.infiniteElements&&(this.options.infiniteLimit=this.options.infiniteLimit||i.floor(2147483645/this.infiniteElementHeight),t=-this.options.infiniteLimit*this.infiniteElementHeight+this.wrapperHeight),this.maxScrollY=void 0!==t?t:this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=o.offset(this.wrapper),this.resetPosition(),this._execEvent("refresh")},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,r){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,r)},scrollTo:function(t,e,r,n){n=n||o.ease.circular,this.isInTransition=this.options.useTransition&&r>0,!r||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(r),this._translate(i.floor(t),i.floor(e))):this._animate(i.floor(t),i.floor(e),r,n.fn)},scrollToKeepCenter:function(t,e,i,r){if(this.options.keepCenter){var n=this._getMarginToCenter(this.scale);t+=n.left>0?n.left:0,e+=n.top>0?n.top:0}this.scrollTo(t,e,i,r)},scrollToElement:function(t,e,r,n,a){if(t=t.nodeType?t:this.scroller.querySelector(t)){var s=o.offset(t);if(s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,!0===r&&(r=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===n&&(n=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=r||0,s.top-=n||0,s.left=s.left*this.scale,s.top=s.top*this.scale,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=null==e||"auto"===e?i.max(i.abs(this.x-s.left),i.abs(this.y-s.top)):e,this.options.keepCenter){var l=this._getMarginToCenter(this.scale);s.left=l.left>0?l.left:s.left,s.top=l.top>0?l.top:s.top}this.scrollTo(s.left,s.top,e,a)}},scrollToElementWithFrame:function(t,e,r,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var a=o.offset(t);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top;var s=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2),l=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2+r/2);a.left-=s||0,a.top-=l||0,a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>0?0:a.top<this.maxScrollY-r?this.maxScrollY-r:a.top;var c=this._getMarginToCenter(1);c.left>0&&(a.left=c.left),e=null==e||"auto"===e?i.max(i.abs(this.x-a.left),i.abs(this.y-a.top)):e,n=n||o.ease.circular,this.isInTransition=!1,!e||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(e),this._translate(a.left,a.top)):this._animate(a.left,a.top,e,n.fn)}},save:function(){this.saveScrollX=this.x,this.saveScrollY=this.y,this.saveScale=this.scale},restore:function(){this.scale!==this.saveScale&&this.zoom(this.saveScale),this.scrollTo(this.saveScrollX,this.saveScrollY,0),this.refresh()},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[o.style.transitionDuration]=t+"ms",!t&&o.isBadAndroid,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[o.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[o.style.transform]="translate("+t+"px,"+e+"px) scale("+this.scale+") "+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var r=this.indicators.length;r--;)this.indicators[r].updatePosition()},_initEvents:function(e){var i=e?o.removeEvent:o.addEvent,r=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(r,"mousemove",this),i(r,"mousecancel",this),i(r,"mouseup",this),i(this.wrapper,"mouseleave",this)),!o.hasPointer||this.options.disablePointer||o.hasTouch||(i(this.wrapper,o.prefixPointerEvent("pointerdown"),this),i(r,o.prefixPointerEvent("pointermove"),this),i(r,o.prefixPointerEvent("pointercancel"),this),i(r,o.prefixPointerEvent("pointerup"),this),i(this.wrapper,o.prefixPointerEvent("pointerleave"),this)),o.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(r,"touchmove",this),i(r,"touchcancel",this),i(r,"touchend",this),i(this.wrapper,"touchleave",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,r=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(e=+((r=r[o.style.transform].split(")")[0].split(", "))[12]||r[4]),i=+(r[13]||r[5])):(e=+r.left.replace(/[^-\d.]/g,""),i=+r.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){var t,e=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,r=[],n=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:s("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),r.push(t)),this.options.scrollX&&(t={el:s("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),r.push(t))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var o=r.length;o--;)this.indicators.push(new l(this,r[o]));function a(t){for(var e=n.indicators.length;e--;)t.call(n.indicators[e])}this.options.fadeScrollbars&&(this.on("scrollEnd",(function(){a((function(){this.fade()}))})),this.on("scrollCancel",(function(){a((function(){this.fade()}))})),this.on("scrollStart",(function(){a((function(){this.fade(1)}))})),this.on("beforeScrollStart",(function(){a((function(){this.fade(1,!0)}))}))),this.on("refresh",(function(){a((function(){this.refresh()}))})),this.on("destroy",(function(){a((function(){this.destroy()})),delete this.indicators}))},_initZoom:function(){this.scrollerStyle[o.style.transformOrigin]="0 0"},_zoomStart:function(t){var e=i.abs(t.touches[0].pageX-t.touches[1].pageX),r=i.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=i.sqrt(e*e+r*r),this.startScale=this.scale;var n={top:0,left:0};this.options.keepCenter&&(n=this._getMarginToCenter(1)),this.originX=i.abs(t.touches[0].pageX+t.touches[1].pageX)/2+this.wrapperOffset.left-this.x-n.left,this.originY=i.abs(t.touches[0].pageY+t.touches[1].pageY)/2+this.wrapperOffset.top-this.y-n.top,this._execEvent("zoomStart")},_zoom:function(t){if(this.enabled&&o.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,r,n,a=i.abs(t.touches[0].pageX-t.touches[1].pageX),s=i.abs(t.touches[0].pageY-t.touches[1].pageY),l=i.sqrt(a*a+s*s),c=1/this.touchesDistanceStart*l*this.startScale;this.scaled=!0,c<this.options.zoomMin?c=.5*this.options.zoomMin*i.pow(2,c/this.options.zoomMin):c>this.options.zoomMax&&(c=2*this.options.zoomMax*i.pow(.5,this.options.zoomMax/c)),e=c/this.startScale,r=this.originX-this.originX*e+this.startX,n=this.originY-this.originY*e+this.startY,this.scale=c,this.scrollTo(r,n,0)}},_zoomEnd:function(t){if(this.enabled&&o.eventType[t.type]===this.initiated){var e,i,r;if(this.options.preventDefault&&t.preventDefault(),this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.refresh(),r=this.scale/this.startScale,e=this.originX-this.originX*r+this.startX,i=this.originY-this.originY*r+this.startY,e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this.options.keepCenter){var n=this._getMarginToCenter(this.scale);e+=n.left>0?n.left:0,i+=n.top>0?n.top:0}this.x==e&&this.y==i||this.scrollTo(e,i,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},zoom:function(t,e,i,r){if(this.enabled&&(this._execEvent("zoomStart"),t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t!=this.scale)){var n=t/this.scale;if(e=void 0===e?this.wrapperWidth/2:e,i=void 0===i?this.wrapperHeight/2:i,r=void 0===r?300:r,e=e+this.wrapperOffset.left-this.x,i=i+this.wrapperOffset.top-this.y,e=e-e*n+this.x,i=i-i*n+this.y,this.scale=t,this.refresh(),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this.options.keepCenter){var o=this._getMarginToCenter(t);e=o.left>0?o.left:e,i=o.top>0?o.top:i}this.scrollTo(e,i,r),this._execEvent("zoomEnd")}},zoomAndScrollTo:function(t,e,i){if(this.enabled){this._execEvent("zoomStart");this.scale;this.scale=t,e=(this.wrapperOffset.left+this.wrapperWidth)/2-e*t,i=(this.wrapperOffset.top+this.wrapperHeight)/2-i*t,this.refresh(),this.scrollTo(e,i),this._execEvent("zoomEnd")}},_getMarginToCenter:function(t){var e=(this.wrapperWidth-(parseInt(this.scrollerStyle.width)+2*parseInt(this.scrollerStyle.paddingLeft))*t)/2,i=(this.wrapperHeight-(parseInt(this.scrollerStyle.height)+2*parseInt(this.scrollerStyle.paddingTop))*t)/2;return{left:e=e<0?0:e,top:i=i<0?0:i}},_wheelZoom:function(t){var e,r,n=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((function(){n._execEvent("zoomEnd")}),400),"deltaX"in t)e=-t.deltaY/i.abs(t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaY/i.abs(t.wheelDeltaY);else if("wheelDelta"in t)e=t.wheelDelta/i.abs(t.wheelDelta);else{if(!("detail"in t))return;e=-t.detail/i.abs(t.wheelDelta)}r=this.scale+e/5,this.zoom(r,t.pageX,t.pageY,0)},_initWheel:function(){o.addEvent(this.wrapper,"wheel",this),o.addEvent(this.wrapper,"mousewheel",this),o.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",(function(){o.removeEvent(this.wrapper,"wheel",this),o.removeEvent(this.wrapper,"mousewheel",this),o.removeEvent(this.wrapper,"DOMMouseScroll",this)}))},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,n,o,a,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((function(){s._execEvent("scrollEnd"),s.wheelTimeout=void 0}),400),"deltaX"in t)e=-t.deltaX,n=-t.deltaY;else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,n=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=n=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=n=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=n,n=0),this.options.snap)return o=this.currentPage.pageX,a=this.currentPage.pageY,e>0?o--:e<0&&o++,n>0?a--:n<0&&a++,void this.goToPage(o,a);if(o=this.x+i.round(this.hasHorizontalScroll?e:0),a=this.y+i.round(this.hasVerticalScroll?n:0),0==this.maxScrollX&&0==this.maxScrollY)return e>0?(r=!1,void this._execEvent("prevPage")):(r=!1,void this._execEvent("nextPage"));if(o>0){if(o=0,!this.hasVerticalScroll&&0==this.x)return r=!1,void this._execEvent("prevPage")}else if(o<this.maxScrollX&&(o=this.maxScrollX,!this.hasVerticalScroll&&this.x==this.maxScrollX))return r=!0,void this._execEvent("nextPage");if(a>0){if(a=0,0==this.y)return r=!1,void this._execEvent("prevPage")}else if(a<this.maxScrollY&&(a=this.maxScrollY,this.y==this.maxScrollY))return r=!0,void this._execEvent("nextPage");if(this.options.keepCenter){var l=this._getMarginToCenter(this.scale);o+=l.left>0?l.left:0,a+=l.top>0?l.top:0}this.scrollTo(o,a,0),this.options.probeType>1&&this._execEvent("scroll"),this._execEvent("scrollMove")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",(function(){var t,e,r,n,o,a,s=0,l=0,c=0,d=this.options.snapStepX||this.wrapperWidth,h=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(r=i.round(d/2),n=i.round(h/2);c>-this.scrollerWidth;){for(this.pages[s]=[],t=0,o=0;o>-this.scrollerHeight;)this.pages[s][t]={x:i.max(c,this.maxScrollX),y:i.max(o,this.maxScrollY),width:d,height:h,cx:c-r,cy:o-n},o-=h,t++;c-=d,s++}else for(t=(a=this.options.snap).length,e=-1;s<t;s++)(0===s||a[s].offsetLeft<=a[s-1].offsetLeft)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),c=i.max(-a[s].offsetLeft,this.maxScrollX),o=i.max(-a[s].offsetTop,this.maxScrollY),r=c-i.round(a[s].offsetWidth/2),n=o-i.round(a[s].offsetHeight/2),this.pages[l][e]={x:c,y:o,width:a[s].offsetWidth,height:a[s].offsetHeight,cx:r,cy:n},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})),this.on("flick",(function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)}))},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,n=this.pages.length,o=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);r<n;r++)if(t>=this.pages[r][0].cx){t=this.pages[r][0].x;break}for(n=this.pages[r].length;o<n;o++)if(e>=this.pages[0][o].cy){e=this.pages[0][o].y;break}return r==this.currentPage.pageX&&((r+=this.directionX)<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),t=this.pages[r][0].x),o==this.currentPage.pageY&&((o+=this.directionY)<0?o=0:o>=this.pages[0].length&&(o=this.pages[0].length-1),e=this.pages[0][o].y),{x:t,y:e,pageX:r,pageY:o}},goToPage:function(t,e,r,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var o=this.pages[t][e].x,a=this.pages[t][e].y;r=void 0===r?this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-this.x),1e3),i.min(i.abs(a-this.y),1e3)),300):r,this.currentPage={x:o,y:a,pageX:t,pageY:e},this.scrollTo(o,a,r,n)},next:function(t,e){var i=this.currentPage.pageX,r=this.currentPage.pageY;++i>=this.pages.length&&this.hasVerticalScroll&&(i=0,r++),this.goToPage(i,r,t,e)},prev:function(t,e){var i=this.currentPage.pageX,r=this.currentPage.pageY;--i<0&&this.hasVerticalScroll&&(i=0,r--),this.goToPage(i,r,t,e)},_initKeys:function(e){var i,r={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in r)this.options.keyBindings[i]=this.options.keyBindings[i]||r[i];o.addEvent(t,"keydown",this),this.on("destroy",(function(){o.removeEvent(t,"keydown",this)}))},_key:function(t){if(this.enabled){var e,n=this.options.snap,a=n?this.currentPage.pageX:this.x,s=n?this.currentPage.pageY:this.y,l=o.getTime(),c=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=l-c<200?i.min(this.keyAcceleration+.25,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?a+=n?1:this.wrapperWidth:s+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?a-=n?1:this.wrapperWidth:s-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:a=n?this.pages.length-1:this.maxScrollX,s=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:a=0,s=0;break;case this.options.keyBindings.left:a+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:a-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=n?1:5+this.keyAcceleration>>0;break;default:return}switch(t.keyCode){case this.options.keyBindings.pageUp:0!==this.y&&this.hasVerticalScroll?r=!0:(r=!1,this._execEvent("prevPage"));break;case this.options.keyBindings.pageDown:this.y!==this.maxScrollY&&this.hasVerticalScroll?r=!1:(r=!0,this._execEvent("nextPage"))}n?this.goToPage(a,s):(a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollX&&(a=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY?(s=this.maxScrollY,this.keyAcceleration=0):r=void 0,r?s=0:0==r&&(s=this.maxScrollY),this.scrollTo(a,s,0),this.resetPosition(),this.keyTime=l)}},_animate:function(t,e,i,r){var a=this,s=this.x,l=this.y,c=o.getTime(),d=c+i;this.isAnimating=!0,function h(){var u,f,p,g=o.getTime();if(g>=d)return a.isAnimating=!1,a._translate(t,e),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"));p=r(g=(g-c)/i),u=(t-s)*p+s,f=(e-l)*p+l,a._translate(u,f),a.isAnimating&&n(h),3==a.options.probeType&&a._execEvent("scroll")}()},_initInfinite:function(){var t=this.options.infiniteElements;this.infiniteElements="string"==typeof t?e.querySelectorAll(t):t,this.infiniteLength=this.infiniteElements.length,this.infiniteMaster=this.infiniteElements[0],this.infiniteElementHeight=this.infiniteMaster.offsetHeight,this.infiniteHeight=this.infiniteLength*this.infiniteElementHeight,this.options.cacheSize=this.options.cacheSize||1e3,this.infiniteCacheBuffer=i.round(this.options.cacheSize/4),this.options.dataset.call(this,0,this.options.cacheSize),this.on("refresh",(function(){var t=i.ceil(this.wrapperHeight/this.infiniteElementHeight);this.infiniteUpperBufferSize=i.floor((this.infiniteLength-t)/2),this.reorderInfinite(!0)})),this.on("scroll",this.reorderInfinite)},reorderInfinite:function(t){this.y,this.wrapperHeight;for(var e=i.max(i.floor(-this.y/this.infiniteElementHeight)-this.infiniteUpperBufferSize,0),r=i.floor(e/this.infiniteLength),n=e-r*this.infiniteLength,a=0,s=0,l=[],c=i.floor(e/this.infiniteCacheBuffer);s<this.infiniteLength;)a=s*this.infiniteElementHeight+r*this.infiniteHeight,n>s&&(a+=this.infiniteElementHeight*this.infiniteLength),(this.infiniteElements[s]._top!==a||t)&&(this.infiniteElements[s]._phase=a/this.infiniteElementHeight,(this.infiniteElements[s]._phase<this.options.infiniteLimit||t)&&(this.infiniteElements[s]._top=a,this.options.infiniteUseTransform?this.infiniteElements[s].style[o.style.transform]="translate(0, "+a+"px)"+this.translateZ:this.infiniteElements[s].style.top=a+"px",l.push(this.infiniteElements[s]))),s++;this.cachePhase!=c&&(0===c||e-this.infiniteCacheBuffer>0)&&this.options.dataset.call(this,i.max(c*this.infiniteCacheBuffer-this.infiniteCacheBuffer,0),this.options.cacheSize),this.cachePhase=c,this.updateContent(l)},updateContent:function(t){if(void 0!==this.infiniteCache)for(var e=0,i=t.length;e<i;e++)this.options.dataFiller.call(this,t[e],this.infiniteCache[t[e]._phase])},updateCache:function(t,e){var i=void 0===this.infiniteCache;this.infiniteCache={};for(var r=0,n=e.length;r<n;r++)this.infiniteCache[t++]=e[r];i&&this.updateContent(this.infiniteElements)},refreshInfinite:function(t){this.options.infiniteLimit=t-1,this.options.dataset.call(this,i.max(this.cachePhase*this.infiniteCacheBuffer-this.infiniteCacheBuffer,0),this.options.cacheSize),this.refresh()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);var e=this.options.parentScroll;this.options.zoom&&t.touches&&t.touches.length>1?this._zoomStart(t):!this.options.zoom&&e&&e.zoom&&t.touches&&t.touches.length>1&&e._zoomStart(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":case"mouseleave":case"pointerleave":case"touchleave":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.wheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t);break;case"mouseleave":case"pointerleave":case"touchleave":this._end(t)}},setScrollTop:function(t){r=t},getScrollTop:function(){return r},getMaxScrollY:function(){return this.maxScrollY}},l.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(o.removeEvent(this.indicator,"touchstart",this),o.removeEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.removeEvent(this.indicator,"mousedown",this),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),o.removeEvent(t,"touchend",this),o.removeEvent(t,o.prefixPointerEvent("pointerup"),this),o.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){if(this.enabled){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=o.getTime(),this.options.disableTouch||o.addEvent(t,"touchmove",this),this.options.disablePointer||o.addEvent(t,o.prefixPointerEvent("pointermove"),this),this.options.disableMouse||o.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")}},_move:function(t){var e,i,r,n,a=t.touches?t.touches[0]:t;o.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=a.pageX-this.lastPointX,this.lastPointX=a.pageX,i=a.pageY-this.lastPointY,this.lastPointY=a.pageY,r=this.x+e,n=this.y+i,this._pos(r,n),this.scroller._execEvent("scroll"),this.scroller._execEvent("scrollMove"),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),this.scroller.options.snap){var r=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),n=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-r.x),1e3),i.min(i.abs(this.scroller.y-r.y),1e3)),300);this.scroller.x==r.x&&this.scroller.y==r.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=r,this.scroller.scrollTo(r.x,r.y,n,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[o.style.transitionDuration]=t+"ms",!t&&o.isBadAndroid&&(this.indicatorStyle[o.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[o.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(o.addClass(this.wrapper,"iScrollBothScrollbars"),o.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(o.removeClass(this.wrapper,"iScrollBothScrollbars"),o.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.scroller.options.infiniteLimit?this.indicatorHeight=i.max(this.wrapperHeight*this.wrapperHeight/(this.scroller.infiniteElementHeight*this.scroller.options.infiniteLimit+2),20):this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[o.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,r=t?0:300;t=t?"1":"0",this.wrapperStyle[o.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),r)}}},a.utils=o,"undefined"!=typeof module&&module.exports?module.exports=a:t.IScroll=a}(window,document,Math),function(t){if(t.zepto&&!t.fn.removeData)throw new ReferenceError("Zepto is loaded without the data module.");t.fn.crownixNoUiSlider=function(e,i){var r=t(document),n=t("body"),o=".nui",a=t.fn.val,s=["crownix-noUi-base","crownix-noUi-origin","crownix-noUi-handle","crownix-noUi-input","crownix-noUi-active","crownix-noUi-state-tap","crownix-noUi-target","-lower","-upper","crownix-noUi-connect","crownix-noUi-horizontal","crownix-noUi-vertical","crownix-noUi-background","crownix-noUi-stacking","crownix-noUi-block","crownix-noUi-state-blocked","crownix-noUi-ltr","crownix-noUi-rtl","crownix-noUi-dragable","crownix-noUi-extended","crownix-noUi-state-drag"],l=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"};function c(t,e){return 100*e/(t[1]-t[0])}function d(t,e){return c(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function h(e){return e instanceof t||t.zepto&&t.zepto.isZ(e)}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function f(e,i){t.isArray(e)||(e=[e]),t.each(e,(function(){"function"==typeof this&&this.call(i)}))}function p(t,e){return Math.round(t/e)*e}function g(t,e){return parseFloat(t.toFixed(e))}function m(e,i,r,n){var a=n.target;return e=e.replace(/\s/g,o+" ")+o,i.on(e,(function(e){var i=a.attr("disabled");if(i=!(null==i),a.hasClass("crownix-noUi-state-tap")||i)return!1;r(function(e){e.preventDefault();var i,r,n=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),a=0===e.type.indexOf("pointer"),s=e;return 0===e.type.indexOf("MSPointer")&&(a=!0),e.originalEvent&&(e=e.originalEvent),n&&(i=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY),(o||a)&&(a||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),i=e.clientX+window.pageXOffset,r=e.clientY+window.pageYOffset),t.extend(s,{pointX:i,pointY:r,cursor:o})}(e),n,a.data("base").data("options"))}))}function v(e){var i=this.target;if(void 0===e)return this.element.data("value");!0===e?e=this.element.data("value"):this.element.data("value",e),void 0!==e&&t.each(this.elements,(function(){"function"==typeof this?this.call(i,e):this[0][this[1]](e)}))}function w(e,i,r){if(h(i)){var n=[],a=e.data("target");return e.data("options").direction&&(r=r?0:1),i.each((function(){t(this).on("change"+o,function(e,i){return function(){var r=[null,null];r[i]=t(this).val(),e.val(r,!0)}}(a,r)),n.push([t(this),"val"])})),n}return"string"==typeof i&&(i=[t('<input type="hidden" name="'+i+'">').appendTo(e).addClass(s[3]).change((function(t){t.stopPropagation()})),"val"]),[i]}function x(e,i,r){var n=[];return t.each(r.to[i],(function(t){n=n.concat(w(e,r.to[i][t],i))})),{element:e,elements:n,target:e.data("target"),val:v}}function b(t,e){var i=t.data("options");e=g(e,7),t.data("target").removeClass(s[14]),t.css(i.style,e+"%").data("pct",e),t.is(":first-child")&&t.toggleClass(s[13],e>50),i.direction&&(e=100-e),t.data("store").val(function(t,e){return t=t.toFixed(e.decimals),0===parseFloat(t)&&(t=t.replace("-0","0")),t.replace(".",e.serialization.mark)}(function(t,e){return e*(t[1]-t[0])/100+t[0]}(i.range,e),i))}function y(t,e){var i=t.data("base"),r=i.data("options"),n=i.data("handles"),o=0,a=100;return!!u(e)&&(r.step&&(e=p(e,r.step)),n.length>1&&(t[0]!==n[0][0]?o=g(n[0].data("pct")+r.margin,7):a=g(n[1].data("pct")-r.margin,7)),(e=Math.min(Math.max(e,o),a<0?100:a))===t.data("pct")?[o||!1,100!==a&&a]:(b(t,e),!0))}function k(t,e,i,r){t.addClass(s[5]),setTimeout((function(){t.removeClass(s[5])}),300),y(e,i),f(r,t.data("target")),t.data("target").change()}function _(e,i,r){var n,o=i.handles,a=e[i.point]-i.start[i.point];if(a=100*a/i.size,1===o.length){if(!0!==(n=y(o[0],i.positions[0]+a)))return void(t.inArray(o[0].data("pct"),n)>=0&&function(t,e){var i=t.data("target");i.hasClass(s[14])||(e||(i.addClass(s[15]),setTimeout((function(){i.removeClass(s[15])}),450)),i.addClass(s[14]),f(t.data("options").block,i))}(i.base,!r.margin))}else{var l,c,d,h;if(r.step&&(a=p(a,r.step)),l=d=i.positions[0]+a,c=h=i.positions[1]+a,l<0?(c+=-1*l,l=0):c>100&&(l-=c-100,c=100),d<0&&!l&&!o[0].data("pct"))return;if(100===c&&h>100&&100===o[1].data("pct"))return;b(o[0],l),b(o[1],c)}f(r.slide,i.target)}function C(t,e,i){1===e.handles.length&&e.handles[0].data("grab").removeClass(s[4]),t.cursor&&n.css("cursor","").off(o),r.off(o),e.target.removeClass(s[14]+" "+s[20]).change(),f(i.set,e.target)}function T(e,i,a){1===i.handles.length&&i.handles[0].data("grab").addClass(s[4]),e.stopPropagation(),m(l.move,r,_,{start:e,base:i.base,target:i.target,handles:i.handles,positions:[i.handles[0].data("pct"),i.handles[i.handles.length-1].data("pct")],point:a.orientation?"pointY":"pointX",size:a.orientation?i.base.height():i.base.width()}),m(l.end,r,C,{target:i.target,handles:i.handles}),e.cursor&&(n.css("cursor",t(e.target).css("cursor")),i.handles.length>1&&i.target.addClass(s[20]),n.on("selectstart"+o,(function(){return!1})))}function S(t,e,i){var r,n,o,a,s=e.base;t.stopPropagation(),i.orientation?(o=t.pointY,a=s.height()):(o=t.pointX,a=s.width()),r=function(t,e,i){if(1===t.length)return t[0];var r=t[0].offset()[i]+t[1].offset()[i];return t[e<r/2?0:1]}(s.data("handles"),o,i.style),n=100*(o-s.offset()[i.style])/a,k(s,r,n,[i.slide,i.set])}function E(t,e,i){var r,n,o=e.base.data("handles");r=(n=(n=i.orientation?t.pointY:t.pointX)<e.base.offset()[i.style])?0:100,n=n?0:o.length-1,k(e.base,o[n],r,[i.slide,i.set])}function M(){var e=t(this).data("base"),i=[];return t.each(e.data("handles"),(function(){i.push(t(this).data("store").val())})),1===i.length?i[0]:e.data("options").direction?i.reverse():i}function A(e,i){return t.isArray(e)||(e=[e]),this.each((function(){var r,n,o=t(this).data("base"),a=Array.prototype.slice.call(o.data("handles"),0),s=o.data("options");for(a.length>1&&(a[2]=a[0]),s.direction&&e.reverse(),n=0;n<a.length;n++)null!=(r=e[n%2])&&("string"===t.type(r)&&(r=r.replace(",",".")),r=d(s.range,parseFloat(r)),s.direction&&(r=100-r),!0!==y(a[n],r)&&a[n].data("store").val(!0),!0===i&&f(s.set,t(this)))}))}return t.fn.val=function(){return this.hasClass(s[6])?arguments.length?A.apply(this,arguments):M.apply(this):a.apply(this,arguments)},(i?function(e){return this.each((function(){var i=t(this).val()||!1,r=t(this).data("options"),n=t.extend({},r,e);!1!==i&&function(e){var i=[[e,""]];t.each(e.data("base").data("handles"),(function(){i=i.concat(t(this).data("store").elements)})),t.each(i,(function(){this.length>1&&this[0].off(o)})),e.removeClass(s.join(" ")),e.empty().removeData("base options")}(t(this)),e&&(t(this).crownixNoUiSlider(n),!1!==i&&n.start===r.start&&t(this).val(i))}))}:function(e){return this.data("options",t.extend(!0,{},e)),(e=t.extend({handles:2,margin:0,connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e)).serialization=e.serialization||{},function(e,i){function r(t){return 2===t.length&&!(!u((t=[parseFloat(t[0]),parseFloat(t[1])])[0])||!u(t[1]))&&!(t[1]<t[0])&&t}var n=function(t,e){switch(t){case 1:case.1:case.01:case.001:case 1e-4:case 1e-5:t=t.toString().split("."),e.decimals="1"===t[0]?0:t[1].length;break;case void 0:e.decimals=2;break;default:return!1}return!0},o=function(t,e,i){if(!t)return e[i].mark=".",!0;switch(t){case".":case",":return!0;default:return!1}},a=function(e,i,r){function n(t){return h(t)||"string"==typeof t||"function"==typeof t||!1===t||h(t[0])&&"function"==typeof t[0][t[1]]}if(e){var o,a;for(l=[[],[]],n(s=e)?l[0].push(s):t.each(s,(function(t,e){t>1||(n(e)?l[t].push(e):l[t]=l[t].concat(e))})),e=l,i.direction&&e[1].length&&e.reverse(),o=0;o<i.handles;o++)for(a=0;a<e[o].length;a++){if(!n(e[o][a]))return!1;e[o][a]||e[o].splice(a,1)}i[r].to=e}else i[r].to=[[],[]];var s,l;return!0},s={handles:{r:!0,t:function(t){return 1===(t=parseInt(t,10))||2===t}},range:{r:!0,t:function(t,e,i){return e[i]=r(t),e[i]&&e[i][0]!==e[i][1]}},start:{r:!0,t:function(e,i,n){return 1===i.handles?(t.isArray(e)&&(e=e[0]),e=parseFloat(e),i.start=[e],u(e)):(i[n]=r(e),!!i[n])}},connect:{r:!0,t:function(t,e,i){if("lower"===t)e[i]=1;else if("upper"===t)e[i]=2;else if(!0===t)e[i]=3;else{if(!1!==t)return!1;e[i]=0}return!0}},orientation:{t:function(t,e,i){switch(t){case"horizontal":e[i]=0;break;case"vertical":e[i]=1;break;default:return!1}return!0}},margin:{r:!0,t:function(t,e,i){return t=parseFloat(t),e[i]=c(e.range,t),u(t)}},direction:{r:!0,t:function(t,e,i){switch(t){case"ltr":e[i]=0;break;case"rtl":e[i]=1,e.connect=[0,2,1,3][e.connect];break;default:return!1}return!0}},behaviour:{r:!0,t:function(t,e,i){return e[i]={tap:t!==(t=t.replace("tap","")),extend:t!==(t=t.replace("extend","")),drag:t!==(t=t.replace("drag","")),fixed:t!==(t=t.replace("fixed",""))},!t.replace("none","").replace(/\-/g,"")}},serialization:{r:!0,t:function(t,e,i){return a(t.to,e,i)&&n(t.resolution,e)&&o(t.mark,e,i)}},slide:{t:function(e){return t.isFunction(e)}},set:{t:function(e){return t.isFunction(e)}},block:{t:function(e){return t.isFunction(e)}},step:{t:function(t,e,i){return t=parseFloat(t),e[i]=c(e.range,t),u(t)}}};t.each(s,(function(t,r){var n=e[t],o=void 0!==n;if(r.r&&!o||o&&!r.t(n,e,t))throw console&&console.log&&console.group&&(console.group("Invalid noUiSlider initialisation:"),console.log("Option:\t",t),console.log("Value:\t",n),console.log("Slider(s):\t",i),console.groupEnd()),new RangeError("noUiSlider")}))}(e,this),e.style=e.orientation?"top":"left",this.each((function(){var i,r,n,o=t(this),a=[],c=t("<div/>").appendTo(o);if(o.data("base"))throw new Error("Slider was already initialized.");for(o.data("base",c).addClass([s[6],s[16+e.direction],s[10+e.orientation]].join(" ")),i=0;i<e.handles;i++)(n=t("<div><div/></div>").appendTo(c)).addClass(s[1]),n.children().addClass([s[2],s[2]+s[7+e.direction+(e.direction?-1*i:i)]].join(" ")),n.data({base:c,target:o,options:e,grab:n.children(),pct:-1}).attr("data-style",e.style),n.data({store:x(n,i,e.serialization)}),a.push(n);switch(e.connect){case 1:o.addClass(s[9]),a[0].addClass(s[12]);break;case 3:a[1].addClass(s[12]);case 2:a[0].addClass(s[9]);case 0:o.addClass(s[12])}if(c.addClass(s[0]).data({target:o,options:e,handles:a}),o.val(e.start),!e.behaviour.fixed)for(i=0;i<a.length;i++)m(l.start,a[i].children(),T,{base:c,target:o,handles:[a[i]]});e.behaviour.tap&&m(l.start,c,S,{base:c,target:o}),e.behaviour.extend&&(o.addClass(s[19]),e.behaviour.tap&&m(l.start,o,E,{base:c,target:o})),e.behaviour.drag&&(r=c.find("."+s[9]).addClass(s[18]),e.behaviour.fixed&&(r=r.add(c.children().not(r).data("grab"))),m(l.start,r,T,{base:c,target:o,handles:a}))}))}).call(this,e)}}(window.jQuery||window.Zepto),function(t,e){var i,r=0,n=/^ui-id-\d+$/;function o(e,i){var r,n,o,s=e.nodeName.toLowerCase();return"area"===s?(n=(r=e.parentNode).name,!(!e.href||!n||"map"!==r.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+n+"]")[0])&&a(o))):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s&&e.href||i)&&a(e)}function a(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:(i=t.fn.focus,function(e,r){return"number"==typeof e?this.each((function(){var i=this;setTimeout((function(){t(i).focus(),r&&r.call(i)}),e)})):i.apply(this,arguments)}),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var r,n,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(r=o.css("position"))||"relative"===r||"fixed"===r)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++r)}))},removeUniqueId:function(){return this.each((function(){n.test(this.id)&&t(this).removeAttr("id")}))}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,r){return!!t.data(e,r[3])},focusable:function(e){return o(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&o(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],(function(i,r){var n="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function s(e,i,r,o){return t.each(n,(function(){i-=parseFloat(t.css(e,"padding"+this))||0,r&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)})),i}t.fn["inner"+r]=function(i){return i===e?a["inner"+r].call(this):this.each((function(){t(this).css(o,s(this,i)+"px")}))},t.fn["outer"+r]=function(e,i){return"number"!=typeof e?a["outer"+r].call(this,e):this.each((function(){t(this).css(o,s(this,e,!0,i)+"px")}))}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(t){t.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,r){var n,o=t.ui[e].prototype;for(n in r)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,r[n]])},call:function(t,e,i){var r,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(r=0;r<n.length;r++)t.options[n[r][0]]&&n[r][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var r,n=i&&"left"===i?"scrollLeft":"scrollTop";return e[n]>0||(e[n]=1,r=e[n]>0,e[n]=0,r)}})}(jQuery),function(t,e){t.extend(t.ui,{crownixdatepicker:{version:"1.10.4"}});var i,r="crownixdatepicker";function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="crownix-ui-datepicker-div",this._inlineClass="crownix-ui-datepicker-inline",this._appendClass="crownix-ui-datepicker-append",this._triggerClass="crownix-ui-datepicker-trigger",this._dialogClass="crownix-ui-datepicker-dialog",this._disableClass="crownix-ui-datepicker-disabled",this._unselectableClass="crownix-ui-datepicker-unselectable",this._currentClass="crownix-ui-datepicker-current-day",this._dayOverClass="crownix-ui-datepicker-days-cell-over",this.locale="ko",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"MM/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this.regional.ko={closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:"yy-MM-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"년"},this.regional.ja={closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/MM/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},this.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-MM-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1,japanYear:null,checkZero:0},t.extend(this._defaults,this.regional[""]),this.dpDiv=o(t("<div id='"+this._mainDivId+"' class='crownix-ui-datepicker crownix-ui-widget crownix-ui-widget-content crownix-ui-helper-clearfix crownix-ui-corner-all'></div>"))}function o(e){var r="button, .crownix-ui-datepicker-prev, .crownix-ui-datepicker-next, .crownix-ui-datepicker-calendar td a";return e.delegate(r,"mouseout",(function(){t(this).removeClass("crownix-ui-state-hover"),-1!==this.className.indexOf("crownix-ui-datepicker-prev")&&t(this).removeClass("crownix-ui-datepicker-prev-hover"),-1!==this.className.indexOf("crownix-ui-datepicker-next")&&t(this).removeClass("crownix-ui-datepicker-next-hover")})).delegate(r,"mouseover",(function(){t.crownixdatepicker._isDisabledDatepicker(i.inline?e.parent()[0]:i.input[0])||(t(this).parents(".crownix-ui-datepicker-calendar").find("a").removeClass("crownix-ui-state-hover"),t(this).addClass("crownix-ui-state-hover"),-1!==this.className.indexOf("crownix-ui-datepicker-prev")&&t(this).addClass("crownix-ui-datepicker-prev-hover"),-1!==this.className.indexOf("crownix-ui-datepicker-next")&&t(this).addClass("crownix-ui-datepicker-next-hover"))}))}function a(e,i){for(var r in t.extend(e,i),i)null==i[r]&&(e[r]=i[r]);return e}t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var r,n,o;n="div"===(r=e.nodeName.toLowerCase())||"span"===r,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),n)).settings=t.extend({},i||{}),"input"===r?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?o(t("<div class='"+this._inlineClass+" crownix-ui-datepicker crownix-ui-widget crownix-ui-widget-content crownix-ui-helper-clearfix crownix-ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var r,n,o,a=this._get(i,"appendText"),s=this._get(i,"isRTL");if(i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[s?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"===(r=this._get(i,"showOn"))||"both"===r){var l=this;e.focus((function(e){this.readOnly||(m2soft.crownix.Util.browser.mobile&&t(this).blur(),l._showDatepicker(e))})),e.on(m2soft.crownix.Util.ActionEvents.start+" touchstart",(function(t){this.readOnly||l._showDatepicker(t)}))}"button"!==r&&"both"!==r||(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[s?"before":"after"](i.trigger),i.trigger.click((function(){return t.crownixdatepicker._datepickerShowing&&t.crownixdatepicker._lastInput===e[0]?t.crownixdatepicker._hideDatepicker():t.crownixdatepicker._datepickerShowing&&t.crownixdatepicker._lastInput!==e[0]?(t.crownixdatepicker._hideDatepicker(),t.crownixdatepicker._showDatepicker(e[0])):t.crownixdatepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,r,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,r=0,n=0;n<t.length;n++)t[n].length>i&&(i=t[n].length,r=n);return r},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,s){var l,c,d,h,u,f=this._dialogInst;return f||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(f=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],r,f)),a(f.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,f),this},_destroyDatepicker:function(e){var i,n=t(e),o=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,o=t(e),a=t.data(e,r);o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,a.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().removeClass("crownix-ui-state-disabled"),n.find("select.crownix-ui-datepicker-month, select.crownix-ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,n,o=t(e),a=t.data(e,r);o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,a.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().addClass("crownix-ui-state-disabled"),n.find("select.crownix-ui-datepicker-month, select.crownix-ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,r,n){var o,s,l,c,d=this._getInst(i);if(2===arguments.length&&"string"==typeof r)return"defaults"===r?t.extend({},t.crownixdatepicker._defaults):d?"all"===r?t.extend({},d.settings):this._get(d,r):null;o=r||{},"string"==typeof r&&((o={})[r]=n),d&&(this._curInst===d&&this._hideDatepicker(),s=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),a(d.settings,o),null!==l&&o.dateFormat!==e&&o.minDate===e&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&o.dateFormat!==e&&o.maxDate===e&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),d),this._autoSize(d),this._setDate(d,s),this._updateAlternate(d),this._updateDatepicker(d))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,r,n,o=t.crownixdatepicker._getInst(e.target),a=!0,s=o.dpDiv.is(".crownix-ui-datepicker-rtl");if(o._keyEvent=!0,t.crownixdatepicker._datepickerShowing)switch(e.keyCode){case 9:t.crownixdatepicker._hideDatepicker(),a=!1;break;case 13:return(n=t("td."+t.crownixdatepicker._dayOverClass+":not(."+t.crownixdatepicker._currentClass+")",o.dpDiv))[0]&&t.crownixdatepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),(i=t.crownixdatepicker._get(o,"onSelect"))?(r=t.crownixdatepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[r,o])):t.crownixdatepicker._hideDatepicker(),!1;case 27:t.crownixdatepicker._hideDatepicker();break;case 33:t.crownixdatepicker._adjustDate(e.target,e.ctrlKey?-t.crownixdatepicker._get(o,"stepBigMonths"):-t.crownixdatepicker._get(o,"stepMonths"),"M");break;case 34:t.crownixdatepicker._adjustDate(e.target,e.ctrlKey?+t.crownixdatepicker._get(o,"stepBigMonths"):+t.crownixdatepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._adjustDate(e.target,s?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.crownixdatepicker._adjustDate(e.target,e.ctrlKey?-t.crownixdatepicker._get(o,"stepBigMonths"):-t.crownixdatepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._adjustDate(e.target,s?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.crownixdatepicker._adjustDate(e.target,e.ctrlKey?+t.crownixdatepicker._get(o,"stepBigMonths"):+t.crownixdatepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.crownixdatepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.crownixdatepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,r,n=t.crownixdatepicker._getInst(e.target);if(t.crownixdatepicker._get(n,"constrainInput"))return i=t.crownixdatepicker._possibleChars(t.crownixdatepicker._get(n,"dateFormat")),r=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||r<" "||!i||i.indexOf(r)>-1},_doKeyUp:function(e){var i=t.crownixdatepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.crownixdatepicker.parseDate(t.crownixdatepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.crownixdatepicker._getFormatConfig(i),t.crownixdatepicker._get(i,"japanYear"),t.crownixdatepicker._get(i,"checkZero"))&&(t.crownixdatepicker._setDateFromField(i),t.crownixdatepicker._updateAlternate(i),t.crownixdatepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,r,n,o,s,l,c;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.crownixdatepicker._isDisabledDatepicker(e)||t.crownixdatepicker._lastInput===e)||(i=t.crownixdatepicker._getInst(e),t.crownixdatepicker._curInst&&t.crownixdatepicker._curInst!==i&&(t.crownixdatepicker._curInst.dpDiv.stop(!0,!0),i&&t.crownixdatepicker._datepickerShowing&&t.crownixdatepicker._hideDatepicker(t.crownixdatepicker._curInst.input[0])),!1!==(n=(r=t.crownixdatepicker._get(i,"beforeShow"))?r.apply(e,[e,i]):{})&&(a(i.settings,n),i.lastVal=null,t.crownixdatepicker._lastInput=e,t.crownixdatepicker._setDateFromField(i),t.crownixdatepicker._inDialog&&(e.value=""),t.crownixdatepicker._pos||(t.crownixdatepicker._pos=t.crownixdatepicker._findPos(e),t.crownixdatepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each((function(){return!(o|="fixed"===t(this).css("position"))})),s={left:t.crownixdatepicker._pos[0],top:t.crownixdatepicker._pos[1]},t.crownixdatepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.crownixdatepicker._updateDatepicker(i),s=t.crownixdatepicker._checkOffset(i,s,o),i.dpDiv.css({position:t.crownixdatepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline||(l=t.crownixdatepicker._get(i,"showAnim"),c=t.crownixdatepicker._get(i,"duration"),t(e).zIndex()<t("#crownix-html5-viewer").zIndex()?i.dpDiv.zIndex(t("#crownix-html5-viewer").zIndex()+1):i.dpDiv.zIndex(t(e).zIndex()+1),t.crownixdatepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.crownixdatepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),t.crownixdatepicker._shouldFocusInput(i)&&i.input.focus(),t.crownixdatepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,i=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r,n=this._getNumberOfMonths(e),o=n[1];e.dpDiv.removeClass("crownix-ui-datepicker-multi-2 crownix-ui-datepicker-multi-3 crownix-ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("crownix-ui-datepicker-multi-"+o).css("width",17*o+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("crownix-ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("crownix-ui-datepicker-rtl"),e===t.crownixdatepicker._curInst&&t.crownixdatepicker._datepickerShowing&&t.crownixdatepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(r=e.yearshtml,setTimeout((function(){r===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.crownix-ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null}),0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,r){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(r?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(r?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=r&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=r&&i.top===e.input.offset().top+s?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+s):0),i},_findPos:function(e){for(var i,r=this._getInst(e),n=this._get(r,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,n,o,a,s=this._curInst;!s||e&&s!==t.data(e,r)||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),o=function(){t.crownixdatepicker._tidyDialog(s)},t.effects&&(t.effects.effect[i]||t.effects[i])?s.dpDiv.hide(i,t.crownixdatepicker._get(s,"showOptions"),n,o):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,(a=this._get(s,"onClose"))&&a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".crownix-ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.crownixdatepicker._curInst){var i=t(e.target),r=t.crownixdatepicker._getInst(i[0]);(i[0].id===t.crownixdatepicker._mainDivId||0!==i.parents("#"+t.crownixdatepicker._mainDivId).length||i.hasClass(t.crownixdatepicker.markerClassName)||i.closest("."+t.crownixdatepicker._triggerClass).length||!t.crownixdatepicker._datepickerShowing||t.crownixdatepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.crownixdatepicker.markerClassName)||t.crownixdatepicker._curInst===r)||t.crownixdatepicker._hideDatepicker()}},_adjustDate:function(e,i,r){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===r?this._get(o,"showCurrentAtPos"):0),r),this._updateDatepicker(o))},_gotoToday:function(e){var i,r=t(e),n=this._getInst(r[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(r)},_selectMonthYear:function(e,i,r){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===r?"Month":"Year")]=o["draw"+("M"===r?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,r,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((o=this._getInst(a[0])).selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=r,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var r,n=t(e),o=this._getInst(n[0]);if(i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(r=this._get(o,"onSelect"))?r.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline)this._updateDatepicker(o);else{this._lastInput=o.input[0],"object"==typeof o.input[0]&&o.input.focus();var a=this;setTimeout((function(){a._hideDatepicker(),a._lastInput=null}))}},_updateAlternate:function(e){var i,r,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),japanYear=this._get(e,"japanYear"),checkZero=this._get(e,"checkZero"),n=this.formatDate(i,r,this._getFormatConfig(e),japanYear,checkZero),t(o).each((function(){t(this).val(n)})))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,r,n,o){if(null==e||null==i)throw"Invalid arguments";return""===(i="object"==typeof i?i.toString():i+"")?null:new Date(m2soft.crownix.DateParser.getDateFromFormat(e,i,t.crownixdatepicker.locale,n,o))},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,i,r,n,o){if(!i)return"";var a=new Date;return i.setHours(a.getHours()),i.setMinutes(a.getMinutes()),i.setSeconds(a.getSeconds()),m2soft.crownix.DateParser.formatDate(e,i,t.crownixdatepicker.locale,n,o)},_possibleChars:function(t){var e,i="",r=!1,n=function(i){var r=e+1<t.length&&t.charAt(e+1)===i;return r&&e++,r};for(e=0;e<t.length;e++)if(r)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):r=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":r=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),r=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t),s=this._get(t,"japanYear"),l=this._get(t,"checkZero");try{o=this.parseDate(i,r,a,s,l)||n}catch(t){r=e?"":r}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=r?o.getDate():0,t.currentMonth=r?o.getMonth():0,t.currentYear=r?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,r){var n,o,a=null==i||""===i?r:"string"==typeof i?function(i){try{return t.crownixdatepicker.parseDate(t.crownixdatepicker._get(e,"dateFormat"),i,t.crownixdatepicker._getFormatConfig(e),t.crownixdatepicker._get(e,"japanYear"),t.crownixdatepicker._get(e,"checkZero"))}catch(t){}for(var r=(i.toLowerCase().match(/^c/)?t.crownixdatepicker._getDate(e):null)||new Date,n=r.getFullYear(),o=r.getMonth(),a=r.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(i);l;){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),a=Math.min(a,t.crownixdatepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(l[1],10),a=Math.min(a,t.crownixdatepicker._getDaysInMonth(n,o))}l=s.exec(i)}return new Date(n,o,a)}(i):"number"==typeof i?isNaN(i)?r:(n=i,(o=new Date).setDate(o.getDate()+n),o):new Date(i.getTime());return(a=a&&"Invalid Date"===a.toString()?r:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var r=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(r?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),r="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.crownixdatepicker._adjustDate(r,-i,"M")},next:function(){t.crownixdatepicker._adjustDate(r,+i,"M")},hide:function(){t.crownixdatepicker._hideDatepicker()},today:function(){t.crownixdatepicker._gotoToday(r)},selectDay:function(){return t.crownixdatepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.crownixdatepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return t.crownixdatepicker._selectMonthYear(r,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b,y,k,_,C,T,S,E,M,A,P,I,D,F,O,R,B,$,N,L,q=new Date,j=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),z=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),U=this._get(t,"hideIfNoPrevNext"),V=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),X=1!==W[0]||1!==W[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-Y,tt=t.drawYear,et=this._get(t,"japanYear"),it=this._get(t,"checkZero");if(Q<0&&(Q+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-W[0]*W[1]+1,J.getDate())),e=Z&&e<Z?Z:e;this._daylightSavingAdjust(new Date(tt,Q,1))>e;)--Q<0&&(Q=11,tt--);for(t.drawMonth=Q,t.drawYear=tt,i=this._get(t,"prevText"),V&&this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Q-G,1)),this._getFormatConfig(t)),i=it,r=this._canAdjustMonth(t,-1,tt,Q)?"<a class='crownix-ui-datepicker-prev crownix-ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(z?"e":"w")+"'>◀</span></a>":U?"":"<a class='crownix-ui-datepicker-prev crownix-ui-corner-all crownix-ui-state-disabled' title='"+i+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(z?"e":"w")+"'>◀</span></a>",n=this._get(t,"nextText"),V&&this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Q+G,1)),this._getFormatConfig(t)),n=it,o=this._canAdjustMonth(t,1,tt,Q)?"<a class='crownix-ui-datepicker-next crownix-ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(z?"w":"e")+"'>▶</span></a>":U?"":"<a class='crownix-ui-datepicker-next crownix-ui-corner-all crownix-ui-state-disabled' title='"+n+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(z?"w":"e")+"'>▶</span></a>",a=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?K:j,a=V?this.formatDate(a,s,this._getFormatConfig(t),et,it):a,l=t.inline?"":"<button type='button' class='crownix-ui-datepicker-close crownix-ui-state-default crownix-ui-priority-primary crownix-ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=H?"<div class='crownix-ui-datepicker-buttonpane crownix-ui-widget-content'>"+(z?l:"")+(this._isInRange(t,s)?"<button type='button' class='crownix-ui-datepicker-current crownix-ui-state-default crownix-ui-priority-secondary crownix-ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(z?"":l)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(t,"showWeek"),u=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),w=this._get(t,"selectOtherMonths"),x=this._getDefaultDate(t),b="",k=0;k<W[0];k++){for(_="",this.maxRows=4,C=0;C<W[1];C++){if(T=this._daylightSavingAdjust(new Date(tt,Q,t.selectedDay)),S=" crownix-ui-corner-all",E="",X){if(E+="<div class='crownix-ui-datepicker-group",W[1]>1)switch(C){case 0:E+=" crownix-ui-datepicker-group-first",S=" crownix-ui-corner-"+(z?"right":"left");break;case W[1]-1:E+=" crownix-ui-datepicker-group-last",S=" crownix-ui-corner-"+(z?"left":"right");break;default:E+=" crownix-ui-datepicker-group-middle",S=""}E+="'>"}for(E+="<div class='crownix-ui-datepicker-header crownix-ui-widget-header crownix-ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===k?z?o:r:"")+(/all|right/.test(S)&&0===k?z?r:o:"")+this._generateMonthYearHeader(t,Q,tt,Z,J,k>0||C>0,p,g)+"</div><table class='crownix-ui-datepicker-calendar'><thead><tr>",M=h?"<th class='crownix-ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",y=0;y<7;y++)M+="<th"+((y+d+6)%7>=5?" class='crownix-ui-datepicker-week-end'":"")+"><span title='"+u[A=(y+d)%7]+"'>"+f[A]+"</span></th>";for(E+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Q),tt===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),I=(this._getFirstDayOfMonth(tt,Q)-d+7)%7,D=Math.ceil((I+P)/7),F=X&&this.maxRows>D?this.maxRows:D,this.maxRows=F,O=this._daylightSavingAdjust(new Date(tt,Q,1-I)),R=0;R<F;R++){for(E+="<tr>",B=h?"<td class='crownix-ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",y=0;y<7;y++)$=m?m.apply(t.input?t.input[0]:null,[O]):[!0,""],L=(N=O.getMonth()!==Q)&&!w||!$[0]||Z&&O<Z||J&&O>J,B+="<td class='"+((y+d+6)%7>=5?" crownix-ui-datepicker-week-end":"")+(N?" crownix-ui-datepicker-other-month":"")+(O.getTime()===T.getTime()&&Q===t.selectedMonth&&t._keyEvent||x.getTime()===O.getTime()&&x.getTime()===T.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" crownix-ui-state-disabled":"")+(N&&!v?"":" "+$[1]+(O.getTime()===K.getTime()?" "+this._currentClass:"")+(O.getTime()===j.getTime()?" crownix-ui-datepicker-today":""))+"'"+(N&&!v||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(N&&!v?"&#xa0;":L?"<span class='crownix-ui-state-default'>"+O.getDate()+"</span>":"<a class='crownix-ui-state-default"+(O.getTime()===j.getTime()?" crownix-ui-state-highlight":"")+(O.getTime()===K.getTime()?" crownix-ui-state-active":"")+(N?" crownix-ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);E+=B+"</tr>"}++Q>11&&(Q=0,tt++),_+=E+="</tbody></table>"+(X?"</div>"+(W[0]>0&&C===W[1]-1?"<div class='crownix-ui-datepicker-row-break'></div>":""):"")}b+=_}return b+=c,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,i,r,n,o,a,s){var l,c,d,h,u,f,p,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),w=this._get(t,"showMonthAfterYear"),x="<div class='crownix-ui-datepicker-title'>",b="";if(o||!m)b+="<span class='crownix-ui-datepicker-month'>"+a[e]+"</span>";else{for(l=r&&r.getFullYear()===i,c=n&&n.getFullYear()===i,b+="<select class='crownix-ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=r.getMonth())&&(!c||d<=n.getMonth())&&(b+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+s[d]+"</option>");b+="</select>"}if(w||(x+=b+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)x+="<span class='crownix-ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e})(h[0]),g=Math.max(p,f(h[1]||"")),p=r?Math.max(p,r.getFullYear()):p,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='crownix-ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",x+=t.yearshtml,t.yearshtml=null}return x+=this._get(t,"yearSuffix"),w&&(x+=(!o&&m&&v?"":"&#xa0;")+b),x+="</div>"},_adjustInstDate:function(t,e,i){var r=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(r,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(r,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),n=i&&e<i?i:e;return r&&n>r?r:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,r){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,r+(e<0?e:n[0]*n[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,r,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,s=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),r=(new Date).getFullYear(),a=parseInt(i[0],10),s=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=r),i[1].match(/[+\-].*/)&&(s+=r)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,r){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(r,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t),this._get(t,"japanYear"),this._get(t,"checkZero"))}}),t.fn.crownixdatepicker=function(e){if(!this.length)return this;t.crownixdatepicker.initialized||(t(document).bind(m2soft.crownix.Util.ActionEvents.start+" touchstart",t.crownixdatepicker._checkExternalClick),t.crownixdatepicker.initialized=!0),0===t("#"+t.crownixdatepicker._mainDivId).length&&t("body").append(t.crownixdatepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.crownixdatepicker["_"+e+"Datepicker"].apply(t.crownixdatepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.crownixdatepicker["_"+e+"Datepicker"].apply(t.crownixdatepicker,[this].concat(i)):t.crownixdatepicker._attachDatepicker(this,e)})):t.crownixdatepicker["_"+e+"Datepicker"].apply(t.crownixdatepicker,[this[0]].concat(i))},t.crownixdatepicker=new n,t.crownixdatepicker.initialized=!1,t.crownixdatepicker.uuid=(new Date).getTime(),t.crownixdatepicker.version="1.10.4"}(jQuery),m2soft.ns("m2soft.crownix.ImageLoader"),m2soft.crownix.ImageLoader.loadImage=function(t){var e=function(t,i,r){var n,o,a=document.createElement("img");if(a.onerror=i,a.onload=function(){!o||r&&r.noRevoke||e.revokeObjectURL(o),i&&i(e.scale(a,r))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))n=o=e.createObjectURL(t),a._type=t.type;else{if("string"!=typeof t)return!1;n=t,r&&r.crossOrigin&&(a.crossOrigin=r.crossOrigin)}return n?(a.src=n,a):e.readFile(t,(function(t){var e=t.target;e&&e.result?a.src=e.result:i&&i(t)}))},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;if(e.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},e.transformCoordinates=function(){},e.getTransformedOptions=function(t){return t},e.renderImageToCanvas=function(t,e,i,r,n,o,a,s,l,c){return t.getContext("2d").drawImage(e,i,r,n,o,a,s,l,c),t},e.hasCanvasOption=function(t){return t.canvas||t.crop},e.scale=function(t,i){i=i||{};var r=5e6;m2soft.crownix.Util.browser.ios&&t.width*t.height>r&&(i.maxWidth=Math.floor(Math.sqrt(t.width/t.height*r)),i.maxHeight=Math.floor(Math.sqrt(t.height/t.width*r)));var n,o,a,s,l,c,d,h,u,f=document.createElement("canvas"),p=t.getContext||e.hasCanvasOption(i)&&f.getContext,g=t.naturalWidth||t.width,m=t.naturalHeight||t.height,v=g,w=m,x=function(){var t=Math.max((a||v)/v,(s||w)/w);t>1&&(v=Math.ceil(v*t),w=Math.ceil(w*t))},b=function(){var t=Math.min((n||v)/v,(o||w)/w);t<1&&(v=Math.ceil(v*t),w=Math.ceil(w*t))};return p&&(d=(i=e.getTransformedOptions(i)).left||0,h=i.top||0,i.sourceWidth?(l=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(d=g-l-i.right)):l=g-d-(i.right||0),i.sourceHeight?(c=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(h=m-c-i.bottom)):c=m-h-(i.bottom||0),v=l,w=c),n=i.maxWidth,o=i.maxHeight,a=i.minWidth,s=i.minHeight,p&&n&&o&&i.crop?(v=n,w=o,(u=l/c-n/o)<0?(c=o*l/n,void 0===i.top&&void 0===i.bottom&&(h=(m-c)/2)):u>0&&(l=n*c/o,void 0===i.left&&void 0===i.right&&(d=(g-l)/2))):((i.contain||i.cover)&&(a=n=n||a,s=o=o||s),i.cover?(b(),x()):(x(),b())),p?(f.width=v,f.height=w,e.transformCoordinates(f,i),e.renderImageToCanvas(f,t,d,h,l,c,0,0,v,w)):(t.width=v,t.height=w,t)},e.createObjectURL=function(t){return!!i&&i.createObjectURL(t)},e.revokeObjectURL=function(t){return!!i&&i.revokeObjectURL(t)},e.readFile=function(t,e,i){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,r[i=i||"readAsDataURL"])return r[i](t),r}return!1},window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var r=e.renderImageToCanvas;e.detectSubsampling=function(t){var e,i;return t.width*t.height>1048576&&((e=document.createElement("canvas")).width=e.height=1,(i=e.getContext("2d")).drawImage(t,1-t.width,0),0===i.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(t,e){var i,r,n,o,a=t.naturalHeight||t.height,s=document.createElement("canvas"),l=s.getContext("2d");for(e&&(a/=2),s.width=1,s.height=a,l.drawImage(t,0,0),i=l.getImageData(0,0,1,a).data,r=0,n=a,o=a;o>r;)0===i[4*(o-1)+3]?n=o:r=o,o=n+r>>1;return o/a||1},e.renderImageToCanvas=function(t,i,n,o,a,s,l,c,d,h){if("image/jpeg"===i._type){var u,f,p,g,m=t.getContext("2d"),v=document.createElement("canvas"),w=1024,x=v.getContext("2d");if(v.width=w,v.height=w,m.save(),(u=e.detectSubsampling(i))&&(n/=2,o/=2,a/=2,s/=2),f=e.detectVerticalSquash(i,u),u||1!==f){for(o*=f,d=Math.ceil(w*d/a),h=Math.ceil(w*h/s/f),c=0,g=0;g<s;){for(l=0,p=0;p<a;)x.clearRect(0,0,w,w),x.drawImage(i,n,o,a,s,-p,-g,a,s),m.drawImage(v,0,0,w,w,l,c,d,h),p+=w,l+=d;g+=w,c+=h}return m.restore(),t}}return r(t,i,n,o,a,s,l,c,d,h)}}var n=e.hasCanvasOption;e.hasCanvasOption=function(t){return n(t)||t.orientation},e.transformCoordinates=function(t,e){var i=t.getContext("2d"),r=t.width,n=t.height,o=e.orientation;if(o)switch(o>4&&(t.width=n,t.height=r),o){case 2:i.translate(r,0),i.scale(-1,1);break;case 3:i.translate(r,n),i.rotate(Math.PI);break;case 4:i.translate(0,n),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n);break;case 7:i.rotate(.5*Math.PI),i.translate(r,-n),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-r,0)}},e.getTransformedOptions=function(t){if(!t.orientation||1===t.orientation)return t;var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);switch(t.orientation){case 2:i.left=t.right,i.right=t.left;break;case 3:i.left=t.right,i.top=t.bottom,i.right=t.left,i.bottom=t.top;break;case 4:i.top=t.bottom,i.bottom=t.top;break;case 5:i.left=t.top,i.top=t.left,i.right=t.bottom,i.bottom=t.right;break;case 6:i.left=t.top,i.top=t.right,i.right=t.bottom,i.bottom=t.left;break;case 7:i.left=t.bottom,i.top=t.right,i.right=t.top,i.bottom=t.left;break;case 8:i.left=t.bottom,i.top=t.left,i.right=t.top,i.bottom=t.right}return t.orientation>4&&(i.maxWidth=t.maxHeight,i.maxHeight=t.maxWidth,i.minWidth=t.minHeight,i.minHeight=t.minWidth,i.sourceWidth=t.sourceHeight,i.sourceHeight=t.sourceWidth),i};var o,a,s,l=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);for(s in e.blobSlice=l&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,i,r){var n=this,o=(r=r||{}).maxMetaDataSize||262144,a={};!!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,o),(function(t){var o,s,l,c,d=t.target.result,h=new DataView(d),u=2,f=h.byteLength-4,p=u;if(65496===h.getUint16(0)){for(;u<f&&((o=h.getUint16(u))>=65504&&o<=65519||65534===o);){if(u+(s=h.getUint16(u+2)+2)>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=e.metaDataParsers.jpeg[o])for(c=0;c<l.length;c+=1)l[c].call(n,h,u,s,a,r);p=u+=s}!r.disableImageHead&&p>6&&(d.slice?a.imageHead=d.slice(0,p):a.imageHead=new Uint8Array(d).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(a)}),"readAsArrayBuffer")||i(a)},e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},e.getExifThumbnail=function(t,e,i){var r,n,o;if(i&&!(e+i>t.byteLength)){for(r=[],n=0;n<i;n+=1)o=t.getUint8(e+n),r.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+r.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,i,r,n,o,a){var s,l,c,d,h,u,f=e.exifTagTypes[n];if(f){if(!((l=(s=f.size*o)>4?i+t.getUint32(r+8,a):r+8)+s>t.byteLength)){if(1===o)return f.getValue(t,l,a);for(c=[],d=0;d<o;d+=1)c[d]=f.getValue(t,l+d*f.size,a);if(f.ascii){for(h="",d=0;d<c.length&&"\0"!==(u=c[d]);d+=1)h+=u;return h}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,i,r,n,o){var a=t.getUint16(r,n);o.exif[a]=e.getExifValue(t,i,r,t.getUint16(r+2,n),t.getUint32(r+4,n),n)},e.parseExifTags=function(t,e,i,r,n){var o,a,s;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=i+2+12*(o=t.getUint16(i,r)))+4>t.byteLength)){for(s=0;s<o;s+=1)this.parseExifTag(t,e,i+2+12*s,r,n);return t.getUint32(a,r)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,i,r,n,o){if(!o.disableExif){var a,s,l,c=i+10;if(1165519206===t.getUint32(i+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(i+8)){switch(t.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,a)?(s=t.getUint32(c+4,a),n.exif=new e.ExifMap,(s=e.parseExifTags(t,c,c+s,a,n))&&!o.disableExifThumbnail&&(l={exif:{}},s=e.parseExifTags(t,c,c+s,a,l),l.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),n.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,c,c+n.exif[34665],a,n),n.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,c,c+n.exif[34853],a,n)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},o=e.ExifMap.prototype.tags,a=e.ExifMap.prototype.map,o)o.hasOwnProperty(s)&&(a[o[s]]=s);return e.ExifMap.prototype.getAll=function(){var t,e,i={};for(t in this)this.hasOwnProperty(t)&&(e=o[t])&&(i[e]=this.getText(e));return i},e}(),m2soft.ns("m2soft.crownix.PageSwiper"),m2soft.crownix.PageSwiper=m2soft.crownix.util.SingleTone((function(t,e){var i=Math.min(t.width()/10,m2soft.crownix.util.Unit.inToPx(1)),r=1.6*i;transX=0;var n=$(m2soft.crownix.resource.Icon.PREV_PAGE).attr("id","crownix-swipe-icon-prev").attr("class","crownix-swipe-icon").css({left:0,width:i+"px","margin-left":1.2*-i+"px"}).appendTo(t),o=$(m2soft.crownix.resource.Icon.NEXT_PAGE).attr("id","crownix-swipe-icon-next").attr("class","crownix-swipe-icon").css({right:0,width:i+"px","margin-right":1.2*-i+"px"}).appendTo(t),a=function(t,e,i,r,n){t.css({transition:n?"all "+n+"ms ease-in":"none",transform:["translateX(",e,"px) translateY(",i,"px) scale(",r,")"].join("")})},s=function(t){setTimeout((function(){e.viewer.movePage(t)}),200)};this.pullOut=function(i){if(e.options.swipe.useOnZoom||!e.scroll.hasHorizontalScroll){var s=2;e.options.swipe.sensitivity>=1&&e.options.swipe.sensitivity<=3&&(s=e.options.swipe.sensitivity),0==i.deltaX?transX=this.distX*s/3:i.newX<0?transX=-(t.width()-(this.scrollerWidth+i.newX))*s:i.newX>0&&(transX=i.newX*s),transX>0&&1==e.currentPage||transX<0&&e.currentPage==e.totalPage||(transX>0?(n.show(),o.hide()):(o.show(),n.hide()),a(transX>0?n:o,transX>0?Math.min(transX,r):Math.max(transX,-r),0,Math.abs(transX)>r?1.4:1,0))}},this.pullEnd=function(){transX>r&&e.currentPage>1?(a(n,1.6*r,0,3,200),n.fadeOut(200),s(e.currentPage-1)):transX<-r&&e.currentPage<e.totalPage?(a(o,1.6*-r,0,3,200),o.fadeOut(200),s(e.currentPage+1)):(a(n,0,0,1,200),a(o,0,0,1,200)),transX=0},this.cancel=function(){transX>0?n.fadeOut(200):transX<0&&o.fadeOut(200),transX=0}})),m2soft.ns("m2soft.crownix.Report"),m2soft.crownix.Report=function(t,e){var i,r,n=m2soft.crownix.Resource,o=m2soft.crownix.Util,a=m2soft.crownix.Message,s=m2soft.crownix.Map,l=m2soft.crownix.Painter,c=m2soft.crownix.Report,d=m2soft.crownix.MMLTokenizer,h=m2soft.crownix.NoteManager,u=o.isSupportSVG(),f=t,p=e,g=0,m={},v=new d,w=-1,x="",b="",y=[],k=function(){this.title="",this.mrd="",this.mrdpath="",this.mrdparam="",this.dataServerURL="",this.fontList=new s,this.faceAttrList={},this.textAttrList={},this.lineAttrList={},this.firstPage=9007199254740992,this.lastPage=-1,this.page={},this.formFieldMode=void 0,this.dataServerURL="",this.variableList={},this.inqueryAttrList={},this.indexedImageList={}};k.prototype.insertPage=function(t,e,i,r){t<this.firstPage&&(this.firstPage=t),t>this.lastPage&&(this.lastPage=t),f.stateLess?this.page[t]=[e,i]:this.page[t]=r};var _=function(){(v=new d).onOpen("mml",(function(t){c.debug&&a.log("[Tokenizer] mmlOpen : ",t);var e=0,r=(g=parseFloat(/<MML version="([^"]*)">/.exec(t)[1]))>=2.4?"document":"head";v.onClose("license",(function(t){f.license.init($(t).text()),!0===(f.license.isAllowedFeature("Note")&&f.options.enableNote)&&(u?f.noteManager=new h(p,f):f.dialog.show(n.get("unsupported_note_error")))})),v.onOpen(r,(function(t){c.debug&&a.log("[Tokenizer] documentOpen : ",t);var r=/<DOCUMENT index="([^"]*)">/;t&&r.test(t)&&(e=parseInt(r.exec(t)[1])),e++;var n=m[e];v.onClose("head",(function(t){c.debug&&a.log("[Tokenizer] headClose"),!n&&t&&(n=C(t),m[e]=n),g>=2.4&&!f.isAppendReport&&""!=n.dataServerURL&&Object.keys(n.inqueryAttrList).length>0?(f.inquery.setData(n.dataServerURL,n.variableList,n.inqueryAttrList,f.openFile,f.mrdPath,f.mrdParam,n.formFieldMode,f.options,f.license,f.encType),f.toolbar.enableToolbarItem(["inquery"])):f.toolbar.disableToolbarItem(["inquery"])})),v.onClose("page",(function(t,e,r,o){if(c.debug&&a.log("[Tokenizer] pageClose"),f.stateLess){if(i=++f.totalPage,n.page[f.totalPage])return;n.insertPage(f.totalPage,e,r),t=f.totalPage}else{if(!t||n.page[t])return;n.insertPage(t,e,r,o),0==f.totalPage&&(f.totalPage=1)}if(f.license.isAllowedFeature("FormField")&&n.formFieldMode)try{f.formManager.buildFormField(o,t)}catch(t){return a.log(t.stack),f.dialog.show(t.message),f.client.abort(),f.toolbar.disableAllItems(),void $("#m2soft-crownix-page").remove()}f.drilldownManager.buildDrilldown(t,$(o)),0===f.currentPage&&(a.progress.hide(p),f.viewer.moveFirstPage(),f.toolbar.enableToolbarItem(["zoomin","zoomout","ratio","move","storage"])),f.dialog.pagenum(f.currentPage,f.totalPage,!0),l.updatePageNum(f.currentPage,f.totalPage)})),v.onClose("mmlfooter",(function(t){c.debug&&a.log("[Tokenizer] mmlFooterClose : "+t),T(t)})),v.onClose("err",(function(t){S(t)})),v.onClose("document",(function(){n=null}))})),v.onClose("mml",(function(){e=-1}))}))};_();var C=this.parseHead=function(t){var e=new k;return $(t).each((function(){var t=this.tagName;("INFORMATION"===t?($(this).children("TITLE").each((function(){e.title=$(this).text()})),$(this).children("MRD").each((function(){e.mrd=$(this).text()})),$(this).children("MRDPATH").each((function(){e.mrdpath=$(this).text()})),$(this).children("MRDPARAM").each((function(){e.mrdparam=$(this).text()})),$(this).children("PGINFO").each((function(){-1==w&&(w=parseInt($(this).attr("cover"))),$(this).attr("startnum")&&(f.startPageNo=parseInt($(this).attr("startnum")))}))):"TITLE"===t?e.title=$(this).text():"MRD"===t?e.mrd=$(this).text():"FONTLIST"===t?$(this).children().each((function(){e.fontList.put($(this).attr("id"),$(this).attr("name"))})):"TALIST"===t?$(this).children().each((function(){e.textAttrList[$(this).attr("id")]={fi:$(this).attr("fi"),pt:$(this).attr("pt"),cl:$(this).attr("cl"),cb:$(this).attr("cb"),ci:$(this).attr("ci"),cu:$(this).attr("cu"),cs:$(this).attr("cs"),cr:$(this).attr("cr"),sc:$(this).attr("sc"),ls:$(this).attr("ls"),ss:$(this).attr("ss")}})):"FALIST"===t?$(this).children().each((function(){e.faceAttrList[$(this).attr("id")]={fc:$(this).attr("fc")||"#FFFFFF",al:$(this).attr("al")||1,pt:$(this).attr("pt")||0}})):"LALIST"===t?$(this).children().each((function(){e.lineAttrList[$(this).attr("id")]={st:$(this).attr("st")||0,wd:l.adjustWidth($(this).attr("wd")),lc:$(this).attr("lc")||"#000000",al:$(this).attr("al")||1,ap:$(this).attr("ap")||0,at:$(this).attr("at")||0,as:$(this).attr("as")||1}})):"DSURL"===t?e.dataServerURL=$(this).text():"VALIST"===t?$(this).children().each((function(){e.variableList[$(this).attr("key")]=$(this).text()})):"IQLIST"===t?$(this).children().each((function(){var t=$(this).attr("va");e.inqueryAttrList[t]={id:$(this).attr("va"),va:$(this).attr("va"),ty:$(this).attr("ty")||"co",ca:$(this).attr("ca")||"",rq:$(this).attr("rq")||0,il:$(this).attr("il")||0,db:$(this).attr("db")||0,ds:$(this).attr("ds"),qr:$(this).attr("qr"),sp:$(this).attr("sp"),pv:$(this).attr("pv"),sd:$(this).attr("sd"),ad:$(this).attr("ad"),se:$(this).attr("se")||"@",sc:$(this).attr("sc"),ac:$(this).attr("ac"),cl:$(this).attr("cl")||n.language||"korean",pa:new Array},$(this).children("IQSP_PALIST").each((function(){var i=0;$(this).children().each((function(){e.inqueryAttrList[t].pa[i]=$(this).attr("va"),i++}))}))})):"IMLIST"===t&&$(this).children().each((function(){var t=$(this),i=e.indexedImageList[t.attr("id")]=new Image;i.complete,i.src=t.attr("va"),c.debug&&a.log("[indexed image] "+t.attr("id")+" : "+t.attr("va"))})),g<=2.1)?"FORMMODE"===t&&(f.isFormEditMode=!0,e.formFieldMode="1"===$(this).text(),f.license.isAllowedFeature("Note")&&f.options.enableNote&&u&&f.license.isAllowedFeature("FormField")&&e.formFieldMode&&f.noteManager.setFormFieldMode(!0)):g>=2.4&&("FF_ALIST"===t||"FF_A"===t?("FF_ALIST"===t?$(this).children("FF_A"):$(this)).each((function(){var t=$(this),i={id:t.attr("id"),commonFieldHintingType:t.attr("sh"),commonFieldHintingColor:t.attr("hc"),commonFieldHintingDisplayType:t.attr("hct"),requiredFieldHintingColor:t.attr("rhc"),formLoadComplete:t.attr("elc")};if(void 0===e.formFieldMode&&(e.formFieldMode=f.isFormEditMode||"1"===t.attr("fm"),f.isFormEditMode=e.formFieldMode),f.isFormExportMode="1"===t.attr("fe"),f.license.isAllowedFeature("FormField")&&e.formFieldMode)try{f.formManager.addFormAttr(i)}catch(t){return a.log(t.stack),f.dialog.show(t.message),f.client.abort(),void initialize()}!0===(f.license.isAllowedFeature("Note")&&f.options.enableNote)&&u&&f.license.isAllowedFeature("FormField")&&e.formFieldMode&&f.noteManager.setFormFieldMode(!0)})):"TTS"===t&&(f.ttsManager||(f.ttsManager=new m2soft.crownix.TTSManager(f,$(this).attr("md")))))})),c.debug&&(a.log("[HEAD TITLE]"+e.title),a.log("[HEAD MRD]"+e.mrd),a.log("[HEAD DATASERVERURL]"+e.dataServerURL),a.log("[HEAD FONTLIST]\n"+e.fontList.toString()),a.log("[HEAD VALIST]\n"+JSON.stringify(e.variableList)),a.log("[HEAD IQLIST]\n"+decodeURIComponent($.param(e.inqueryAttrList)))),e},T=function(t){$(t).each((function(){if("MMLFOOTER"===this.tagName&&($(this).children("REPORTINFO").each((function(){x=$(this).attr("subreportname")})),!0===f.options.useTableOfContents)){var t=$(this).children("TC");0===t.length?f.dialog.show(n.get("no_table_of_contents")):f.tableOfContents.makeDom(JSON.parse(t.text()))}}))},S=function(t){$(t).each((function(){"ERR"===this.tagName&&(b=$(this).attr("msg"))}))},E=function(t){return y.forEach((function(e){e<=t&&t++})),t},M=function(t){for(var e in t=E(t),m)if(m[e].page[t])return m[e].page[t];return null},A=function(t){1==f.totalPage?f.toolbar.disableToolbarItem(["next","last","move"]):1==t?(f.toolbar.disableToolbarItem(["first","prev"]),f.toolbar.enableToolbarItem(["next","last"])):t==f.totalPage?(f.toolbar.disableToolbarItem(["next","last"]),f.toolbar.enableToolbarItem(["first","prev"])):f.toolbar.enableToolbarItem(["first","prev","next","last"])};this.toData=function(){return{id:this.id,value:this.value,type:this.type}},this.getMmlVersion=function(){return g},this.getDocumentList=function(){return m},this.getPage=function(t){var e=M(t);return null==e?null:f.stateLess?r.slice(e[0],e[1]):e},this.getHeadForPage=function(t){for(var e in t=E(t),m)if(m[e].page[t])return m[e];return null},this.hasPage=function(t){return null!=M(t)},this.getCoverPage=function(){return w},this.getSubReportName=function(){return x},this.getDocErrMsg=function(){return b},this.parseMML=function(t,e){r=t,e=E(e);try{null!=e&&_(),v.parse(t,e)}catch(t){throw a.log(t.stack),new Error(n.get("parsing_error_mml"))}},this.getTotalPage=function(){return i},this.setTotalPage=function(t){i=t},this.findPage=function(t){return E(t)},this.removePage=function(t){if(t){for(var e,r=0,n=t.length;r<n;r++)e=t[r],-1==y.indexOf(e)&&e>0&&e<=i&&(y.push(e),f.noteManager&&f.noteManager.removeNote(e),f.formManager&&f.formManager.ignoreField(e,!0),f.totalPage--);y.sort(o.ASCENDING_COMPARATOR),f.currentPage>f.totalPage?f.viewer.moveLastPage():-1!=y.indexOf(f.currentPage)?f.viewer.movePage(f.currentPage):f.dialog.pagenum(f.currentPage,f.totalPage),A(f.currentPage),f.tableOfContents&&f.stateLess&&f.tableOfContents.onRemovePage(y)}},this.restorePage=function(t){for(var e,i,r=0,n=t.length;r<n;r++)e=t[r],-1!=(i=y.indexOf(e))&&(E(f.currentPage)>e&&f.currentPage++,y.splice(i,1),f.noteManager&&f.noteManager.restoreNote(e),f.formManager&&f.formManager.ignoreField(e,!1),f.totalPage++);f.dialog.pagenum(f.currentPage,f.totalPage),A(f.currentPage),f.tableOfContents&&f.stateLess&&f.tableOfContents.onRestorePage(t)},this.getRemovedPage=function(){return y},this.isRemovedPage=function(t){return-1!=y.indexOf(t)},this.getDestPageNum=function(t){var e=y.filter((function(e){return t>e}));return t-e.length}},m2soft.ns("m2soft.crownix.DrilldownManager"),m2soft.crownix.DrilldownManager=function(t,e,i){var r,n,o=m2soft.crownix.Painter,a=m2soft.crownix.Resource,s=m2soft.crownix.Util,l=t,c=(l.openFile,l.viewer.movePage),d=e,h={},u=null,f=null,p=null,g=null,m=null,v=0,w=0,x=0,b=0,y=!1,k=!1;this.toggle=function(t){if(!y){var e=z.getDrillObject(t);if(!e)return $.Deferred().reject();l.canvasManager.restore();return e.isOpend?B(t):T(t)}l.dialog.show(a.get("image_export_disabled_before_done"))},this.open=function(t,e,i){if(!y)return this.isOpened(t)?(new $.Deferred).resolve():(l.canvasManager.restore(),T(t,e,i));l.dialog.show(a.get("image_export_disabled_before_done"))},this.close=function(t,e){if(!y)return this.isOpened(t)?(l.canvasManager.restore(),B(t,e)):(new $.Deferred).resolve();l.dialog.show(a.get("image_export_disabled_before_done"))},this.reload=function(t){if(!y){for(var e in void 0===r&&l.options.showDrilldownMsg&&(r=l.dialog.message(a.get("image_export_disabled_before_done"))),h){var i=h[e];i.pagenum==t&&(i.position.offsetX=0,i.position.offsetY=0)}var n=z.getOpenedObjectID(t);return n=$.map(h,(function(t,e){if(v==t.pagenum&&t.isOpend&&1==t.depth)return e})).sort((function(t,e){return h[t].direction===h[e].direction?z.comparePosition(h[t],h[e])?-1:1:0})).reverse(),setTimeout((function(){T(n,void 0,!0)}),0),j.timingDefer}l.dialog.show(a.get("image_export_disabled_before_done"))},this.getDrilldownInfo=function(t){var e=z.getDrillObject(t);return{mrdPath:e.mrdPath,mrdParam:e.mrdParam,isOpened:e.isOpend,isLoaded:e.isLoaded}},this.updateInfo=function(t,e,i,r,n,o){t&&(v=t),u=i,f=r,p=o,g=n,m=e,z.updateDrilldownList(t,m)},this.buildDrilldown=function(t,e){z.updateDrilldownList(t,e)},this.export=function(){var t={};for(var e in h){var i=h[e];t[e]=q.serialize(i)}return t},this.import=function(t,e){if(t){var i={},r=[];for(var n in t)r.push(n);for(var o in r=r.sort((function(e,i){var r=JSON.parse(t[e]),n=JSON.parse(t[i]);return r.depth-n.depth}))){n=r[o];var a=t[n],s=i[n]=q.deserialize(a,i);s.isLoaded&&l.isFormEditMode&&(l.report.parseHead(s.$headMML.children()),l.formManager.buildFormField(s.$pageMML,s.pagenum,!0,s.id))}h=i;var c=this;e||setTimeout((function(){c.reload(l.currentPage)}),0)}},this.toXML=function(){var t=[];for(var e in h)t.push(e);t=t.sort((function(t,e){return h[t].depth-h[e].depth}));for(var i="<drilldown>",r=0;r<t.length;r++){var n=h[t[r]];n.isOpend&&(i+=q.toXML(n))}return i+="</drilldown>"},this.isOpened=function(t){var e=z.getDrillObject(t);return e&&e.isOpend},this.getDrilldownLength=function(){var t=0;for(var e in h)t++;return t},this.expand=function(t){if(y)l.dialog.show(a.get("image_export_disabled_before_done"));else{var e=$.map(h,(function(e,i){if(v==e.pagenum&&e.depth>t&&e.isOpend)return i})).sort((function(t,e){return h[t].direction===h[e].direction?z.comparePosition(h[t],h[e])?-1:1:0}));e.length>0&&B(e),t>0&&(e=$.map(h,(function(e,i){if(v==e.pagenum&&(1==e.depth&&!e.isOpend||1!=e.depth&&e.depth<=t&&!e.isOpend&&e.parent.isOpend))return i})).sort((function(t,e){return h[t].direction===h[e].direction?z.comparePosition(h[t],h[e])?-1:1:0})).reverse()).length>0?T(e,{depth:t}):_()}},this.drilldownNext=function(){b<x&&b++,this.expand(b)},this.drilldownPrev=function(){b>0&&b--,this.expand(b)},this.drilldownFinished=function(){_()},this.isOpening=function(){return y},this.stopDrilldown=function(){k=!0},this.disableForgery=function(){O()},this.hasOpenedDrilldown=function(t){for(var e in h){var i=h[e];if(i.pagenum==t&&i.isOpend)return!0}return!1},this.addOpenCallback=function(t){n=t};var _=function(){l.canvasManager.saveParts(),l.canvasManager.moveParts(),l.scroll.enable(),C(),l.toolbar.disableToolbarItem(["cancel"]),y=!1,r&&(r.remove(),r=void 0),k=!1,n&&"function"==typeof n&&(n(),n=null)},C=function(){for(id in b=0,h){var t=h[id];t.isOpend&&t.depth>b&&(b=t.depth)}},T=function(t,e,i){var n=[];"[object Array]"===Object.prototype.toString.call(t)&&(t=(n=t).pop()),l.toolbar.enableToolbarItem(["cancel"]),y=!0,void 0===r&&l.options.showDrilldownMsg&&(r=l.dialog.message(a.get("image_export_disabled_before_done")));var o=z.getDrillObject(t);if(!o)return _(),$.Deferred().resolve();if(e||(e={}),z.isInTheCurrentPage(o)){if(z.isOverlapped(o))return _(),$.Deferred().reject(a.get("drilldown_not_allowed"));A(o);var s=j.push((function(){return o.isOpend=!0,E(o,e).pipe((function(){O();var t=M(o,(function(t,e,i,r,n,o){I(t,e,i,r,n,o)})),i=function(){o.children.sort((function(t,e){return t.position.originalBottom<e.position.originalBottom?-1:1})).reverse().forEach((function(t){(e.depth&&o.depth<e.depth||t.isOpend)&&n.push(t.id)})),k&&(n=[]),n.length>0?setTimeout((function(){T(n,e)}),0):_()};return o.isDrillOver?P(o,t.textDom,e.callback,(function(){i()})):D(t.pageDom,t.canvasDom,t.textDom,t.documentSize,o,t.withoutClear,e.callback,(function(){i()}))})).fail((function(t){o.isOpend=!1,l.dialog.show(t)}))}))}else{A(o);s=j.push((function(){return o.isOpend=!0,E(o,e).pipe((function(){if(!o.isLoaded){if(l.isFormEditMode)try{l.report.parseHead(o.$headMML.children()),l.formManager.buildFormField(o.$pageMML,o.pagenum,!0,o.id)}catch(t){return defer.reject(t)}o.isLoaded=!0,_()}})).fail((function(t){o.isOpend=!1,l.dialog.show(t)}))}))}return j.push(R),l.shareManager&&l.shareManager.isConnected()&&j.push(S,[i,o,!0,e]),s},S=function(t){var e=t[0],i=t[1],r=t[2],n=t[3];e||(l.shareManager.sendScript({name:r?"expandDrilldown":"collapseDrilldown",id:i.id,option:n}),l.shareManager.sendDrilldownInfo())},E=function(t,e){var r=new $.Deferred;if(t.$pageMML&&!e.mrdPath&&!e.mrdParam)return r.resolve(t),r;var n=e.mrdPath||t.mrdPath,o="",s="";if(/^(?:\/|[a-z]+:\/\/)/.test(n))o=s=n;else{var c=Math.max(l.mrdPath.lastIndexOf("\\"),l.mrdPath.lastIndexOf("/")),d=c>=0?l.mrdPath.substring(0,c+1):"";if(t.parent)for(var h=t.parent;h;){var u=Math.max(h.mrdPath.lastIndexOf("\\"),h.mrdPath.lastIndexOf("/"));s=(u>=0?h.mrdPath.substring(0,u+1):"")+s,h=h.parent}o=d+(s+=n)}var f=[e.mrdParam||t.mrdParam," /rhyperlinkkey [",t.id,"]"," /ronepgrpt"];t.isLoaded=!1,e.formRefresh&&l.formManager.removeDrilldownField(t.id),l.isFormEditMode||f.push(" /rformmode [0]");return t.currentMrdPath=s,t.currentMrdParam=f.join(""),i(o,t.currentMrdParam,"","",(function(){}),(function(e){if(e&&e.indexOf("</MML>")<0&&e.indexOf("</DOCUMENT>")<0){var i=e.indexOf("[ERS-");return n=i>=0?e.substr(i):a.get("execute_error"),void r.reject(n)}var n;if(e&&e.indexOf("<ERR")>=0&&(n=report.getDocErrMsg()).length>0)return void r.reject(n);var o=$($.parseXML(e));t.$pageMML=o.find("PG"),t.$headMML=o.find("HEAD"),t.boundary=z.getObjectBoundary(t.$pageMML),z.updateDrilldownList(t.pagenum,t.$pageMML,t),r.resolve(t)}),700),r},M=function(t,e){for(var i=u,r=g[0],n=f,o=m,a=v,s=o,l=!1,c=t,d=[t];c;){var h=c.getDrillOverAncestor();d.push(h),c=h}for(d.pop();d.length>0;){var p=d.pop();if(h=p.getDrillOverAncestor()){n=(i=$("."+F(h).split(" ")[0],u).first()).find(".crownix-text:first"),r=i.find(".crownix-canvas:first")[0],l=!0;var w=h.getBoundaryWithChildren(),x={width:w.right-w.left+1,height:w.bottom-w.top+1}}else{i=u,n=f,r=g[0],o=m,l=!1;x=z.getAdjustPageSize(s,a,h)}e(i,r,n,x,p,l)}return{pageDom:i,canvasDom:r,textDom:n,documentSize:x,withoutClear:l}},A=function(t){if(!t||t.isDrillOver)return $.Deferred().resolve();var e,i=t.divideOffset.isHorizontally,r=function(e){return i==e.divideOffset.isHorizontally&&e.divideOffset.offset()==t.divideOffset.offset()},n=[];for(var o in h){var a=h[o];a.pagenum==t.pagenum&&a!=t&&!a.isDrillOver&&t.isSiblingOf(a)&&((e=a)&&i!=e.divideOffset.isHorizontally||r(a))&&n.push(a.id)}for(var s in n)B(n[s],!0);return j.timingDefer},P=function(t,e,i,r){var n=t.boundary,o=(n.top,{width:n.right-n.left+1,height:n.bottom-n.top+1}),a=t.$pageMML,s=l.report.parseHead(t.$headMML.children()),h=$.Deferred(),u=$("<div>").addClass("crownix-text").addClass("crownix-text-index").css({height:o.height,width:o.width,position:"absolute"}),f=$("<canvas>").addClass("crownix-canvas").addClass("crownix-canvas-index").attr("height",o.height).attr("width",o.width).css({position:"absolute"}),p=$("<div>").append(f,u).addClass("crownix-drilldown-page").css({top:"-9999999",left:"-9999999",height:o.height,width:o.width,position:"absolute"});if(!t.isLoaded){if(l.isFormEditMode)try{l.formManager.buildFormField(t.$pageMML,t.pagenum,!0,t.id)}catch(t){return h.reject(t)}t.isLoaded=!0}p.appendTo(e);var g=new m2soft.crownix.Painter(l,f[0],u,c,d),m={x:-n.left,y:-n.top};return g.setFormFieldMode(s.formFieldMode),g.drawPage(a,s,(function(){l.isFormEditMode&&(l.formManager.bindEvent(),l.shareManager&&l.shareManager.isConnected()&&l.shareManager.initFields()),p.addClass(F(t)).css({top:t.position.bottom()+1,left:t.getDrillOverAncestor()?0:n.left}),l.formManager.removePreventEvent(),h.resolve(),i&&i(),r&&r()}),"d",m,0,!0),h},I=function(t,e,i,r,n,o){var a=e.getContext("2d"),s=a.getImageData(0,0,e.width,e.height),c=l.options.textOnCanvas?l.scroll.scale:1;e.height=r.height*c,e.width=r.width*c,t.height(r.height),t.width(r.width),i&&(i.height(r.height),i.width(r.width)),l.canvasManager.transformCanvas(),p&&(p.height(r.height),p.width(r.width),p.find("svg").attr({height:r.height,width:r.width}),p.find("canvas").attr({height:r.height,width:r.width}),l.shapeEditor.applySketchAttribute()),o||(a.save(),a.fillStyle="#FFFFFF",a.fillRect(0,0,e.width,e.height),a.restore());var d=z.getLineAdjustWidth(n,n.$containedTo),u=n.divideOffset.isHorizontally,f=n.divideOffset.offset(),g=n.boundary,m=0;if(n.isDrillOver){a.putImageData(s,0,0,0,0,s.width,s.height);var v=0,w=0}else if(u){a.putImageData(s,0,0,0,0,s.width,f*c),m=g.bottom-g.top+1+d;var x=0,b=(f-d)*c,y=(v=s.width,w=s.height-b,0),k=m}else{a.putImageData(s,0,0,0,0,f*c,s.height),m=g.right-g.left+1+d;x=(f-d)*c,b=0,v=s.width-x,w=s.height,y=m,k=0}v>0&&w>0&&a.putImageData(s,y*c,k*c,x,b,v,w),n.isDrillOver||i.children().each((function(){var t=$(this),e=parseInt(t.css("top")),i=parseInt(t.css("left"));if(t.hasClass("crownix-background-object"))return!0;u&&e>=f&&t.css({top:parseInt(t.css("top"))+m}),!u&&i>=f&&t.css({left:parseInt(t.css("left"))+m})})),z.updateDrilldownPosition(h,n,m),l.scroll.refresh()},D=function(t,e,i,r,n,a,h,u){var f=n.divideOffset.offset()+1,p=n.divideOffset.isHorizontally,g=n.boundary,m=p?r.width:g.right-g.left+1,v=p?g.bottom-g.top+1:r.height,w=$("<div>").css({top:p?f:0,left:p?0:f,height:v,width:m,position:"absolute"}),x=l.options.textOnCanvas?l.scroll.scale:1,b=$("<canvas>").attr("width",m*x).attr("height",v*x).css({top:p?f:0,left:p?0:f,position:"absolute"})[0],y=b.getContext("2d");y.save(),y.fillStyle="#FFFFFF",y.fillRect(0,0,b.width,b.height),y.restore(),y.scale(x,x);var k=$.Deferred(),_=new o(l,b,w,c,d),C=n.$pageMML,T=l.report.parseHead(n.$headMML.children());if(!n.isLoaded){if(l.isFormEditMode)try{l.formManager.buildFormField(n.$pageMML,n.pagenum,!0,n.id)}catch(t){return k.reject(t)}n.isLoaded=!0}w.appendTo(i);var S={x:!p&&-g.left,y:p&&-g.top};return _.setFormFieldMode(l.isFormEditMode),_.drawPage(C,T,(function(){w.children().each((function(){var t=$(this);p?t.css({top:parseInt(t.css("top"))+f}):t.css({left:parseInt(t.css("left"))+f})})),w.children().each((function(){var t=s.browser.msie&&"svg"==this.tagName?$(this).clone():$(this);t.attr("class",(t.attr("class")||"")+" "+F(n)).appendTo(i)})),w.remove();var t=e.getContext("2d"),r=b.getContext("2d").getImageData(0,0,b.width,b.height);p?t.putImageData(r,0,(f-1)*x,0,0,r.width,r.height):t.putImageData(r,(f-1)*x,0,0,0,r.width,r.height),l.isFormEditMode&&(l.formManager.bindEvent(),l.shareManager&&l.shareManager.isConnected()&&l.shareManager.initFields()),l.formManager.removePreventEvent(),k.resolve(),h&&h(),u&&u()}),"d",S,0,a),k},F=function(t){for(var e=z.convertIDtoClassName(t),i=t.parent;i;)e+=" "+z.convertIDtoClassName(i),i=i.parent;return e},O=function(){clearTimeout(w),f.off("DOMSubtreeModified")},R=function(){l.options.textOnCanvas||(w=m2soft.crownix.Forgery.detect(f,g[0],l.isFormEditMode))},B=function(t,e){var i=[];"[object Array]"===Object.prototype.toString.call(t)&&(t=(i=t).pop()),l.toolbar.enableToolbarItem(["cancel"]),y=!0,void 0===r&&l.options.showDrilldownMsg&&(r=l.dialog.message(a.get("image_export_disabled_before_done")));var n=j.push((function(){var r=function(t,e){var i=e||[];for(var n in t)t[n].children.length>0&&r(t[n].children,i),t[n].isOpend&&i.indexOf(t[n])<0&&i.push(t[n]);return i};if(a=z.getDrillObject(t)){var n=r([a]);if(0!=n.length){if(z.isInTheCurrentPage(a))for(var o in O(),n){(a=n[o]).isOpend=!1,N(a),M(a,(function(t,e,r,n,o){L(t,e,r.children(),n,o),k&&(i=[]),i.length>0?setTimeout((function(){B(i)}),0):_()}))}else for(var o in n){var a;(a=n[o]).isOpend=!1}l.shareManager&&l.shareManager.isConnected()&&j.push(S,[e,a,!1])}}else _()}));return j.push(R),n},N=function(t){$("."+z.convertIDtoClassName(t),u).remove()},L=function(t,e,i,r,n){var o=e.getContext("2d"),a=o.getImageData(0,0,e.width,e.height),s=l.options.textOnCanvas?l.scroll.scale:1;e.height=r.height*s,e.width=r.width*s,t.height(r.height),t.width(r.width),f&&(f.height(r.height),f.width(r.width)),l.canvasManager.transformCanvas(),o.save(),o.fillStyle="#FFFFFF",o.fillRect(0,0,e.width,e.height),o.restore();var c=z.getLineAdjustWidth(n,n.$containedTo),d=n.divideOffset.isHorizontally,u=n.divideOffset.offset(),p=n.boundary,g=0;if(n.isDrillOver){o.putImageData(a,0,0,0,0,a.width,a.height);var m=0,v=0}else if(d){o.putImageData(a,0,0,0,0,a.width,u*s),g=p.bottom-p.top+1+c;var w=0,x=(u+g)*s,b=(m=a.width,v=a.height-x,0),y=-g,k=0,_=a.height-g,C=e.width,T=e.height-_}else{o.putImageData(a,0,0,0,0,u*s,a.height),g=p.right-p.left+1+c;w=(u+g)*s,x=0,m=a.width-w,v=a.height,b=-g,y=0,k=a.width-g,_=0,C=e.width-k,T=e.height}m>0&&v>0&&o.putImageData(a,b*s,y*s,w,x,m,v),o.save(),o.fillStyle="#FFFFFF",o.fillRect(k,_,C,T),o.restore(),n.isDrillOver||i.each((function(){var t=$(this),e=t.hasClass("crownix-drilldown-page"),i=parseInt(t.css("top"))+(e?0:t.height()),r=parseInt(t.css("left"))+(e?0:t.width());if(t.hasClass("crownix-background-object"))return!0;d&&i>u?t.css({top:parseInt(t.css("top"))-g}):!d&&r>u&&t.css({left:parseInt(t.css("left"))-g})})),z.updateDrilldownPosition(h,n,-g),l.scroll.refresh()},q=function(t,e,i,r){var n=$(r),o=n.attr("hi"),a=z.adjustCoord(parseInt(n.attr("sy"))),s=z.adjustCoord(parseInt(n.attr("sx"))),l=z.adjustCoord(parseInt(n.attr("ey"))),c=z.adjustCoord(parseInt(n.attr("ex")));this.id=o,this.$pageMML=null,this.$headMML=null,this.boundary=null,this.pagenum=t,this.mrdPath=n.attr("hdm"),this.mrdParam=n.attr("hdp"),this.currentMrdPath=this.mrdPath,this.currentMrdParam=this.mrdParam,this.$containedTo=e,this.isOpend=!1,this.isLoaded=!1,this.parent=i,this.children=[],i&&i.children.push(this),i&&i.isDrillOver?(a-=i.boundary.top,l-=i.boundary.top):i&&i.divideOffset.isHorizontally?(a=a-i.boundary.top+i.position.originalBottom+1,l=l-i.boundary.top+i.position.originalBottom+1):i&&!i.divideOffset.isHorizontally&&(s=s-i.boundary.left+i.position.originalRight+1,c=c-i.boundary.left+i.position.originalRight+1),this.position={top:function(){return this.originalTop+this.offsetY},left:function(){return this.originalLeft+this.offsetX},right:function(){return this.originalRight+this.offsetX},bottom:function(){return this.originalBottom+this.offsetY},originalTop:a,originalLeft:s,originalRight:c,originalBottom:l,offsetX:i?i.position.offsetX:0,offsetY:i?i.position.offsetY:0};var d=this.position,h={0:"bottom",1:"right",2:"over"};this.direction=h[n.attr("hdt")]||"bottom";var u=this.direction,f="bottom"===u;this.isDrillOver="over"==u,this.isDrillOver&&(u=h[0]);var p=this;this.drillOverAncestor=void 0,this.divideOffset={offset:function(){var t=p.getDrillOverAncestor();return t&&!f?d[u]()-t.boundary.left+1:d[u]()+1},isHorizontally:f},this.elementTag=n.prop("outerHTML"),null==this.elementTag&&(this.elementTag=(new XMLSerializer).serializeToString(r)),this.depth=i?i.depth+1:1,this.depth>x&&(x=this.depth),this.isDescendant=function(t){if(0==this.children.length)return!1;if(this.children.indexOf(t)>=0)return!0;var e=!1;return this.children.forEach((function(i){if(e=i.isDescendant(t))return!0})),e},this.isAncestor=function(t){return!!this.parent&&(this.parent==t||this.parent.isAncestor(t))}};q.prototype.isSiblingOf=function(t){return this.getDrillOverAncestor()==t.getDrillOverAncestor()},q.prototype.getScreenBoundary=function(){var t=$.extend({},this.boundary);this.isDrillOver||this.divideOffset.isHorizontally?(t.bottom=t.bottom-t.top+this.position.bottom(),t.top=t.top-t.top+this.position.bottom()):(t.right=t.right-t.left+this.position.right(),t.left=t.left-t.left+this.position.right());var e=this.getDrillOverAncestor();if(!this.isDrillOver&&e){var i=e.getScreenBoundary();t.left+=i.left+1,t.right+=i.left+1,t.top+=i.top+1,t.bottom+=i.top+1}return t},q.prototype.getBoundaryWithChildren=function(){var t=this.getScreenBoundary(),e={right:0,bottom:0};for(var i in this.children){var r=this.children[i];if(r.isOpend){var n=r.getBoundaryWithChildren(),o=z.getLineAdjustWidth(r,r.$containedTo);if(r.isDrillOver){var a=n.bottom-n.top+1+r.position.originalBottom;e.bottom=Math.max(e.bottom,a),e.right=Math.max(e.right,n.right)}else r.divideOffset.isHorizontally?(t.bottom+=n.bottom-n.top+1+o,t.right=Math.max(t.right,n.right)):(t.bottom=Math.max(t.bottom,n.bottom),t.right+=n.right-n.left+1+o)}}return t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right),t},q.prototype.getDrillOverAncestor=function(t){if(null!=this.drillOverAncestor)return this.drillOverAncestor;for(var e=this;e;){if(e.parent&&e.parent.isDrillOver)return e.parent;e=e.parent}return null},q.serialize=function(t){var e={pagenum:t.pagenum,containedTo:t.$containedTo.prop("outerHTML"),parentID:t.parent&&t.parent.id,element:t.elementTag,isOpend:t.isOpend,isLoaded:t.isLoaded,pageMML:t.$pageMML&&t.$pageMML.prop("outerHTML"),headMML:t.$headMML&&t.$headMML.prop("outerHTML"),boundary:t.boundary&&JSON.stringify(t.boundary),mrdPath:t.currentMrdPath,mrdParam:t.currentMrdParam,depth:t.depth};return JSON.stringify(e)},q.deserialize=function(t,e){var i=JSON.parse(t),r=e[i.parentID],n=new q(i.pagenum,$(i.containedTo),r,i.element);return n.isOpend=i.isOpend,n.$pageMML=i.pageMML&&$(i.pageMML),n.$headMML=i.headMML&&$($.parseXML(i.headMML)).find("HEAD"),n.boundary=JSON.parse(i.boundary),n.isLoaded=i.isLoaded,n.currentMrdPath=i.mrdPath,n.currentMrdParam=i.mrdParam,n.depth=i.depth,n},q.toXML=function(t){return['<obj pg="',t.pagenum,'" did="',t.id,'" path="',s.escapeXmlEntities(t.currentMrdPath),'" param="',s.escapeXmlEntities(t.currentMrdParam),'" />'].join("")};var j={timingDefer:$.Deferred().resolve(),toResolve:function(){this.timingDefer=this.timingDefer.pipe(null,(function(){return $.Deferred().resolve()}))},push:function(t,e){return this.toResolve(),this.timingDefer=this.timingDefer.pipe((function(){return t(e)})),this.timingDefer}},z={getDrillObject:function(t){return h[t]},getDrillObjectList:function(t){return $.map(t,(function(t){return h[t]}))},getOpenedObjectID:function(t){return $.map(h,(function(e,i){var r="."+z.convertIDtoClassName(e),n=$(r,u).length;if(e.isOpend&&t==e.pagenum&&0==n)return i})).sort((function(t,e){return 0==t.indexOf(e)}))},adjustCoord:function(t){return Math.floor(t/10.3+24.3)},getLineAdjustWidth:function(t,e){var i=!1;return e.find("LN[rhi][ll]").each((function(e,r){return $(r).attr("rhi").split(",").indexOf(t.id)>=0&&(i=!0),!i})),i?0:1},updateDrilldownList:function(t,e,i){h=$.extend(z.getAllDrillObject(t,e,i),h)},isOverlapped:function(t){if(t.isDrillOver)return!1;var e=!1,i=t.divideOffset.isHorizontally,r=t.$containedTo,n=t.parent;if(n&&!n.isDrillOver&&n.divideOffset.isHorizontally!=t.divideOffset.isHorizontally)return!0;var o=$(t.elementTag),a=0;return a=i?parseInt(o.attr("ey")):parseInt(o.attr("ex")),r.find("*").each((function(){var t=$(this);if(t.attr("dr"))return!0;if(("RA"==t.get(0).tagName||"TL"==t.get(0).tagName)&&"1"===t.attr("ba"))return!0;var r=parseInt(t.attr("sy")),n=parseInt(t.attr("sx")),o=parseInt(t.attr("ey")),s=parseInt(t.attr("ex"));return function(t,e,i,r,n,o){return!t&&i<e&&e<n||t&&r<e&&e<o}(i,a,n,r,s,o)&&(e=!0),!e})),e},getAdjustPageSize:function(t,e,i){var r=$(t),n=z.getObjectBoundary(r),o=r.attr("wd")/10.3,a=r.attr("ht")/10.3,s={right:0,bottom:0};for(var l in h){var c=h[l];if(c&&c.pagenum==e&&c.isOpend&&!c.parent){var d=c.getBoundaryWithChildren(),u=z.getLineAdjustWidth(c,c.$containedTo);if(c.isDrillOver){var f=d.bottom-d.top+1+c.position.originalBottom;s.bottom=Math.max(s.bottom,f),s.right=Math.max(s.right,d.right)}else c.divideOffset.isHorizontally?(n.bottom+=d.bottom-d.top+1+u,n.right=Math.max(n.right,d.right)):(n.bottom=Math.max(n.bottom,d.bottom),n.right+=d.right-d.left+1+u)}}n.bottom=Math.max(n.bottom,s.bottom),n.right=Math.max(n.right,s.right);var p=o;return a!=(a=Math.max(a,n.bottom))&&a++,p!=(o=Math.max(o,n.right))&&o++,{height:a,width:o}},updateDrilldownPosition:function(t,e,i){var r=e.divideOffset.isHorizontally,n=e.divideOffset.offset(),o=function(t){return t.isDrillOver?r?t.position.bottom()>n:t.position.right()>n:function(t,e){return t.divideOffset.isHorizontally==e.divideOffset.isHorizontally}(e,t)&&z.comparePosition(e,t)};for(var a in t){var s=t[a];s.divideOffset.isHorizontally,s.isDrillOver;e.isDescendant(s)||e.isAncestor(s)||e.pagenum!=s.pagenum||!e.isSiblingOf(s)||(r&&o(s)?s.position.offsetY+=i:r||!o(s)||s.isDrillOver||(s.position.offsetX+=i))}},comparePosition:function(t,e){for(var i=[t],r=[e];i[i.length-1].parent;)i.push(i[i.length-1].parent);for(;r[r.length-1].parent;)r.push(r[r.length-1].parent);for(;i.length>0&&r.length>0;){var n=i.pop(),o=r.pop();if(n.id!==o.id)return"bottom"===t.direction?o.position.originalBottom>n.position.originalBottom:o.position.originalRight>n.position.originalRight}},getAllDrillObject:function(t,e,i){var r={};return e.find("[hl=7]").each((function(){var n=new q(t,e,i,this);r[n.id]=n})),r},getObjectBoundary:function(t){var e={top:0,left:0,bottom:0,right:0};for(var i in t.find("*").each((function(t){var i=$(this),r={top:parseInt(i.attr("sy")),left:parseInt(i.attr("sx")),bottom:parseInt(i.attr("ey")),right:parseInt(i.attr("ex"))};0!=t?(r.left<e.left&&(e.left=r.left),r.top<e.top&&(e.top=r.top),r.right>e.right&&(e.right=r.right),r.bottom>e.bottom&&(e.bottom=r.bottom)):e=r})),e)e[i]=z.adjustCoord(e[i]);return e},isInTheCurrentPage:function(t){return t.pagenum==v},convertIDtoClassName:function(t){return"drilldown-"+t.id.split(".").join("-")},findContainedDom:function(t){for(;t;){var e=$("."+z.convertIDtoClassName(t),u),i=e.find(".crownix-text:first"),r=e.find(".crownix-canvas:first");if(i.length>0&&r.length>0)return{$pageDom:e,$textDom:i,$canvasDom:r};t=t.parent}return{$pageDom:u,$textDom:f,$canvasDom:g}}}},m2soft.ns("m2soft.crownix.TreeGrid"),m2soft.crownix.TreeGrid=function(){var t,e,i,r,n,o,a=m2soft.crownix.Util,s=!1,l=0,c=0,d=0,h=[],u=[],f="crownix-tree-node",p="crownix-tree-open-node",g="crownix-tree-close-node",m=m2soft.crownix.TreeGrid.debug,v=function(t,e){var i=-1;!function t(r){i++,e(r,i);var n=r.children;if(r.open&&n&&n instanceof Array)for(var o=0,a=n.length;o<a;o++)t(r.children[o]);i--}(t)},w=function(t){if(null!=t){var e=0;v(n,(function(i){i&&i.row&&t==e&&(i.open=!i.open),e++})),m&&console.log("토클 노드:",t,"전체 열린 개수:",e),o.refreshInfinite(e)}},x=function(t){var e=0;v(n,(function(i,r){r<t?i.open=!0:r==t&&(i.open=!1),e++})),m&&console.log("노드 뎁스 설정: ",t,"전체 열린 개수:",e),o.refreshInfinite(e)},b=function(t){return{background:t.background||"#FFFFFF","text-align":t.align,"vertical-align":t.verticalAlign,color:t.font.color,"font-family":t.font.family,"font-size":t.font.size/10+"pt","font-weight":t.font.weight,"text-decoration":t.font.decoration,"font-style":t.font.style,"border-left":t.borderLeft,"border-right":t.borderRight,"border-top":t.borderTop,"border-bottom":t.borderBottom}},y=function(t){var e,i,r,n=$("<tr>"),o=t.columns;n.css({height:Math.ceil(t.height/10.3)+"px"});for(var a=0,s=o.length;a<s;a++)r=o[a],e=$("<td>").css({position:"absolute",left:r.x/10.3+"px",top:r.y/10.3+"px",width:Math.ceil(r.width/10.3)+"px",height:Math.ceil(r.height/10.3)+"px","box-sizing":"border-box",overflow:"hidden","z-index":o.length-a}).css(b(r)).appendTo(n),i=$("<div>").css({display:"table",width:"100%",height:"100%"}).appendTo(e),$("<pre>").css({display:"table-cell","vertical-align":r.verticalAlign,"white-space":"pre-wrap","word-break":"break-all",padding:"0px 1px"}).text(r.text).appendTo(i);return n},k=function(t,e){this.updateCache(t,function(t,e,i){var r=0,n=[];return m&&console.time("fetch data from tree"),v(t,(function(t,o){if(t&&t.row&&++r>e&&r<=i){var a=t.row;a.index=r,a.depth=o,a.pIndex=t.parentRowIdx,a.open=t.open,n.push(a)}})),l=r,m&&console.timeEnd("fetch data from tree"),m&&console.log("전체 열린 개수:",l,"패치된 개수:",n.length,"시작:",e,"끝:",i),n}(n,t,t+e))},_=function(t,e){t=$(t),null!=e?(t.show(),t.children().each((function(t){var i=$(this),r=c-(c-e.depth)-1;c-e.depth>0?i.css(u[r][t]):null!=e.pIndex?i.css(u[e.pIndex][t]):i.css(h[t]);var n=i.find("pre").text(e[t]);s&&0==t&&(i.css({"padding-left":20*r+10+"pt","text-align":"left"}),s&&e.depth<c?(i.attr("record-id",e.index).addClass(f),e.open?(n.addClass(p),n.removeClass(g)):(n.addClass(g),n.removeClass(p))):(i.removeAttr("record-id"),n.removeClass(f).removeClass(p).removeClass(g)))}))):t.hide()};this.build=function(t,e){n=e,s=e.template.tree,m&&console.time("init data"),v(n,(function(t,e){c=Math.max(e,c),t.children&&t.children.length>0&&(t.open=!0),l++})),m&&console.timeEnd("init data"),d=c,function(t){for(var e=t.template.row.columns,i=t.template.parentRow,r=0,n=e.length;r<n;r++)h.push(b(e[r]));for(r=0;r<i.length;r++){var o=i[r].columns;u.push([]);for(var a=0;a<o.length;a++)u[r].push(b(o[a]))}}(e),this.draw(t)},this.draw=function(c){o&&(o.destroy(),o=null),t=$("string"==typeof c?document.getElementById(c):c),function(i){var n=y(i.template.header);e=$("<table>").css({position:"absolute","border-spacing":0,"border-collapse":"separate"}).append(n).appendTo(t),r=$("<div>").attr({id:"scroller"}).css({position:"absolute",top:e.height()+"px",bottom:"0px",width:"100%",overflow:"hidden"}).appendTo(t)}(n),function(t){i=$("<table>").css({width:"100%",height:"100%","border-spacing":0,"border-collapse":"separate"}).attr("id","crownix-grid");for(var e=r.height()/(t.template.row.height/10.3)+10,n=1;n<=e;n++){var c=y(t.template.row);c.css("position","absolute").addClass("record"),s&&c.children().first().on("click",(function(t){w($(this).attr("record-id"))})),c.find("td").each((function(){$(this)})),c.appendTo(i)}i.appendTo(r),o=new IScroll("#scroller",{scrollY:!0,scrollbars:!0,freeScroll:!0,interactiveScrollbars:!0,mouseWheel:!0,parentScroll:t.parentScroll,infiniteElements:"#scroller .record",infiniteLimit:l-1,dataset:k,dataFiller:_,cacheSize:500,doubleTap:!1,shrinkScrollbars:"clip",useTransition:!1,bounce:!1,click:!!a.browser.mobile,HWCompositing:t.enableTranslateZ}),r.on("DOMSubtreeModified",(function(t){t.stopPropagation()}))}(n)},this.expandDepth=function(t){return t<1||t>c||t==d?d:(x(t),d=t)},this.nextDepth=function(){return d>=c||x(++d),d},this.prevDepth=function(){return d<=1||x(--d),d},this.exportTreeStructure=function(){var t={},e=-1;return function t(i,r){var n=i.children;if(e++,r.o=i.open?1:0,e<c-1&&n&&n instanceof Array){n.length>0&&(r.c=[]);for(var o=0,a=n.length;o<a;o++)r.c[o]={},t(i.children[o],r.c[o])}e--}(n,t),t},this.isTree=function(){return s}},m2soft.ns("m2soft.crownix.GridManager"),m2soft.crownix.GridManager=function(){var t,e={};this.build=function(i,r,n,o){if(null==e[i]){var a=JSON.parse(n);a.parentScroll=o.scroll,a.enableTranslateZ=o.options.enableTranslateZ,e[i]=new m2soft.crownix.TreeGrid,e[i].build(r,a)}else e[i].draw(r);t=e[i]},this.exportGridParameter=function(){var t=[" /rtreegridinfo "];for(var i in e){var r=e[i];r.isTree()&&(t.push(i),t.push("["),t.push(JSON.stringify(r.exportTreeStructure())),t.push("]"),t.push(" "))}return t.join("")},this.expandDepth=function(e){return t.expandDepth(e)},this.nextDepth=function(){return t.nextDepth()},this.prevDepth=function(){return t.prevDepth()}},m2soft.ns("m2soft.crownix.Slide"),m2soft.crownix.Slide=function(){var t,e,i,r,n=m2soft.crownix.Util,o=m2soft.crownix.Util.ActionEvents,a=0,s=function(t){t.preventDefault(),t.stopPropagation()},l=function(){e&&e.css("top",t.height()/2-e.height()/2)},c=function(e){s(e),t.toggleClass("crownix-open"),$(this).toggleClass("crownix-right-arrow"),$(this).toggleClass("crownix-left-arrow")},d=function(t){r.children().each((function(){$(this).attr("id")==$(t.currentTarget).attr("id")?$(this).addClass("crownix-tab-background"):$(this).removeClass("crownix-tab-background")})),i.children().each((function(){$(this).attr("id")==$(t.currentTarget).attr("id")?$(this).css("visibility","visible"):$(this).css("visibility","hidden")}))},h=function(){r.children().sort((function(t,e){var i=$(t).data("priority"),r=$(e).data("priority");return void 0===i&&void 0===r?0:void 0===i?1:void 0===r?-1:i>r?1:-1})).appendTo(r),r.children().eq(0).trigger(n.browser.mobile?"touchstart":o.start)},u=function(l,c){c,function(e){a=0,t=$("<div>").addClass("crownix-slide").on(n.browser.mobile?"touchstart":n.browser.msie?"mousedown":o.start,s).css("width",n.browser.mobile&&$(window).width()<699?"50%":"").appendTo("#"+e);var l=$("<div>").addClass("crownix-tab-menu").appendTo(t);i=$("<div>").addClass("crownix-tab-content").appendTo(t),r=$("<ul>").addClass("crownix-tab-button-group").appendTo(l)}(l),this.closeSlide=function(){t.is(".crownix-open")&&e.trigger(n.browser.mobile?"touchstart":o.start)},this.openSlide=function(i){i&&$("#"+i).trigger(n.browser.mobile?"touchstart":o.start),t.is(".crownix-open")||e.trigger(n.browser.mobile?"touchstart":o.start)}};return u.prototype={moveSlideToggleBtn:function(){l()},addSlideTab:function(s,u,f){return function(s,u,f){$(".crownix-slide").css("display","block");var p="crownix-tab"+a++,g=$("<li>").addClass("crownix-tab").text(s).attr("id",p).data("priority",f).on(n.browser.mobile?"touchstart":o.start,d),m=$("<div>").attr("id",p).data("priority",f).appendTo(i);return r.children().length||(e=$("<div>").addClass("crownix-slide-toggle").addClass("crownix-right-arrow").on(n.browser.mobile?"touchstart":o.start,c).appendTo(t),l()),$(".crownix-tab").width(100/a+"%"),g.appendTo(r),$(u).appendTo(m),h(),p}(s,u,f)},destroySlide:function(){$(".crownix-slide").remove()},removeTab:function(i){!function(i){if($(".crownix-slide .crownix-tab-menu .crownix-tab-button-group #"+i).remove(),$(".crownix-slide .crownix-tab-content #"+i).remove(),0===r.children().length)t.hasClass("crownix-open")&&t.removeClass("crownix-open"),t.css("display","none"),e&&e.remove();else{var n=r.children(":last-child").attr("id");$(".crownix-tab-content > #"+n).css("visibility","visible")}}(i)},redraw:function(t,e){!function(t,e){var i=$(".crownix-slide .crownix-tab-content #"+t);i.empty(),e.appendTo(i)}(t,e)}},$(window).resize((function(){m2soft.crownix.Slide.prototype.moveSlideToggleBtn()})),u}(),m2soft.ns("m2soft.crownix.TableOfContents"),m2soft.crownix.TableOfContents=function(t){var e,i=m2soft.crownix.Resource,r=m2soft.crownix.Util,n=t,o="table-of-contents-container",a="table-of-contents",s=$('<div id="'+o+'">'),l=$('<div id="'+a+'">'),c=$('<div id="table-of-contents-focus" tabindex="-1" class="crownix-virtual-cursor">'),d=!1,h=function(){for(var t=r.browser.mobile,e=t?"touchstart":"click",i=document.querySelectorAll("#"+a+" .expanded"),n=document.querySelectorAll("#"+a+" .tree-item"),o=0,s=i.length;o<s;o++)i[o].addEventListener(e,f);for(o=0,s=n.length;o<s;o++)n[o].addEventListener(e,u),t||n[o].addEventListener("dblclick",f)},u=function(t){if(t.preventDefault(),t.stopPropagation(),!$(this).hasClass("label")){var e=n.report.getDestPageNum($(this).attr("pg"));e>0?v($(this)):($("#"+a+" .selected").removeClass("selected"),c.css({display:"none"})),n.currentPage!==e?(d=!0,n.viewer.movePage(e)):g(c)}},f=function(t){t.preventDefault(),t.stopPropagation();var e=$(this),i=e.siblings("ul");e.hasClass("opened")?w(i):x(i),e.toggleClass("opened"),"SPAN"===e[0].tagName?e.prev().toggleClass("opened"):e.next().toggleClass("opened")},p=function(){e.refresh()},g=function(t){var e=n.containerDom,i=n.scroll,o=t.position(),a=t.offset(),s=e.offset();(r.browser.mobile||s.left>a.left||s.top>a.top||s.left+e.outerWidth()<a.left||s.top+e.outerHeight()<a.top)&&setTimeout((function(){var t=-o.left,e=45-o.top+$(document).scrollTop();t>0?t=0:t<i.maxScrollX&&(t=i.maxScrollX),e>0?e=0:e<i.maxScrollY&&(e=i.maxScrollY),i.scrollToKeepCenter(t,e,0)}),r.browser.mobile?500:0)},m=function(t){c.prependTo(t),d?(d=!d,g(c)):($("#"+a+" .selected").removeClass("selected"),c.hide())},v=function(t,e){var i=m2soft.crownix.Painter.adjustCoord,r=i(t.attr("le")),n=i(t.attr("to")),o=i(t.attr("ri"))-r,s=i(t.attr("bo"))-n;c.css({left:r,top:n,width:o,height:s,display:"block"}).focus(),$("#"+a+" .selected").removeClass("selected"),t.addClass("selected")},w=function(t){t.css({display:"none"}),p()},x=function(t){t.css({display:"block"}),p()};this.onDrawPage=function(t){m(t)},this.onRemovePage=function(t){!function(t){$("#"+a+" ul > span").filter((function(){var e=Number($(this).attr("pg"));return-1!=t.indexOf(e)})).parent().css("display","none")}(t)},this.onRestorePage=function(t){!function(t){t=[].slice.call(t),$("#"+a+" ul > span").filter((function(){var e=Number($(this).attr("pg"));return-1!=t.indexOf(e)})).parent().css("display","block")}(t)},this.makeDom=function(t){for(var a=t.tree,c=[],d=[],u=-1,f=function(t,e){var i=t.rt;d[++u]=e>0||t.tl?'<ul style="display:none">':"<ul>",t.cdr&&(d[++u]='<label class="expanded"></label>'),d[++u]='<span class="tree-item field',d[++u]=t.cdr?'"':' last"',d[++u]=' pg="',d[++u]=t.pg,d[++u]='" le="',d[++u]=i.le,d[++u]='" to="',d[++u]=i.to,d[++u]='" ri="',d[++u]=i.ri,d[++u]='" bo="',d[++u]=i.bo,d[++u]='">',d[++u]=r.escapeXmlEntities(t.dt),d[++u]="</span>"},p=function(t,e){d[++u]=e>0?'<ul style="display:none">':"<ul>",d[++u]='<label class="expanded"></label>',d[++u]='<span class="tree-item label">',d[++u]=r.escapeXmlEntities(t.tl),d[++u]="</span>"},g=function(t,e){t&&e&&(d[++u]="</ul>"),d[++u]="</ul>"},m=function(t,e){for(var i,r,n,o=0,a=t.length;o<a;o++)r=o===a-1,(n=(i=t[o]).tl)&&c[e]!==n&&(c[e]=n,p(i,e)),f(i,e),i.cdr&&m(i.cdr,e+1),r&&(c[e]=null),g(i.tl,r)},v=0,w=a.length;v<w;v++)m(a[v].cdr,0);l[0].innerHTML=d.join(""),n.slide.addSlideTab(i.get("table_of_contents"),s,0),s[0].appendChild(l[0]),e||(window.sc=e=new IScroll("#"+o,{scrollY:!0,scrollX:!0,scrollbars:!0,freeScroll:!0,interactiveScrollbars:!0,mouseWheel:!0,doubleTap:!1})),h()}},m2soft.ns("m2soft.crownix.Viewer"),m2soft.crownix.Viewer=function(){var t,e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v,w,x,b,y,k,_,C,T,S,E,M,A,P=m2soft.crownix.Ajax,I=m2soft.crownix.Toolbar,D=m2soft.crownix.Report,F=m2soft.crownix.Painter,O=m2soft.crownix.Message,R=m2soft.crownix.Dialog,B=m2soft.crownix.Map,N=(m2soft.crownix.Window,m2soft.crownix.Resource),L=m2soft.crownix.FormManager,q=m2soft.crownix.FieldOrder,j=m2soft.crownix.DrilldownManager,z=m2soft.crownix.Inquery,H=m2soft.crownix.Constant,U=m2soft.crownix.Util,V=m2soft.crownix.License,W=m2soft.crownix.util.Converter,Y=m2soft.crownix.Runtime,G=m2soft.crownix.security.IKE,X=m2soft.crownix.WorkerUtil,K=m2soft.crownix.ExportAgent,Z=m2soft.crownix.ParameterBuilder,J=m2soft.crownix.LinkManager,Q=m2soft.crownix.PageSwiper,tt=m2soft.crownix.resource.Icon,et=m2soft.crownix.ShareManager,it=m2soft.crownix.Slide,rt=m2soft.crownix.TableOfContents,nt="m2soft-crownix-container",ot="m2soft-crownix-page",at="m2soft-crownix-canvas",st="m2soft-crownix-text",lt="m2soft-crownix-note",ct={},dt={viewerWidth:.9,viewerHeight:.9,enableCloseButton:!0,toolbarScale:1,enableToolbarNavigator:!1},ht={},ut={enableNote:!1,enableSecure:!1,includeNoteInPrint:void 0,includeNoteInExport:void 0,scrollbarOnNote:{width:"18px",color:"rgba(0, 0, 0, 0.498039)"},scrollbarOnViewer:{width:"7px",color:"rgba(0, 0, 0, 0.5)"},isHyperlink:!1,isInquery:!1,defaultZoom:void 0,defaultZoomCentre:"center",noDataDialog:{show:!0},showSubmitConfirm:{show:!1},submitPreview:!1,imageDrawOption:{useCanvas:!0},useScrollTransition:!0,swipe:{useOnZoom:!0,sensitivity:2,useOnDesktop:!1},exportMethod:void 0,timeout:30,submitMsgPosition:void 0,showDrilldownMsg:!0,keepZoomRatio:!1,downloadProtocolFile:!1,showPageNum:!0,pdfReaderNotFoundMessage:void 0,downloadFileName:void 0,download:{partsave:void 0,deleteOnServer:!0},infotalk:{timeout:30,dataVerification:!1},saveMmlToPdf:!1,showXlsKeepFormDialog:!1,pdfPrintSpoolName:void 0,textOnCanvas:!1,useFixedFrame:!1,disableToolbarItemsOnError:void 0,cloudPrintSpoolName:void 0,scrollMovePage:!0,scrollOptions:{disableTouch:!1,disablePointer:!1,disableMouse:!1,zoomMin:.25,zoomMax:2.5},enableTranslateZ:!0,useTableOfContents:!1},ft=!1,pt={},gt="",mt={},vt=1,wt=1,xt=!1,bt=!1,yt=!1,kt=!1,_t=!0,Ct=!1,Tt=!0,St=!0,Et=!1,Mt="",At=null,Pt=new Y,It=U.isSupportSVG(),Dt=!U.browser.mobile&&(U.browser.chrome||U.browser.opera),Ft=new J(pt),Ot=new B,Rt=function(t,e){var i=pt.currentPage;void 0!==h&&void 0===e&&h.setScrollTop(!0),"string"!=typeof t||t.match(/^[1-9][0-9]*$/)?t>pt.totalPage?xt?c.show(N.get("page_not_exist")):c.show(N.get("page_not_create")):t<1?c.show(N.get("page_not_exist")):p&&p.isOpening()?pt.dialog.show(N.get("image_export_disabled_before_done")):(1==t?(l.disableToolbarItem(["first","prev"]),l.enableToolbarItem(["next","last"])):t==pt.totalPage?(xt&&l.disableToolbarItem(["next","last"]),l.enableToolbarItem(["first","prev"])):l.enableToolbarItem(["first","prev","next","last"]),bt&&l.disableToolbarItem(["save","print","print_pdf"]),b&&b.movePage(t),Tt?$t(t):ie(t),xt&&ve("page-moved",{currentPage:pt.currentPage,prevPage:i,formFieldModified:f.isModified()})):c.show(N.get("wrong_page_number"))},Bt=function(t){xt&&t==pt.totalPage&&ve("lastpage",{currentPage:t})},$t=function(t){var e=s.getPage(t),i=$(e),r=s.getHeadForPage(t),n=i.attr("wd")/10.3,o=i.attr("ht")/10.3;"1"===i.attr("nd")&&ht.noDataDialog.show&&c.show(ht.noDataDialog.message||N.get("no_data_message"),{title:ht.noDataDialog.title,input:!1}),pt.currentPage=parseInt(t),ht.textOnCanvas=ht.textOnCanvas||ht.useFixedFrame&&i.find("FL").length>0,$("#"+ot).remove(),jt(n,o),pt.drilldownManager.updateInfo(t,i,k,C,_,T),qt(),ht.textOnCanvas?S.setPage(pt.currentPage,s,C,_,h):(Nt(document.getElementById(at),C,i,r,(function(){m2soft.crownix.Forgery.detect(C,document.getElementById(at),pt.isFormEditMode),$("#"+ot).css("visibility","visible"),pt.license.isAllowedFeature("FormField")&&pt.isFormEditMode&&q.getInstance().bind(C,h,t),!0===pt.options.useTableOfContents&&pt.tableOfContents&&pt.tableOfContents.onDrawPage(C),pt.ttsManager&&pt.ttsManager.makeParagraphs(i),pt.onDrawPage&&"function"==typeof pt.onDrawPage&&(pt.onDrawPage(),pt.onDrawPage=null)})),pt.drilldownManager.reload(t));var a=parseInt(ht.scrollbarOnViewer.width);U.changeScrollbar(a,a,ht.scrollbarOnViewer.color,"","");var l=function(t){var e=ht.defaultZoomCentre.toUpperCase();isNaN(t)?"WIDTH"==t.toUpperCase()?vt=zt():"HEIGHT"==t.toUpperCase()&&(vt=Ht()):vt=t,h.zoom(vt),"CENTER"==e?h.scrollTo(-(k.width()*vt-y.width())/2,-(k.height()*vt-y.height())/2,0):"LEFTTOP"==e&&h.scrollTo(0,0,0),isNaN(t)?"WIDTH"==t.toUpperCase()?$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(tt.FIT_WIDTH)):"HEIGHT"==t.toUpperCase()&&$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(tt.FIT_HEIGHT)):$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(100*h.scale)+"%"),St=!1,h.resetPosition(100)};ht.defaultZoom&&!ht.keepZoomRatio||St&&ht.defaultZoom&&ht.keepZoomRatio?l(ht.defaultZoom):(Ut(),St=!1),!0===(pt.license.isAllowedFeature("Note")&&ht.enableNote)&&It&&(pt.noteManager.drawPage(T,t),pt.noteManager.setRatio(vt)),ht.textOnCanvas&&S.redraw(pt.currentPage,s,k,C,_,T,h,Nt),Bt(t),b&&b.isConnected()&&b.initFields()},Nt=function(e,i,r,n,o,a){var s=new F(pt,e,i,Rt,t);s.useAdjustLetterSpace(_t),s.useAdjustCharacterScale(Ct),s.setFormFieldMode(pt.license.isAllowedFeature("FormField")&&n.formFieldMode),s.drawPage(r,n,o,a)},Lt=function(t,e,i,r,n){Nt(t,e,i,r,n,"p")},qt=function(){h&&h.destroy();var t=ht.scrollOptions.zoomMin<.1?.1:ht.scrollOptions.zoomMin,e=ht.scrollOptions.zoomMax>10?10:ht.scrollOptions.zoomMax;t>10&&(t=10);var i={zoom:!0,zoomMin:t,zoomMax:e>t?e:t,useTransition:ht.useScrollTransition,scrollX:!0,scrollY:!0,scrollbars:"custom",interactiveScrollbars:!0,freeScroll:!0,zoomStart:Math.min(1,zt()),keepCenter:!0,tap:U.hasTouch(),doubleTap:U.hasTouch(),mouseWheel:!0,click:!1,keyBindings:{pageUp:33,pageDown:34,end:-1,home:-1,left:-1,up:-1,right:-1,down:-1},HWCompositing:ht.enableTranslateZ};(U.browser.android||U.browser.ios)&&(i.disablePointer=!0,i.disableTouch=!1),ht.scrollOptions.disableTouch&&(i.disableTouch=!0),ht.scrollOptions.disablePointer&&(i.disablePointer=!0),ht.scrollOptions.disableMouse&&(i.disableMouse=!0),pt.scroll=h=new IScroll("#"+nt,i),h.on("zoomEnd",(function(){vt=this.scale,!0===(pt.license.isAllowedFeature("Note")&&ht.enableNote)&&It&&pt.noteManager.setRatio(this.scale),$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(100*this.scale)+"%"),ht.textOnCanvas&&S.redraw(pt.currentPage,s,k,C,_,T,h,Nt)})),h.on("scrollMove",(function(){ht.textOnCanvas&&S.moveParts()})),h.on("scrollEnd",(function(){if(this.indicators&&Dt){var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}})),h.on("beforeScrollStart",(function(t){c.pagenum(pt.currentPage,pt.totalPage)})),h.on("zoomStart",(function(t){c.pagenum(pt.currentPage,pt.totalPage)})),h.on("resize",(function(){U.browser.mobile&&this.scale==wt&&Ut(),this.zoom(this.scale,y.width()/2,y.width()/2),this.resetPosition(100)})),h.on("prevPage",(function(){ht.scrollMovePage?p&&p.isOpening()||(1!==pt.currentPage?Rt(pt.currentPage-1,!1):1==pt.currentPage&&h.setScrollTop(!0)):h.setScrollTop(!0)})),h.on("nextPage",(function(){ht.scrollMovePage?p&&p.isOpening()||(pt.currentPage<Number(pt.totalPage)?Rt(pt.currentPage+1,!1):pt.currentPage==pt.totalPage&&h.setScrollTop(!1)):h.setScrollTop(!1)})),(U.browser.mobile||ht.swipe.useOnDesktop)&&(h.on("pullOut",Q.getInstance(y,pt).pullOut),h.on("pullEnd",Q.getInstance(y,pt).pullEnd),h.on("zoomStart",Q.getInstance(y,pt).cancel)),$(h.scroller).bind("doubleTap",(function(t){zt()==h.scale||1==h.scale?h.zoom(2*h.scale,t.pageX,t.pageY):Ut()||h.zoom(1,t.pageX,t.pageY)})),!0===(pt.license.isAllowedFeature("Note")&&ht.enableNote)&&It&&$(h.scroller).on("mousedown touchstart",(function(t){T&&T.find(":focus").blur()}))},jt=function(t,e){k=$("<div>").attr("id",ot).css({width:t,height:e,position:"relative",visibility:"hidden","margin-left":"0px","margin-right":"0px",padding:"12px"}).prependTo("#"+nt),_=$("<canvas>").attr("id",at).attr("width",t).attr("height",e).css({position:"absolute","z-index":1}),C=$("<div>").attr("id",st).css({position:"absolute",width:t,height:e,"z-index":2}).appendTo("#"+ot),ht.textOnCanvas||(_.addClass("crownix-page"),C.addClass("crownix-page")),_.appendTo("#"+ot),C.appendTo("#"+ot),!0===(pt.license.isAllowedFeature("Note")&&ht.enableNote)&&It&&(T=$("<div>").attr("id",lt).css({position:"absolute",display:"block",width:t,height:e,"z-index":3}).appendTo("#"+ot))},zt=function(){if(!_)return 1;var t=y.innerWidth()-2,e=_.innerWidth();return(t-24*t/e)/e},Ht=function(){var t=y.innerHeight()-2,e=_.innerHeight();return(t-24*t/e)/e},Ut=function(){if(0!=$("#"+ot).length)return this.moveScroll=function(){h.zoom(vt,y.width()/2,y.height()/2,0),!1===h.getScrollTop()?h.scrollTo(y.width()/2,h.getMaxScrollY()):h.scrollTo(y.width()/2,0),vt=h.scale,$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(100*h.scale)+"%"),h.resetPosition()},(wt=zt())<1?(ht.keepZoomRatio&&!St||(vt=wt),this.moveScroll(),!0):(ht.keepZoomRatio||(vt=h.scale),this.moveScroll(),c.pagenum(pt.currentPage,pt.totalPage),!1)},Vt=function(t){if("error"===t.getResponseHeader("crownix-status")){var i;O.progress.hide(e);var r=t.responseText.indexOf("[ERS-");if(r>=0)"16002"!=t.responseText.substr(r+5,5)&&(clearInterval(At),l.disableToolbarItem(["cancel"])),i=t.responseText.substr(r);else clearInterval(At),l.disableToolbarItem(["cancel"]),i=N.get("request_server_error");return c.show(i),Zt(i),Wt(!1),!0}return!1},Wt=function(t,i){if(l.disableToolbarItem(["cancel"]),x=Pt,Pt=new Y,t){if(i&&i.indexOf("</MML>")<0&&i.indexOf("</DOCUMENT>")<0){var r=i.indexOf("[ERS-");return n=r>=0?i.substr(r):N.get("execute_error"),c.show(n),O.progress.hide(e),Zt(n),void Wt(!1)}var n;if(i&&i.indexOf("<ERR")>=0)(n=s.getDocErrMsg()).length>0&&c.show(n),Zt(n);for(var o in c.pagenum(pt.currentPage,pt.totalPage,!1),1===parseInt(pt.totalPage)&&l.disableToolbarItem(["next","last","move"]),s.getDocumentList())ft=ft||pt.license.isAllowedFeature("FormField")&&s.getDocumentList()[o].formFieldMode&&!pt.isFormExportMode;ft||l.enableToolbarItem(["save","print","print_pdf","cloud_print"]),pt.isFormEditMode?l.showToolbarItem(["storage-formdata"]):l.hideToolbarItem(["storage-formdata"]);var a=[];Ft.isEmptyPrevDocStack()||a.push("prevDoc"),Ft.isEmptyNextDocStack()||a.push("nextDoc"),a.length>0?(l.showToolbarItem(["prevDoc","nextDoc"]),l.disableToolbarItem(["prevDoc","nextDoc"]),l.enableToolbarItem(a)):l.hideToolbarItem(["prevDoc","nextDoc"]),pt.isFormEditMode&&(f.fireLoadCompleteEvent(),f.bindEvent()),pt.license.isAllowedFeature("ShareServer")||(l.hideToolbarItem(["share"]),b&&b.unableLicense()),Et&&ht.disableToolbarItemsOnError&&l.disableToolbarItem(ht.disableToolbarItemsOnError),f.removePreventEvent(),g=i,setTimeout((function(){xt||(pt.reportFinished=xt=!0,Gt(),ht.textOnCanvas&&pt.redrawOnFinished&&S.redraw(pt.currentPage,s,k,C,_,T,h,Nt),ve("report-finished",Yt()),Bt(1)),b&&b.isConnected()&&b.reportFinished(),pt.isFormEditMode&&Tt&&pt.formManager.existRequiredFileField()&&!window.FormData&&c.show(N.get("not_support_file_append"),"",(function(){for(var t=pt.formManager.getRequiredFileFields(),e=0,i=t.length;e<i;e++)t[e].setRequired(!1)}))}),0)}else c.pagenum(pt.currentPage,pt.totalPage,!1),At&&l.enableToolbarItem(["cancel"]),setTimeout((function(){pt.reportFinished=xt=!0,ve("report-finished",{isError:Et,lastErrorMsg:Mt})}),0)},Yt=function(){var t=[],e=s.getDocumentList();if(U.isArray(i)&&e)for(var n in e)t.push(e[n].mrd);else e&&(t=e[1].mrd);return{reportname:t,reportlongname:i,reportparams:r,subreportname:s.getSubReportName()?s.getSubReportName().split("@@"):"",totalPage:pt.totalPage,isError:Et,lastErrorMsg:Mt}},Gt=function(){for(var t=0;t<a.length;t++)a[t].handler.apply(this,a[t].arg);a=[]},Xt=function(t,e){a.push({handler:t,arg:e})},Kt=function(i,r,n,o,a,l,d){(u=new P).setConnectTimeout(ht.timeout);var h=Qt("decrypt");h.addEventListener("message",(function(t){var e=t.data.text,i=t.data.method,r=t.data.rdid;"process"===i?a(e,r):"finalize"===i&&(l(e,r),h.terminate())})),u.setHandler({load:function(t){Vt(t)||h.postMessage({method:"process",rdid:t.getResponseHeader("crownix-rdid"),text:t.responseText})},done:function(t){Vt(t)||h.postMessage({method:"finalize",rdid:t.getResponseHeader("crownix-rdid"),text:t.responseText})},error:function(t,i){O.progress.hide(e),h.terminate();var r=i;r?c.show(r):0==t.status?(r=N.get("server_connect_error"),c.show(N.get("server_connect_error"))):(r=N.get("request_server_error")+"("+t.status+")",c.show(N.get("request_server_error")+"("+t.status+")")),Zt(r),Wt(!1)},abort:function(){O.progress.hide(e),h.terminate(),c.show(N.get("request_abort_error")),Zt(N.get("request_abort_error")),Wt(!1)},timeout:function(){O.progress.hide(e),h.terminate(),c.show(N.get("request_timeout_error")),Zt(N.get("request_timeout_error")),Wt(!1)}});var f="",p="",g="",m="";U.isArray(i)?(f=JSON.stringify(i),p=JSON.stringify(r),U.isArray(n)&&n.length>0&&(g=JSON.stringify(n)),U.isArray(o)&&o.length>0&&(m=JSON.stringify(o))):(f=i,p=r,"string"==typeof n&&""!=n&&(g=n),"string"==typeof o&&""!=o&&(m=o));var v={opcode:d,mrd_path:f,mrd_param:p,mrd_plain_param:g,mrd_data:m,runtime_param:Pt.toJson(),mmlVersion:s.getMmlVersion(),protocol:"sync"};Ot.isEmpty()||(v.ext_param=JSON.stringify(Ot.toObject())),w>3&&Ft.isEmptyPrevDocStack()&&0==pt.drilldownManager.getDrilldownLength()&&(v.enc_type=w),gt&&(v.rdid=gt);var x=Qt("encrypt");x.addEventListener("message",(function(e){var i=e.data.obj;"object"===e.data.method&&(ht.enableSecure&&(u.setRequestHeader("crownix-rdid",gt),u.setRequestHeader("crownix-encrypt-type","parameter")),u.invoke(t+(gt?"?rdid="+gt:""),i),x.terminate())})),x.postMessage({method:"object",obj:v})},Zt=function(t){Et=!0,Mt=t},Jt=function(t,i,r,n){O.progress.show(e);Kt(t,i,n,r,(function(t,e){s.parseMML(t),l.enableToolbarItem(["cancel"])}),(function(t,e){var i;s.parseMML(t),m=new Z(pt,ue),Wt(!0,t),A.debug&&(i=t,$(document).bind("keypress",(function(t){t.shiftKey&&68===t.which&&window.open("data:text/xml;charset=utf-8,"+encodeURI(i))})))}),700)},Qt=function(t){if(ht.enableSecure){var e=G.getAlgorithm(gt),i=G.getKey(gt);return X.getCryptoWorker(t,e,i)}return X.getIdentifyWorker()},te=function(){var e=new P;e.setConnectTimeout(ht.timeout);var i=ee();e.setHandler({load:function(t){},done:function(t){if(Vt(t))i.terminate();else{var e=t.getResponseHeader("crownix-status");i.postMessage({method:"finalize",text:t.responseText,status:e})}},error:function(t){var e;i.terminate(),clearInterval(At),0==t.status?(e=N.get("server_connect_error"),c.show(N.get("server_connect_error"))):(e=N.get("request_server_error")+"("+t.status+")",c.show(N.get("request_server_error")+"("+t.status+")")),Zt(e),Wt(!1)},abort:function(){i.terminate(),c.show(N.get("request_abort_error")),clearInterval(At),Zt(N.get("request_abort_error")),Wt(!1)},timeout:function(){i.terminate(),c.show(N.get("request_timeout_error")),clearInterval(At),Zt(N.get("request_timeout_error")),Wt(!1)}});var r={opcode:702,rdid:gt};pt.rdid=gt;var n=Qt("encrypt");n.addEventListener("message",(function(i){var r=i.data.obj;"object"===i.data.method&&(ht.enableSecure&&(e.setRequestHeader("crownix-rdid",gt),e.setRequestHeader("crownix-encrypt-type","parameter")),e.invoke(t+(gt?"?rdid="+gt:""),r),n.terminate())})),n.postMessage({method:"object",obj:r})},ee=function(){var t=Qt("decrypt");return t.addEventListener("message",(function(e){var i=e.data.text,r=e.data.method,n=e.data.status;"finalize"===r&&F.updatePageNum&&(pt.totalPage=i,c.pagenum(pt.currentPage,pt.totalPage,!0),F.updatePageNum(),"done"===n&&(clearInterval(At),s.setTotalPage(parseInt(i)),Wt(!0),xt&&Bt(pt.currentPage)),t.terminate())})),t},ie=function(e){if(s.hasPage(e))$t(e);else{var i=new P;i.setConnectTimeout(ht.timeout);var r=re(e);e=s.findPage(e),i.setHandler({load:function(t){},done:function(t){Vt(t)?clearInterval(At):r.postMessage({method:"finalize",text:t.responseText})},error:function(t){var e;clearInterval(At),r.terminate(),0==t.status?(e=N.get("server_connect_error"),c.show(e)):(e=N.get("request_server_error")+"("+t.status+")",c.show(e)),Zt(e),Wt(!1)},abort:function(){c.show(N.get("request_abort_error")),r.terminate(),clearInterval(At),Zt(N.get("request_abort_error")),Wt(!1)},timeout:function(){c.show(N.get("request_timeout_error")),r.terminate(),clearInterval(At),Zt(N.get("request_timeout_error")),Wt(!1)}});var n={opcode:703,page:e,withHead:null==s.getHeadForPage(e),mmlVersion:s.getMmlVersion(),rdid:gt};ht.enableSecure&&(i.setRequestHeader("crownix-rdid",gt),i.setRequestHeader("crownix-encrypt-type","parameter"));var o=Qt("encrypt");o.addEventListener("message",(function(e){var r=e.data.obj;"object"===e.data.method&&(i.invoke(t+(gt?"?rdid="+gt:""),r),o.terminate())})),o.postMessage({method:"object",obj:n})}},re=function(t){var e=Qt("decrypt");return e.addEventListener("message",(function(i){var r=i.data.text;"finalize"===i.data.method&&(s.parseMML(r,t),xt&&Wt(!0,r),$t(t),e.terminate())})),e},ne=function(){var e=new K(pt,c,l,ht);bt=!0,!1===pt.options.downloadProtocolFile?e.showPdfWindow(t,we(!0),x,Ft,Ot).always((function(){bt=!1})):(e.showPdfWindowDirect(t,we(!0),x,Ft,Ot),bt=!1)},oe=function(){var t,i=$('<div id="crownix-print-frame">').css({width:$("#m2soft-crownix-page").width(),height:"100%"}).appendTo("body");if(!U.browser.mobile){var r=$('<iframe id="crownix-print-viewer">').css({width:"100%",height:"100%"});r.prependTo(i);var n=r.contents()[0];n.open(),n.write('<!DOCTYPE html><head></head><body id="'+nt+'" style="width: '+$("#crownix-print-viewer").width()+'px; margin: 0;"></body></html>'),n.close(),r.contents().find("head").append($("link").clone())}for(var o=0,a=pt.totalPage;o<a;o++){var l=o+1,c=s.getPage(l),d=s.getHeadForPage(l),h=$(c),u=Math.floor(h.attr("wd")/10.3),f=Math.floor(h.attr("ht")/10.3),p="l"===h.attr("or")?"margin: 0; size: landscape;":"size: portrait;",g=$("<div>").attr("id",ot).addClass(ot).css({width:u,height:f,position:"relative",visibility:"visible"});if(l<pt.totalPage&&g.css({"page-break-after":"always"}),U.browser.firefox&&l<=pt.totalPage&&g.css({"page-break-inside":"avoid"}),!U.browser.mobile&&0===o){var m=r.contents()[0].getElementsByTagName("head")[0];$("<style>").attr("type","text/css").attr("media","print").append("body {margin: 0;padding: 0;}@page {"+p+"}").appendTo(m)}var v=$("<canvas>").attr("id",at).attr("width",u).attr("height",f).addClass(at).css({"z-index":1}).appendTo(g),w=$("<div>").attr("id",st).addClass(st).css({width:u,height:f,"z-index":2,"-webkit-print-color-adjust":"exact"}).appendTo(g),x=$("<div>").attr("id",lt).addClass(lt).css({width:u,height:f,"z-index":3}).appendTo(g);U.browser.safari&&g.css({zoom:.83}),v.css("position","absolute"),w.css("position","absolute"),x.css("position","absolute"),U.browser.mobile?g.appendTo(i):g.appendTo(r.contents().find("body")),function(t,e,i,r,n){Lt(r[0],i,t,d,(function(){pt.drilldownManager.updateInfo(n,t,e,i,r),pt.drilldownManager.reload(n)}))}(h,g,w,v,l),ue("includeNoteInPrint")&&pt.noteManager.drawNote(x,l)}var b=window;if(U.browser.mobile){for(var y=b.parent;b!=y;)y=(b=b.parent).parent;i.css({position:"absolute",top:"0px",left:"0px"})}else t=document.getElementById("crownix-print-viewer");setTimeout((function(){var r;if(O.progress.hide(e),U.browser.msie||U.browser.edge)t.contentWindow?t.contentWindow.document.execCommand("print",!1,null):t.contentDocument&&t.contentDocument.execCommand("print",!1,null);else if(U.browser.mobile){var n=$(b.document).find("body"),o=n.contents(),a=n.css("display");n.css("display","inline"),o.each((function(){$(this).get(0).tagName&&(this.prevDisp=$(this).css("display"),$(this).hide())})),i.removeAttr("style").appendTo($(b.document).find("body")),print(),o.each((function(){$(this).get(0).tagName&&($(this).css("display",this.prevDisp),delete this.prevDisp)})),n.css("display",a)}else(r=t.contentWindow||t.contentDocument).focus(),r.print();U.browser.opera?r.onfocus=function(){i.remove()}:i.remove();var l=s.getPage(pt.currentPage),c=$(l);pt.drilldownManager.updateInfo(pt.currentPage,c,k,C,_)}),1e3)},ae=function(){if(!(b&&b.isConnected()||m2soft.crownix.storage&&m2soft.crownix.storage.Window))throw c.show(N.get("unsupported_feature_localStorage")),N.get("unsupported_feature_localStorage")},se=function(t){if(!xt)throw Error(N.get("image_export_disabled_before_done"));if(p&&p.isOpening())throw Error(N.get("image_export_disabled_before_done"));var e={};return void 0===(t=$.extend({},t)).includeImage&&(t.includeImage=!0),e.mml=t.includeImage?g:g.replace(/<IM[^>]+>/g,""),e.mrd_path=i,e.mrd_param=r,e.drilldownInfo=pt.drilldownManager.export(),e.options=ht,e.preventPrintExport=ft,e.useAdjustLetterSpace=_t,e.useAdjustCharacterScale=Ct,e.useWebFont=kt,e.isAppendReport=pt.isAppendReport,e.removedPage=s.getRemovedPage(),e.version="1.0",!0===t.includeNote&&pt.noteManager&&(e.noteData=pt.noteManager.export(pt.totalPage)),e},le=function(t){i=t.mrd_path||"",r=t.mrd_param||"",ht=$.extend({},ut),"object"==typeof t.options&&$.extend(!0,ht,t.options),ft=t.preventPrintExport,_t=t.useAdjustLetterSpace,Ct=t.useAdjustCharacterScale,kt=t.useWebFont,isAppendReport=t.isAppendReport,he(t.mml),pt.drilldownManager.import(t.drilldownInfo),s.removePage(t.removedPage),t.noteData&&pt.noteManager&&pt.noteManager.import(t.noteData)},ce=function(t){if(!xt)throw Error(N.get("image_export_disabled_before_done"));if(!pt.isFormEditMode)throw Error(N.get("unsupported_feature_without_formedit_mode"));if(p&&p.isOpening())throw Error(N.get("image_export_disabled_before_done"));t=$.extend({},t);var e={},i=f.export(!0===t.checkValid);return f&&f.saved(),!0===t.includeExtra?(e.formData=i,e.removedPage=s.getRemovedPage(),e.drilldownInfo=pt.drilldownManager.export(),e.currentPage=pt.currentPage,!0===t.includeNote&&pt.noteManager&&(e.noteData=pt.noteManager.export(pt.totalPage))):!0===t.includeNote?(e.formData=i,pt.noteManager&&(e.noteData=pt.noteManager.export(pt.totalPage))):e=W.json2xml(i),e},de=function(t){if(!xt)throw Error(N.get("image_export_disabled_before_done"));if(!pt.isFormEditMode)throw Error(N.get("unsupported_feature_without_formedit_mode"));if("string"==typeof t&&0==t.indexOf("{")&&(t=JSON.parse(t)),"object"==typeof t)t.drilldownInfo&&pt.drilldownManager.import(t.drilldownInfo,!0),t.removedPage&&s.removePage(t.removedPage),t.formData&&f.import(t.formData),!t.currentPage||pt.shareManager&&pt.shareManager.isConnected()||Rt(t.currentPage),t.noteData&&pt.noteManager&&(pt.noteManager=new m2soft.crownix.NoteManager(e,pt),pt.noteManager.import(t.noteData));else if("string"==typeof t){if(null===(t=W.xml2json(t,{arrayAccessFormPaths:["formdata.form","formdata.form.fields.field"]})))throw Error(N.get("parsing_error_mml"));f.import(t)}setTimeout((function(){$t(pt.currentPage)}),0),f&&f.removePreventEvent()},he=function(t){pe(),pt.isAppendReport=!1,s.parseMML(t),m=new Z(pt,ue),Wt(!0,t)},ue=function(t){if(!0===(pt.license.isAllowedFeature("Note")&&ht.enableNote)&&It)return void 0===ht[t]?"editable"===pt.noteManager.getMode()||"disable"===pt.noteManager.getMode():!0===ht[t]},fe=function(t,e){f.isAllFormSubmitted()&&(l.enableToolbarItem(["save","print","print_pdf","cloud_print"]),ft=!1),b&&b.isConnected()&&(t.status?b.submitFinished(t,e):b.submitFailed()),ve("submit-finished",t),f.saved()},pe=function(){vt=1,gt="",xt=!1,Et=!1,Mt="",ft=!1,St=!0,ht.saveMmlToPdf&&(Tt=!1),pt.toolbar=l,pt.inquery=d,pt.scroll=h,pt.client=u,pt.rdid=gt,pt.mmlString=g,pt.eventHandler=mt,pt.parameterBuilder=m,pt.options=ht,pt.stateLess=Tt,pt.useWebFont=kt,pt.isFormEditMode=!1,pt.isFormExportMode=!1,pt.currentPage=0,pt.totalPage=0,pt.containerDom=y,pt.mrdPath=i,pt.mrdParam=r,pt.mrdPlainParam=n,pt.encType=w,pt.mrdData=o,pt.startPageNo=0,pt.openFile=me,pt.exportMML=se,pt.exportFormData=ce,pt.importMML=le,pt.importFormData=de,pt.startPageNo=0,pt.emit=ve,pt.options.download.deleteOnServer=!!ht.download.deleteOnServer;var a=new V;p=new j(pt,t,Kt),f=new L(fe,ge,pt),pt.canvasManager=S=new m2soft.crownix.CanvasManager(pt),s=new D(pt,e),pt.noteManager&&(pt.noteManager.destroyNoteToolbar(),pt.noteManager=null),At&&clearInterval(At),At=null,pt.license=a,pt.report=s,pt.drilldownManager=p,pt.formManager=f,pt.reportFinished=!1,pt.redrawOnFinished=!1,pt.slide&&pt.slide.destroySlide(),M=new it(H.CONTAINER_ID,pt),pt.slide=M,pt.tableOfContents=new rt(pt),q.getInstance(pt).clear(),$("#"+ot).remove()},ge=function(){return m},me=function(a,h,u){if("function"==typeof document.createElement("canvas").getContext||(c.show(N.get("unsupported_canvas_error")),0))if(b&&b.isConnected()&&!b.isHost())c.show(N.get("unsupported_feature_localStorage"));else{if(u&&!0===u.isHyperlink){if(u.isHyperlink=!1,a.indexOf("http://")>=0||a.indexOf("https://")>=0||(a=i.substring(0,i.lastIndexOf("/")+1)+a),!Ft.saveState("new"))return void c.show(N.get("hyperlink_full_stack_warning"));if(Ft.deleteNextDocStack(),Ft.isExistData(a+"_"+h))return void Ft.restoreState(a+"_"+h)}else u&&!0===u.isInquery?u.isInquery=!1:Ft=new J(pt);var f=null,p=null,g=null,x=null;if(U.isArray(a)){pt.isAppendReport=!0,f=[],p=[],g=[],x=[];for(var y=0;y<a.length;y++)"object"==typeof v?(f.push(v.unprocess(a[y].mrdPath,w)),p.push(v.unprocess(a[y].mrdParam,w)),"string"==typeof a[y].rdata&&x.push(v.unprocess(a[y].rdata,w))):(f.push(a[y].mrdPath),p.push(a[y].mrdParam),"string"==typeof a[y].rdata&&x.push(a[y].rdata)),d.getMrdPlainParam()?g.push(d.getMrdPlainParam()):g.push("");u=h}else pt.isAppendReport=!1,"object"==typeof v?(f=v.unprocess(a,w),p=v.unprocess(h,w),"string"==typeof o&&(x=v.unprocess(o,w))):(f=a,p=h,"string"==typeof o&&(x=o)),g=d.getMrdPlainParam();i=f,r=p,o=x,n=g,ht=$.extend({},ut),"object"==typeof u&&$.extend(!0,ht,u),pe(),p=Z.prototype.addParamByOptions(pt,p);var k=function(){Tt?Jt(f,p,x,g):function(t,i,r,n){O.progress.show(e),l.enableToolbarItem(["cancel"]),Kt(t,i,n,r,(function(t,e){gt=e,te()}),(function(t,e){gt=e,s.parseMML(t,1),m=new Z(pt,ue),At||(At=setInterval((function(){te()}),500))}),701)}(f,p,x,g)};ht.showPageNum?c.keepPageNum(ht.showPageNum):$(".crownix-dialog-message-pagenum").remove(),ht.enableSecure?(G.setMethod("object"==typeof ht.enableSecure?ht.enableSecure.methodType:"OPTIONS"),gt&&G.removeSession(gt),G.request({serverUrl:t}).done((function(t){gt=t,k()})).fail((function(t){O.log(t.stack),c.show("Key exchange error("+t+")")}))):k(),"object"==typeof v&&(v=void 0,m2soft.crownix.EncEval=void 0,m2soft.crownix.Enc=void 0,delete m2soft.crownix.EncEval,delete m2soft.crownix.Enc)}},ve=function(t){if("function"==typeof mt[t]){var e=[];Array.prototype.push.apply(e,arguments),e.shift(),mt[t].apply(null,e)}else A.debug&&O.log("[event emitted] "+t+" is not registerd")},we=function(t){var e,a,s=m.concatMrdPath(i);return w>3?(pt.mrdPlainParam=m.concatMrdParam(f.getFormList(),n,t),e=m.concatMrdPath(r)):e=m.concatMrdParam(f.getFormList(),r,t),null!=o&&(a=m.concatMrdPath(o)),{mrdPath:s,mrdParam:e,mrdData:a}};return(A=function(i,r,n){t=i,"string"!=typeof r?(yt=!0,ct=$.extend({},dt),"object"==typeof r&&$.extend(!0,ct,r)):(e="#"+r,ct=$.extend({},dt),$.extend(!0,ct,n)),a=[],function(){if($(e+" > *").remove(),yt){e="#crownix-html5-viewer";var t=$("<div>").addClass("crownix-overlay").css("z-index",H.VIEWER_OVERLAY_Z_INDEX).prependTo("body").fadeIn(500);("number"!=typeof ct.viewerWidth||ct.viewerWidth<0||ct.viewerWidth>1)&&(ct.viewerWidth=.9),("number"!=typeof ct.viewerHeight||ct.viewerHeight<0||ct.viewerHeight>1)&&(ct.viewerHeight=.9);var i=$('<div id="crownix-html5-viewer">').css({display:"none",position:"absolute",width:100*ct.viewerWidth+"%",height:100*ct.viewerHeight+"%",left:(100-100*ct.viewerWidth)/2+"%",top:(100-100*ct.viewerHeight)/2+"%","margin-left":window.pageXOffset,"margin-top":window.pageYOffset,border:"1px solid #666","z-index":H.VIEWER_Z_INDEX}).prependTo("body"),r=$("body").css("overflow-x"),n=$("body").css("overflow-y");1==ct.viewerWidth&&$("body").css("overflow-x","hidden"),1==ct.viewerWidth&&1==ct.viewerHeight&&$("body").css("overflow-y","hidden"),$('<span class="crownix-close-button">X</span>').bind("click",(function(){u.abort(),i.remove(),t.remove(),$("body").css("overflow-x",r),$("body").css("overflow-y",n),q.dispose(),Q.dispose(),f&&f.saved()})).css({display:ct.enableCloseButton?"block":"none"}).appendTo(i),i.fadeIn(500)}y=$("<div>").attr("id",nt).addClass("crownix-container").addClass("crownix-container-gradient").appendTo(e),$('<div><iframe id="crownix-download-iframe" name="crownix-download-iframe" style="display: none"></iframe><form id="crownix-download-form" target="crownix-download-iframe" method="post" style="display:none" accept-charset="utf-8"><input type="hidden" name="filename"/><input type="hidden" name="delete" value="true"/></form></div>').appendTo(e)}(),l=new I(e,this,{getHeightFitRatio:Ht,getWidthFitRatio:zt,scale:ct.toolbarScale,share:ct.share,enableToolbarNavigator:ct.enableToolbarNavigator},pt),y.css("top",l.getHeight()+"px"),c=new R(nt),d=new z(nt),l.disableAllItems(),yt&&l.enableToolbarItem(["close"]),pt.viewer=this,pt.dialog=c,ct.share&&(b=new et(ct.share,pt,r),pt.shareManager=b,l.enableToolbarItem(["share"])),Dt&&document.addEventListener("visibilitychange",(function(){var t=document.getElementById("m2soft-crownix-canvas"),e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height);t.width++,t.width--,e.putImageData(i,0,0)})),ct.downloadUrl&&(pt.downloadUrl=ct.downloadUrl),O.log("[Crownix Viewer] "+N.get("developer_console_warnning"))}).prototype={constructor:m2soft.crownix.Viewer,openFile:function(t,e,i){me(t,e,i)},hideToolbar:function(){l.hideToolbar(),y.css("top","0px"),pt.openFile&&(qt(),h.zoom(vt,y.width()/2,y.height()/2))},showToolbar:function(){l.showToolbar(),y.css("top",l.getHeight()+"px"),pt.openFile&&(qt(),h.zoom(vt,y.width()/2,y.height()/2))},hideToolbarItem:function(){l.hideToolbarItem.apply(this,arguments)},showToolbarItem:function(){if(!Tt){var t=arguments[0].indexOf("print");-1!=t&&arguments[0].splice(t,1)}arguments[0].length>0&&l.showToolbarItem.apply(this,arguments)},hideNoteItem:function(){xt?ht.enableNote&&pt.noteManager.hideNoteItem.apply(this,arguments):Xt(this.hideNoteItem,arguments)},showNoteItem:function(){xt?ht.enableNote&&pt.noteManager.showNoteItem.apply(this,arguments):Xt(this.showNoteItem,arguments)},addToolbarItem:function(t){l.addToolbarItem(t)},nextPage:function(){Rt(pt.currentPage+1)},prevPage:function(){Rt(pt.currentPage-1)},moveFirstPage:function(){Rt(1)},moveLastPage:function(){Rt(pt.totalPage)},movePage:function(t){Rt(t)},moveFormField:function(t){!function(t){var e=t.split("."),i=e[0],r=e[1],n=f.getField(i,r);if(n.id){Rt(n.page);var o="crownix_form_field_"+i+"_"+r;setTimeout((function(){var t=document.getElementById(o);q.getInstance().blink(o,t.tagName),pt.scroll.scrollToElement(t)}),0)}else c.show(N.get("formfield_not_exist"))}(t)},prevDoc:function(){Ft.prevDoc()},nextDoc:function(){Ft.nextDoc()},zoomIn:function(){return h.zoom(vt+.2,y.width()/2,y.height()/2),vt=h.scale},zoomOut:function(){return h.zoom(vt-.2,y.width()/2,y.height()/2),vt=h.scale},zoom:function(t){return h.zoom(t,y.width()/2,y.height()/2),h.scale},pack:function(){Ut()},showMovePageDialog:function(){c.show(N.get("insert_page_number"),{input:"number"},(function(t){!1!==t&&Rt(t)}))},setDownloadFileName:function(t){pt.options.downloadFileName=t},downloadFile:function(e,i){if(bt||!xt)throw new Error(N.get("download_duplicate_error"));if(ft)throw new Error(N.get("form_not_submit_save_error"));if(p&&p.isOpening())throw new Error(N.get("image_export_disabled_before_done"));!function(e,i){var r=new K(pt,c,l,ht);bt=!0;var n=we(),o=function(){!1===pt.options.downloadProtocolFile?r.downloadFile(t,e,n,x,i,Ft,Ot).always((function(){bt=!1})):(r.downloadFileDirect(t,e,n,x,Ft,Ot),bt=!1)};"xls"==e&&1==ht.showXlsKeepFormDialog?c.show(N.get("keep_report_layout_message"),{verify:!0,input:"",textYes:N.get("yes_button_text"),textNo:N.get("no_button_text"),textAlign:"center"},(function(t){var e=t?65537:65538;w>3?pt.mrdPlainParam="/rxlskeepformopt ["+e+"] "+pt.mrdPlainParam:n.mrdParam="/rxlskeepformopt ["+e+"] "+n.mrdParam,o()})):o()}(e,i)},print:function(){if(ft)throw new Error(N.get("form_not_submit_print_error"));if(p&&p.isOpening())throw new Error(N.get("image_export_disabled_before_done"));if(!U.browser.mobile||U.browser.android){var t=arguments[0];if(xt)if("object"==typeof t&&!0===t.isServerSide&&("number"!=typeof t.limitedPage||t.limitedPage>=pt.totalPage)){if(ht.pdfReaderNotFoundMessage&&(U.browser.msie||U.browser.safari&&!U.os.macos)&&!U.getAcrobatInfo().isInstalled)return void c.show(ht.pdfReaderNotFoundMessage);U.browser.android||ne()}else{if(!Tt)return void c.show(N.get("print_stateful_error"));O.progress.show(e,N.get("print_progress"),(function(){oe()}))}else Xt(this.print,arguments)}},cancelExport:function(){cancelExportToImage()},setStateLessMode:function(t){(Tt=t)||l.hideToolbarItem(["print"])},useWebFont:function(t){kt=t},useAdjustLetterSpace:function(t){_t=t},useAdjustCharacterScale:function(t){Ct=t},bind:function(t,e){mt[t]=e},cancel:function(){p&&p.isOpening()?p.stopDrilldown():(Tt?u.abort():function(){var e=new P,i=function(){clearInterval(At),l.disableToolbarItem(["cancel"]),c.pagenum(pt.currentPage,pt.totalPage,!1)};e.setHandler({load:function(t){},done:function(t){c.show(N.get("request_abort_error")),i()},error:function(t){i(),0==t.status?c.show(N.get("server_connect_error")):c.show(N.get("request_server_error")+"("+t.status+")")},abort:function(){c.show(N.get("request_abort_error")),i()},timeout:function(){c.show(N.get("request_timeout_error")),i()}});var r={opcode:709,rdid:gt},n=Qt("encrypt");n.addEventListener("message",(function(i){if("object"===i.data.method){var r=i.data.obj;ht.enableSecure&&(e.setRequestHeader("crownix-rdid",gt),e.setRequestHeader("crownix-encrypt-type","parameter")),e.invoke(t+(gt?"?rdid="+gt:""),r),n.terminate()}})),n.postMessage({method:"object",obj:r})}(),c.pagenum(pt.currentPage,pt.totalPage,!1))},export:function(t,e,i){if(Tt){if(!xt)throw Error(N.get("image_export_disabled_before_done"));var r;if("png"===t||"jpeg"===t)r=new m2soft.crownix.ImageConverter;else{if("pdf"!==t)throw Error(N.get("unsupported_format")+": "+t);r=new m2soft.crownix.PdfConverter}pt.license.isAllowedFeature("FormField")&&pt.isFormEditMode&&(f.disableEdit(),r.setFormManager(f),f.saved()),pt.license.isAllowedFeature("Note")&&ue("includeNoteInExport")&&r.setNoteManager(pt.noteManager),r.setUseAdjustLetterSpace(_t),r.convert(s,t,e,i)}else c.show(N.get("save_stateful_error"))},showMMLStorageDialog:function(){!function(t){if(m2soft.crownix.storage&&m2soft.crownix.storage.Window){var i=new(0,m2soft.crownix.storage.Window)("mml",c);i.setDataGetter((function(e){return t.exportMML(e)})),i.setDataLoader((function(e){i.close(),t.importMML(e)})),i.show({parent:e})}else c.show(N.get("unsupported_feature_localStorage"))}(this)},showFormDataStorageDialog:function(){!function(t){if(m2soft.crownix.storage&&m2soft.crownix.storage.Window&&pt.isFormEditMode){var i=new(0,m2soft.crownix.storage.Window)("formdata",c);i.setDataGetter((function(e){return t.exportFormData(e)})),i.setDataLoader((function(e){var r=function(){i.close(),t.importFormData(e),f.saved()};f.isModified()?c.show(N.get("storage_formfield_import"),{confirm:!0,input:!1},(function(t){t&&r()})):r()})),i.show({parent:e,closeOnError:!0})}else c.show(N.get("unsupported_feature_localStorage"))}(this)},exportMML:function(t){if(ae(),!xt)throw Error(N.get("image_export_disabled_before_done"));if(p&&p.isOpening())throw Error(N.get("image_export_disabled_before_done"));return t||(t={}),t.includeFormData?{mmlData:se(t),formData:ce(),version:"1.0"}:se(t)},exportFormData:function(t){return ae(),t||(t={}),ce(t)},importMML:function(t){var e;try{e="string"==typeof t?JSON.parse(t):"object"==typeof t?t:{}}catch(t){O.log(t),e={}}e.mmlData&&e.formData?function(t){le(t.mmlData),setTimeout((function(){de(t.formData)}),0)}(e):le(e)},importFormData:function(t){de(t)},showInqueryDialog:function(){b&&b.isConnected()&&!b.isHost()?c.show(N.get("unsupported_feature_localStorage")):d.show()},addColumn:function(t,e,i){return Pt.addColumn(t,e,i)},setRData:function(t){o=t},setParameterEncrypt:function(t){w=t,t>-1&&t<12?w=t:O.log("setParameterEncrypt value is only 0~11."),t<4&&(m2soft.crownix.EncEval.eval(),v=new m2soft.crownix.Enc)},getMrdPath:function(){return i},getMrdParam:function(){return r},setMrdPath:function(t){i=t},setMrdParam:function(t){r=t},submit:function(t,e,i,r){f.submitForMethod(t,e,i,r)},getForm:function(t){return f.getFormWrapper(t)},showShareDialog:function(){b&&b.showDialog()},shareDisconnect:function(){b&&b.disconnect()},createReport:function(t,e){b&&b.createReport(t,e)},joinReport:function(t,e){b&&b.joinReport(t,e)},initViewer:function(){pt.isFormEditMode&&(q.getInstance().blur(),q.dispose()),pt={},A.call(this,t,e.substring(1,e.length),ct)},setPreventPrintExport:function(t){ft=t},cloudPrint:function(){if(ft)throw new Error(N.get("form_not_submit_print_error"));if(p&&p.isOpening())throw new Error(N.get("image_export_disabled_before_done"));if(xt){var e=new K(pt,c,l,ht);bt=!0;var i=arguments[0];e.base64URI(t,we(),Pt,Ft).done((function(t){var e;bt&&(void 0===i?(E||(E=new cloudprint.Gadget),e=E):e=i.gadget,e.openPrintDialog(),e.setPrintDocument("dataUrl",pt.options.cloudPrintSpoolName,"data:application/pdf;base64,"+t))})).always((function(){bt=!1}))}else Xt(this.cloudPrint)},initExtParam:function(){Ot=new B},addExtParameter:function(t,e){Ot.put(t,e)},getExtParameter:function(){if(!Ot.isEmpty())return Ot.toObject()},getMrdInfo:function(){var t=s.getDocumentList(),e=[],i=[];for(var r in t)e.push(t[r].mrdpath),i.push(t[r].mrdparam);return{mrdpath:e,mrdparam:i}},showGroupSign:function(t){if(!xt)throw Error(N.get("image_export_disabled_before_done"));pt.license.isAllowedFeature("FormField")&&pt.isFormEditMode?new m2soft.crownix.BatchSignWindow(pt).show(t):c.show(N.get("unsupported_feature_without_formedit_mode"))},validate:function(t){pt.formManager.validator.validate(t)}},A}(),function(t,e){(function(){return this}()).true={};var i,r,n,o,a,s,l,c,d,h,u=function(t){function e(e){var i={};this.subscribe=function(t,e,r){if("function"!=typeof e)return!1;i.hasOwnProperty(t)||(i[t]={});var n=Math.random().toString(35);return i[t][n]=[e,!!r],n},this.unsubscribe=function(t){for(var e in i)if(i[e][t])return delete i[e][t],!0;return!1},this.publish=function(r){if(i.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var a in i[r]){var s=i[r][a];try{s[0].apply(e,n)}catch(e){t.console&&console.error("jsPDF PubSub Error",e.message,e)}s[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}}}function i(o,a,s,l){var c={};"object"==typeof o&&(o=(c=o).orientation,a=c.unit||a,s=c.format||s,l=c.compress||c.compressPdf||l),a=a||"mm",s=s||"a4",o=(""+(o||"P")).toLowerCase();var d,h,u,g,m,v,w=(""+s).toLowerCase(),x=!!l&&"function"==typeof Uint8Array,b=c.textColor||"0 g",y=c.drawColor||"0 G",k=c.fontSize||16,_=c.lineHeight||1.15,C=c.lineWidth||.200025,T=2,S=!1,E=[],M={},A={},P=0,I=[],D=[],F=0,O=0,R=0,B={title:"",subject:"",author:"",keywords:"",creator:""},$={},N=new e($),L=function(t){return t.toFixed(2)},q=function(t){return t.toFixed(3)},j=function(t){return("0"+parseInt(t)).slice(-2)},z=function(t){S?I[P].push(t):(R+=t.length+1,D.push(t))},H=function(){return T++,E[T]=R,z(T+" 0 obj"),T},U=function(t){z("stream"),z(t),z("endstream")},V=function(t){t.objectNumber=H(),z("<</BaseFont/"+t.PostScriptName+"/Type/Font"),"string"==typeof t.encoding&&z("/Encoding/"+t.encoding),z("/Subtype/Type1>>"),z("endobj")},W=function(){for(var t in z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),z("/Font <<"),M)M.hasOwnProperty(t)&&z("/"+t+" "+M[t].objectNumber+" 0 R");z(">>"),z("/XObject <<"),N.publish("putXobjectDict"),z(">>")},Y=function(){(function(){for(var t in M)M.hasOwnProperty(t)&&V(M[t])})(),N.publish("putResources"),E[2]=R,z("2 0 obj"),z("<<"),W(),z(">>"),z("endobj"),N.publish("postPutResources")},G=function(t,e,i){A.hasOwnProperty(e)||(A[e]={}),A[e][i]=t},X=function(t,e,i,r){var n="F"+(Object.keys(M).length+1).toString(10),o=M[n]={id:n,PostScriptName:t,fontName:e,fontStyle:i,encoding:r,metadata:{}};return G(n,e,i),N.publish("addFont",o),n},K=function(t,e){return function(t,e){var i,r,n,o,a,s,l,c,h;if(n=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&M[d].metadata&&M[d].metadata[n]&&M[d].metadata[n].encoding&&(o=M[d].metadata[n].encoding,!a&&M[d].encoding&&(a=M[d].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(l=!1,s=[],i=0,r=t.length;r>i;i++)(c=a[t.charCodeAt(i)])?s.push(String.fromCharCode(c)):s.push(t[i]),s[i].charCodeAt(0)>>8&&(l=!0);t=s.join("")}for(i=t.length;void 0===l&&0!==i;)t.charCodeAt(i-1)>>8&&(l=!0),i--;if(!l)return t;for(s=e.noBOM?[]:[254,255],i=0,r=t.length;r>i;i++){if((h=(c=t.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(h),s.push(c-(h<<8))}return String.fromCharCode.apply(void 0,s)}(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Z=function(){P++,S=!0,I[P]=[],z(L(C*h)+" w"),z(y),0!==F&&z(F+" J"),0!==O&&z(O+" j"),N.publish("addPage",{pageNumber:P})},J=function(t,e){var i;t=void 0!==t?t:M[d].fontName,e=void 0!==e?e:M[d].fontStyle;try{i=A[t][e]}catch(t){}if(!i)throw new Error("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts.");return i},Q=function(){S=!1,T=2,D=[],E=[],z("%PDF-"+r),function(){var e,r,n,o,a,s,l,c=g*h,d=m*h;for(l=t.adler32cs||i.adler32cs,x&&void 0===l&&(x=!1),e=1;P>=e;e++){if(H(),z("<</Type /Page"),z("/Parent 1 0 R"),z("/Resources 2 0 R"),z("/Contents "+(T+1)+" 0 R>>"),z("endobj"),r=I[e].join("\n"),H(),x){for(n=[],o=r.length;o--;)n[o]=r.charCodeAt(o);s=l.from(r),(a=new p(6)).append(new Uint8Array(n)),r=a.flush(),(n=new Uint8Array(r.length+6)).set(new Uint8Array([120,156])),n.set(r,2),n.set(new Uint8Array([255&s,s>>8&255,s>>16&255,s>>24&255]),r.length+2),r=String.fromCharCode.apply(null,n),z("<</Length "+r.length+" /Filter [/FlateDecode]>>")}else z("<</Length "+r.length+">>");U(r),z("endobj")}E[1]=R,z("1 0 obj"),z("<</Type /Pages");var u="/Kids [";for(o=0;P>o;o++)u+=3+2*o+" 0 R ";z(u+"]"),z("/Count "+P),z("/MediaBox [0 0 "+L(c)+" "+L(d)+"]"),z(">>"),z("endobj")}(),Y(),H(),z("<<"),function(){for(var t in z("/Producer (jsPDF "+i.version+")"),B)B.hasOwnProperty(t)&&B[t]&&z("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+K(B[t])+")");var e=new Date;z(["/CreationDate (D:",e.getFullYear(),j(e.getMonth()+1),j(e.getDate()),j(e.getHours()),j(e.getMinutes()),j(e.getSeconds()),")"].join(""))}(),z(">>"),z("endobj"),H(),z("<<"),z("/Type /Catalog"),z("/Pages 1 0 R"),z("/OpenAction [3 0 R /FitH null]"),z("/PageLayout /OneColumn"),N.publish("putCatalog"),z(">>"),z("endobj");var e,n=R,o="0000000000";for(z("xref"),z("0 "+(T+1)),z(o+" 65535 f "),e=1;T>=e;e++)z((o+E[e]).slice(-10)+" 00000 n ");return z("trailer"),z("<<"),z("/Size "+(T+1)),z("/Root "+T+" 0 R"),z("/Info "+(T-1)+" 0 R"),z(">>"),z("startxref"),z(n),z("%%EOF"),S=!0,D.join("\n")},tt=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":("f"===t||"f*"===t||"B"===t||"B*"===t)&&(e=t),e},et=function(){for(var t=Q(),e=t.length,i=new ArrayBuffer(e),r=new Uint8Array(i);e--;)r[e]=t.charCodeAt(e);return i},it=function(){return new Blob([et()],{type:"application/pdf"})},rt=((v=function(e,i){switch(e){case void 0:return Q();case"save":if(navigator.getUserMedia&&(void 0===t.URL||void 0===t.URL.createObjectURL))return $.output("dataurlnewwindow");f(it(),i),"function"==typeof f.unload&&t.setTimeout&&setTimeout(f.unload,70);break;case"arraybuffer":return et();case"blob":return it();case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(Q());case"datauri":case"dataurl":t.document.location.href="data:application/pdf;base64,"+btoa(Q());break;case"dataurlnewwindow":t.open("data:application/pdf;base64,"+btoa(Q()));break;default:throw new Error('Output type "'+e+'" is not supported.')}}).foo=function(){try{return v.apply(this,arguments)}catch(r){var e=r.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var i="Error in function "+e.split("\n")[0].split("<")[0]+": "+r.message;if(!t.console)throw new Error(i);console.log(i,r),t.alert&&alert(i),console.trace()}},v.foo.bar=v,v.foo);switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=96/72;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}if(n.hasOwnProperty(w))m=n[w][1]/h,g=n[w][0]/h;else try{m=s[1],g=s[0]}catch(t){throw new Error("Invalid format: "+s)}if("p"===o||"portrait"===o)o="p",g>m&&(u=g,g=m,m=u);else{if("l"!==o&&"landscape"!==o)throw"Invalid orientation: "+o;o="l",m>g&&(u=g,g=m,m=u)}for(var nt in $.internal={pdfEscape:K,getStyle:tt,getFont:function(){return M[J.apply($,arguments)]},getFontSize:function(){return k},getLineHeight:function(){return k*_},write:function(t){z(1===arguments.length?t:Array.prototype.join.call(arguments," "))},getCoordinateString:function(t){return L(t*h)},getVerticalCoordinateString:function(t){return L((m-t)*h)},collections:{},newObject:H,putStream:U,events:N,scaleFactor:h,pageSize:{width:g,height:m},output:function(t,e){return rt(t,e)},getNumberOfPages:function(){return I.length-1},pages:I},$.addPage=function(){return Z(),this},$.text=function(t,e,i,r,n){function o(t){return t=t.split("\t").join(Array(c.TabLen||9).join(" ")),K(t,r)}"number"==typeof t&&(u=i,i=e,e=t,t=u),"string"==typeof t&&t.match(/[\n\r]/)&&(t=t.split(/\r\n|\r|\n/g)),"number"==typeof r&&(n=r,r=null);var a="",s="Td";if(n){n*=Math.PI/180;var l=Math.cos(n),f=Math.sin(n);a=[L(l),L(f),L(-1*f),L(l),""].join(" "),s="Tm"}if("noBOM"in(r=r||{})||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0),"string"==typeof t)t=o(t);else{if(!(t instanceof Array))throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(var p=t.concat(),g=[],v=p.length;v--;)g.push(o(p.shift()));t=g.join(") Tj\nT* (")}return z("BT\n/"+d+" "+k+" Tf\n"+k*_+" TL\n"+b+"\n"+a+L(e*h)+" "+L((m-i)*h)+" "+s+"\n("+t+") Tj\nET"),this},$.line=function(t,e,i,r){return this.lines([[i-t,r-e]],t,e)},$.lines=function(t,e,i,r,n,o){var a,s,l,c,d,f,p,g,v,w,x;for("number"==typeof t&&(u=i,i=e,e=t,t=u),r=r||[1,1],z(q(e*h)+" "+q((m-i)*h)+" m "),a=r[0],s=r[1],c=t.length,w=e,x=i,l=0;c>l;l++)2===(d=t[l]).length?(w=d[0]*a+w,x=d[1]*s+x,z(q(w*h)+" "+q((m-x)*h)+" l")):(f=d[0]*a+w,p=d[1]*s+x,g=d[2]*a+w,v=d[3]*s+x,w=d[4]*a+w,x=d[5]*s+x,z(q(f*h)+" "+q((m-p)*h)+" "+q(g*h)+" "+q((m-v)*h)+" "+q(w*h)+" "+q((m-x)*h)+" c"));return o&&z(" h"),null!==n&&z(tt(n)),this},$.rect=function(t,e,i,r,n){return tt(n),z([L(t*h),L((m-e)*h),L(i*h),L(-r*h),"re"].join(" ")),null!==n&&z(tt(n)),this},$.triangle=function(t,e,i,r,n,o,a){return this.lines([[i-t,r-e],[n-i,o-r],[t-n,e-o]],t,e,[1,1],a,!0),this},$.roundedRect=function(t,e,i,r,n,o,a){var s=4/3*(Math.SQRT2-1);return this.lines([[i-2*n,0],[n*s,0,n,o-o*s,n,o],[0,r-2*o],[0,o*s,-n*s,o,-n,o],[2*n-i,0],[-n*s,0,-n,-o*s,-n,-o],[0,2*o-r],[0,-o*s,n*s,-o,n,-o]],t+n,e,[1,1],a),this},$.ellipse=function(t,e,i,r,n){var o=4/3*(Math.SQRT2-1)*i,a=4/3*(Math.SQRT2-1)*r;return z([L((t+i)*h),L((m-e)*h),"m",L((t+i)*h),L((m-(e-a))*h),L((t+o)*h),L((m-(e-r))*h),L(t*h),L((m-(e-r))*h),"c"].join(" ")),z([L((t-o)*h),L((m-(e-r))*h),L((t-i)*h),L((m-(e-a))*h),L((t-i)*h),L((m-e)*h),"c"].join(" ")),z([L((t-i)*h),L((m-(e+a))*h),L((t-o)*h),L((m-(e+r))*h),L(t*h),L((m-(e+r))*h),"c"].join(" ")),z([L((t+o)*h),L((m-(e+r))*h),L((t+i)*h),L((m-(e+a))*h),L((t+i)*h),L((m-e)*h),"c"].join(" ")),null!==n&&z(tt(n)),this},$.circle=function(t,e,i,r){return this.ellipse(t,e,i,i,r)},$.setProperties=function(t){for(var e in B)B.hasOwnProperty(e)&&t[e]&&(B[e]=t[e]);return this},$.setFontSize=function(t){return k=t,this},$.setFont=function(t,e){return d=J(t,e),this},$.setFontStyle=$.setFontType=function(t){return d=J(void 0,t),this},$.getFontList=function(){var t,e,i,r={};for(t in A)if(A.hasOwnProperty(t))for(e in r[t]=i=[],A[t])A[t].hasOwnProperty(e)&&i.push(e);return r},$.setLineWidth=function(t){return z((t*h).toFixed(2)+" w"),this},$.setDrawColor=function(t,e,i,r){var n;return n=void 0===e||void 0===r&&t===e===i?"string"==typeof t?t+" G":L(t/255)+" G":void 0===r?"string"==typeof t?[t,e,i,"RG"].join(" "):[L(t/255),L(e/255),L(i/255),"RG"].join(" "):"string"==typeof t?[t,e,i,r,"K"].join(" "):[L(t),L(e),L(i),L(r),"K"].join(" "),z(n),this},$.setFillColor=function(t,e,i,r){var n;return n=void 0===e||void 0===r&&t===e===i?"string"==typeof t?t+" g":L(t/255)+" g":void 0===r?"string"==typeof t?[t,e,i,"rg"].join(" "):[L(t/255),L(e/255),L(i/255),"rg"].join(" "):"string"==typeof t?[t,e,i,r,"k"].join(" "):[L(t),L(e),L(i),L(r),"k"].join(" "),z(n),this},$.setTextColor=function(t,e,i){if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var r=parseInt(t.substr(1),16);t=r>>16&255,e=r>>8&255,i=255&r}return b=0===t&&0===e&&0===i||void 0===e?q(t/255)+" g":[q(t/255),q(e/255),q(i/255),"rg"].join(" "),this},$.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},$.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return F=e,z(e+" J"),this},$.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return O=e,z(e+" j"),this},$.output=rt,$.save=function(t){$.output("save",t)},i.API)i.API.hasOwnProperty(nt)&&("events"===nt&&i.API.events.length?function(t,e){var i,r,n;for(n=e.length-1;-1!==n;n--)i=e[n][0],r=e[n][1],t.subscribe.apply(t,[i].concat("function"==typeof r?[r]:r))}(N,i.API.events):$[nt]=i.API[nt]);return function(){for(var t="helvetica",e="times",i="courier",r="normal",n="bold",o="italic",a="bolditalic",s=[["Helvetica",t,r],["Helvetica-Bold",t,n],["Helvetica-Oblique",t,o],["Helvetica-BoldOblique",t,a],["Courier",i,r],["Courier-Bold",i,n],["Courier-Oblique",i,o],["Courier-BoldOblique",i,a],["Times-Roman",e,r],["Times-Bold",e,n],["Times-Italic",e,o],["Times-BoldItalic",e,a]],l=0,c=s.length;c>l;l++){var d=X(s[l][0],s[l][1],s[l][2],"StandardEncoding"),h=s[l][0].split("-");G(d,h[0],h[1]||"")}N.publish("addFonts",{fonts:M,dictionary:A})}(),d="F1",Z(),N.publish("initialized"),$}var r="1.3",n={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return i.API={events:[]},i.version="1.0.150-git 2014-05-30T00:40:diegocr","function"==typeof define&&define.amd?define((function(){return i})):t.jsPDF=i,i}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);u.API.addHTML=function(t,e,i,r,n){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&&(r=e,n=i),"function"==typeof r&&(n=r,r=null);var o=this.internal,a=o.scaleFactor,s=o.pageSize.width,l=o.pageSize.height;if((r=r||{}).onrendered=function(t){e=parseInt(e)||0,i=parseInt(i)||0;var o=r.dim||{},c=o.h||0,d=o.w||Math.min(s,t.width/a)-e,h="JPEG";if(r.format&&(h=r.format),t.height>l&&r.pagesplit){var u=function(){for(var r=0;;){var o=document.createElement("canvas");o.width=Math.min(s*a,t.width),o.height=Math.min(l*a,t.height-r),o.getContext("2d").drawImage(t,0,r,t.width,o.height,0,0,o.width,o.height);var c=[o,e,r?0:i,o.width/a,o.height/a,h,null,"SLOW"];if(this.addImage.apply(this,c),(r+=o.height)>=t.height)break;this.addPage()}n(d,r,null,c)}.bind(this);if("CANVAS"===t.nodeName){var f=new Image;f.onload=u,f.src=t.toDataURL("image/png"),t=f}else u()}else{var p=Math.random().toString(35),g=[t,e,i,d,c,h,p,"SLOW"];this.addImage.apply(this,g),n(d,c,p,g)}}.bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(t,r);if("undefined"!=typeof rasterizeHTML){var c="drawDocument";return"string"==typeof t&&(c=/^http/.test(t)?"drawURL":"drawHTML"),r.width=r.width||s*a,rasterizeHTML[c](t,void 0,r).then((function(t){r.onrendered(t.image)}),(function(t){n(null,t)}))}return null},function(t){var e="addImage_",i=["jpeg","jpg","png"],r=function(t){var e=this.internal.newObject(),i=this.internal.write,n=this.internal.putStream;if(t.n=e,i("<</Type /XObject"),i("/Subtype /Image"),i("/Width "+t.w),i("/Height "+t.h),t.cs===this.color_spaces.INDEXED?i("/ColorSpace [/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?e+2:e+1)+" 0 R]"):(i("/ColorSpace /"+t.cs),t.cs===this.color_spaces.DEVICE_CMYK&&i("/Decode [1 0 1 0 1 0 1 0]")),i("/BitsPerComponent "+t.bpc),"f"in t&&i("/Filter /"+t.f),"dp"in t&&i("/DecodeParms <<"+t.dp+">>"),"trns"in t&&t.trns.constructor==Array){for(var o="",a=0,s=t.trns.length;s>a;a++)o+=t.trns[a]+" "+t.trns[a]+" ";i("/Mask ["+o+"]")}if("smask"in t&&i("/SMask "+(e+1)+" 0 R"),i("/Length "+t.data.length+">>"),n(t.data),i("endobj"),"smask"in t){var l="/Predictor 15 /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,c={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:l,data:t.smask};"f"in t&&(c.f=t.f),r.call(this,c)}t.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),i("<< /Length "+t.pal.length+">>"),n(this.arrayBufferToBinaryString(new Uint8Array(t.pal))),i("endobj"))},n=function(){var t=this.internal.collections[e+"images"];for(var i in t)r.call(this,t[i])},o=function(){var t,i=this.internal.collections[e+"images"],r=this.internal.write;for(var n in i)r("/I"+(t=i[n]).i,t.n,"0","R")},a=function(){var t=this.internal.collections[e+"images"];return t||(this.internal.collections[e+"images"]=t={},this.internal.events.subscribe("putResources",n),this.internal.events.subscribe("putXobjectDict",o)),t},s=function(t,e,i){return t||e||(t=-96,e=-96),0>t&&(t=-1*i.w*72/t/this.internal.scaleFactor),0>e&&(e=-1*i.h*72/e/this.internal.scaleFactor),0===t&&(t=e*i.w/i.h),0===e&&(e=t*i.h/i.w),[t,e]},l=function(t,e,i,r,n,o,a){var l=s.call(this,i,r,n),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;i=l[0],r=l[1],a[o]=n,this.internal.write("q",c(i),"0 0",c(r),c(t),d(e+r),"cm /I"+n.i,"Do Q")};t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t.isString=function(t){return"string"==typeof t},t.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},t.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},t.isArrayBuffer=function(t){return!!this.supportsArrayBuffer()&&t instanceof ArrayBuffer},t.isArrayBufferView=function(t){return!!this.supportsArrayBuffer()&&("undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array))},t.binaryStringToUint8Array=function(t){for(var e=t.length,i=new Uint8Array(e),r=0;e>r;r++)i[r]=t.charCodeAt(r);return i},t.arrayBufferToBinaryString=function(t){this.isArrayBuffer(t)&&(t=new Uint8Array(t));for(var e="",i=t.byteLength,r=0;i>r;r++)e+=String.fromCharCode(t[r]);return e},t.arrayBufferToBase64=function(t){for(var e,i="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(t),o=n.byteLength,a=o%3,s=o-a,l=0;s>l;l+=3)i+=r[(16515072&(e=n[l]<<16|n[l+1]<<8|n[l+2]))>>18]+r[(258048&e)>>12]+r[(4032&e)>>6]+r[63&e];return 1==a?i+=r[(252&(e=n[s]))>>2]+r[(3&e)<<4]+"==":2==a&&(i+=r[(64512&(e=n[s]<<8|n[s+1]))>>10]+r[(1008&e)>>4]+r[(15&e)<<2]+"="),i},t.createImageInfo=function(t,e,i,r,n,o,a,s,l,c,d,h){var u={alias:s,w:e,h:i,cs:r,bpc:n,i:a,data:t};return o&&(u.f=o),l&&(u.dp=l),c&&(u.trns=c),d&&(u.pal=d),h&&(u.smask=h),u},t.addImage=function(e,r,n,o,s,c,d,h){if("number"==typeof r){var u=c;c=s,s=o,o=n,n=r,r=u}var f,p,g=a.call(this);if(h=function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:t.image_compression.NONE}(h),r=(r||"JPEG").toLowerCase(),function(t){return null==t}(d)&&(d=void 0),function(t){return"object"==typeof t&&1===t.nodeType}(e)&&(e=function(t,e){if("IMG"===t.nodeName&&t.hasAttribute("src")&&0===(""+t.getAttribute("src")).indexOf("data:image/"))return t.getAttribute("src");if("CANVAS"===t.nodeName)var i=t;else{(i=document.createElement("canvas")).width=t.clientWidth||t.width,i.height=t.clientHeight||t.height;var r=i.getContext("2d");if(!r)throw"addImage requires canvas to be supported by browser.";r.drawImage(t,0,0,i.width,i.height)}return i.toDataURL("png"==e?"image/png":"image/jpeg")}(e,r)),this.isString(e)){var m=this.extractInfoFromBase64DataURI(e);m?(r=m[2],e=atob(m[3]),this.supportsArrayBuffer()&&(p=e,e=this.binaryStringToUint8Array(e))):255!==e.charCodeAt(0)&&(f=function(t,e){var i;if(e)for(var r in e)if(t===e[r].alias){i=e[r];break}return i}(e,g))}if(function(t){return-1===i.indexOf(t)}(r))throw new Error("addImage currently only supports formats "+i+", not '"+r+"'");if(function(e){return"function"!=typeof t["process"+e.toUpperCase()]}(r))throw new Error("please ensure that the plugin for '"+r+"' support is added");var v=function(t){var e=0;return t&&(e=Object.keys?Object.keys(t).length:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e}(t)),e}(g),w=f;if(w||(w=this["process"+r.toUpperCase()](e,v,d,h,p)),!w)throw new Error("An unkwown error occurred whilst processing the image");return l.call(this,n,o,s,c,w,v,g),this};var c=function(t,e){return t.subarray(e,e+4)};t.processJPEG=function(t,e,i,r,n){var o,a=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE;return this.isString(t)?(o=function(t){var e;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*t.charCodeAt(4)+t.charCodeAt(5),r=4,n=t.length;n>r;){if(r+=i,255!==t.charCodeAt(r))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(r+1)||193===t.charCodeAt(r+1)||194===t.charCodeAt(r+1)||195===t.charCodeAt(r+1)||196===t.charCodeAt(r+1)||197===t.charCodeAt(r+1)||198===t.charCodeAt(r+1)||199===t.charCodeAt(r+1))return e=256*t.charCodeAt(r+5)+t.charCodeAt(r+6),[256*t.charCodeAt(r+7)+t.charCodeAt(r+8),e];r+=2,i=256*t.charCodeAt(r)+t.charCodeAt(r+1)}}(t),this.createImageInfo(t,o[0],o[1],a,8,s,e,i)):(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)?(o=function(t){if(65496!=(t[0]<<8|t[1]))throw new Error("Supplied data is not a JPEG");for(var e,i=t.length,r=(t[4]<<8)+t[5],n=4;i>n;){if(r=((e=c(t,n+=r))[2]<<8)+e[3],(192===e[1]||194===e[1])&&255===e[0]&&r>7)return{width:((e=c(t,n+5))[2]<<8)+e[3],height:(e[0]<<8)+e[1]};n+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(t),t=n||this.arrayBufferToBinaryString(t),this.createImageInfo(t,o.width,o.height,a,8,s,e,i)):null)},t.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(u.API),function(t){t.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/OpenAction "+t+" 0 R")})),this}}(u.API),i=u.API,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},l=1,c=function(t,e,i,r,n){s={x:t,y:e,w:i,h:r,ln:n}},d=function(){return s},h={left:0,top:0,bottom:0},i.setHeaderFunction=function(t){a=t},i.getTextDimensions=function(t){r=this.internal.getFont().fontName,n=this.table_font_size||this.internal.getFontSize(),o=this.internal.getFont().fontStyle;var e,i,a=19.049976/25.4;return(i=document.createElement("font")).id="jsPDFCell",i.style.fontStyle=o,i.style.fontName=r,i.style.fontSize=n+"pt",i.innerText=t,document.body.appendChild(i),e={w:(i.offsetWidth+1)*a,h:(i.offsetHeight+1)*a},document.body.removeChild(i),e},i.cellAddPage=function(){var t=this.margins||h;this.addPage(),c(t.left,t.top,void 0,void 0),l+=1},i.cellInitialize=function(){s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},l=1},i.cell=function(t,e,i,r,n,o,a){var s=d();if(void 0!==s.ln)if(s.ln===o)t=s.x+s.w,e=s.y;else{var l=this.margins||h;s.y+s.h+r+13>=this.internal.pageSize.height-l.bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),e=d().y+d().h}if(void 0!==n[0])if(this.printingHeaderRow?this.rect(t,e,i,r,"FD"):this.rect(t,e,i,r),"right"===a){if(n instanceof Array)for(var u=0;u<n.length;u++){var f=n[u],p=this.getStringUnitWidth(f)*this.internal.getFontSize();this.text(f,t+i-p-3,e+this.internal.getLineHeight()*(u+1))}}else this.text(n,t+3,e+this.internal.getLineHeight());return c(t,e,i,r,o),this},i.arrayMax=function(t,e){var i,r,n,o=t[0];for(i=0,r=t.length;r>i;i+=1)n=t[i],e?-1===e(o,n)&&(o=n):n>o&&(o=n);return o},i.table=function(t,e,r,n,o){if(!r)throw"No data for PDF table";var a,c,d,u,f,p,g,m,v,w,x=[],b=[],y={},k={},_=[],C=[],T=!1,S=!0,E=12,M=h;if(M.width=this.internal.pageSize.width,o&&(!0===o.autoSize&&(T=!0),!1===o.printHeaders&&(S=!1),o.fontSize&&(E=o.fontSize),o.margins&&(M=o.margins)),this.lnMod=0,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},l=1,this.printHeaders=S,this.margins=M,this.setFontSize(E),this.table_font_size=E,null==n)x=Object.keys(r[0]);else if(n[0]&&"string"!=typeof n[0])for(c=0,d=n.length;d>c;c+=1)a=n[c],x.push(a.name),b.push(a.prompt),k[a.name]=.7499990551181103*a.width;else x=n;if(T)for(w=function(t){return t[a]},c=0,d=x.length;d>c;c+=1){for(y[a=x[c]]=r.map(w),_.push(this.getTextDimensions(b[c]||a).w),g=0,u=(p=y[a]).length;u>g;g+=1)f=p[g],_.push(this.getTextDimensions(f).w);k[a]=i.arrayMax(_)}if(S){var A=this.calculateLineHeight(x,k,b.length?b:x);for(c=0,d=x.length;d>c;c+=1)a=x[c],C.push([t,e,k[a],A,String(b.length?b[c]:a)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(c=0,d=r.length;d>c;c+=1)for(m=r[c],A=this.calculateLineHeight(x,k,m),g=0,v=x.length;v>g;g+=1)a=x[g],this.cell(t,e,k[a],A,m[a],c+2,a.align);return this.lastCellPos=s,this.table_x=t,this.table_y=e,this},i.calculateLineHeight=function(t,e,i){for(var r,n=0,o=0;o<t.length;o++){i[r=t[o]]=this.splitTextToSize(String(i[r]),e[r]-3);var a=this.internal.getLineHeight()*i[r].length+3;a>n&&(n=a)}return n},i.setTableHeaderRow=function(t){this.tableHeaderRow=t},i.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var i,r,n,o;if(this.printingHeaderRow=!0,void 0!==a){var s=a(this,l);c(s[0],s[1],s[2],s[3],-1)}this.setFontStyle("bold");var d=[];for(n=0,o=this.tableHeaderRow.length;o>n;n+=1)this.setFillColor(200,200,200),i=this.tableHeaderRow[n],e&&(i[1]=this.margins&&this.margins.top||0,d.push(i)),r=[].concat(i),this.cell.apply(this,r.concat(t));d.length>0&&this.setTableHeaderRow(d),this.setFontStyle("normal"),this.printingHeaderRow=!1},function(t){var e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,m,v;e=function(){function t(){}return function(e){return t.prototype=e,new t}}(),s=function(t){var e,i,r,n,o,a,s;for(i=0,r=t.length,e=void 0,n=!1,a=!1;!n&&i!==r;)(e=t[i]=t[i].trimLeft())&&(n=!0),i++;for(i=r-1;r&&!a&&-1!==i;)(e=t[i]=t[i].trimRight())&&(a=!0),i--;for(o=/\s+$/g,s=!0,i=0;i!==r;)e=t[i].replace(/\s+/g," "),s&&(e=e.trimLeft()),e&&(s=o.test(e)),t[i]=e,i++;return t},l=function(t,e,i,r){return this.pdf=t,this.x=e,this.y=i,this.settings=r,this.init(),this},c=function(t){var e,i,n;for(e=void 0,i=(n=t.split(",")).shift();!e&&i;)e=r[i.trim().toLowerCase()],i=n.shift();return e},d=function(t){var e;return(t="auto"===t?"0px":t).indexOf("em")>-1&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),t.indexOf("pt")>-1&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px"),void 0,16,(e=h[t])?e:undefined!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:t}])||(e=parseFloat(t))?h[t]=e/16:(e=t.match(/([\d\.]+)(px)/),h[t]=3===e.length?parseFloat(e[1])/16:1)},a=function(t){var e,i,r,a;return a=function(t){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle?t.currentStyle:t.style}(t),r=function(t){return t=t.replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()})),a[t]},void 0,(e={})["font-family"]=c(r("font-family"))||"times",e["font-style"]=n[r("font-style")]||"normal",e["text-align"]=TextAlignMap[r("text-align")]||"left","bold"===(i=o[r("font-weight")]||"normal")&&(e["font-style"]="normal"===e["font-style"]?i:i+e["font-style"]),e["font-size"]=d(r("font-size"))||1,e["line-height"]=d(r("line-height"))||1,e.display="inline"===r("display")?"inline":"block","block"===e.display&&(e["margin-top"]=d(r("margin-top"))||0,e["margin-bottom"]=d(r("margin-bottom"))||0,e["padding-top"]=d(r("padding-top"))||0,e["padding-bottom"]=d(r("padding-bottom"))||0,e["margin-left"]=d(r("margin-left"))||0,e["margin-right"]=d(r("margin-right"))||0,e["padding-left"]=d(r("padding-left"))||0,e["padding-right"]=d(r("padding-right"))||0),e},u=function(t,e,i){var r,n,o,a;if(o=!1,n=void 0,a=void 0,void 0,r=i["#"+t.id])if("function"==typeof r)o=r(t,e);else for(n=0,a=r.length;!o&&n!==a;)o=r[n](t,e),n++;if(r=i[t.nodeName],!o&&r)if("function"==typeof r)o=r(t,e);else for(n=0,a=r.length;!o&&n!==a;)o=r[n](t,e),n++;return o},v=function(t,e){var i,r,n,o,a,s,l,c,d;for(i=[],r=[],n=0,d=t.rows[0].cells.length,l=t.clientWidth;d>n;)c=t.rows[0].cells[n],r[n]={name:c.textContent.toLowerCase().replace(/\s+/g,""),prompt:c.textContent.replace(/\r?\n/g,""),width:c.clientWidth/l*e.pdf.internal.pageSize.width},n++;for(n=1;n<t.rows.length;){for(s=t.rows[n],a={},o=0;o<s.cells.length;)a[r[o].name]=s.cells[o].textContent.replace(/\r?\n/g,""),o++;i.push(a),n++}return{rows:i,headers:r}};var w={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},x=1;i=function(t,e,r){var n,o,s,l,c,d,h,p;for(o=t.childNodes,n=void 0,(c="block"===(s=a(t)).display)&&(e.setBlockBoundary(),e.setBlockStyle(s)),19.049976/25.4,l=0,d=o.length;d>l;){if("object"==typeof(n=o[l])){if(1===n.nodeType&&"HEADER"===n.nodeName){var g=n,m=e.pdf.margins_doc.top;e.pdf.internal.events.subscribe("addPage",(function(){e.y=m,i(g,e,r),e.pdf.margins_doc.top=e.y+10,e.y+=10}),!1)}if(8===n.nodeType&&"#comment"===n.nodeName)~n.textContent.indexOf("ADD_PAGE")&&(e.pdf.addPage(),e.y=e.pdf.margins_doc.top);else if(1!==n.nodeType||w[n.nodeName])if(3===n.nodeType){var b=n.nodeValue;if(n.nodeValue&&"LI"===n.parentNode.nodeName)if("OL"===n.parentNode.parentNode.nodeName)b=x+++". "+b;else{var y=16*s["font-size"],k=2;y>20&&(k=3),p=function(t,e){this.pdf.circle(t,e,k,"FD")}}e.addText(b,s)}else"string"==typeof n&&e.addText(n,s);else if("IMG"===n.nodeName&&f[n.getAttribute("src")])e.pdf.internal.pageSize.height-e.pdf.margins_doc.bottom<e.y+n.height&&e.y>e.pdf.margins_doc.top&&(e.pdf.addPage(),e.y=e.pdf.margins_doc.top),e.pdf.addImage(f[n.getAttribute("src")],e.x,e.y,n.width,n.height),e.y+=n.height;else if("TABLE"===n.nodeName)h=v(n,e),e.y+=10,e.pdf.table(e.x,e.y,h.rows,h.headers,{autoSize:!1,printHeaders:!0,margins:e.pdf.margins_doc}),e.y=e.pdf.lastCellPos.y+e.pdf.lastCellPos.h+20;else if("OL"===n.nodeName||"UL"===n.nodeName)x=1,u(n,e,r)||i(n,e,r),e.y+=10;else if("LI"===n.nodeName){var _=e.x;e.x+="UL"===n.parentNode.nodeName?22:10,e.y+=3,u(n,e,r)||i(n,e,r),e.x=_}else u(n,e,r)||i(n,e,r)}l++}return c?e.setBlockBoundary(p):void 0},f={},p=function(t,e,i,r){function n(){e.pdf.internal.events.publish("imagesLoaded"),r()}function o(t,e,i){if(t){var r=new Image;++l,r.crossOrigin="",r.onerror=r.onload=function(){r.complete&&(0===r.src.indexOf("data:image/")&&(r.width=e||r.width||0,r.height=i||r.height||0),r.width+r.height&&(f[t]=f[t]||r)),--l||n()},r.src=t}}for(var a=t.getElementsByTagName("img"),s=a.length,l=0;s--;)o(a[s].getAttribute("src"),a[s].width,a[s].height);return l||n()},g=function(t,e,r,n){var o=t.getElementsByTagName("footer");if(o.length>0){o=o[0];var a=e.pdf.internal.write,s=e.y;e.pdf.internal.write=function(){},i(o,e,r);var l=Math.ceil(e.y-s)+5;e.y=s,e.pdf.internal.write=a,e.pdf.margins_doc.bottom+=l;for(var c=function(t){var n=void 0!==t?t.pageNumber:1,a=e.y;e.y=e.pdf.internal.pageSize.height-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=l;for(var s=o.getElementsByTagName("span"),c=0;c<s.length;++c)(" "+s[c].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(s[c].innerHTML=n),(" "+s[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(s[c].innerHTML="###jsPDFVarTotalPages###");i(o,e,r),e.pdf.margins_doc.bottom+=l,e.y=a},d=o.getElementsByTagName("span"),h=0;h<d.length;++h)(" "+d[h].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",c,!1),c(),w.FOOTER=1}n()},m=function(t,e,r,n,o,a){if(!e)return!1;var s,c,d,h;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(s=e.replace(/<\/?script[^>]*?>/gi,""),h="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(d=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",d.innerHTML='<iframe style="height:1px;width:1px" name="'+h+'" />',document.body.appendChild(d),(c=window.frames[h]).document.body.innerHTML=s,e=c.document.body);var u=new l(t,r,n,o);return a=a||function(){},p.call(this,e,u,o.elementHandlers,(function(){g.call(this,e,u,o.elementHandlers,(function(){i(e,u,o.elementHandlers),u.pdf.internal.events.publish("htmlRenderingFinished"),a(u.dispose())}))})),u.dispose()},l.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},l.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y}},l.prototype.splitFragmentsIntoLines=function(t,i){var r,n,o,a,s,l,c,d,h,u,f,p,g,m;for(12,u=this.pdf.internal.scaleFactor,a={},n=void 0,h=void 0,o=void 0,s=void 0,m=void 0,d=void 0,c=void 0,l=void 0,p=[f=[]],r=0,g=this.settings.width;t.length;)if(s=t.shift(),m=i.shift(),s)if((o=a[(n=m["font-family"])+(h=m["font-style"])])||(o=this.pdf.internal.getFont(n,h).metadata.Unicode,a[n+h]=o),d={widths:o.widths,kerning:o.kerning,fontSize:12*m["font-size"],textIndent:r},r+(c=this.pdf.getStringUnitWidth(s,d)*d.fontSize/u)>g){for(l=this.pdf.splitTextToSize(s,g,d),f.push([l.shift(),m]);l.length;)f=[[l.shift(),m]],p.push(f);r=this.pdf.getStringUnitWidth(f[0][0],d)*d.fontSize/u}else f.push([s,m]),r+=c;if(void 0!==m["text-align"]&&("center"===m["text-align"]||"right"===m["text-align"]||"justify"===m["text-align"]))for(var v=0;v<p.length;++v){var w=this.pdf.getStringUnitWidth(p[v][0][0],d)*d.fontSize/u;v>0&&(p[v][0][1]=e(p[v][0][1]));var x=g-w;if("right"===m["text-align"])p[v][0][1]["margin-left"]=x;else if("center"===m["text-align"])p[v][0][1]["margin-left"]=x/2;else if("justify"===m["text-align"]){var b=p[v][0][0].split(" ").length-1;p[v][0][1]["word-spacing"]=x/b,v===p.length-1&&(p[v][0][1]["word-spacing"]=0)}}return p},l.prototype.RenderTextFragment=function(t,e){var i;this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")),i=this.pdf.internal.getFont(e["font-family"],e["font-style"]),void 0!==e["word-spacing"]&&e["word-spacing"]>0&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+i.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},l.prototype.renderParagraph=function(t){var e,i,r,n,o,a,l,c,d,h,u,f,p,g;if(r=s(this.paragraph.text),p=this.paragraph.style,e=this.paragraph.blockstyle,f=this.paragraph.blockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e},r.join("").trim()){l=this.splitFragmentsIntoLines(r,p),a=void 0,c=void 0,12,i=12/this.pdf.internal.scaleFactor,u=(Math.max((e["margin-top"]||0)-(f["margin-bottom"]||0),0)+(e["padding-top"]||0))*i,h=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*i,d=this.pdf.internal.write,n=void 0,o=void 0,this.y+=u,d("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;l.length;){for(c=0,n=0,o=(a=l.shift()).length;n!==o;)a[n][0].trim()&&(c=Math.max(c,a[n][1]["line-height"],a[n][1]["font-size"]),g=7*a[n][1]["font-size"]),n++;var v=0;for(void 0!==a[0][1]["margin-left"]&&a[0][1]["margin-left"]>0&&(wantedIndent=this.pdf.internal.getCoordinateString(a[0][1]["margin-left"]),v=wantedIndent-m,m=wantedIndent),d(v,(-12*c).toFixed(2),"Td"),n=0,o=a.length;n!==o;)a[n][0]&&this.RenderTextFragment(a[n][0],a[n][1]),n++;this.y+=c*i}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-g/2),d("ET","Q"),this.y+=h}},l.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},l.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},l.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},r={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},o={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},n={normal:"normal",italic:"italic",oblique:"italic"},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},h={normal:1},t.fromHTML=function(t,e,i,r,n,o){return this.margins_doc=o||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),m(this,t,e||4,i||4,r,n)}}(u.API),function(t){var e,i,r;t.addJS=function(t){return r=t,this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(e+1)+" 0 R] >>","endobj"),i=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",r,") >>","endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==e&&void 0!==i&&this.internal.write("/Names <</JavaScript "+e+" 0 R>>")})),this}}(u.API),function(t){var e=function(){var t="function"==typeof p;if(!t)throw new Error("requires deflate.js for compression");return t},i=function(e,i,a,h){var u=5,f=l;switch(h){case t.image_compression.FAST:u=3,f=s;break;case t.image_compression.MEDIUM:u=6,f=c;break;case t.image_compression.SLOW:u=9,f=d}e=o(e,i,a,f);var g=new Uint8Array(r(u)),m=n(e),v=new p(u),w=v.append(e),x=v.flush(),b=g.length+w.length+x.length,y=new Uint8Array(b+4);return y.set(g),y.set(w,g.length),y.set(x,g.length+w.length),y[b++]=m>>>24&255,y[b++]=m>>>16&255,y[b++]=m>>>8&255,y[b++]=255&m,t.arrayBufferToBinaryString(y)},r=function(t,e){var i=Math.LOG2E*Math.log(32768)-8<<4|8,r=i<<8;return r|=Math.min(3,(e-1&255)>>1)<<6,r|=0,[i,255&(r+=31-r%31)]},n=function(t,e){for(var i,r=1,n=0,o=t.length,a=0;o>0;){o-=i=o>e?e:o;do{n+=r+=t[a++]}while(--i);r%=65521,n%=65521}return(n<<16|r)>>>0},o=function(t,e,i,r){for(var n,o,a,s=t.length/e,l=new Uint8Array(t.length+s),c=u(),d=0;s>d;d++){if(a=d*e,n=t.subarray(a,a+e),r)l.set(r(n,i,o),a+d);else{for(var h=0,p=c.length,g=[];p>h;h++)g[h]=c[h](n,i,o);var m=f(g.concat());l.set(g[m],a+d)}o=n}return l},a=function(t){var e=Array.apply([],t);return e.unshift(0),e},s=function(t,e){var i,r=[],n=0,o=t.length;for(r[0]=1;o>n;n++)i=t[n-e]||0,r[n+1]=t[n]-i+256&255;return r},l=function(t,e,i){var r,n=[],o=0,a=t.length;for(n[0]=2;a>o;o++)r=i&&i[o]||0,n[o+1]=t[o]-r+256&255;return n},c=function(t,e,i){var r,n,o=[],a=0,s=t.length;for(o[0]=3;s>a;a++)r=t[a-e]||0,n=i&&i[a]||0,o[a+1]=t[a]+256-(r+n>>>1)&255;return o},d=function(t,e,i){var r,n,o,a,s=[],l=0,c=t.length;for(s[0]=4;c>l;l++)r=t[l-e]||0,n=i&&i[l]||0,o=i&&i[l-e]||0,a=h(r,n,o),s[l+1]=t[l]-a+256&255;return s},h=function(t,e,i){var r=t+e-i,n=Math.abs(r-t),o=Math.abs(r-e),a=Math.abs(r-i);return o>=n&&a>=n?t:a>=o?e:i},u=function(){return[a,s,l,c,d]},f=function(t){for(var e,i,r,n=0,o=t.length;o>n;)(i>(e=g(t[n].slice(1)))||!i)&&(i=e,r=n),n++;return r},g=function(t){for(var e=0,i=t.length,r=0;i>e;)r+=Math.abs(t[e++]);return r};t.processPNG=function(r,n,o,a){var s,l,c,d,h,u,f=this.color_spaces.DEVICE_RGB,p=this.decode.FLATE_DECODE,g=8;if(this.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.isArrayBufferView(r)){if("function"!=typeof PNG||"function"!=typeof m)throw new Error("PNG support requires png.js and zlib.js");if(r=(s=new PNG(r)).imgData,g=s.bits,f=s.colorSpace,d=s.colors,-1!==[4,6].indexOf(s.colorType)){if(8===s.bits)for(var v,w=(A=new(0,window["Uint"+s.pixelBitlength+"Array"])(s.decodePixels().buffer)).length,x=new Uint8Array(w*s.colors),b=new Uint8Array(w),y=s.pixelBitlength-s.bits,k=0,_=0;w>k;k++){for(C=A[k],v=0;y>v;)x[_++]=C>>>v&255,v+=s.bits;b[k]=C>>>v&255}if(16===s.bits){w=(A=new Uint32Array(s.decodePixels().buffer)).length,x=new Uint8Array(w*(32/s.pixelBitlength)*s.colors),b=new Uint8Array(w*(32/s.pixelBitlength));for(var C,T=s.colors>1,S=(k=0,_=0,0);w>k;)C=A[k++],x[_++]=C>>>0&255,T&&(x[_++]=C>>>16&255,C=A[k++],x[_++]=C>>>0&255),b[S++]=C>>>16&255;g=8}a!==t.image_compression.NONE&&e()?(r=i(x,s.width*s.colors,s.colors,a),u=i(b,s.width,1,a)):(r=x,u=b,p=null)}if(3===s.colorType&&(f=this.color_spaces.INDEXED,h=s.palette,s.transparency.indexed)){var E=s.transparency.indexed,M=0;for(k=0,w=E.length;w>k;++k)M+=E[k];if((M/=255)===w-1&&-1!==E.indexOf(0))c=[E.indexOf(0)];else if(M!==w){var A=s.decodePixels();for(b=new Uint8Array(A.length),k=0,w=A.length;w>k;k++)b[k]=E[A[k]];u=i(b,s.width,1)}}return l=p===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+d+" /BitsPerComponent "+g+" /Columns "+s.width:"/Colors "+d+" /BitsPerComponent "+g+" /Columns "+s.width,(this.isArrayBuffer(r)||this.isArrayBufferView(r))&&(r=this.arrayBufferToBinaryString(r)),(u&&this.isArrayBuffer(u)||this.isArrayBufferView(u))&&(u=this.arrayBufferToBinaryString(u)),this.createImageInfo(r,s.width,s.height,f,g,p,n,o,l,c,h,u)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(u.API),function(t){t.addSVG=function(t,e,i,r,n){function o(t){for(var e=parseFloat(t[1]),i=parseFloat(t[2]),r=[],n=3,o=t.length;o>n;)"c"===t[n]?(r.push([parseFloat(t[n+1]),parseFloat(t[n+2]),parseFloat(t[n+3]),parseFloat(t[n+4]),parseFloat(t[n+5]),parseFloat(t[n+6])]),n+=7):"l"===t[n]?(r.push([parseFloat(t[n+1]),parseFloat(t[n+2])]),n+=3):n+=1;return[e,i,r]}var a;if(e===a||e===a)throw new Error("addSVG needs values for 'x' and 'y'");var s=function(t){var e=t.createElement("iframe");return function(t,e){var i=e.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(i)}(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",t),e.name="childframe",e.setAttribute("width",0),e.setAttribute("height",0),e.setAttribute("frameborder","0"),e.setAttribute("scrolling","no"),e.setAttribute("seamless","seamless"),e.setAttribute("class","jsPDF_sillysvg_iframe"),t.body.appendChild(e),e}(document),l=function(t,e){var i=(e.contentWindow||e.contentDocument).document;return i.write(t),i.close(),i.getElementsByTagName("svg")[0]}(t,s),c=[1,1],d=parseFloat(l.getAttribute("width")),h=parseFloat(l.getAttribute("height"));d&&h&&(r&&n?c=[r/d,n/h]:r?c=[r/d,r/d]:n&&(c=[n/h,n/h]));var u,f,p,g,m=l.childNodes;for(u=0,f=m.length;f>u;u++)(p=m[u]).tagName&&"PATH"===p.tagName.toUpperCase()&&((g=o(p.getAttribute("d").split(" ")))[0]=g[0]*c[0]+e,g[1]=g[1]*c[1]+i,this.lines.call(this,g[2],g[0],g[1],c));return this}}(u.API),function(t){var e=t.getCharWidthsArray=function(t,e){e||(e={});var i,r,n,o=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,a=o.fof?o.fof:1,s=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,l=s.fof?s.fof:1,c=0,d=o[0]||a,h=[];for(i=0,r=t.length;r>i;i++)n=t.charCodeAt(i),h.push((o[n]||d)/a+(s[n]&&s[n][c]||0)/l),c=n;return h},i=function(t){for(var e=t.length,i=0;e;)i+=t[--e];return i},r=t.getStringUnitWidth=function(t,r){return i(e.call(this,t,r))},n=function(t,e,i,r){for(var n=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<i;)s+=e[o],o++;n.push(t.slice(0,o));var l=o;for(s=0;o!==a;)s+e[o]>r&&(n.push(t.slice(l,o)),s=0,l=o),s+=e[o],o++;return l!==o&&n.push(t.slice(l,o)),n},o=function(t,o,a){a||(a={});var s,l,c,d,h,u,f=[],p=[f],g=a.textIndent||0,m=0,v=0,w=t.split(" "),x=e(" ",a)[0];if(u=-1===a.lineIndent?w[0].length+2:a.lineIndent||0){var b=Array(u).join(" "),y=[];w.map((function(t){(t=t.split(/\s*\n/)).length>1?y=y.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):y.push(t[0])})),w=y,u=r(b,a)}for(c=0,d=w.length;d>c;c++){var k=0;if(s=w[c],u&&"\n"==s[0]&&(s=s.substr(1),k=1),l=e(s,a),g+m+(v=i(l))>o||k){if(v>o){for(h=n(s,l,o-(g+m),o),f.push(h.shift()),f=[h.pop()];h.length;)p.push([h.shift()]);v=i(l.slice(s.length-f[0].length))}else f=[s];p.push(f),g=v+u,m=x}else f.push(s),g+=m+v,m=x}if(u)var _=function(t,e){return(e?b:"")+t.join(" ")};else _=function(t){return t.join(" ")};return p.map(_)};t.splitTextToSize=function(t,e,i){i||(i={});var r,n=i.fontSize||this.internal.getFontSize(),a=function(t){var e={0:1},i={};if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var r=this.internal.getFont(t.fontName,t.fontStyle),n="Unicode";return r.metadata[n]?{widths:r.metadata[n].widths||e,kerning:r.metadata[n].kerning||i}:{widths:e,kerning:i}}.call(this,i);r=Array.isArray(t)?t:t.split(/\r?\n/);var s=1*this.internal.scaleFactor*e/n;a.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/n:0,a.lineIndent=i.lineIndent;var l,c,d=[];for(l=0,c=r.length;c>l;l++)d=d.concat(o(r[l],s,a));return d}}(u.API),function(t){var e=function(t){for(var e="klmnopqrstuvwxyz",i={},r=0;r<e.length;r++)i[e[r]]="0123456789abcdef"[r];var n,o,a,s,l,c={},d=1,h=c,u=[],f="",p="",g=t.length-1;for(r=1;r!=g;)l=t[r],r+=1,"'"==l?o?(s=o.join(""),o=n):o=[]:o?o.push(l):"{"==l?(u.push([h,s]),h={},s=n):"}"==l?((a=u.pop())[0][a[1]]=h,s=n,h=a[0]):"-"==l?d=-1:s===n?i.hasOwnProperty(l)?(f+=i[l],s=parseInt(f,16)*d,d=1,f=""):f+=l:i.hasOwnProperty(l)?(p+=i[l],h[s]=parseInt(p,16)*d,d=1,s=n,p=""):p+=l;return c},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:e("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},n={Unicode:{"Courier-Oblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFonts",function(t){var e,i,o,a,s,l="Unicode";for(i in t.fonts)t.fonts.hasOwnProperty(i)&&(e=t.fonts[i],(o=n[l][e.PostScriptName])&&((a=e.metadata[l]?e.metadata[l]:e.metadata[l]={}).widths=o.widths,a.kerning=o.kerning),(s=r[l][e.PostScriptName])&&((a=e.metadata[l]?e.metadata[l]:e.metadata[l]={}).encoding=s,s.codePages&&s.codePages.length&&(e.encoding=s.codePages[0])))}])}(u.API),function(t){t.putTotalPages=function(t){for(var e=new RegExp(t,"g"),i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,this.internal.getNumberOfPages());return this}}(u.API),function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},r=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},n=i.prototype,o=r.prototype,a=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=t.URL||t.webkitURL||t,h=d.createObjectURL,u=d.revokeObjectURL,f=d,p=t.btoa,g=t.atob,m=t.ArrayBuffer,v=t.Uint8Array;for(r.fake=o.fake=!0;c--;)s.prototype[l[c]]=c+1;return d.createObjectURL||(f=t.URL={}),f.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof r?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(d,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&u&&u.call(d,t)},n.append=function(t){var i=this.data;if(v&&(t instanceof m||t instanceof v)){for(var n="",o=new v(t),l=0,c=o.length;c>l;l++)n+=String.fromCharCode(o[l]);i.push(n)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new s("NOT_READABLE_ERR");var d=new a;i.push(d.readAsBinaryString(t))}else t instanceof r?"base64"===t.encoding&&g?i.push(g(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},n.getBlob=function(t){return arguments.length||(t=null),new r(this.data.join(""),t,"raw")},n.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,i){var n=arguments.length;return 3>n&&(i=null),new r(this.data.slice(t,n>1?e:this.data.length),i,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=this.data.length=0},i}(t);t.Blob=function(t,i){var r=i&&i.type||"",n=new e;if(t)for(var o=0,a=t.length;a>o;o++)n.append(t[o]);return n.getBlob(r)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var f=f||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n=!t.externalHost&&"download"in r,o=t.webkitRequestFileSystem,a=t.requestFileSystem||o||t.mozRequestFileSystem,s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l="application/octet-stream",c=0,d=[],h=function(){for(var t=d.length;t--;){var e=d[t];"string"==typeof e?i().revokeObjectURL(e):e.remove()}d.length=0},u=function(t,e,i){for(var r=(e=[].concat(e)).length;r--;){var n=t["on"+e[r]];if("function"==typeof n)try{n.call(t,i||t)}catch(t){s(t)}}},f=function(s,h){var f,p,g,m=this,v=s.type,w=!1,x=function(){var t=i().createObjectURL(s);return d.push(t),t},b=function(){u(m,"writestart progress write writeend".split(" "))},y=function(){(w||!f)&&(f=x()),p?p.location.href=f:window.open(f,"_blank"),m.readyState=m.DONE,b()},k=function(t){return function(){return m.readyState!==m.DONE?t.apply(this,arguments):void 0}},_={create:!0,exclusive:!1};return m.readyState=m.INIT,h||(h="download"),n?(f=x(),r.href=f,r.download=h,function(i){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)}(r),m.readyState=m.DONE,void b()):(t.chrome&&v&&v!==l&&(g=s.slice||s.webkitSlice,s=g.call(s,0,s.size,l),w=!0),o&&"download"!==h&&(h+=".download"),(v===l||o)&&(p=t),a?(c+=s.size,void a(t.TEMPORARY,c,k((function(t){t.root.getDirectory("saved",_,k((function(t){var e=function(){t.getFile(h,_,k((function(t){t.createWriter(k((function(e){e.onwriteend=function(e){p.location.href=t.toURL(),d.push(t),m.readyState=m.DONE,u(m,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach((function(t){e["on"+t]=m["on"+t]})),e.write(s),m.abort=function(){e.abort(),m.readyState=m.DONE},m.readyState=m.WRITING})),y)})),y)};t.getFile(h,{create:!1},k((function(t){t.remove(),e()})),k((function(t){t.code===t.NOT_FOUND_ERR?e():y()})))})),y)})),y)):void y())},p=f.prototype,g=function(t,e){return new f(t,e)};return p.abort=function(){var t=this;t.readyState=t.DONE,u(t,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,t.addEventListener("unload",h,!1),g.unload=function(){h(),t.removeEventListener("unload",h,!1)},g}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=f:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],(function(){return f})),function(t,e){"object"==typeof module?module.exports=e():t.adler32cs=e()}(u,(function(){var t,e,i="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,r=null,n=function(){if(!i)return function(){return!1};try{var t=require("buffer");"function"==typeof t.Buffer&&(r=t.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==r&&t instanceof r}}(),o=null!==r?function(t){return new r(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},a=65521,s=function(t,e){for(var i=65535&t,r=t>>>16,n=0,o=e.length;o>n;n++)r=(r+(i=(i+(255&e.charCodeAt(n)))%a))%a;return(r<<16|i)>>>0},l=function(t,e){for(var i=65535&t,r=t>>>16,n=0,o=e.length;o>n;n++)r=(r+(i=(i+e[n])%a))%a;return(r<<16|i)>>>0},c={},d=c.Adler32=(t=function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0},(e=t.prototype={}).constructor=t,t.from=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");this.checksum=s(1,e.toString())})),t.fromUtf8=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");var i=o(e.toString());this.checksum=s(1,i)})),i&&(t.fromBuffer=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!n(e))throw new Error("First argument needs to be ArrayBuffer.");var i=new Uint8Array(e);return this.checksum=l(1,i)}))),e.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=s(this.checksum,t)},e.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=o(t.toString());return this.checksum=s(this.checksum,e)},i&&(e.updateBuffer=function(t){if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=l(this.checksum,e)}),e.clone=function(){return new d(this.checksum)},t);return c.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return s(1,t.toString())},c.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=o(t.toString());return s(1,e)},i&&(c.fromBuffer=function(t){if(!n(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return l(1,e)}),c}));var p=function(){function t(){function t(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}var e=this;e.build_tree=function(i){var r,n,o,s=e.dyn_tree,l=e.stat_desc.static_tree,c=e.stat_desc.elems,d=-1;for(i.heap_len=0,i.heap_max=h,r=0;c>r;r++)0!==s[2*r]?(i.heap[++i.heap_len]=d=r,i.depth[r]=0):s[2*r+1]=0;for(;i.heap_len<2;)s[2*(o=i.heap[++i.heap_len]=2>d?++d:0)]=1,i.depth[o]=0,i.opt_len--,l&&(i.static_len-=l[2*o+1]);for(e.max_code=d,r=Math.floor(i.heap_len/2);r>=1;r--)i.pqdownheap(s,r);o=c;do{r=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(s,1),n=i.heap[1],i.heap[--i.heap_max]=r,i.heap[--i.heap_max]=n,s[2*o]=s[2*r]+s[2*n],i.depth[o]=Math.max(i.depth[r],i.depth[n])+1,s[2*r+1]=s[2*n+1]=o,i.heap[1]=o++,i.pqdownheap(s,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(t){var i,r,n,o,s,l,c=e.dyn_tree,d=e.stat_desc.static_tree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;a>=o;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;h>i;i++)(o=c[2*c[2*(r=t.heap[i])+1]+1]+1)>p&&(o=p,g++),c[2*r+1]=o,r>e.max_code||(t.bl_count[o]++,s=0,r>=f&&(s=u[r-f]),l=c[2*r],t.opt_len+=l*(o+s),d&&(t.static_len+=l*(d[2*r+1]+s)));if(0!==g){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=t.bl_count[o];0!==r;)(n=t.heap[--i])>e.max_code||(c[2*n+1]!=o&&(t.opt_len+=(o-c[2*n+1])*c[2*n],c[2*n+1]=o),r--)}}(i),function(e,i,r){var n,o,s,l=[],c=0;for(n=1;a>=n;n++)l[n]=c=c+r[n-1]<<1;for(o=0;i>=o;o++)0!==(s=e[2*o+1])&&(e[2*o]=t(l[s]++,s))}(s,e.max_code,i.bl_count)}}function e(t,e,i,r,n){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=i,o.elems=r,o.max_length=n}function i(t,e,i,r,n){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=i,o.max_chain=r,o.func=n}function r(t,e,i,r){var n=t[2*e],o=t[2*i];return o>n||n==o&&r[e]<=r[i]}function n(){function i(){var t;for(t=0;d>t;t++)jt[2*t]=0;for(t=0;s>t;t++)zt[2*t]=0;for(t=0;l>t;t++)Ht[2*t]=0;jt[2*u]=1,Jt.opt_len=Jt.static_len=0,Wt=Gt=0}function n(t,e){var i,r,n=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),t[2*(e+1)+1]=65535,i=0;e>=i;i++)r=o,o=t[2*(i+1)+1],++a<s&&r==o||(l>a?Ht[2*r]+=a:0!==r?(r!=n&&Ht[2*r]++,Ht[2*f]++):10>=a?Ht[2*p]++:Ht[2*g]++,a=0,n=r,0===o?(s=138,l=3):r==o?(s=6,l=3):(s=7,l=4))}function o(t){Jt.pending_buf[Jt.pending++]=t}function a(t){o(255&t),o(t>>>8&255)}function h(t,e){var i,r=e;Zt>m-r?(a(Kt|=(i=t)<<Zt&65535),Kt=i>>>m-Zt,Zt+=r-m):(Kt|=t<<Zt&65535,Zt+=r)}function I(t,e){var i=2*t;h(65535&e[i],65535&e[i+1])}function tt(t,e){var i,r,n=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),i=0;e>=i;i++)if(r=o,o=t[2*(i+1)+1],!(++a<s&&r==o)){if(l>a)do{I(r,Ht)}while(0!=--a);else 0!==r?(r!=n&&(I(r,Ht),a--),I(f,Ht),h(a-3,2)):10>=a?(I(p,Ht),h(a-3,3)):(I(g,Ht),h(a-11,7));a=0,n=r,0===o?(s=138,l=3):r==o?(s=6,l=3):(s=7,l=4)}}function et(){16==Zt?(a(Kt),Kt=0,Zt=0):Zt>=8&&(o(255&Kt),Kt>>>=8,Zt-=8)}function it(e,i){var r,n,o;if(Jt.pending_buf[Yt+2*Wt]=e>>>8&255,Jt.pending_buf[Yt+2*Wt+1]=255&e,Jt.pending_buf[Ut+Wt]=255&i,Wt++,0===e?jt[2*i]++:(Gt++,e--,jt[2*(t._length_code[i]+c+1)]++,zt[2*t.d_code(e)]++),0==(8191&Wt)&&$t>2){for(r=8*Wt,n=It-Et,o=0;s>o;o++)r+=zt[2*o]*(5+t.extra_dbits[o]);if(r>>>=3,Gt<Math.floor(Wt/2)&&r<Math.floor(n/2))return!0}return Wt==Vt-1}function rt(e,i){var r,n,o,a,s=0;if(0!==Wt)do{r=Jt.pending_buf[Yt+2*s]<<8&65280|255&Jt.pending_buf[Yt+2*s+1],n=255&Jt.pending_buf[Ut+s],s++,0===r?I(n,e):(I((o=t._length_code[n])+c+1,e),0!==(a=t.extra_lbits[o])&&h(n-=t.base_length[o],a),r--,I(o=t.d_code(r),i),0!==(a=t.extra_dbits[o])&&h(r-=t.base_dist[o],a))}while(Wt>s);I(u,e),Xt=e[2*u+1]}function nt(){Zt>8?a(Kt):Zt>0&&o(255&Kt),Kt=0,Zt=0}function ot(t,e,i){h((G<<1)+(i?1:0),3),function(t,e,i){nt(),Xt=8,i&&(a(e),a(~e)),Jt.pending_buf.set(wt.subarray(t,t+e),Jt.pending),Jt.pending+=e}(t,e,!0)}function at(r,o,a){var s,c,d=0;$t>0?(Qt.build_tree(Jt),te.build_tree(Jt),d=function(){var e;for(n(jt,Qt.max_code),n(zt,te.max_code),ee.build_tree(Jt),e=l-1;e>=3&&0===Ht[2*t.bl_order[e]+1];e--);return Jt.opt_len+=3*(e+1)+5+5+4,e}(),(s=Jt.opt_len+3+7>>>3)>=(c=Jt.static_len+3+7>>>3)&&(s=c)):s=c=o+5,s>=o+4&&-1!=r?ot(r,o,a):c==s?(h((X<<1)+(a?1:0),3),rt(e.static_ltree,e.static_dtree)):(h((K<<1)+(a?1:0),3),function(e,i,r){var n;for(h(e-257,5),h(i-1,5),h(r-4,4),n=0;r>n;n++)h(Ht[2*t.bl_order[n]+1],3);tt(jt,e-1),tt(zt,i-1)}(Qt.max_code+1,te.max_code+1,d+1),rt(jt,zt)),i(),a&&nt()}function st(t){at(Et>=0?Et:-1,It-Et,t),Et=It,ht.flush_pending()}function lt(){var t,e,i,r;do{if(0===(r=xt-Ft-It)&&0===It&&0===Ft)r=gt;else if(-1==r)r--;else if(It>=gt+gt-Q){wt.set(wt.subarray(gt,gt+gt),0),Dt-=gt,It-=gt,Et-=gt,i=t=_t;do{e=65535&yt[--i],yt[i]=e>=gt?e-gt:0}while(0!=--t);i=t=gt;do{e=65535&bt[--i],bt[i]=e>=gt?e-gt:0}while(0!=--t);r+=gt}if(0===ht.avail_in)return;t=ht.read_buf(wt,It+Ft,r),(Ft+=t)>=Z&&(kt=((kt=255&wt[It])<<St^255&wt[It+1])&Tt)}while(Q>Ft&&0!==ht.avail_in)}function ct(t){var e,i,r=Rt,n=It,o=Ot,a=It>gt-Q?It-(gt-Q):0,s=qt,l=vt,c=It+J,d=wt[n+o-1],h=wt[n+o];Ot>=Lt&&(r>>=2),s>Ft&&(s=Ft);do{if(wt[(e=t)+o]==h&&wt[e+o-1]==d&&wt[e]==wt[n]&&wt[++e]==wt[n+1]){n+=2,e++;do{}while(wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&wt[++n]==wt[++e]&&c>n);if(i=J-(c-n),n=c-J,i>o){if(Dt=t,o=i,i>=s)break;d=wt[n+o-1],h=wt[n+o]}}}while((t=65535&bt[t&l])>a&&0!=--r);return Ft>=o?o:Ft}function dt(t){return t.total_in=t.total_out=0,t.msg=null,Jt.pending=0,Jt.pending_out=0,ut=V,pt=y,Qt.dyn_tree=jt,Qt.stat_desc=e.static_l_desc,te.dyn_tree=zt,te.stat_desc=e.static_d_desc,ee.dyn_tree=Ht,ee.stat_desc=e.static_bl_desc,Kt=0,Zt=0,Xt=8,i(),function(){var t;for(xt=2*gt,yt[_t-1]=0,t=0;_t-1>t;t++)yt[t]=0;Bt=$[$t].max_lazy,Lt=$[$t].good_length,qt=$[$t].nice_length,Rt=$[$t].max_chain,It=0,Et=0,Ft=0,Mt=Ot=Z-1,Pt=0,kt=0}(),T}var ht,ut,ft,pt,gt,mt,vt,wt,xt,bt,yt,kt,_t,Ct,Tt,St,Et,Mt,At,Pt,It,Dt,Ft,Ot,Rt,Bt,$t,Nt,Lt,qt,jt,zt,Ht,Ut,Vt,Wt,Yt,Gt,Xt,Kt,Zt,Jt=this,Qt=new t,te=new t,ee=new t;Jt.depth=[],Jt.bl_count=[],Jt.heap=[],jt=[],zt=[],Ht=[],Jt.pqdownheap=function(t,e){for(var i=Jt.heap,n=i[e],o=e<<1;o<=Jt.heap_len&&(o<Jt.heap_len&&r(t,i[o+1],i[o],Jt.depth)&&o++,!r(t,n,i[o],Jt.depth));)i[e]=i[o],e=o,o<<=1;i[e]=n},Jt.deflateInit=function(t,e,i,r,n,o){return r||(r=Y),n||(n=F),o||(o=b),t.msg=null,e==v&&(e=6),1>n||n>D||r!=Y||9>i||i>15||0>e||e>9||0>o||o>x?M:(t.dstate=Jt,vt=(gt=1<<(mt=i))-1,Tt=(_t=1<<(Ct=n+7))-1,St=Math.floor((Ct+Z-1)/Z),wt=new Uint8Array(2*gt),bt=[],yt=[],Vt=1<<n+6,Jt.pending_buf=new Uint8Array(4*Vt),ft=4*Vt,Yt=Math.floor(Vt/2),Ut=3*Vt,$t=e,Nt=o,255&r,dt(t))},Jt.deflateEnd=function(){return ut!=U&&ut!=V&&ut!=W?M:(Jt.pending_buf=null,yt=null,bt=null,wt=null,Jt.dstate=null,ut==V?A:T)},Jt.deflateParams=function(t,e,i){var r=T;return e==v&&(e=6),0>e||e>9||0>i||i>x?M:($[$t].func!=$[e].func&&0!==t.total_in&&(r=t.deflate(k)),$t!=e&&(Bt=$[$t=e].max_lazy,Lt=$[$t].good_length,qt=$[$t].nice_length,Rt=$[$t].max_chain),Nt=i,r)},Jt.deflateSetDictionary=function(t,e,i){var r,n=i,o=0;if(!e||ut!=U)return M;if(Z>n)return T;for(n>gt-Q&&(o=i-(n=gt-Q)),wt.set(e.subarray(o,o+n),0),It=n,Et=n,kt=((kt=255&wt[0])<<St^255&wt[1])&Tt,r=0;n-Z>=r;r++)kt=(kt<<St^255&wt[r+(Z-1)])&Tt,bt[r&vt]=yt[kt],yt[kt]=r;return T},Jt.deflate=function(t,i){var r,n,a,s,l,c;if(i>C||0>i)return M;if(!t.next_out||!t.next_in&&0!==t.avail_in||ut==W&&i!=C)return t.msg=N[E-M],M;if(0===t.avail_out)return t.msg=N[E-P],P;if(ht=t,s=pt,pt=i,ut==U&&(n=Y+(mt-8<<4)<<8,(a=($t-1&255)>>1)>3&&(a=3),n|=a<<6,0!==It&&(n|=H),ut=V,o((c=n+=31-n%31)>>8&255),o(255&c)),0!==Jt.pending){if(ht.flush_pending(),0===ht.avail_out)return pt=-1,T}else if(0===ht.avail_in&&s>=i&&i!=C)return ht.msg=N[E-P],P;if(ut==W&&0!==ht.avail_in)return t.msg=N[E-P],P;if(0!==ht.avail_in||0!==Ft||i!=y&&ut!=W){switch(l=-1,$[$t].func){case O:l=function(t){var e,i=65535;for(i>ft-5&&(i=ft-5);;){if(1>=Ft){if(lt(),0===Ft&&t==y)return L;if(0===Ft)break}if(It+=Ft,Ft=0,e=Et+i,(0===It||It>=e)&&(Ft=It-e,It=e,st(!1),0===ht.avail_out))return L;if(It-Et>=gt-Q&&(st(!1),0===ht.avail_out))return L}return st(t==C),0===ht.avail_out?t==C?j:L:t==C?z:q}(i);break;case R:l=function(t){for(var e,i=0;;){if(Q>Ft){if(lt(),Q>Ft&&t==y)return L;if(0===Ft)break}if(Ft>=Z&&(kt=(kt<<St^255&wt[It+(Z-1)])&Tt,i=65535&yt[kt],bt[It&vt]=yt[kt],yt[kt]=It),0!==i&&gt-Q>=(It-i&65535)&&Nt!=x&&(Mt=ct(i)),Mt>=Z)if(e=it(It-Dt,Mt-Z),Ft-=Mt,Bt>=Mt&&Ft>=Z){Mt--;do{It++,kt=(kt<<St^255&wt[It+(Z-1)])&Tt,i=65535&yt[kt],bt[It&vt]=yt[kt],yt[kt]=It}while(0!=--Mt);It++}else It+=Mt,Mt=0,kt=((kt=255&wt[It])<<St^255&wt[It+1])&Tt;else e=it(0,255&wt[It]),Ft--,It++;if(e&&(st(!1),0===ht.avail_out))return L}return st(t==C),0===ht.avail_out?t==C?j:L:t==C?z:q}(i);break;case B:l=function(t){for(var e,i,r=0;;){if(Q>Ft){if(lt(),Q>Ft&&t==y)return L;if(0===Ft)break}if(Ft>=Z&&(kt=(kt<<St^255&wt[It+(Z-1)])&Tt,r=65535&yt[kt],bt[It&vt]=yt[kt],yt[kt]=It),Ot=Mt,At=Dt,Mt=Z-1,0!==r&&Bt>Ot&&gt-Q>=(It-r&65535)&&(Nt!=x&&(Mt=ct(r)),5>=Mt&&(Nt==w||Mt==Z&&It-Dt>4096)&&(Mt=Z-1)),Ot>=Z&&Ot>=Mt){i=It+Ft-Z,e=it(It-1-At,Ot-Z),Ft-=Ot-1,Ot-=2;do{++It<=i&&(kt=(kt<<St^255&wt[It+(Z-1)])&Tt,r=65535&yt[kt],bt[It&vt]=yt[kt],yt[kt]=It)}while(0!=--Ot);if(Pt=0,Mt=Z-1,It++,e&&(st(!1),0===ht.avail_out))return L}else if(0!==Pt){if((e=it(0,255&wt[It-1]))&&st(!1),It++,Ft--,0===ht.avail_out)return L}else Pt=1,It++,Ft--}return 0!==Pt&&(e=it(0,255&wt[It-1]),Pt=0),st(t==C),0===ht.avail_out?t==C?j:L:t==C?z:q}(i)}if((l==j||l==z)&&(ut=W),l==L||l==j)return 0===ht.avail_out&&(pt=-1),T;if(l==q){if(i==k)h(X<<1,3),I(u,e.static_ltree),et(),9>1+Xt+10-Zt&&(h(X<<1,3),I(u,e.static_ltree),et()),Xt=7;else if(ot(0,0,!1),i==_)for(r=0;_t>r;r++)yt[r]=0;if(ht.flush_pending(),0===ht.avail_out)return pt=-1,T}}return i!=C?T:S}}function o(){var t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}var a=15,s=30,l=19,c=256,d=c+1+29,h=2*d+1,u=256,f=16,p=17,g=18,m=16,v=-1,w=1,x=2,b=0,y=0,k=1,_=3,C=4,T=0,S=1,E=2,M=-2,A=-3,P=-5,I=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];t._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],t.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],t.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],t.d_code=function(t){return 256>t?I[t]:I[256+(t>>>7)]},t.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],t.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],t.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],t.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],e.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],e.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],e.static_l_desc=new e(e.static_ltree,t.extra_lbits,c+1,d,a),e.static_d_desc=new e(e.static_dtree,t.extra_dbits,0,s,a),e.static_bl_desc=new e(null,t.extra_blbits,0,l,7);var D=9,F=8,O=0,R=1,B=2,$=[new i(0,0,0,0,O),new i(4,4,8,4,R),new i(4,5,16,8,R),new i(4,6,32,32,R),new i(4,4,16,16,B),new i(8,16,32,32,B),new i(8,16,128,128,B),new i(8,32,128,256,B),new i(32,128,258,1024,B),new i(32,258,258,4096,B)],N=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],L=0,q=1,j=2,z=3,H=32,U=42,V=113,W=666,Y=8,G=0,X=1,K=2,Z=3,J=258,Q=J+Z+1;return o.prototype={deflateInit:function(t,e){var i=this;return i.dstate=new n,e||(e=a),i.dstate.deflateInit(i,t,e)},deflate:function(t){var e=this;return e.dstate?e.dstate.deflate(e,t):M},deflateEnd:function(){var t=this;if(!t.dstate)return M;var e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){var i=this;return i.dstate?i.dstate.deflateParams(i,t,e):M},deflateSetDictionary:function(t,e){var i=this;return i.dstate?i.dstate.deflateSetDictionary(i,t,e):M},read_buf:function(t,e,i){var r=this,n=r.avail_in;return n>i&&(n=i),0===n?0:(r.avail_in-=n,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+n),e),r.next_in_index+=n,r.total_in+=n,n)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}},function(t){var e=new o,i=512,r=y,n=new Uint8Array(i);void 0===t&&(t=v),e.deflateInit(t),e.next_out=n,this.append=function(t,o){var a,s=[],l=0,c=0,d=0;if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=i,e.deflate(r)!=T)throw"deflating: "+e.msg;e.next_out_index&&(e.next_out_index==i?s.push(new Uint8Array(n)):s.push(new Uint8Array(n.subarray(0,e.next_out_index)))),d+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=l&&(o(e.next_in_index),l=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return a=new Uint8Array(d),s.forEach((function(t){a.set(t,c),c+=t.length})),a}},this.flush=function(){var t,r,o=[],a=0,s=0;do{if(e.next_out_index=0,e.avail_out=i,(t=e.deflate(C))!=S&&t!=T)throw"deflating: "+e.msg;i-e.avail_out>0&&o.push(new Uint8Array(n.subarray(0,e.next_out_index))),s+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),r=new Uint8Array(s),o.forEach((function(t){r.set(t,a),a+=t.length})),r}}}();!function(t){var e;e=function(){function e(t){var e,i,r,n,o,a,s,l,c,d,h,u,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),c=function(){var t,e;for(e=[],t=0;4>t;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),n=this.readUInt16()||100,a.delay=1e3*o/n,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,u=0;e>=0?e>u:u>e;e>=0?++u:--u)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((d=r-this.transparency.indexed.length)>0)for(f=0;d>=0?d>f:f>d;d>=0?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(h=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var i,r,n;e.load=function(t,i,r){var n;return"function"==typeof i&&(r=i),(n=new XMLHttpRequest).open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){var t;return t=new e(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=i?i.getContext:void 0)&&t.render(i),"function"==typeof r?r(t):void 0},n.send(null)},e.prototype.read=function(t){var e,i;for(i=[],e=0;t>=0?t>e:e>t;t>=0?++e:--e)i.push(this.data[this.pos++]);return i},e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.decodePixels=function(t){var e,i,r,n,o,a,s,l,c,d,h,u,f,p,g,v,w,x,b,y,k,_,C;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new m(t)).getBytes(),v=(u=this.pixelBitlength/8)*this.width,f=new Uint8Array(v*this.height),a=t.length,g=0,p=0,i=0;a>p;){switch(t[p++]){case 0:for(n=b=0;v>b;n=b+=1)f[i++]=t[p++];break;case 1:for(n=y=0;v>y;n=y+=1)e=t[p++],o=u>n?0:f[i-u],f[i++]=(e+o)%256;break;case 2:for(n=k=0;v>k;n=k+=1)e=t[p++],r=(n-n%u)/u,w=g&&f[(g-1)*v+r*u+n%u],f[i++]=(w+e)%256;break;case 3:for(n=_=0;v>_;n=_+=1)e=t[p++],r=(n-n%u)/u,o=u>n?0:f[i-u],w=g&&f[(g-1)*v+r*u+n%u],f[i++]=(e+Math.floor((o+w)/2))%256;break;case 4:for(n=C=0;v>C;n=C+=1)e=t[p++],r=(n-n%u)/u,o=u>n?0:f[i-u],0===g?w=x=0:(w=f[(g-1)*v+r*u+n%u],x=r&&f[(g-1)*v+(r-1)*u+n%u]),s=o+w-x,l=Math.abs(s-o),d=Math.abs(s-w),h=Math.abs(s-x),c=d>=l&&h>=l?o:h>=d?w:x,f[i++]=(e+c)%256;break;default:throw new Error("Invalid filter algorithm: "+t[p-1])}g++}return f},e.prototype.decodePalette=function(){var t,e,i,r,n,o,a,s,l;for(i=this.palette,o=this.transparency.indexed||[],n=new Uint8Array((o.length||0)+i.length),r=0,i.length,t=0,e=a=0,s=i.length;s>a;e=a+=3)n[r++]=i[e],n[r++]=i[e+1],n[r++]=i[e+2],n[r++]=null!=(l=o[t++])?l:255;return n},e.prototype.copyToImageData=function(t,e){var i,r,n,o,a,s,l,c,d,h,u;if(r=this.colors,d=null,i=this.hasAlphaChannel,this.palette.length&&(d=null!=(u=this._decodedPalette)?u:this._decodedPalette=this.decodePalette(),r=4,i=!0),c=(n=t.data||t).length,a=d||e,o=s=0,1===r)for(;c>o;)l=d?4*e[o/4]:s,h=a[l++],n[o++]=h,n[o++]=h,n[o++]=h,n[o++]=i?a[l++]:255,s=l;else for(;c>o;)l=d?4*e[o/4]:s,n[o++]=a[l++],n[o++]=a[l++],n[o++]=a[l++],n[o++]=i?a[l++]:255,s=l},e.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{r=t.document.createElement("canvas"),n=r.getContext("2d")}catch(t){return-1}return i=function(t){var e;return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(e=new Image).src=r.toDataURL(),e},e.prototype.decodeFrames=function(t){var e,r,n,o,a,s,l,c;if(this.animation){for(c=[],r=a=0,s=(l=this.animation.frames).length;s>a;r=++a)e=l[r],n=t.createImageData(e.width,e.height),o=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(n,o),e.imageData=n,c.push(e.image=i(n));return c}},e.prototype.renderFrame=function(t,e){var i,r,n;return i=(r=this.animation.frames)[e],n=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?t.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&t.putImageData(n.imageData,n.xOffset,n.yOffset),0===i.blendOp&&t.clearRect(i.xOffset,i.yOffset,i.width,i.height),t.drawImage(i.image,i.xOffset,i.yOffset)},e.prototype.animate=function(t){var e,i,r,n,o,a,s=this;return i=0,a=this.animation,n=a.numFrames,r=a.frames,o=a.numPlays,(e=function(){var a,l;return a=i++%n,l=r[a],s.renderFrame(t,a),n>1&&o>i/n?s.animation._timeout=setTimeout(e,l.delay):void 0})()},e.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},e.prototype.render=function(t){var e,i;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(i=e.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),e.putImageData(i,0,0))},e}(),t.PNG=e}("undefined"!=typeof window&&window||this);var g=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,i=e?e.byteLength:0;if(i>t)return e;for(var r=512;t>r;)r<<=1;for(var n=new Uint8Array(r),o=0;i>o;++o)n[o]=e[o];return this.buffer=n},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var i=e+t;!this.eof&&this.bufferLength<i;)this.readBlock();var r=this.bufferLength;i>r&&(i=r)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(e,i)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,i){for(var r=t+e;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,i)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),m=function(){function t(t){throw new Error(t)}function e(e){var i=0,r=e[i++],n=e[i++];(-1==r||-1==n)&&t("Invalid header in flate stream"),8!=(15&r)&&t("Unknown compression method in flate stream"),((r<<8)+n)%31!=0&&t("Bad FCHECK in flate stream"),32&n&&t("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,g.call(this)}if("undefined"!=typeof Uint32Array){var i=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return e.prototype=Object.create(g.prototype),e.prototype.getBits=function(e){for(var i,r=this.codeSize,n=this.codeBuf,o=this.bytes,a=this.bytesPos;e>r;)void 0===(i=o[a++])&&t("Bad encoding in flate stream"),n|=i<<r,r+=8;return i=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=r-=e,this.bytesPos=a,i},e.prototype.getCode=function(e){for(var i=e[0],r=e[1],n=this.codeSize,o=this.codeBuf,a=this.bytes,s=this.bytesPos;r>n;){var l;void 0===(l=a[s++])&&t("Bad encoding in flate stream"),o|=l<<n,n+=8}var c=i[o&(1<<r)-1],d=c>>16,h=65535&c;return(0==n||d>n||0==d)&&t("Bad encoding in flate stream"),this.codeBuf=o>>d,this.codeSize=n-d,this.bytesPos=s,h},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,i=0,r=0;e>r;++r)t[r]>i&&(i=t[r]);for(var n=1<<i,o=new Uint32Array(n),a=1,s=0,l=2;i>=a;++a,s<<=1,l<<=1)for(var c=0;e>c;++c)if(t[c]==a){var d=0,h=s;for(r=0;a>r;++r)d=d<<1|1&h,h>>=1;for(r=d;n>r;r+=l)o[r]=a<<16|c;++s}return[o,i]},e.prototype.readBlock=function(){function e(t,e,i,r,n){for(var o=t.getBits(i)+r;o-- >0;)e[p++]=n}var s=this.getBits(3);if(1&s&&(this.eof=!0),0!=(s>>=1)){var l,c;if(1==s)l=o,c=a;else if(2==s){for(var d=this.getBits(5)+257,h=this.getBits(5)+1,u=this.getBits(4)+4,f=Array(i.length),p=0;u>p;)f[i[p++]]=this.getBits(3);for(var g=this.generateHuffmanTable(f),m=0,v=(p=0,d+h),w=new Array(v);v>p;){var x=this.getCode(g);16==x?e(this,w,2,3,m):17==x?e(this,w,3,3,m=0):18==x?e(this,w,7,11,m=0):w[p++]=m=x}l=this.generateHuffmanTable(w.slice(0,d)),c=this.generateHuffmanTable(w.slice(d,v))}else t("Unknown block type in flate stream");for(var b=(D=this.buffer)?D.length:0,y=this.bufferLength;;){var k=this.getCode(l);if(256>k)y+1>=b&&(b=(D=this.ensureBuffer(y+1)).length),D[y++]=k;else{if(256==k)return void(this.bufferLength=y);var _=(k=r[k-=257])>>16;_>0&&(_=this.getBits(_));m=(65535&k)+_;k=this.getCode(c),(_=(k=n[k])>>16)>0&&(_=this.getBits(_));var C=(65535&k)+_;y+m>=b&&(b=(D=this.ensureBuffer(y+m)).length);for(var T=0;m>T;++T,++y)D[y]=D[y-C]}}}else{var S,E=this.bytes,M=this.bytesPos;void 0===(S=E[M++])&&t("Bad block header in flate stream");var A=S;void 0===(S=E[M++])&&t("Bad block header in flate stream"),A|=S<<8,void 0===(S=E[M++])&&t("Bad block header in flate stream");var P=S;void 0===(S=E[M++])&&t("Bad block header in flate stream"),(P|=S<<8)!=(65535&~A)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var I=this.bufferLength,D=this.ensureBuffer(I+A),F=I+A;this.bufferLength=F;for(var O=I;F>O;++O){if(void 0===(S=E[M++])){this.eof=!0;break}D[O]=S}this.bytesPos=M}},e}}();!function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===t.btoa&&(t.btoa=function(t){var i,r,n,o,a,s=0,l=0,c="",d=[];if(!t)return t;do{i=(a=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,r=a>>12&63,n=a>>6&63,o=63&a,d[l++]=e.charAt(i)+e.charAt(r)+e.charAt(n)+e.charAt(o)}while(s<t.length);c=d.join("");var h=t.length%3;return(h?c.slice(0,h-3):c)+"===".slice(h||3)}),void 0===t.atob&&(t.atob=function(t){var i,r,n,o,a,s,l=0,c=0,d=[];if(!t)return t;t+="";do{i=(s=e.indexOf(t.charAt(l++))<<18|e.indexOf(t.charAt(l++))<<12|(o=e.indexOf(t.charAt(l++)))<<6|(a=e.indexOf(t.charAt(l++))))>>16&255,r=s>>8&255,n=255&s,d[c++]=64==o?String.fromCharCode(i):64==a?String.fromCharCode(i,r):String.fromCharCode(i,r,n)}while(l<t.length);return d.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(null==this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),i=e.length>>>0,r=new Array(i),n=arguments.length>1?arguments[1]:void 0,o=0;i>o;o++)o in e&&(r[o]=t.call(n,e[o],o,e));return r}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;for(var i=Object(this),r=i.length>>>0,n=0;r>n;n++)n in i&&t.call(e,i[n],n,i)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=i.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError;var o,a,s=[];for(o in n)t.call(n,o)&&s.push(o);if(e)for(a=0;r>a;a++)t.call(n,i[a])&&s.push(i[a]);return s}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this)}();var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(t,e,i,r){var n=document.getElementById(t),o=n.naturalWidth,a=n.naturalHeight,s=document.getElementById(e);s.style.width=o+"px",s.style.height=a+"px",s.width=o,s.height=a;var l=s.getContext("2d");l.clearRect(0,0,o,a),l.drawImage(n,0,0),isNaN(i)||i<1||(r?stackBlurCanvasRGBA(e,0,0,o,a,i):stackBlurCanvasRGB(e,0,0,o,a,i))}function stackBlurCanvasRGBA(t,e,i,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var a,s=document.getElementById(t).getContext("2d");try{try{a=s.getImageData(e,i,r,n)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),a=s.getImageData(e,i,r,n)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var l,c,d,h,u,f,p,g,m,v,w,x,b,y,k,_,C,T,S,E,M,A,P,I,D=a.data,F=o+o+1,O=r-1,R=n-1,B=o+1,$=B*(B+1)/2,N=new BlurStack,L=N;for(d=1;d<F;d++)if(L=L.next=new BlurStack,d==B)var q=L;L.next=N;var j=null,z=null;p=f=0;var H=mul_table[o],U=shg_table[o];for(c=0;c<n;c++){for(_=C=T=S=g=m=v=w=0,x=B*(E=D[f]),b=B*(M=D[f+1]),y=B*(A=D[f+2]),k=B*(P=D[f+3]),g+=$*E,m+=$*M,v+=$*A,w+=$*P,L=N,d=0;d<B;d++)L.r=E,L.g=M,L.b=A,L.a=P,L=L.next;for(d=1;d<B;d++)h=f+((O<d?O:d)<<2),g+=(L.r=E=D[h])*(I=B-d),m+=(L.g=M=D[h+1])*I,v+=(L.b=A=D[h+2])*I,w+=(L.a=P=D[h+3])*I,_+=E,C+=M,T+=A,S+=P,L=L.next;for(j=N,z=q,l=0;l<r;l++)D[f+3]=P=w*H>>U,0!=P?(P=255/P,D[f]=(g*H>>U)*P,D[f+1]=(m*H>>U)*P,D[f+2]=(v*H>>U)*P):D[f]=D[f+1]=D[f+2]=0,g-=x,m-=b,v-=y,w-=k,x-=j.r,b-=j.g,y-=j.b,k-=j.a,h=p+((h=l+o+1)<O?h:O)<<2,g+=_+=j.r=D[h],m+=C+=j.g=D[h+1],v+=T+=j.b=D[h+2],w+=S+=j.a=D[h+3],j=j.next,x+=E=z.r,b+=M=z.g,y+=A=z.b,k+=P=z.a,_-=E,C-=M,T-=A,S-=P,z=z.next,f+=4;p+=r}for(l=0;l<r;l++){for(C=T=S=_=m=v=w=g=0,x=B*(E=D[f=l<<2]),b=B*(M=D[f+1]),y=B*(A=D[f+2]),k=B*(P=D[f+3]),g+=$*E,m+=$*M,v+=$*A,w+=$*P,L=N,d=0;d<B;d++)L.r=E,L.g=M,L.b=A,L.a=P,L=L.next;for(u=r,d=1;d<=o;d++)f=u+l<<2,g+=(L.r=E=D[f])*(I=B-d),m+=(L.g=M=D[f+1])*I,v+=(L.b=A=D[f+2])*I,w+=(L.a=P=D[f+3])*I,_+=E,C+=M,T+=A,S+=P,L=L.next,d<R&&(u+=r);for(f=l,j=N,z=q,c=0;c<n;c++)D[(h=f<<2)+3]=P=w*H>>U,P>0?(P=255/P,D[h]=(g*H>>U)*P,D[h+1]=(m*H>>U)*P,D[h+2]=(v*H>>U)*P):D[h]=D[h+1]=D[h+2]=0,g-=x,m-=b,v-=y,w-=k,x-=j.r,b-=j.g,y-=j.b,k-=j.a,h=l+((h=c+B)<R?h:R)*r<<2,g+=_+=j.r=D[h],m+=C+=j.g=D[h+1],v+=T+=j.b=D[h+2],w+=S+=j.a=D[h+3],j=j.next,x+=E=z.r,b+=M=z.g,y+=A=z.b,k+=P=z.a,_-=E,C-=M,T-=A,S-=P,z=z.next,f+=r}s.putImageData(a,e,i)}}function stackBlurCanvasRGB(t,e,i,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var a,s=document.getElementById(t).getContext("2d");try{try{a=s.getImageData(e,i,r,n)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),a=s.getImageData(e,i,r,n)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var l,c,d,h,u,f,p,g,m,v,w,x,b,y,k,_,C,T,S,E,M=a.data,A=o+o+1,P=r-1,I=n-1,D=o+1,F=D*(D+1)/2,O=new BlurStack,R=O;for(d=1;d<A;d++)if(R=R.next=new BlurStack,d==D)var B=R;R.next=O;var $=null,N=null;p=f=0;var L=mul_table[o],q=shg_table[o];for(c=0;c<n;c++){for(y=k=_=g=m=v=0,w=D*(C=M[f]),x=D*(T=M[f+1]),b=D*(S=M[f+2]),g+=F*C,m+=F*T,v+=F*S,R=O,d=0;d<D;d++)R.r=C,R.g=T,R.b=S,R=R.next;for(d=1;d<D;d++)h=f+((P<d?P:d)<<2),g+=(R.r=C=M[h])*(E=D-d),m+=(R.g=T=M[h+1])*E,v+=(R.b=S=M[h+2])*E,y+=C,k+=T,_+=S,R=R.next;for($=O,N=B,l=0;l<r;l++)M[f]=g*L>>q,M[f+1]=m*L>>q,M[f+2]=v*L>>q,g-=w,m-=x,v-=b,w-=$.r,x-=$.g,b-=$.b,h=p+((h=l+o+1)<P?h:P)<<2,g+=y+=$.r=M[h],m+=k+=$.g=M[h+1],v+=_+=$.b=M[h+2],$=$.next,w+=C=N.r,x+=T=N.g,b+=S=N.b,y-=C,k-=T,_-=S,N=N.next,f+=4;p+=r}for(l=0;l<r;l++){for(k=_=y=m=v=g=0,w=D*(C=M[f=l<<2]),x=D*(T=M[f+1]),b=D*(S=M[f+2]),g+=F*C,m+=F*T,v+=F*S,R=O,d=0;d<D;d++)R.r=C,R.g=T,R.b=S,R=R.next;for(u=r,d=1;d<=o;d++)f=u+l<<2,g+=(R.r=C=M[f])*(E=D-d),m+=(R.g=T=M[f+1])*E,v+=(R.b=S=M[f+2])*E,y+=C,k+=T,_+=S,R=R.next,d<I&&(u+=r);for(f=l,$=O,N=B,c=0;c<n;c++)M[h=f<<2]=g*L>>q,M[h+1]=m*L>>q,M[h+2]=v*L>>q,g-=w,m-=x,v-=b,w-=$.r,x-=$.g,b-=$.b,h=l+((h=c+D)<I?h:I)*r<<2,g+=y+=$.r=M[h],m+=k+=$.g=M[h+1],v+=_+=$.b=M[h+2],$=$.next,w+=C=N.r,x+=T=N.g,b+=S=N.b,y-=C,k-=T,_-=S,N=N.next,f+=r}s.putImageData(a,e,i)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function X2JS(t){t=t||{},function(){void 0===t.escapeMode&&(t.escapeMode=!0);t.attributePrefix=t.attributePrefix||"_",t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0);t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0);void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0);t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[]}(),function(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")});"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var e=1,i=3,r=4,n=8,o=9;function a(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function s(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function l(e,i,r){if("property"===t.arrayAccessForm)e[i]instanceof Array?e[i+"_asArray"]=e[i]:e[i+"_asArray"]=[e[i]];if(!(e[i]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var n=0;n<t.arrayAccessFormPaths.length;n++){var o=t.arrayAccessFormPaths[n];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(e,i,r))break}n!=t.arrayAccessFormPaths.length&&(e[i]=[e[i]])}}function c(t){var e=t.split(/[-T:+Z]/g),i=new Date(e[0],e[1]-1,e[2]),r=e[5].split(".");if(i.setHours(e[3],e[4],r[0]),r.length>1&&i.setMilliseconds(r[1]),e[6]&&e[7]){var n=60*e[6]+Number(e[7]);n=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*n:n),i.setMinutes(i.getMinutes()-n-i.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function d(s,h){if(s.nodeType==o){for(var u=new Object,f=s.childNodes,p=0;p<f.length;p++){if((g=f.item(p)).nodeType==e)u[m=a(g)]=d(g,m)}return u}if(s.nodeType==e){(u=new Object).__cnt=0;for(f=s.childNodes,p=0;p<f.length;p++){var g,m=a(g=f.item(p));g.nodeType!=n&&(u.__cnt++,null==u[m]?(u[m]=d(g,h+"."+m),l(u,m,h+"."+m)):(null!=u[m]&&(u[m]instanceof Array||(u[m]=[u[m]],l(u,m,h+"."+m))),u[m][u[m].length]=d(g,h+"."+m)))}for(var v=0;v<s.attributes.length;v++){var w=s.attributes.item(v);u.__cnt++,u[t.attributePrefix+w.name]=w.value}var x=function(t){return t.prefix}(s);return null!=x&&""!=x&&(u.__cnt++,u.__prefix=x),null!=u["#text"]&&(u.__text=u["#text"],u.__text instanceof Array&&(u.__text=u.__text.join("\n")),t.escapeMode&&(u.__text=function(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}(u.__text)),t.stripWhitespaces&&(u.__text=u.__text.trim()),delete u["#text"],"property"==t.arrayAccessForm&&delete u["#text_asArray"],u.__text=function(e,i,r){if(t.datetimeAccessFormPaths.length>0){for(var n=r.split(".#")[0],o=0;o<t.datetimeAccessFormPaths.length;o++){var a=t.datetimeAccessFormPaths[o];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(obj,i,n))break}return o!=t.datetimeAccessFormPaths.length?c(e):e}return e}(u.__text,m,h+"."+m)),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],"property"==t.arrayAccessForm&&delete u["#cdata-section_asArray"]),1==u.__cnt&&null!=u.__text?u=u.__text:0==u.__cnt&&"text"==t.emptyNodeForm?u="":u.__cnt>1&&null!=u.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==u.__text||""==u.__text.trim())&&delete u.__text,delete u.__cnt,!t.enableToStringFunc||null==u.__text&&null==u.__cdata||(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}if(s.nodeType==i||s.nodeType==r)return s.nodeValue}function h(e,i,r,n){var o="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+i;if(null!=r)for(var a=0;a<r.length;a++){var l=r[a],c=e[l];t.escapeMode&&(c=s(c)),o+=" "+l.substr(t.attributePrefix.length)+"='"+c+"'"}return o+=n?"/>":">"}function u(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function f(e,i){return!!("property"==t.arrayAccessForm&&function(t,e){return-1!==t.indexOf(e,t.length-e.length)}(i.toString(),"_asArray")||0==i.toString().indexOf(t.attributePrefix)||0==i.toString().indexOf("__")||e[i]instanceof Function)}function p(t){var e=0;if(t instanceof Object)for(var i in t)f(t,i)||e++;return e}function g(e){var i=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(t.attributePrefix)&&i.push(r);return i}function m(e){var i="";return e instanceof Object?i+=function(e){var i="";return null!=e.__cdata&&(i+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t.escapeMode?i+=s(e.__text):i+=e.__text),i}(e):null!=e&&(t.escapeMode?i+=s(e):i+=e),i}function v(t,e,i){var r="";if(0==t.length)r+=h(t,e,i,!0);else for(var n=0;n<t.length;n++)r+=h(t[n],e,g(t[n]),!1),r+=w(t[n]),r+=u(t[n],e);return r}function w(t){var e="";if(p(t)>0)for(var i in t)if(!f(t,i)){var r=t[i],n=g(r);if(null==r||null==r)e+=h(r,i,n,!0);else if(r instanceof Object)if(r instanceof Array)e+=v(r,i,n);else if(r instanceof Date)e+=h(r,i,n,!1),e+=r.toISOString(),e+=u(r,i);else p(r)>0||null!=r.__text||null!=r.__cdata?(e+=h(r,i,n,!1),e+=w(r),e+=u(r,i)):e+=h(r,i,n,!0);else e+=h(r,i,n,!1),e+=m(r),e+=u(r,i)}return e+=m(t)}this.parseXmlString=function(t){var e,i=window.ActiveXObject||"ActiveXObject"in window;if(void 0===t)return null;if(window.DOMParser){var r=new window.DOMParser,n=null;if(!i)try{n=r.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(t){n=null}try{e=r.parseFromString(t,"text/xml"),null!=n&&e.getElementsByTagNameNS(n,"parsererror").length>0&&(e=null)}catch(t){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?c(t):t},this.xml2json=function(t){return d(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return w(t)},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.1.5"}}!function(){this.canvg=function(t,e,r){if(null!=t||null!=e||null!=r){r=r||{},"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop();var n=function(){var t={FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4};return t.init=function(e){var i=0;t.UniqueId=function(){return"canvg"+ ++i},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var i=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var r=new RGBColor(this.value);r.ok&&(i="rgba("+r.r+", "+r.g+", "+r.b+", "+e+")")}return new t.Property(this.name,i)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,i){var r=this.getDefinition();if(null!=r&&r.createGradient)return r.createGradient(t.ctx,e,i);if(null!=r&&r.createPattern){if(r.getHrefAttribute().hasValue()){var n=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition(),n.hasValue()&&(r.attribute("patternTransform",!0).value=n.value)}return r.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(t){return 96},t.Property.prototype.getEM=function(e){var i=12,r=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return r.hasValue()&&(i=r.toPixels(e)),i},t.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,i){if(!this.hasValue())return 0;var r=this.value+"";if(r.match(/em$/))return this.numValue()*this.getEM(e);if(r.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(r.match(/px$/))return this.numValue();if(r.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(r.match(/pc$/))return 15*this.numValue();if(r.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(r.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(r.match(/in$/))return this.numValue()*this.getDPI(e);if(r.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var n=this.numValue();return i&&n<1?n*t.ViewPort.ComputeSize(e):n},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,i,r,n,o,a){var s=null!=a?this.Parse(a):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:o||s.fontFamily,fontSize:n||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:r||s.fontWeight,fontVariant:i||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(i){for(var r={},n=t.trim(t.compressSpaces(i||"")).split(" "),o={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},a="",s=0;s<n.length;s++)o.fontStyle||-1==e.Styles.indexOf(n[s])?o.fontVariant||-1==e.Variants.indexOf(n[s])?o.fontWeight||-1==e.Weights.indexOf(n[s])?o.fontSize?"inherit"!=n[s]&&(a+=n[s]):("inherit"!=n[s]&&(r.fontSize=n[s].split("/")[0]),o.fontStyle=o.fontVariant=o.fontWeight=o.fontSize=!0):("inherit"!=n[s]&&(r.fontWeight=n[s]),o.fontStyle=o.fontVariant=o.fontWeight=!0):("inherit"!=n[s]&&(r.fontVariant=n[s]),o.fontStyle=o.fontVariant=!0):("inherit"!=n[s]&&(r.fontStyle=n[s]),o.fontStyle=!0);return""!=a&&(r.fontFamily=a),r}},t.ToNumberArray=function(e){for(var i=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),r=0;r<i.length;r++)i[r]=parseFloat(i[r]);return i},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],i=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=i},t.CreatePoint=function(e){var i=t.ToNumberArray(e);return new t.Point(i[0],i[1])},t.CreatePath=function(e){for(var i=t.ToNumberArray(e),r=[],n=0;n<i.length;n+=2)r.push(new t.Point(i[n],i[n+1]));return r},t.BoundingBox=function(t,e,r,n){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,r,n,o){var a=t+2/3*(i-t),s=e+2/3*(r-e),l=a+1/3*(n-t),c=s+1/3*(o-e);this.addBezierCurve(t,e,a,l,s,c,n,o)},this.addBezierCurve=function(t,e,r,n,o,a,s,l){var c=[t,e],d=[r,n],h=[o,a],u=[s,l];for(this.addPoint(c[0],c[1]),this.addPoint(u[0],u[1]),i=0;i<=1;i++){var f=function(t){return Math.pow(1-t,3)*c[i]+3*Math.pow(1-t,2)*t*d[i]+3*(1-t)*Math.pow(t,2)*h[i]+Math.pow(t,3)*u[i]},p=6*c[i]-12*d[i]+6*h[i],g=-3*c[i]+9*d[i]-9*h[i]+3*u[i],m=3*d[i]-3*c[i];if(0!=g){var v=Math.pow(p,2)-4*m*g;if(!(v<0)){var w=(-p+Math.sqrt(v))/(2*g);0<w&&w<1&&(0==i&&this.addX(f(w)),1==i&&this.addY(f(w)));var x=(-p-Math.sqrt(v))/(2*g);0<x&&x<1&&(0==i&&this.addX(f(x)),1==i&&this.addY(f(x)))}}else{if(0==p)continue;var b=-m/p;0<b&&b<1&&(0==i&&this.addX(f(b)),1==i&&this.addY(f(b)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(r,n)},t.Transform=function(e){var i=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var i=t.ToNumberArray(e);this.angle=new t.Property("angle",i[0]),this.cx=i[1]||0,this.cy=i[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=i.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var r=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),n=0;n<r.length;n++){var o=t.trim(r[n].split("(")[0]),a=r[n].split("(")[1].replace(")",""),s=new this.Type[o](a);s.type=o,this.transforms.push(s)}},t.AspectRatio=function(e,i,r,n,o,a,s,l,c,d){var h=(i=(i=t.compressSpaces(i)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",u=i.split(" ")[1]||"meet",f=r/n,p=o/a,g=Math.min(f,p),m=Math.max(f,p);"meet"==u&&(n*=g,a*=g),"slice"==u&&(n*=m,a*=m),c=new t.Property("refX",c),d=new t.Property("refY",d),c.hasValue()&&d.hasValue()?e.translate(-g*c.toPixels("x"),-g*d.toPixels("y")):(h.match(/^xMid/)&&("meet"==u&&g==p||"slice"==u&&m==p)&&e.translate(r/2-n/2,0),h.match(/YMid$/)&&("meet"==u&&g==f||"slice"==u&&m==f)&&e.translate(0,o/2-a/2),h.match(/^xMax/)&&("meet"==u&&g==p||"slice"==u&&m==p)&&e.translate(r-n,0),h.match(/YMax$/)&&("meet"==u&&g==f||"slice"==u&&m==f)&&e.translate(0,o-a)),"none"==h?e.scale(f,p):"meet"==u?e.scale(g,g):"slice"==u&&e.scale(m,m),e.translate(null==s?0:-s,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,i){var r=this.attributes[e];return null!=r?r:(1==i&&(r=new t.Property(e,""),this.attributes[e]=r),r||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,i){var r=this.styles[e];if(null!=r)return r;var n=this.attribute(e);if(null!=n&&n.hasValue())return this.styles[e]=n,n;var o=this.parent;if(null!=o){var a=o.style(e);if(null!=a&&a.hasValue())return a}return 1==i&&(r=new t.Property(e,""),this.styles[e]=r),r||t.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var i=this.style("filter").getDefinition();null!=i&&i.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,i){var r=e;i&&(r=t.CreateElement(e)),r.parent=this,this.children.push(r)},null!=e&&1==e.nodeType){for(var i=0;i<e.childNodes.length;i++){var r=e.childNodes[i];if(1==r.nodeType&&this.addChild(r,!0),this.captureTextNodes&&3==r.nodeType){var n=r.nodeValue||r.text||"";""!=t.trim(t.compressSpaces(n))&&this.addChild(new t.Element.tspan(r),!1)}}for(i=0;i<e.attributes.length;i++){var o=e.attributes[i];this.attributes[o.nodeName]=new t.Property(o.nodeName,o.nodeValue)}if(null!=(c=t.Styles[e.nodeName]))for(var a in c)this.styles[a]=c[a];if(this.attribute("class").hasValue())for(var s=t.compressSpaces(this.attribute("class").value).split(" "),l=0;l<s.length;l++){if(null!=(c=t.Styles["."+s[l]]))for(var a in c)this.styles[a]=c[a];if(null!=(c=t.Styles[e.nodeName+"."+s[l]]))for(var a in c)this.styles[a]=c[a]}if(this.attribute("id").hasValue())if(null!=(c=t.Styles["#"+this.attribute("id").value]))for(var a in c)this.styles[a]=c[a];if(this.attribute("style").hasValue()){var c=this.attribute("style").value.split(";");for(i=0;i<c.length;i++)if(""!=t.trim(c[i])){var d=c[i].split(":"),h=(a=t.trim(d[0]),t.trim(d[1]));this.styles[a]=new t.Property(a,h)}}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){var i,r,n;this.style("fill").isUrlDefinition()?null!=(r=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(e.fillStyle=r):this.style("fill").hasValue()&&("currentColor"==(i=this.style("fill")).value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value);this.style("fill-opacity").hasValue()&&(i=(i=new t.Property("fill",e.fillStyle)).addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value);this.style("stroke").isUrlDefinition()?null!=(r=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")))&&(e.strokeStyle=r):this.style("stroke").hasValue()&&("currentColor"==(n=this.style("stroke")).value&&(n.value=this.style("color").value),e.strokeStyle="none"==n.value?"rgba(0,0,0,0)":n.value);this.style("stroke-opacity").hasValue()&&(n=(n=new t.Property("stroke",e.strokeStyle)).addOpacity(this.style("stroke-opacity").value),e.strokeStyle=n.value);if(this.style("stroke-width").hasValue()){var o=this.style("stroke-width").toPixels();e.lineWidth=0==o?.001:o}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var a=t.ToNumberArray(this.style("stroke-dasharray").value);void 0!==e.setLineDash?e.setLineDash(a):void 0!==e.webkitLineDash?e.webkitLineDash=a:void 0!==e.mozDash&&(e.mozDash=a);var s=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==e.lineDashOffset?e.lineDashOffset=s:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=s:void 0!==e.mozDashOffset&&(e.mozDashOffset=s)}(void 0!==e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue())&&new t.Transform(this.attribute("transform").value).apply(e);if(this.style("clip-path").hasValue()){var l=this.style("clip-path").getDefinition();null!=l&&l.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var i=this.getMarkers();if(null!=i){if(this.style("marker-start").isUrlDefinition())(r=this.style("marker-start").getDefinition()).render(e,i[0][0],i[0][1]);if(this.style("marker-mid").isUrlDefinition())for(var r=this.style("marker-mid").getDefinition(),n=1;n<i.length-1;n++)r.render(e,i[n][0],i[n][1]);if(this.style("marker-end").isUrlDefinition())(r=this.style("marker-end").getDefinition()).render(e,i[i.length-1][0],i[i.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var i=t.ViewPort.width(),r=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");var n=0,o=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),o=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(n,o),e.lineTo(i,o),e.lineTo(i,r),e.lineTo(n,r),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(i,r),this.attribute("viewBox").hasValue()){var a=t.ToNumberArray(this.attribute("viewBox").value),s=a[0],l=a[1];i=a[2],r=a[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),i,t.ViewPort.height(),r,s,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(a[2],a[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y"),a=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=a),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(a=s),a=Math.min(a,n/2),s=Math.min(s,o/2),null!=e&&(e.beginPath(),e.moveTo(i+a,r),e.lineTo(i+n-a,r),e.quadraticCurveTo(i+n,r,i+n,r+s),e.lineTo(i+n,r+o-s),e.quadraticCurveTo(i+n,r+o,i+n-a,r+o),e.lineTo(i+a,r+o),e.quadraticCurveTo(i,r+o,i,r+o-s),e.lineTo(i,r+s),e.quadraticCurveTo(i,r,i+a,r),e.closePath()),new t.BoundingBox(i,r,i+n,r+o)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y"),n=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(i,r,n,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(i-n,r-n,i+n,r+n)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=(Math.sqrt(2)-1)/3*4,r=this.attribute("rx").toPixels("x"),n=this.attribute("ry").toPixels("y"),o=this.attribute("cx").toPixels("x"),a=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(o,a-n),e.bezierCurveTo(o+i*r,a-n,o+r,a-i*n,o+r,a),e.bezierCurveTo(o+r,a+i*n,o+i*r,a+n,o,a+n),e.bezierCurveTo(o-i*r,a+n,o-r,a+i*n,o-r,a),e.bezierCurveTo(o-r,a-i*n,o-i*r,a-n,o,a-n),e.closePath()),new t.BoundingBox(o-r,a-n,o+r,a+n)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var i=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(i[0].x,i[0].y),e.lineTo(i[1].x,i[1].y)),new t.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var i=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var r=1;r<this.points.length;r++)i.addPoint(this.points[r].x,this.points[r].y),null!=e&&e.lineTo(this.points[r].x,this.points[r].y);return i},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var i=this.attribute("d").value;i=(i=(i=(i=(i=(i=(i=(i=i.replace(/,/gm," ")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2")).replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/(\.[0-9]*)(\.)/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),i=t.compressSpaces(i),i=t.trim(i),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(i),this.path=function(e){var i=this.PathParser;i.reset();var r=new t.BoundingBox;for(null!=e&&e.beginPath();!i.isEnd();)switch(i.nextCommand(),i.command){case"M":case"m":var n=i.getAsCurrentPoint();for(i.addMarker(n),r.addPoint(n.x,n.y),null!=e&&e.moveTo(n.x,n.y),i.start=i.current;!i.isCommandOrEnd();){n=i.getAsCurrentPoint();i.addMarker(n,i.start),r.addPoint(n.x,n.y),null!=e&&e.lineTo(n.x,n.y)}break;case"L":case"l":for(;!i.isCommandOrEnd();){var o=i.current;n=i.getAsCurrentPoint();i.addMarker(n,o),r.addPoint(n.x,n.y),null!=e&&e.lineTo(n.x,n.y)}break;case"H":case"h":for(;!i.isCommandOrEnd();){var a=new t.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y);i.addMarker(a,i.current),i.current=a,r.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y)}break;case"V":case"v":for(;!i.isCommandOrEnd();){a=new t.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar());i.addMarker(a,i.current),i.current=a,r.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y)}break;case"C":case"c":for(;!i.isCommandOrEnd();){var s=i.current,l=i.getPoint(),c=i.getAsControlPoint(),d=i.getAsCurrentPoint();i.addMarker(d,c,l),r.addBezierCurve(s.x,s.y,l.x,l.y,c.x,c.y,d.x,d.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,d.x,d.y)}break;case"S":case"s":for(;!i.isCommandOrEnd();){s=i.current,l=i.getReflectedControlPoint(),c=i.getAsControlPoint(),d=i.getAsCurrentPoint();i.addMarker(d,c,l),r.addBezierCurve(s.x,s.y,l.x,l.y,c.x,c.y,d.x,d.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,d.x,d.y)}break;case"Q":case"q":for(;!i.isCommandOrEnd();){s=i.current,c=i.getAsControlPoint(),d=i.getAsCurrentPoint();i.addMarker(d,c,c),r.addQuadraticCurve(s.x,s.y,c.x,c.y,d.x,d.y),null!=e&&e.quadraticCurveTo(c.x,c.y,d.x,d.y)}break;case"T":case"t":for(;!i.isCommandOrEnd();){s=i.current,c=i.getReflectedControlPoint();i.control=c;d=i.getAsCurrentPoint();i.addMarker(d,c,c),r.addQuadraticCurve(s.x,s.y,c.x,c.y,d.x,d.y),null!=e&&e.quadraticCurveTo(c.x,c.y,d.x,d.y)}break;case"A":case"a":for(;!i.isCommandOrEnd();){s=i.current;var h=i.getScalar(),u=i.getScalar(),f=i.getScalar()*(Math.PI/180),p=i.getScalar(),g=i.getScalar(),m=(d=i.getAsCurrentPoint(),new t.Point(Math.cos(f)*(s.x-d.x)/2+Math.sin(f)*(s.y-d.y)/2,-Math.sin(f)*(s.x-d.x)/2+Math.cos(f)*(s.y-d.y)/2)),v=Math.pow(m.x,2)/Math.pow(h,2)+Math.pow(m.y,2)/Math.pow(u,2);v>1&&(h*=Math.sqrt(v),u*=Math.sqrt(v));var w=(p==g?-1:1)*Math.sqrt((Math.pow(h,2)*Math.pow(u,2)-Math.pow(h,2)*Math.pow(m.y,2)-Math.pow(u,2)*Math.pow(m.x,2))/(Math.pow(h,2)*Math.pow(m.y,2)+Math.pow(u,2)*Math.pow(m.x,2)));isNaN(w)&&(w=0);var x=new t.Point(w*h*m.y/u,w*-u*m.x/h),b=new t.Point((s.x+d.x)/2+Math.cos(f)*x.x-Math.sin(f)*x.y,(s.y+d.y)/2+Math.sin(f)*x.x+Math.cos(f)*x.y),y=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},C=_([1,0],[(m.x-x.x)/h,(m.y-x.y)/u]),T=[(m.x-x.x)/h,(m.y-x.y)/u],S=[(-m.x-x.x)/h,(-m.y-x.y)/u],E=_(T,S);k(T,S)<=-1&&(E=Math.PI),k(T,S)>=1&&(E=0);var M=1-g?1:-1,A=C+M*(E/2),P=new t.Point(b.x+h*Math.cos(A),b.y+u*Math.sin(A));if(i.addMarkerAngle(P,A-M*Math.PI/2),i.addMarkerAngle(d,A-M*Math.PI),r.addPoint(d.x,d.y),null!=e){k=h>u?h:u;var I=h>u?1:h/u,D=h>u?u/h:1;e.translate(b.x,b.y),e.rotate(f),e.scale(I,D),e.arc(0,0,k,C,C+E,1-g),e.scale(1/I,1/D),e.rotate(-f),e.translate(-b.x,-b.y)}}break;case"Z":case"z":null!=e&&e.closePath(),i.current=i.start}return r},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],r=0;r<t.length;r++)i.push([t[r],e[r]]);return i}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e,i){var r=this.attribute("width").toPixels("x",!0),n=this.attribute("height").toPixels("y",!0),o=new t.Element.svg;o.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),o.attributes.width=new t.Property("width",r+"px"),o.attributes.height=new t.Property("height",n+"px"),o.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),o.children=this.children;var a=document.createElement("canvas");a.width=r,a.height=n;var s=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var c=-1;c<=1;c++)s.save(),s.translate(l*a.width,c*a.height),o.render(s),s.restore();return e.createPattern(a,"repeat")}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,i,r){e.translate(i.x,i.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(r),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var n=new t.Element.svg;n.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),n.attributes.refX=new t.Property("refX",this.attribute("refX").value),n.attributes.refY=new t.Property("refY",this.attribute("refY").value),n.attributes.width=new t.Property("width",this.attribute("markerWidth").value),n.attributes.height=new t.Property("height",this.attribute("markerHeight").value),n.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),n.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),n.children=this.children,n.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-r),e.translate(-i.x,-i.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(t){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var i=0;i<this.children.length;i++){var r=this.children[i];"stop"==r.type&&this.stops.push(r)}this.getGradient=function(){},this.createGradient=function(e,i,r){var n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition());var o=function(e){return r.hasValue()?new t.Property("color",e).addOpacity(r.value).value:e},a=this.getGradient(e,i);if(null==a)return o(n.stops[n.stops.length-1].color);for(var s=0;s<n.stops.length;s++)a.addColorStop(n.stops[s].offset,o(n.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=t.ViewPort.viewPorts[0],c=new t.Element.rect;c.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),c.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var d=new t.Element.g;d.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),d.children=[c];var h=new t.Element.svg;h.attributes.x=new t.Property("x",0),h.attributes.y=new t.Property("y",0),h.attributes.width=new t.Property("width",l.width),h.attributes.height=new t.Property("height",l.height),h.children=[d];var u=document.createElement("canvas");u.width=l.width,u.height=l.height;var f=u.getContext("2d");return f.fillStyle=a,h.render(f),f.createPattern(u,"no-repeat")}return a}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),n="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==o&&n==a?null:t.createLinearGradient(r,n,o,a)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),n="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=r,a=n;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(o,a,0,r,n,s)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var i=this.style("stop-color");this.style("stop-opacity").hasValue()&&(i=i.addOpacity(this.style("stop-opacity").value)),this.color=i.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed&&(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var i=this.calcValue();if(this.attribute("type").hasValue())i=this.attribute("type").value+"("+i+")";this.getProperty().value=i,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=e.progress*(this.values.value.length-1),r=Math.floor(i),n=Math.ceil(i);e.from=new t.Property("from",parseFloat(this.values.value[r])),e.to=new t.Property("to",parseFloat(this.values.value[n])),e.progress=(i-r)/(n-r)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),i=new RGBColor(t.to.value);if(e.ok&&i.ok){var r=e.r+(i.r-e.r)*t.progress,n=e.g+(i.g-e.g)*t.progress,o=e.b+(i.b-e.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(n,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),i=t.ToNumberArray(e.from.value),r=t.ToNumberArray(e.to.value),n="",o=0;o<i.length;o++)n+=i[o]+(r[o]-i[o])*e.progress+" ";return n}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var i=0;i<this.children.length;i++){var r=this.children[i];"font-face"==r.type?(this.fontFace=r,r.style("font-family").hasValue()&&(t.Definitions[r.style("font-family").value]=this)):"missing-glyph"==r.type?this.missingGlyph=r:"glyph"==r.type&&(""!=r.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[r.unicode]&&(this.glyphs[r.unicode]=[]),this.glyphs[r.unicode][r.arabicForm]=r):this.glyphs[r.unicode]=r)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,i){var r=this.style("text-anchor").valueOrDefault("start");if("start"!=r){for(var n=0,o=i;o<e.children.length;o++){var a=e.children[o];if(o>i&&a.attribute("x").hasValue())break;n+=a.measureTextRecursive(t)}return-1*("end"==r?n:n/2)}return 0},this.renderChild=function(t,e,i){var r=e.children[i];r.attribute("x").hasValue()?r.x=r.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,i):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),r.attribute("dx").hasValue()&&(this.x+=r.attribute("dx").toPixels("x")),r.x=this.x),this.x=r.x+r.measureText(t),r.attribute("y").hasValue()?r.y=r.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),r.attribute("dy").hasValue()&&(this.y+=r.attribute("dy").toPixels("y")),r.y=this.y),this.y=r.y,r.render(t);for(i=0;i<r.children.length;i++)this.renderChild(t,r,i)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,i){var r=e[i],n=null;if(t.isArabic){var o="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(o="terminal"),i>0&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(o="medial"),i>0&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(o="initial"),void 0!==t.glyphs[r]&&null==(n=t.glyphs[r][o])&&"glyph"==t.glyphs[r].type&&(n=t.glyphs[r])}else n=t.glyphs[r];return null==n&&(n=t.missingGlyph),n},this.renderChildren=function(e){var i=this.parent.style("font-family").getDefinition();if(null==i)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var r=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),n=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),o=this.getText();i.isRTL&&(o=o.split("").reverse().join(""));for(var a=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<o.length;s++){var l=this.getGlyph(i,o,s),c=r/i.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(c,-c);var d=e.lineWidth;e.lineWidth=e.lineWidth*i.fontFace.unitsPerEm/r,"italic"==n&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==n&&e.transform(1,0,-.4,1,0,0),e.lineWidth=d,e.scale(1/c,-1/c),e.translate(-this.x,-this.y),this.x+=r*(l.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(this.x+=a[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(e){var i=this.parent.style("font-family").getDefinition();if(null!=i){var r=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),n=0,o=this.getText();i.isRTL&&(o=o.split("").reverse().join(""));for(var a=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<o.length;s++){n+=(this.getGlyph(i,o,s).horizAdvX||i.horizAdvX)*r/i.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(n+=a[s])}return n}var l=t.compressSpaces(this.getText());if(!e.measureText)return 10*l.length;e.save(),this.setContext(e);var c=e.measureText(l).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var i=0;i<e.childNodes.length;i++)3!=e.childNodes[i].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-i.toPixels("y"),this.x+this.measureText(e),this.y))}else{var r=new t.Element.g;r.children=this.children,r.parent=this,r.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var i=this.getHrefAttribute().value,r=i.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,r)this.img=t.ajax(i),this.loaded=!0;else{this.img=document.createElement("img");var n=this;this.img.onload=function(){n.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+i+'" not found'),n.loaded=!0)},this.img.src=i}this.renderChildren=function(e){var i=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");0!=o&&0!=a&&(e.save(),r?e.drawSvg(this.img,i,n,o,a):(e.translate(i,n),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,o,this.img.width,a,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");return new t.BoundingBox(e,i,e+r,i+n)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,i=0;i<this.children.length;i++)e.addBoundingBox(this.children[i].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var i=t.ToNumberArray(this.attribute("viewBox").value),r=i[0],n=i[1];width=i[2],height=i[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,r,n),t.ViewPort.SetCurrent(i[2],i[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var i="",r=0;r<e.childNodes.length;r++)i+=e.childNodes[r].nodeValue;i=i.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");var n=(i=t.compressSpaces(i)).split("}");for(r=0;r<n.length;r++)if(""!=t.trim(n[r]))for(var o=n[r].split("{"),a=o[0].split(","),s=o[1].split(";"),l=0;l<a.length;l++){var c=t.trim(a[l]);if(""!=c){for(var d={},h=0;h<s.length;h++){var u=s[h].indexOf(":"),f=s[h].substr(0,u),p=s[h].substr(u+1,s[h].length-u);null!=f&&null!=p&&(d[t.trim(f)]=new t.Property(t.trim(f),t.trim(p)))}if(t.Styles[c]=d,"@font-face"==c)for(var g=d["font-family"].value.replace(/"/g,""),m=d.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var w=m[v].indexOf("url"),x=m[v].indexOf(")",w),b=m[v].substr(w+5,x-w-6),y=t.parseXml(t.ajax(b)).getElementsByTagName("font"),k=0;k<y.length;k++){var _=t.CreateElement(y[k]);t.Definitions[g]=_}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();if(null!=t)return t.getBoundingBox()},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var i=e.parent;e.parent=null,e.render(t),e.parent=i}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,i){var r=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");if(0==o&&0==a){for(var s=new t.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());r=Math.floor(s.x1),n=Math.floor(s.y1),o=Math.floor(s.width()),a=Math.floor(s.height())}var c=i.attribute("mask").value;i.attribute("mask").value="";var d=document.createElement("canvas");d.width=r+o,d.height=n+a;var h=d.getContext("2d");this.renderChildren(h);var u=document.createElement("canvas");u.width=r+o,u.height=n+a;var f=u.getContext("2d");i.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=h.createPattern(d,"no-repeat"),f.fillRect(0,0,r+o,n+a),e.fillStyle=f.createPattern(u,"no-repeat"),e.fillRect(0,0,r+o,n+a),i.attribute("mask").value=c},this.render=function(t){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var i=0;i<this.children.length;i++){var r=this.children[i];if(void 0!==r.path){var n=null;r.attribute("transform").hasValue()&&(n=new t.Transform(r.attribute("transform").value)).apply(e),r.path(e),e.clip(),n&&n.unapply(e)}}},this.render=function(t){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var i=e.getBoundingBox(),r=Math.floor(i.x1),n=Math.floor(i.y1),o=Math.floor(i.width()),a=Math.floor(i.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,c=0,d=0;d<this.children.length;d++){var h=this.children[d].extraFilterDistance||0;l=Math.max(l,h),c=Math.max(c,h)}var u=document.createElement("canvas");u.width=o+2*l,u.height=a+2*c;var f=u.getContext("2d");f.translate(-r+l,-n+c),e.render(f);for(d=0;d<this.children.length;d++)this.children[d].apply(f,0,0,o+2*l,a+2*c);t.drawImage(u,0,0,o+2*l,a+2*c,r-l,n-c,o+2*l,a+2*c),e.style("filter",!0).value=s},this.render=function(t){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,i,r,n){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function i(t,e,i,r,n,o){return t[i*r*4+4*e+o]}function r(t,e,i,r,n,o,a){t[i*r*4+4*e+o]=a}this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,n,o,a){var s=t.getImageData(0,0,o,a);for(n=0;n<a;n++)for(e=0;e<o;e++){var l=(i(s.data,e,n,o,a,0)+i(s.data,e,n,o,a,1)+i(s.data,e,n,o,a,2))/3;r(s.data,e,n,o,a,0,l),r(s.data,e,n,o,a,1,l),r(s.data,e,n,o,a,2,l)}t.clearRect(0,0,o,a),t.putImageData(s,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,i,r,n,o){void 0!==stackBlurCanvasRGBA?(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,i,r,n,o,this.blurRadius),document.body.removeChild(e.canvas)):"undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work")}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(t){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(t){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){"undefined"!=typeof console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var i=e.nodeName.replace(/^[^:]+:/,"");i=i.replace(/\-/g,"");var r=null;return(r=void 0!==t.Element[i]?new t.Element[i](e):new t.Element.MISSING(e)).type=e.nodeName,r},t.load=function(e,i){t.loadXml(e,t.ajax(i))},t.loadXml=function(e,i){t.loadXmlDoc(e,t.parseXml(i))},t.loadXmlDoc=function(e,i){t.init(e);var r=function(t){for(var i=e.canvas;i;)t.x-=i.offsetLeft,t.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var i=r(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(i.x,i.y)},e.canvas.onmousemove=function(e){var i=r(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(i.x,i.y)});var n=t.CreateElement(i.documentElement);n.root=!0;var o=!0,a=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(n.style("width").hasValue()&&(e.canvas.width=n.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),n.style("height").hasValue()&&(e.canvas.height=n.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var r=e.canvas.clientWidth||e.canvas.width,a=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&n.style("width").hasValue()&&n.style("height").hasValue()&&(r=n.style("width").toPixels("x"),a=n.style("height").toPixels("y")),t.ViewPort.SetCurrent(r,a),null!=t.opts.offsetX&&(n.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(n.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var s=1,l=1,c=t.ToNumberArray(n.attribute("viewBox").value);n.attribute("width").hasValue()?s=n.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(c[2])||(s=c[2]/t.opts.scaleWidth),n.attribute("height").hasValue()?l=n.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(c[3])||(l=c[3]/t.opts.scaleHeight),n.attribute("width",!0).value=t.opts.scaleWidth,n.attribute("height",!0).value=t.opts.scaleHeight,n.attribute("viewBox",!0).value="0 0 "+r*s+" "+a*l,n.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,r,a),n.render(e),o&&(o=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(i))},s=!0;t.ImagesLoaded()&&(s=!1,a()),t.intervalID=setInterval((function(){var e=!1;if(s&&t.ImagesLoaded()&&(s=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var i=0;i<t.Animations.length;i++)e|=t.Animations[i].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(a(),t.Mouse.runEvents())}),1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var r=this.events[i];e.isPointInPath&&e.isPointInPath(r.x,r.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var r=this.events[i];e.isPointInBox(r.x,r.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var i=this.events[e],r=this.eventElements[e];r;)i.run(r),r=r.parent;this.events=[],this.eventElements=[]}},t}();1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=n),n.opts=r;var o=t.getContext("2d");void 0!==e.documentElement?n.loadXmlDoc(o,e):"<"==e.substr(0,1)?n.loadXml(o,e):n.load(o,e)}else for(var a=document.getElementsByTagName("svg"),s=0;s<a.length;s++){var l=a[s],c=document.createElement("canvas");c.width=l.clientWidth,c.height=l.clientHeight,l.parentNode.insertBefore(c,l),l.parentNode.removeChild(l);var d=document.createElement("div");d.appendChild(l),canvg(c,d.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,r,n){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:r,scaleHeight:n})}),function(t){var e=["setTimeout","setInterval","XMLHttpRequest","navigator","location","clearTimeout","clearInterval","applicationCache","importScripts","Worker","console","btoa","atob","unescape","encodeURIComponent","crypto","Uint8Array"];function i(i){var r={},n={};for(p in e)n[e[p]]=!0;for(p in t)n[p]||(r[p]="[[ Can't use window context in web worker! ]]");for(p in this)r[p]=this[p];r.self=this,r.doEvents=function(t){setTimeout((function(){t&&t()}),0)},new Function("with(this) { (function(){"+i+"})(); }").call(r)}t.FakeWorker=function(t){var e=this,r=!1,n={};this.addEventListener=function(t,e){n[t]||(n[t]=[]),n[t].push(e)},this.addEventListener("message",(function(t){void 0!==e.onmessage&&e.onmessage(t)}));var o=new function(){var t={};this.addEventListener=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.addEventListener("message",(function(t){void 0!==e.onmessage&&e.onmessage(t)})),this.postMessage=function(t){a(n,"message",t)},this.__processPostMessage=function(e){a(t,"message",e)},this.close=function(){}};function a(t,e,i){var r={data:i};if(t[e])for(var n=0;n<t[e].length;n++)t[e][n](r)}this.postMessage=function(t){var e;e=function(){o.__processPostMessage(t)},function t(){r?e():setTimeout(t,50)}()},this.terminate=function(){};var s=t;i.call(o,s),r=!0}}(window);var JSEncryptExports={};!function(t){var e;function i(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new i(null)}"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,i,r,n,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],c=this[t++]>>15,d=s*l+c*a;n=((l=a*l+((32767&d)<<15)+i[r]+(1073741823&n))>>>30)+(d>>>15)+s*c+(n>>>30),i[r++]=1073741823&l}return n},e=30):"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,i,r,n,o){for(;--o>=0;){var a=e*this[t++]+i[r]+n;n=Math.floor(a/67108864),i[r++]=67108863&a}return n},e=26):(i.prototype.am=function(t,e,i,r,n,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],c=this[t++]>>14,d=s*l+c*a;n=((l=a*l+((16383&d)<<14)+i[r]+n)>>28)+(d>>14)+s*c,i[r++]=268435455&l}return n},e=28),i.prototype.DB=e,i.prototype.DM=(1<<e)-1,i.prototype.DV=1<<e;i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-e,i.prototype.F2=2*e-52;var n,o,a=new Array;for(n="0".charCodeAt(0),o=0;o<=9;++o)a[n++]=o;for(n="a".charCodeAt(0),o=10;o<36;++o)a[n++]=o;for(n="A".charCodeAt(0),o=10;o<36;++o)a[n++]=o;function s(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function l(t,e){var i=a[t.charCodeAt(e)];return null==i?-1:i}function c(t){var e=r();return e.fromInt(t),e}function d(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function h(t){this.m=t}function u(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function f(t,e){return t&e}function p(t,e){return t|e}function g(t,e){return t^e}function m(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function x(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function b(){}function y(t){return t}function k(t){this.r2=r(),this.q3=r(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}h.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},h.prototype.revert=function(t){return t},h.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},h.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},h.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},u.prototype.convert=function(t){var e=r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},u.prototype.revert=function(t){var e=r();return t.copyTo(e),this.reduce(e),e},u.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},u.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},u.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},i.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,o=!1,a=0;--n>=0;){var s=8==r?255&t[n]:l(t,n);s<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var i,r=t%this.DB,n=this.DB-r,o=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+a+1]=this[i]>>n|s,s=(this[i]&o)<<r;for(i=a-1;i>=0;--i)e[i]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,o=(1<<r)-1;e[0]=this[i]>>r;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&o)<<n,e[a-i]=this[a]>>r;r>0&&(e[this.t-i-1]|=(this.s&o)<<n),e.t=this.t-i,e.clamp()}},i.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},i.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e[o]=0;for(o=0;o<n.t;++o)e[o+r.t]=r.am(0,n[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,n){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=r());var s=r(),l=this.s,c=t.s,h=this.DB-d(o[o.t-1]);h>0?(o.lShiftTo(h,s),a.lShiftTo(h,n)):(o.copyTo(s),a.copyTo(n));var u=s.t,f=s[u-1];if(0!=f){var p=f*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),g=this.FV/p,m=(1<<this.F1)/p,v=1<<this.F2,w=n.t,x=w-u,b=null==e?r():e;for(s.dlShiftTo(x,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),i.ONE.dlShiftTo(u,b),b.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--x>=0;){var y=n[--w]==f?this.DM:Math.floor(n[w]*g+(n[w-1]+v)*m);if((n[w]+=s.am(0,y,n,x,0,u))<y)for(s.dlShiftTo(x,b),n.subTo(b,n);n[w]<--y;)n.subTo(b,n)}null!=e&&(n.drShiftTo(u,e),l!=c&&i.ZERO.subTo(e,e)),n.t=u,n.clamp(),h>0&&n.rShiftTo(h,n),l<0&&i.ZERO.subTo(n,n)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var n=r(),o=r(),a=e.convert(this),s=d(t)-1;for(a.copyTo(n);--s>=0;)if(e.sqrTo(n,o),(t&1<<s)>0)e.mulTo(o,a,n);else{var l=n;n=o,o=l}return e.revert(n)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(i=this[a]>>l)>0&&(n=!0,o=s(i));a>=0;)l<e?(i=(this[a]&(1<<l)-1)<<e-l,i|=this[--a]>>(l+=this.DB-e)):(i=this[a]>>(l-=e)&r,l<=0&&(l+=this.DB,--a)),i>0&&(n=!0),n&&(o+=s(i));return n?o:"0"},i.prototype.negate=function(){var t=r();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new h(e):new u(e),this.exp(t,i)},i.ZERO=c(0),i.ONE=c(1),b.prototype.convert=y,b.prototype.revert=y,b.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},b.prototype.sqrTo=function(t,e){t.squareTo(e)},k.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e},k.prototype.revert=function(t){return t},k.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},k.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},k.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var _=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/_[_.length-1];function T(){this.i=0,this.j=0,this.S=new Array}i.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},i.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=c(i),o=r(),a=r(),s="";for(this.divRemTo(n,o,a);o.signum()>0;)s=(i+a.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,a);return a.intValue().toString(t)+s},i.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,a=0,s=0,c=0;c<t.length;++c){var d=l(t,c);d<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(s=e*s+d,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(t,e,i){var r,n,o=Math.min(t.t,this.t);for(r=0;r<o;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=o;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=o;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},i.prototype.changeBit=function(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},i.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},i.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},i.prototype.multiplyLowerTo=function(t,e,i){var r,n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()},i.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},i.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},i.prototype.millerRabin=function(t){var e=this.subtract(i.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var o=e.shiftRight(n);(t=t+1>>1)>_.length&&(t=_.length);for(var a=r(),s=0;s<t;++s){a.fromInt(_[Math.floor(Math.random()*_.length)]);var l=a.modPow(o,this);if(0!=l.compareTo(i.ONE)&&0!=l.compareTo(e)){for(var c=1;c++<n&&0!=l.compareTo(e);)if(0==(l=l.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=l.compareTo(e))return!1}}return!0},i.prototype.clone=function(){var t=r();return this.copyTo(t),t},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},i.prototype.equals=function(t){return 0==this.compareTo(t)},i.prototype.min=function(t){return this.compareTo(t)<0?this:t},i.prototype.max=function(t){return this.compareTo(t)>0?this:t},i.prototype.and=function(t){var e=r();return this.bitwiseTo(t,f,e),e},i.prototype.or=function(t){var e=r();return this.bitwiseTo(t,p,e),e},i.prototype.xor=function(t){var e=r();return this.bitwiseTo(t,g,e),e},i.prototype.andNot=function(t){var e=r();return this.bitwiseTo(t,m,e),e},i.prototype.not=function(){for(var t=r(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},i.prototype.shiftLeft=function(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},i.prototype.shiftRight=function(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},i.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=x(this[i]^e);return t},i.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},i.prototype.setBit=function(t){return this.changeBit(t,p)},i.prototype.clearBit=function(t){return this.changeBit(t,m)},i.prototype.flipBit=function(t){return this.changeBit(t,g)},i.prototype.add=function(t){var e=r();return this.addTo(t,e),e},i.prototype.subtract=function(t){var e=r();return this.subTo(t,e),e},i.prototype.multiply=function(t){var e=r();return this.multiplyTo(t,e),e},i.prototype.divide=function(t){var e=r();return this.divRemTo(t,e,null),e},i.prototype.remainder=function(t){var e=r();return this.divRemTo(t,null,e),e},i.prototype.divideAndRemainder=function(t){var e=r(),i=r();return this.divRemTo(t,e,i),new Array(e,i)},i.prototype.modPow=function(t,e){var i,n,o=t.bitLength(),a=c(1);if(o<=0)return a;i=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new h(e):e.isEven()?new k(e):new u(e);var s=new Array,l=3,f=i-1,p=(1<<i)-1;if(s[1]=n.convert(this),i>1){var g=r();for(n.sqrTo(s[1],g);l<=p;)s[l]=r(),n.mulTo(g,s[l-2],s[l]),l+=2}var m,v,w=t.t-1,x=!0,b=r();for(o=d(t[w])-1;w>=0;){for(o>=f?m=t[w]>>o-f&p:(m=(t[w]&(1<<o+1)-1)<<f-o,w>0&&(m|=t[w-1]>>this.DB+o-f)),l=i;0==(1&m);)m>>=1,--l;if((o-=l)<0&&(o+=this.DB,--w),x)s[m].copyTo(a),x=!1;else{for(;l>1;)n.sqrTo(a,b),n.sqrTo(b,a),l-=2;l>0?n.sqrTo(a,b):(v=a,a=b,b=v),n.mulTo(b,s[m],a)}for(;w>=0&&0==(t[w]&1<<o);)n.sqrTo(a,b),v=a,a=b,b=v,--o<0&&(o=this.DB-1,--w)}return n.revert(a)},i.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var r=t.clone(),n=this.clone(),o=c(1),a=c(0),s=c(0),l=c(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(s,o),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(o,s),l.subTo(a,l))}return 0!=n.compareTo(i.ONE)?i.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l},i.prototype.pow=function(t){return this.exp(t,new b)},i.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(n<o&&(o=n),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i},i.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=_[_.length-1]){for(e=0;e<_.length;++e)if(i[0]==_[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<_.length;){for(var r=_[e],n=e+1;n<_.length&&r<C;)r*=_[n++];for(r=i.modInt(r);e<n;)if(r%_[e++]==0)return!1}return i.millerRabin(t)},i.prototype.square=function(){var t=r();return this.squareTo(t),t},T.prototype.init=function(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0},T.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var S,E,M;if(null==E){var A;if(E=new Array,M=0,window.crypto&&window.crypto.getRandomValues){var P=new Uint32Array(256);for(window.crypto.getRandomValues(P),A=0;A<P.length;++A)E[M++]=255&P[A]}var I=function(t){if(this.count=this.count||0,this.count>=256||M>=256)window.removeEventListener?window.removeEventListener("mousemove",I):window.detachEvent&&window.detachEvent("onmousemove",I);else{this.count+=1;var e=t.x+t.y;E[M++]=255&e}};window.addEventListener?window.addEventListener("mousemove",I):window.attachEvent&&window.attachEvent("onmousemove",I)}function D(){if(null==S){for(S=new T;M<256;){var t=Math.floor(65536*Math.random());E[M++]=255&t}for(S.init(E),M=0;M<E.length;++M)E[M]=0;M=0}return S.next()}function F(){}function O(t,e){return new i(t,e)}function R(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}F.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=D()},R.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},R.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=O(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},R.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var r=new Array,n=t.length-1;n>=0&&e>0;){var o=t.charCodeAt(n--);o<128?r[--e]=o:o>127&&o<2048?(r[--e]=63&o|128,r[--e]=o>>6|192):(r[--e]=63&o|128,r[--e]=o>>6&63|128,r[--e]=o>>12|224)}r[--e]=0;for(var a=new F,s=new Array;e>2;){for(s[0]=0;0==s[0];)a.nextBytes(s);r[--e]=s[0]}return r[--e]=2,r[--e]=0,new i(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},R.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},R.prototype.setPrivate=function(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=O(t,16),this.e=parseInt(e,16),this.d=O(i,16)):console.error("Invalid RSA private key")},R.prototype.setPrivateEx=function(t,e,i,r,n,o,a,s){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=O(t,16),this.e=parseInt(e,16),this.d=O(i,16),this.p=O(r,16),this.q=O(n,16),this.dmp1=O(o,16),this.dmq1=O(a,16),this.coeff=O(s,16)):console.error("Invalid RSA private key")},R.prototype.generate=function(t,e){var r=new F,n=t>>1;this.e=parseInt(e,16);for(var o=new i(e,16);;){for(;this.p=new i(t-n,1,r),0!=this.p.subtract(i.ONE).gcd(o).compareTo(i.ONE)||!this.p.isProbablePrime(10););for(;this.q=new i(n,1,r),0!=this.q.subtract(i.ONE).gcd(o).compareTo(i.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var s=this.p.subtract(i.ONE),l=this.q.subtract(i.ONE),c=s.multiply(l);if(0==c.gcd(o).compareTo(i.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(c),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}},R.prototype.decrypt=function(t){var e=O(t,16),i=this.doPrivate(e);return null==i?null:function(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var n="";++r<i.length;){var o=255&i[r];o<128?n+=String.fromCharCode(o):o>191&&o<224?(n+=String.fromCharCode((31&o)<<6|63&i[r+1]),++r):(n+=String.fromCharCode((15&o)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return n}(i,this.n.bitLength()+7>>3)},function(){R.prototype.generateAsync=function(t,e,n){var o=new F,a=t>>1;this.e=parseInt(e,16);var s=new i(e,16),l=this,c=function(){var e=function(){if(l.p.compareTo(l.q)<=0){var t=l.p;l.p=l.q,l.q=t}var e=l.p.subtract(i.ONE),r=l.q.subtract(i.ONE),o=e.multiply(r);0==o.gcd(s).compareTo(i.ONE)?(l.n=l.p.multiply(l.q),l.d=s.modInverse(o),l.dmp1=l.d.mod(e),l.dmq1=l.d.mod(r),l.coeff=l.q.modInverse(l.p),setTimeout((function(){n()}),0)):setTimeout(c,0)},d=function(){l.q=r(),l.q.fromNumberAsync(a,1,o,(function(){l.q.subtract(i.ONE).gcda(s,(function(t){0==t.compareTo(i.ONE)&&l.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(d,0)}))}))},h=function(){l.p=r(),l.p.fromNumberAsync(t-a,1,o,(function(){l.p.subtract(i.ONE).gcda(s,(function(t){0==t.compareTo(i.ONE)&&l.p.isProbablePrime(10)?setTimeout(d,0):setTimeout(h,0)}))}))};setTimeout(h,0)};setTimeout(c,0)};i.prototype.gcda=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var n=i;i=r,r=n}var o=i.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)e(i);else{o<a&&(a=o),a>0&&(i.rShiftTo(a,i),r.rShiftTo(a,r));var s=function(){(o=i.getLowestSetBit())>0&&i.rShiftTo(o,i),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(s,0):(a>0&&r.lShiftTo(a,r),setTimeout((function(){e(r)}),0))};setTimeout(s,10)}};i.prototype.fromNumberAsync=function(t,e,r,n){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),p,this),this.isEven()&&this.dAddOffset(1,0);var o=this,a=function(){o.dAddOffset(2,0),o.bitLength()>t&&o.subTo(i.ONE.shiftLeft(t-1),o),o.isProbablePrime(e)?setTimeout((function(){n()}),0):setTimeout(a,0)};setTimeout(a,0)}else{var s=new Array,l=7&t;s.length=1+(t>>3),e.nextBytes(s),l>0?s[0]&=(1<<l)-1:s[0]=0,this.fromString(s,256)}}}();var B,$,N,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function q(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=L.charAt(i>>6)+L.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=L.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=L.charAt(i>>2)+L.charAt((3&i)<<4));(3&r.length)>0;)r+="=";return r}function j(t){var e,i,r="",n=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)v=L.indexOf(t.charAt(e)),v<0||(0==n?(r+=s(v>>2),i=3&v,n=1):1==n?(r+=s(i<<2|v>>4),i=15&v,n=2):2==n?(r+=s(i),r+=s(v>>2),i=3&v,n=3):(r+=s(i<<2|v>>4),r+=s(15&v),n=0));return 1==n&&(r+=s(i<<2)),r}(N={}).decode=function(t){var e;if($===B){var i="0123456789ABCDEF",r=" \f\n\r\t \u2028\u2029";for($=[],e=0;e<16;++e)$[i.charAt(e)]=e;for(i=i.toLowerCase(),e=10;e<16;++e)$[i.charAt(e)]=e;for(e=0;e<r.length;++e)$[r.charAt(e)]=-1}var n=[],o=0,a=0;for(e=0;e<t.length;++e){var s=t.charAt(e);if("="==s)break;if(-1!=(s=$[s])){if(s===B)throw"Illegal character at offset "+e;o|=s,++a>=2?(n[n.length]=o,o=0,a=0):o<<=4}}if(a)throw"Hex encoding incomplete: 4 bits missing";return n},window.Hex=N,function(t){var e,i={};i.decode=function(i){var r;if(e===t){var n="= \f\n\r\t \u2028\u2029";for(e=[],r=0;r<64;++r)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r)]=r;for(r=0;r<n.length;++r)e[n.charAt(r)]=-1}var o=[],a=0,s=0;for(r=0;r<i.length;++r){var l=i.charAt(r);if("="==l)break;if(-1!=(l=e[l])){if(l===t)throw"Illegal character at offset "+r;a|=l,++s>=4?(o[o.length]=a>>16,o[o.length]=a>>8&255,o[o.length]=255&a,a=0,s=0):a<<=6}}switch(s){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:o[o.length]=a>>10;break;case 3:o[o.length]=a>>16,o[o.length]=a>>8&255}return o},i.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,i.unarmor=function(t){var e=i.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw"RegExp out of sync";t=e[2]}return i.decode(t)},window.Base64=i}(),function(t){var e=100,i=function(t,e){var i=document.createElement(t);return i.className=e,i},r=function(t){return document.createTextNode(t)};function n(t,e){t instanceof n?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=e)}function o(t,e,i,r,n){this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=n}n.prototype.get=function(e){if(e===t&&(e=this.pos++),e>=this.enc.length)throw"Requesting byte offset "+e+" on a stream of length "+this.enc.length;return this.enc[e]},n.prototype.hexDigits="0123456789ABCDEF",n.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},n.prototype.hexDump=function(t,e,i){for(var r="",n=t;n<e;++n)if(r+=this.hexByte(this.get(n)),!0!==i)switch(15&n){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},n.prototype.parseStringISO=function(t,e){for(var i="",r=t;r<e;++r)i+=String.fromCharCode(this.get(r));return i},n.prototype.parseStringUTF=function(t,e){for(var i="",r=t;r<e;){var n=this.get(r++);i+=n<128?String.fromCharCode(n):n>191&&n<224?String.fromCharCode((31&n)<<6|63&this.get(r++)):String.fromCharCode((15&n)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},n.prototype.parseStringBMP=function(t,e){for(var i="",r=t;r<e;r+=2){var n=this.get(r),o=this.get(r+1);i+=String.fromCharCode((n<<8)+o)}return i},n.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,n.prototype.parseTime=function(t,e){var i=this.parseStringISO(t,e),r=this.reTime.exec(i);return r?(i=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(i+=":"+r[5],r[6]&&(i+=":"+r[6],r[7]&&(i+="."+r[7]))),r[8]&&(i+=" UTC","Z"!=r[8]&&(i+=r[8],r[9]&&(i+=":"+r[9]))),i):"Unrecognized time: "+i},n.prototype.parseInteger=function(t,e){var i=e-t;if(i>4){i<<=3;var r=this.get(t);if(0===r)i-=8;else for(;r<128;)r<<=1,--i;return"("+i+" bit)"}for(var n=0,o=t;o<e;++o)n=n<<8|this.get(o);return n},n.prototype.parseBitString=function(t,e){var i=this.get(t),r=(e-t-1<<3)-i,n="("+r+" bit)";if(r<=20){var o=i;n+=" ";for(var a=e-1;a>t;--a){for(var s=this.get(a),l=o;l<8;++l)n+=s>>l&1?"1":"0";o=0}}return n},n.prototype.parseOctetString=function(t,i){var r=i-t,n="("+r+" byte) ";r>e&&(i=t+e);for(var o=t;o<i;++o)n+=this.hexByte(this.get(o));return r>e&&(n+="…"),n},n.prototype.parseOID=function(t,e){for(var i="",r=0,n=0,o=t;o<e;++o){var a=this.get(o);if(r=r<<7|127&a,n+=7,!(128&a)){if(""===i){var s=r<80?r<40?0:1:2;i=s+"."+(r-40*s)}else i+="."+(n>=31?"bigint":r);r=n=0}}return i},o.prototype.typeName=function(){if(this.tag===t)return"unknown";var e=this.tag>>6,i=(this.tag,31&this.tag);switch(e){case 0:switch(i){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+i.toString(16)}case 1:return"Application_"+i.toString(16);case 2:return"["+i+"]";case 3:return"Private_"+i.toString(16)}},o.prototype.reSeemsASCII=/^[ -~]+$/,o.prototype.content=function(){if(this.tag===t)return null;var i=this.tag>>6,r=31&this.tag,n=this.posContent(),o=Math.abs(this.length);if(0!==i){if(null!==this.sub)return"("+this.sub.length+" elem)";var a=this.stream.parseStringISO(n,n+Math.min(o,e));return this.reSeemsASCII.test(a)?a.substring(0,200)+(a.length>200?"…":""):this.stream.parseOctetString(n,n+o)}switch(r){case 1:return 0===this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+o);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+o);case 6:return this.stream.parseOID(n,n+o);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+o);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+o);case 30:return this.stream.parseStringBMP(n,n+o);case 23:case 24:return this.stream.parseTime(n,n+o)}return null},o.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},o.prototype.print=function(e){if(e===t&&(e=""),document.writeln(e+this),null!==this.sub){e+="  ";for(var i=0,r=this.sub.length;i<r;++i)this.sub[i].print(e)}},o.prototype.toPrettyString=function(e){e===t&&(e="");var i=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(i+="+"),i+=this.length,32&this.tag?i+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(i+=" (encapsulates)"),i+="\n",null!==this.sub){e+="  ";for(var r=0,n=this.sub.length;r<n;++r)i+=this.sub[r].toPrettyString(e)}return i},o.prototype.toDOM=function(){var t=i("div","node");t.asn1=this;var e=i("div","head"),n=this.typeName().replace(/_/g," ");e.innerHTML=n;var o=this.content();if(null!==o){o=String(o).replace(/</g,"&lt;");var a=i("span","preview");a.appendChild(r(o)),e.appendChild(a)}t.appendChild(e),this.node=t,this.head=e;var s=i("div","value");if(n="Offset: "+this.stream.pos+"<br/>",n+="Length: "+this.header+"+",this.length>=0?n+=this.length:n+=-this.length+" (undefined)",32&this.tag?n+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(n+="<br/>(encapsulates)"),null!==o&&(n+="<br/>Value:<br/><b>"+o+"</b>","object"==typeof oids&&6==this.tag)){var l=oids[o];l&&(l.d&&(n+="<br/>"+l.d),l.c&&(n+="<br/>"+l.c),l.w&&(n+="<br/>(warning!)"))}s.innerHTML=n,t.appendChild(s);var c=i("div","sub");if(null!==this.sub)for(var d=0,h=this.sub.length;d<h;++d)c.appendChild(this.sub[d].toDOM());return t.appendChild(c),e.onclick=function(){t.className="node collapsed"==t.className?"node":"node collapsed"},t},o.prototype.posStart=function(){return this.stream.pos},o.prototype.posContent=function(){return this.stream.pos+this.header},o.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},o.prototype.fakeHover=function(t){this.node.className+=" hover",t&&(this.head.className+=" hover")},o.prototype.fakeOut=function(t){var e=/ ?hover/;this.node.className=this.node.className.replace(e,""),t&&(this.head.className=this.head.className.replace(e,""))},o.prototype.toHexDOM_sub=function(t,e,n,o,a){if(!(o>=a)){var s=i("span",e);s.appendChild(r(n.hexDump(o,a))),t.appendChild(s)}},o.prototype.toHexDOM=function(e){var n=i("span","hex");if(e===t&&(e=n),this.head.hexNode=n,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},n.asn1=this,n.onmouseover=function(){var t=!e.selected;t&&(e.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(t)},n.onmouseout=function(){var t=e.selected==this.asn1;this.asn1.fakeOut(t),t&&(e.selected=null,this.className="hex")},this.toHexDOM_sub(n,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(n,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)n.appendChild(r(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var o=this.sub[0],a=this.sub[this.sub.length-1];this.toHexDOM_sub(n,"intro",this.stream,this.posContent(),o.posStart());for(var s=0,l=this.sub.length;s<l;++s)n.appendChild(this.sub[s].toHexDOM(e));this.toHexDOM_sub(n,"outro",this.stream,a.posEnd(),this.posEnd())}return n},o.prototype.toHexString=function(t){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},o.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===i)return-1;e=0;for(var r=0;r<i;++r)e=e<<8|t.get();return e},o.hasContent=function(t,e,i){if(32&t)return!0;if(t<3||t>4)return!1;var r=new n(i);if(3==t&&r.get(),r.get()>>6&1)return!1;try{var a=o.decodeLength(r);return r.pos-i.pos+a==e}catch(t){return!1}},o.decode=function(t){t instanceof n||(t=new n(t,0));var e=new n(t),i=t.get(),r=o.decodeLength(t),a=t.pos-e.pos,s=null;if(o.hasContent(i,r,t)){var l=t.pos;if(3==i&&t.get(),s=[],r>=0){for(var c=l+r;t.pos<c;)s[s.length]=o.decode(t);if(t.pos!=c)throw"Content size is not correct for container starting at offset "+l}else try{for(;;){var d=o.decode(t);if(0===d.tag)break;s[s.length]=d}r=l-t.pos}catch(t){throw"Exception while decoding undefined length content: "+t}}else t.pos+=r;return new o(e,a,r,i,s)},o.test=function(){for(var t=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],e=0,i=t.length;e<i;++e){var r=new n(t[e].value,0),a=o.decodeLength(r);a!=t[e].expected&&document.write("In test["+e+"] expected "+t[e].expected+" got "+a+"\n")}},window.ASN1=o}(),ASN1.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},R.prototype.parseKey=function(t){try{var e=0,i=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):Base64.unarmor(t),n=ASN1.decode(r);if(9===n.sub.length){e=n.sub[1].getHexStringValue(),this.n=O(e,16),i=n.sub[2].getHexStringValue(),this.e=parseInt(i,16);var o=n.sub[3].getHexStringValue();this.d=O(o,16);var a=n.sub[4].getHexStringValue();this.p=O(a,16);var s=n.sub[5].getHexStringValue();this.q=O(s,16);var l=n.sub[6].getHexStringValue();this.dmp1=O(l,16);var c=n.sub[7].getHexStringValue();this.dmq1=O(c,16);var d=n.sub[8].getHexStringValue();this.coeff=O(d,16)}else{if(2!==n.sub.length)return!1;var h=n.sub[1].sub[0];e=h.sub[0].getHexStringValue(),this.n=O(e,16),i=h.sub[1].getHexStringValue(),this.e=parseInt(i,16)}return!0}catch(t){return!1}},R.prototype.getPrivateBaseKey=function(){var t={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return new KJUR.asn1.DERSequence(t).getEncodedHex()},R.prototype.getPrivateBaseKeyB64=function(){return q(this.getPrivateBaseKey())},R.prototype.getPublicBaseKey=function(){var t={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},e=new KJUR.asn1.DERSequence(t);return t={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]},t={hex:"00"+new KJUR.asn1.DERSequence(t).getEncodedHex()},t={array:[e,new KJUR.asn1.DERBitString(t)]},new KJUR.asn1.DERSequence(t).getEncodedHex()},R.prototype.getPublicBaseKeyB64=function(){return q(this.getPublicBaseKey())},R.prototype.wordwrap=function(t,e){if(!t)return t;var i="(.{1,"+(e=e||64)+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},R.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},R.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},R.prototype.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},R.prototype.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},R.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)};var z=function(t){R.call(this),t&&("string"==typeof t?this.parseKey(t):(this.hasPrivateKeyProperty(t)||this.hasPublicKeyProperty(t))&&this.parsePropertiesFrom(t))};(z.prototype=new R).constructor=z;var H=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};H.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new z(t)},H.prototype.setPrivateKey=function(t){this.setKey(t)},H.prototype.setPublicKey=function(t){this.setKey(t)},H.prototype.decrypt=function(t){try{return this.getKey().decrypt(j(t))}catch(t){return!1}},H.prototype.encrypt=function(t){try{return q(this.getKey().encrypt(t))}catch(t){return!1}},H.prototype.getKey=function(t){if(!this.key){if(this.key=new z,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},H.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},H.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},H.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},H.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.JSEncrypt=H}(JSEncryptExports);var JSEncrypt=JSEncryptExports.JSEncrypt;